{"version":3,"sources":["components/Card.jsx","services/EmojiService.js","components/UserAvatar.jsx","components/UsersTable.jsx","components/StatusTable.jsx","components/PollsTable.jsx","components/ErrorMessage.jsx","App.js","reportWebVitals.js","index.js"],"names":["Card","props","number","name","children","iconClass","cardClass","className","emojiConfigs","away","icon","intlId","defaultMessage","neutral","confused","sad","happy","applause","thumbsUp","thumbsDown","raiseHand","getUserEmojisSummary","user","skipNames","start","end","userEmojis","emojis","forEach","emoji","split","indexOf","sentOn","UserAvatar","isModerator","xmlns","fill","viewBox","stroke","isDialIn","strokeLinecap","strokeLinejoin","strokeWidth","d","UsersTable","state","activityscoreOrder","this","setState","allUsers","totalOfActivityTime","totalOfPolls","tab","getSumOfTime","eventsArr","reduce","prevVal","elem","stoppedOn","startedOn","Date","getTime","usersEmojisSummary","tsToHHmmss","ts","toISOString","substr","Object","values","userKey","usersActivityScore","allUsersArr","filter","currUser","userPoints","usersTalkTime","map","talk","totalTime","maxTalkTime","Math","max","usersTotalOfMessages","totalOfMessages","maxMessages","usersRaiseHand","length","maxRaiseHand","userRaiseHand","usersEmojis","maxEmojis","answers","getActivityScore","id","onClick","toggleActivityScoreOrder","sort","a","b","toLowerCase","intIds","intId","index","value","registeredOn","month","day","hour","minute","second","leftOn","prev","percentage","totalUserOnlineTime","ceil","getOnlinePercentage","title","toString","style","width","role","webcams","keys","height","x","minimumFractionDigits","maximumFractionDigits","colSpan","React","Component","injectIntl","StatusTable","spanMinutes","intl","usersRegisteredTimes","flat","usersLeftTimes","firstRegisteredOnTime","min","lastLeftOnTime","periods","currPeriod","push","period","formatDate","userEmojisInPeriod","PollsTable","polls","getUserAnswer","poll","pollId","createdOn","question","anonymous","formatMessage","anonymousAnswers","answer","ErrorMessage","message","fillRule","clipRule","App","loading","invalidSessionCount","activitiesJson","meetingId","learningDashboardAccessToken","ldAccessTokenCopied","sessionToken","setDashboardParams","fetchActivitiesJson","callback","urlSearchParams","URLSearchParams","window","location","search","params","fromEntries","entries","meeting","report","cookieName","decodeURIComponent","document","cookie","val","substring","cookieExpiresDate","setTime","toGMTString","fetch","then","response","json","catch","url","URL","returncode","jsonData","JSON","parse","data","setTimeout","totalOfActivity","usersTimes","users","minTime","getErrorMessage","year","endedOn","u","formatNumber","meetingAveragePoints","nrOfUsers","totalTalkTime","totalMessages","totalRaiseHand","totalEmojis","getAverageActivityScore","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","RTL_LANGUAGES","getLanguage","language","navigator","lang","Dashboard","intlMessages","intlLocale","setMessages","setRtl","fetchMessages","Promise","resolve","reject","replace","ok","all","mergedMessages","assign","includes","body","parentNode","setAttribute","defaultLocale","locale","messages","rootElement","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.fe1be782.chunk.js","sourcesContent":["import React from 'react';\n\nfunction Card(props) {\n  const {\n    number, name, children, iconClass, cardClass,\n  } = props;\n\n  return (\n    <div className={`flex items-center justify-between p-4 bg-white rounded-md shadow border-l-8 ${cardClass}`}>\n      <div className=\"w-70\">\n        <p className=\"text-lg font-semibold text-gray-700\">\n          { number }\n        </p>\n        <p className=\"mb-2 text-sm font-medium text-gray-600\">\n          { name }\n        </p>\n      </div>\n      <div className={`p-3 mr-4 text-orange-500 rounded-full ${iconClass}`}>\n        { children }\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","export const emojiConfigs = {\n  away: {\n    icon: 'icon-bbb-time',\n    intlId: 'app.actionsBar.emojiMenu.awayLabel',\n    defaultMessage: 'Away',\n  },\n  neutral: {\n    icon: 'icon-bbb-undecided',\n    intlId: 'app.actionsBar.emojiMenu.neutralLabel',\n    defaultMessage: 'Undecided',\n  },\n  confused: {\n    icon: 'icon-bbb-confused',\n    intlId: 'app.actionsBar.emojiMenu.confusedLabel',\n    defaultMessage: 'Confused',\n  },\n  sad: {\n    icon: 'icon-bbb-sad',\n    intlId: 'app.actionsBar.emojiMenu.sadLabel',\n    defaultMessage: 'Sad',\n  },\n  happy: {\n    icon: 'icon-bbb-happy',\n    intlId: 'app.actionsBar.emojiMenu.happyLabel',\n    defaultMessage: 'Happy',\n  },\n  applause: {\n    icon: 'icon-bbb-applause',\n    intlId: 'app.actionsBar.emojiMenu.applauseLabel',\n    defaultMessage: 'Applaud',\n  },\n  thumbsUp: {\n    icon: 'icon-bbb-thumbs_up',\n    intlId: 'app.actionsBar.emojiMenu.thumbsUpLabel',\n    defaultMessage: 'Thumbs up',\n  },\n  thumbsDown: {\n    icon: 'icon-bbb-thumbs_down',\n    intlId: 'app.actionsBar.emojiMenu.thumbsDownLabel',\n    defaultMessage: 'Thumbs down',\n  },\n  raiseHand: {\n    icon: 'icon-bbb-hand',\n    intlId: 'app.actionsBar.emojiMenu.raiseHandLabel',\n    defaultMessage: 'Raise hand',\n  },\n};\n\nexport function getUserEmojisSummary(user, skipNames = null, start = null, end = null) {\n  const userEmojis = {};\n  user.emojis.forEach((emoji) => {\n    if (typeof emojiConfigs[emoji.name] === 'undefined') return;\n    if (skipNames != null && skipNames.split(',').indexOf(emoji.name) > -1) return;\n    if (start != null && emoji.sentOn < start) return;\n    if (end != null && emoji.sentOn > end) return;\n    if (typeof userEmojis[emoji.name] === 'undefined') {\n      userEmojis[emoji.name] = 0;\n    }\n    userEmojis[emoji.name] += 1;\n  });\n  return userEmojis;\n}\n","import React from 'react';\n\nfunction UserAvatar(props) {\n  const {\n    user,\n  } = props;\n\n  return (\n    <div className={`border-2 border-gray-800 items-center ${user.isModerator ? 'rounded-md' : 'rounded-full'}`}>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        className=\"h-full w-full p-1\"\n        fill=\"none\"\n        viewBox=\"0 0 24 24\"\n        stroke=\"currentColor\"\n      >\n        {user.isDialIn\n          ? (\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"\n            />\n          )\n          : (\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n            />\n          )}\n      </svg>\n    </div>\n  );\n}\n\nexport default UserAvatar;\n","import React from 'react';\nimport {\n  FormattedMessage, FormattedDate, FormattedNumber, injectIntl,\n} from 'react-intl';\nimport { getUserEmojisSummary, emojiConfigs } from '../services/EmojiService';\nimport UserAvatar from './UserAvatar';\n\nclass UsersTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activityscoreOrder: 'desc',\n    };\n  }\n\n  toggleActivityScoreOrder() {\n    const { activityscoreOrder } = this.state;\n\n    if (activityscoreOrder === 'asc') {\n      this.setState({ activityscoreOrder: 'desc' });\n    } else {\n      this.setState({ activityscoreOrder: 'asc' });\n    }\n  }\n\n  render() {\n    const {\n      allUsers, totalOfActivityTime, totalOfPolls, tab,\n    } = this.props;\n\n    const { activityscoreOrder } = this.state;\n\n    function getSumOfTime(eventsArr) {\n      return eventsArr.reduce((prevVal, elem) => {\n        if (elem.stoppedOn > 0) return prevVal + (elem.stoppedOn - elem.startedOn);\n        return prevVal + (new Date().getTime() - elem.startedOn);\n      }, 0);\n    }\n\n    function getActivityScore(user) {\n      if (user.isModerator) return 0;\n\n      const allUsersArr = Object.values(allUsers || {}).filter((currUser) => !currUser.isModerator);\n      let userPoints = 0;\n\n      // Calculate points of Talking\n      const usersTalkTime = allUsersArr.map((currUser) => currUser.talk.totalTime);\n      const maxTalkTime = Math.max(...usersTalkTime);\n      if (maxTalkTime > 0) {\n        userPoints += (user.talk.totalTime / maxTalkTime) * 2;\n      }\n\n      // Calculate points of Chatting\n      const usersTotalOfMessages = allUsersArr.map((currUser) => currUser.totalOfMessages);\n      const maxMessages = Math.max(...usersTotalOfMessages);\n      if (maxMessages > 0) {\n        userPoints += (user.totalOfMessages / maxMessages) * 2;\n      }\n\n      // Calculate points of Raise hand\n      const usersRaiseHand = allUsersArr.map((currUser) => currUser.emojis.filter((emoji) => emoji.name === 'raiseHand').length);\n      const maxRaiseHand = Math.max(...usersRaiseHand);\n      const userRaiseHand = user.emojis.filter((emoji) => emoji.name === 'raiseHand').length;\n      if (maxRaiseHand > 0) {\n        userPoints += (userRaiseHand / maxRaiseHand) * 2;\n      }\n\n      // Calculate points of Emojis\n      const usersEmojis = allUsersArr.map((currUser) => currUser.emojis.filter((emoji) => emoji.name !== 'raiseHand').length);\n      const maxEmojis = Math.max(...usersEmojis);\n      const userEmojis = user.emojis.filter((emoji) => emoji.name !== 'raiseHand').length;\n      if (maxEmojis > 0) {\n        userPoints += (userEmojis / maxEmojis) * 2;\n      }\n\n      // Calculate points of Polls\n      if (totalOfPolls > 0) {\n        userPoints += (Object.values(user.answers || {}).length / totalOfPolls) * 2;\n      }\n\n      return userPoints;\n    }\n\n    const usersEmojisSummary = {};\n    Object.values(allUsers || {}).forEach((user) => {\n      usersEmojisSummary[user.userKey] = getUserEmojisSummary(user, 'raiseHand');\n    });\n\n    function getOnlinePercentage(registeredOn, leftOn) {\n      const totalUserOnlineTime = ((leftOn > 0 ? leftOn : (new Date()).getTime())) - registeredOn;\n      return Math.ceil((totalUserOnlineTime / totalOfActivityTime) * 100);\n    }\n\n    function tsToHHmmss(ts) {\n      return (new Date(ts).toISOString().substr(11, 8));\n    }\n\n    const usersActivityScore = {};\n    Object.values(allUsers || {}).forEach((user) => {\n      usersActivityScore[user.userKey] = getActivityScore(user);\n    });\n\n    return (\n      <table className=\"w-full\">\n        <thead>\n          <tr className=\"text-xs font-semibold tracking-wide text-left text-gray-500 uppercase border-b bg-gray-100\">\n            <th className=\"px-3.5 2xl:px-4 py-3 col-text-left\">\n              <FormattedMessage id=\"app.learningDashboard.user\" defaultMessage=\"User\" />\n              {\n                tab === 'overview'\n                  ? (\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      className=\"h-4 w-4 inline\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                    >\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 13l-5 5m0 0l-5-5m5 5V6\" />\n                    </svg>\n                  )\n                  : null\n              }\n            </th>\n            <th className=\"px-3.5 2xl:px-4 py-3 text-center\">\n              <FormattedMessage id=\"app.learningDashboard.usersTable.colOnline\" defaultMessage=\"Online time\" />\n            </th>\n            <th className=\"px-3.5 2xl:px-4 py-3 text-center\">\n              <FormattedMessage id=\"app.learningDashboard.usersTable.colTalk\" defaultMessage=\"Talk time\" />\n            </th>\n            <th className=\"px-3.5 2xl:px-4 py-3 text-center\">\n              <FormattedMessage id=\"app.learningDashboard.usersTable.colWebcam\" defaultMessage=\"Webcam Time\" />\n            </th>\n            <th className=\"px-3.5 2xl:px-4 py-3 text-center\">\n              <FormattedMessage id=\"app.learningDashboard.usersTable.colMessages\" defaultMessage=\"Messages\" />\n            </th>\n            <th className=\"px-3.5 2xl:px-4 py-3 col-text-left\">\n              <FormattedMessage id=\"app.learningDashboard.usersTable.colEmojis\" defaultMessage=\"Emojis\" />\n            </th>\n            <th className=\"px-3.5 2xl:px-4 py-3 text-center\">\n              <FormattedMessage id=\"app.learningDashboard.usersTable.colRaiseHands\" defaultMessage=\"Raise Hand\" />\n            </th>\n            <th\n              className={`px-3.5 2xl:px-4 py-3 text-center ${tab === 'overview_activityscore' ? 'cursor-pointer' : ''}`}\n              onClick={() => { if (tab === 'overview_activityscore') this.toggleActivityScoreOrder(); }}\n            >\n              <FormattedMessage id=\"app.learningDashboard.usersTable.colActivityScore\" defaultMessage=\"Activity Score\" />\n              {\n                tab === 'overview_activityscore'\n                  ? (\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      className=\"h-4 w-4 inline\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d={activityscoreOrder === 'asc' ? 'M17 13l-5 5m0 0l-5-5m5 5V6' : 'M7 11l5-5m0 0l5 5m-5-5v12'}\n                      />\n                    </svg>\n                  )\n                  : null\n              }\n            </th>\n            <th className=\"px-3.5 2xl:px-4 py-3 text-center\">\n              <FormattedMessage id=\"app.learningDashboard.usersTable.colStatus\" defaultMessage=\"Status\" />\n            </th>\n          </tr>\n        </thead>\n        <tbody className=\"bg-white divide-y whitespace-nowrap\">\n          { typeof allUsers === 'object' && Object.values(allUsers || {}).length > 0 ? (\n            Object.values(allUsers || {})\n              .sort((a, b) => {\n                if (tab === 'overview_activityscore' && usersActivityScore[a.userKey] < usersActivityScore[b.userKey]) {\n                  return activityscoreOrder === 'desc' ? 1 : -1;\n                }\n                if (tab === 'overview_activityscore' && usersActivityScore[a.userKey] > usersActivityScore[b.userKey]) {\n                  return activityscoreOrder === 'desc' ? -1 : 1;\n                }\n                if (a.isModerator === false && b.isModerator === true) return 1;\n                if (a.isModerator === true && b.isModerator === false) return -1;\n                if (a.name.toLowerCase() < b.name.toLowerCase()) return -1;\n                if (a.name.toLowerCase() > b.name.toLowerCase()) return 1;\n                return 0;\n              })\n              .map((user) => (\n                <tr key={user} className=\"text-gray-700\">\n                  <td className=\"flex items-center px-3.5 2xl:px-4 py-3 col-text-left text-sm\">\n                    <div className=\"inline-block relative w-8 h-8 rounded-full\">\n                      {/* <img className=\"object-cover w-full h-full rounded-full\" */}\n                      {/*     src=\"\" */}\n                      {/*     alt=\"\" loading=\"lazy\" /> */}\n                      <UserAvatar user={user} />\n                      <div\n                        className=\"absolute inset-0 rounded-full shadow-inner\"\n                        aria-hidden=\"true\"\n                      />\n                    </div>\n                    &nbsp;&nbsp;&nbsp;\n                    <div className=\"inline-block\">\n                      <p className=\"font-semibold truncate xl:max-w-sm max-w-xs\">\n                        {user.name}\n                      </p>\n                      { Object.values(user.intIds || {}).map((intId, index) => (\n                        <>\n                          <p className=\"text-xs text-gray-600 dark:text-gray-400\">\n                            <svg\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                              className=\"h-4 w-4 inline\"\n                              fill=\"none\"\n                              viewBox=\"0 0 24 24\"\n                              stroke=\"currentColor\"\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth=\"2\"\n                                d=\"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"\n                              />\n                            </svg>\n                            <FormattedDate\n                              value={intId.registeredOn}\n                              month=\"short\"\n                              day=\"numeric\"\n                              hour=\"2-digit\"\n                              minute=\"2-digit\"\n                              second=\"2-digit\"\n                            />\n                          </p>\n                          { intId.leftOn > 0\n                            ? (\n                              <p className=\"text-xs text-gray-600 dark:text-gray-400\">\n                                <svg\n                                  xmlns=\"http://www.w3.org/2000/svg\"\n                                  className=\"h-4 w-4 inline\"\n                                  fill=\"none\"\n                                  viewBox=\"0 0 24 24\"\n                                  stroke=\"currentColor\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n                                  />\n                                </svg>\n\n                                <FormattedDate\n                                  value={intId.leftOn}\n                                  month=\"short\"\n                                  day=\"numeric\"\n                                  hour=\"2-digit\"\n                                  minute=\"2-digit\"\n                                  second=\"2-digit\"\n                                />\n                              </p>\n                            )\n                            : null }\n                          { index === Object.values(user.intIds).length - 1\n                            ? null\n                            : (\n                              <hr className=\"my-1\" />\n                            ) }\n                        </>\n                      )) }\n                    </div>\n                  </td>\n                  <td className=\"px-3.5 2xl:px-4 py-3 text-sm text-center items-center\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      className=\"h-4 w-4 inline\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d=\"M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728m-9.9-2.829a5 5 0 010-7.07m7.072 0a5 5 0 010 7.07M13 12a1 1 0 11-2 0 1 1 0 012 0z\"\n                      />\n                    </svg>\n                    &nbsp;\n                    { tsToHHmmss(Object.values(user.intIds).reduce((prev, intId) => (\n                      prev + ((intId.leftOn > 0\n                        ? intId.leftOn\n                        : (new Date()).getTime()) - intId.registeredOn)\n                    ), 0)) }\n                    <br />\n                    {\n                      (function getPercentage() {\n                        const { intIds } = user;\n                        const percentage = Object.values(intIds || {}).reduce((prev, intId) => (\n                          prev + getOnlinePercentage(intId.registeredOn, intId.leftOn)\n                        ), 0);\n\n                        return (\n                          <div\n                            className=\"bg-gray-200 transition-colors duration-500 rounded-full overflow-hidden\"\n                            title={`${percentage.toString()}%`}\n                          >\n                            <div\n                              aria-label=\" \"\n                              className=\"bg-gradient-to-br from-green-100 to-green-600 transition-colors duration-900 h-1.5\"\n                              style={{ width: `${percentage.toString()}%` }}\n                              role=\"progressbar\"\n                            />\n                          </div>\n                        );\n                      }())\n                    }\n                  </td>\n                  <td className=\"px-3.5 2xl:px-4 py-3 text-sm text-center\">\n                    { user.talk.totalTime > 0\n                      ? (\n                        <span className=\"text-center\">\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            className=\"h-4 w-4 inline\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth=\"2\"\n                              d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n                            />\n                          </svg>\n                          &nbsp;\n                          { tsToHHmmss(user.talk.totalTime) }\n                        </span>\n                      ) : null }\n                  </td>\n                  <td className=\"px-3.5 2xl:px-4 py-3 text-sm text-center\">\n                    { getSumOfTime(user.webcams) > 0\n                      ? (\n                        <span className=\"text-center\">\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            className=\"h-4 w-4 inline\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth=\"2\"\n                              d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                            />\n                          </svg>\n                          &nbsp;\n                          { tsToHHmmss(getSumOfTime(user.webcams)) }\n                        </span>\n                      ) : null }\n                  </td>\n                  <td className=\"px-3.5 2xl:px-4 py-3 text-sm text-center\">\n                    { user.totalOfMessages > 0\n                      ? (\n                        <span>\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            className=\"h-4 w-4 inline\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth=\"2\"\n                              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                            />\n                          </svg>\n                          &nbsp;\n                          {user.totalOfMessages}\n                        </span>\n                      ) : null }\n                  </td>\n                  <td className=\"px-3.5 2xl:px-4 py-3 text-sm col-text-left\">\n                    {\n                      Object.keys(usersEmojisSummary[user.userKey] || {}).map((emoji) => (\n                        <div className=\"text-xs whitespace-nowrap\">\n                          <i className={`${emojiConfigs[emoji].icon} text-sm`} />\n                          &nbsp;\n                          { usersEmojisSummary[user.userKey][emoji] }\n                          &nbsp;\n                          <FormattedMessage\n                            id={emojiConfigs[emoji].intlId}\n                            defaultMessage={emojiConfigs[emoji].defaultMessage}\n                          />\n                        </div>\n                      ))\n                    }\n                  </td>\n                  <td className=\"px-3.5 2xl:px-4 py-3 text-sm text-center\">\n                    { user.emojis.filter((emoji) => emoji.name === 'raiseHand').length > 0\n                      ? (\n                        <span>\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            className=\"h-4 w-4 inline\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth=\"2\"\n                              d=\"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11\"\n                            />\n                          </svg>\n                          &nbsp;\n                          {user.emojis.filter((emoji) => emoji.name === 'raiseHand').length}\n                        </span>\n                      ) : null }\n                  </td>\n                  {\n                    !user.isModerator ? (\n                      <td className=\"px-3.5 2xl:px-4 py-3 text-sm text-center items\">\n                        <svg viewBox=\"0 0 82 12\" width=\"82\" height=\"12\" className=\"flex-none m-auto inline\">\n                          <rect width=\"12\" height=\"12\" fill={usersActivityScore[user.userKey] > 0 ? '#A7F3D0' : '#e4e4e7'} />\n                          <rect width=\"12\" height=\"12\" x=\"14\" fill={usersActivityScore[user.userKey] > 2 ? '#6EE7B7' : '#e4e4e7'} />\n                          <rect width=\"12\" height=\"12\" x=\"28\" fill={usersActivityScore[user.userKey] > 4 ? '#34D399' : '#e4e4e7'} />\n                          <rect width=\"12\" height=\"12\" x=\"42\" fill={usersActivityScore[user.userKey] > 6 ? '#10B981' : '#e4e4e7'} />\n                          <rect width=\"12\" height=\"12\" x=\"56\" fill={usersActivityScore[user.userKey] > 8 ? '#059669' : '#e4e4e7'} />\n                          <rect width=\"12\" height=\"12\" x=\"70\" fill={usersActivityScore[user.userKey] === 10 ? '#047857' : '#e4e4e7'} />\n                        </svg>\n                        &nbsp;\n                        <span className=\"text-xs bg-gray-200 rounded-full px-2\">\n                          <FormattedNumber value={usersActivityScore[user.userKey]} minimumFractionDigits=\"0\" maximumFractionDigits=\"1\" />\n                        </span>\n                      </td>\n                    ) : <td />\n                  }\n                  <td className=\"px-3.5 2xl:px-4 py-3 text-xs text-center\">\n                    {\n                      Object.values(user.intIds)[Object.values(user.intIds).length - 1].leftOn > 0\n                        ? (\n                          <span className=\"px-2 py-1 font-semibold leading-tight text-red-700 bg-red-100 rounded-full\">\n                            <FormattedMessage id=\"app.learningDashboard.usersTable.userStatusOffline\" defaultMessage=\"Offline\" />\n                          </span>\n                        )\n                        : (\n                          <span className=\"px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-full\">\n                            <FormattedMessage id=\"app.learningDashboard.usersTable.userStatusOnline\" defaultMessage=\"Online\" />\n                          </span>\n                        )\n                    }\n                  </td>\n                </tr>\n              ))\n          ) : (\n            <tr className=\"text-gray-700\">\n              <td colSpan=\"8\" className=\"px-3.5 2xl:px-4 py-3 text-sm text-center\">\n                <FormattedMessage id=\"app.learningDashboard.usersTable.noUsers\" defaultMessage=\"No users\" />\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nexport default injectIntl(UsersTable);\n","import React from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { getUserEmojisSummary, emojiConfigs } from '../services/EmojiService';\nimport UserAvatar from './UserAvatar';\n\nclass StatusTable extends React.Component {\n  render() {\n    const spanMinutes = 10 * 60000; // 10 minutes default\n    const { allUsers, intl } = this.props;\n\n    function tsToHHmmss(ts) {\n      return (new Date(ts).toISOString().substr(11, 8));\n    }\n\n    const usersRegisteredTimes = Object\n      .values(allUsers || {})\n      .map((user) => Object.values(user.intIds).map((intId) => intId.registeredOn))\n      .flat();\n    const usersLeftTimes = Object\n      .values(allUsers || {})\n      .map((user) => Object.values(user.intIds).map((intId) => {\n        if (intId.leftOn === 0) return (new Date()).getTime();\n        return intId.leftOn;\n      }))\n      .flat();\n\n    const firstRegisteredOnTime = Math.min(...usersRegisteredTimes);\n    const lastLeftOnTime = Math.max(...usersLeftTimes);\n\n    const periods = [];\n    let currPeriod = firstRegisteredOnTime;\n    while (currPeriod < lastLeftOnTime) {\n      periods.push(currPeriod);\n      currPeriod += spanMinutes;\n    }\n\n    return (\n      <table className=\"w-full\">\n        <thead>\n          <tr className=\"text-xs font-semibold tracking-wide text-gray-500 uppercase border-b bg-gray-100\">\n            <th className=\"px-3.5 2xl:px-4 py-3 col-text-left\">\n              <FormattedMessage id=\"app.learningDashboard.user\" defaultMessage=\"User\" />\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-4 w-4 inline\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 13l-5 5m0 0l-5-5m5 5V6\" />\n              </svg>\n            </th>\n            { periods.map((period) => <th className=\"px-3.5 2xl:px-4 py-3 col-text-left\">{ `${tsToHHmmss(period - firstRegisteredOnTime)}` }</th>) }\n          </tr>\n        </thead>\n        <tbody className=\"bg-white divide-y whitespace-nowrap\">\n          { typeof allUsers === 'object' && Object.values(allUsers || {}).length > 0 ? (\n            Object.values(allUsers || {})\n              .sort((a, b) => {\n                if (a.isModerator === false && b.isModerator === true) return 1;\n                if (a.isModerator === true && b.isModerator === false) return -1;\n                if (a.name.toLowerCase() < b.name.toLowerCase()) return -1;\n                if (a.name.toLowerCase() > b.name.toLowerCase()) return 1;\n                return 0;\n              })\n              .map((user) => (\n                <tr className=\"text-gray-700\">\n                  <td className=\"px-3.5 2xl:px-4 py-3\">\n                    <div className=\"flex items-center text-sm\">\n                      <div className=\"relative hidden w-8 h-8 rounded-full md:block\">\n                        <UserAvatar user={user} />\n                      </div>\n                      &nbsp;&nbsp;\n                      <div>\n                        <p className=\"font-semibold truncate xl:max-w-sm max-w-xs\">{user.name}</p>\n                      </div>\n                    </div>\n                  </td>\n                  { periods.map((period) => (\n                    <td className=\"px-3.5 2xl:px-4 py-3 text-sm col-text-left\">\n                      { Object.values(user.intIds).map(({ registeredOn, leftOn }) => (\n                        <>\n                          { registeredOn >= period && registeredOn < period + spanMinutes ? (\n                            <span title={intl.formatDate(registeredOn, {\n                              month: 'short',\n                              day: 'numeric',\n                              hour: '2-digit',\n                              minute: '2-digit',\n                              second: '2-digit',\n                            })}\n                            >\n                              <svg\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                className=\"h-4 w-4 text-xs text-green-400\"\n                                fill=\"none\"\n                                viewBox=\"0 0 24 24\"\n                                stroke=\"currentColor\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  strokeWidth=\"2\"\n                                  d=\"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"\n                                />\n                              </svg>\n                            </span>\n                          ) : null }\n                          { (function getEmojis() {\n                            const userEmojisInPeriod = getUserEmojisSummary(\n                              user,\n                              null,\n                              registeredOn > period && registeredOn < period + spanMinutes\n                                ? registeredOn : period,\n                              leftOn > period && leftOn < period + spanMinutes\n                                ? leftOn : period + spanMinutes,\n                            );\n\n                            return (\n                              Object\n                                .keys(userEmojisInPeriod)\n                                .map((emoji) => (\n                                  <div className=\"text-sm text-gray-800\">\n                                    <i className={`${emojiConfigs[emoji].icon} text-sm`} />\n                                    &nbsp;\n                                    { userEmojisInPeriod[emoji] }\n                                    &nbsp;\n                                    <FormattedMessage\n                                      id={emojiConfigs[emoji].intlId}\n                                      defaultMessage={emojiConfigs[emoji].defaultMessage}\n                                    />\n                                  </div>\n                                ))\n                            );\n                          }()) }\n                          { leftOn >= period && leftOn < period + spanMinutes ? (\n                            <span title={intl.formatDate(leftOn, {\n                              month: 'short',\n                              day: 'numeric',\n                              hour: '2-digit',\n                              minute: '2-digit',\n                              second: '2-digit',\n                            })}\n                            >\n                              <svg\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                className=\"h-4 w-4 text-red-400\"\n                                fill=\"none\"\n                                viewBox=\"0 0 24 24\"\n                                stroke=\"currentColor\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  strokeWidth=\"2\"\n                                  d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n                                />\n                              </svg>\n                            </span>\n                          ) : null }\n                        </>\n                      )) }\n                    </td>\n                  )) }\n                </tr>\n              ))) : null }\n        </tbody>\n      </table>\n    );\n  }\n}\n\nexport default injectIntl(StatusTable);\n","import React from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport UserAvatar from './UserAvatar';\n\nclass PollsTable extends React.Component {\n  render() {\n    const { allUsers, polls } = this.props;\n    const { intl } = this.props;\n\n    function getUserAnswer(user, poll) {\n      if (typeof user.answers[poll.pollId] !== 'undefined') {\n        return user.answers[poll.pollId];\n      }\n      return '';\n    }\n\n    return (\n      <table className=\"w-full\">\n        <thead>\n          <tr className=\"text-xs font-semibold tracking-wide col-text-left text-gray-500 uppercase border-b bg-gray-100\">\n            <th className=\"px-3.5 2xl:px-4 py-3\">\n              <FormattedMessage id=\"app.learningDashboard.user\" defaultMessage=\"User\" />\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-4 w-4 inline\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 13l-5 5m0 0l-5-5m5 5V6\" />\n              </svg>\n            </th>\n            {typeof polls === 'object' && Object.values(polls || {}).length > 0 ? (\n              Object.values(polls || {})\n                .sort((a, b) => ((a.createdOn > b.createdOn) ? 1 : -1))\n                .map((poll, index) => <th className=\"px-3.5 2xl:px-4 py-3 text-center\">{poll.question || `Poll ${index + 1}`}</th>)\n            ) : null }\n          </tr>\n        </thead>\n        <tbody className=\"bg-white divide-y whitespace-nowrap\">\n          { typeof allUsers === 'object' && Object.values(allUsers || {}).length > 0 ? (\n            Object.values(allUsers || {})\n              .filter((user) => Object.values(user.answers).length > 0)\n              .sort((a, b) => {\n                if (a.isModerator === false && b.isModerator === true) return 1;\n                if (a.isModerator === true && b.isModerator === false) return -1;\n                if (a.name.toLowerCase() < b.name.toLowerCase()) return -1;\n                if (a.name.toLowerCase() > b.name.toLowerCase()) return 1;\n                return 0;\n              })\n              .map((user) => (\n                <tr className=\"text-gray-700\">\n                  <td className=\"px-3.5 2xl:px-4 py-3\">\n                    <div className=\"flex items-center text-sm\">\n                      <div className=\"relative hidden w-8 h-8 rounded-full md:block\">\n                        <UserAvatar user={user} />\n                      </div>\n                      &nbsp;&nbsp;\n                      <div>\n                        <p className=\"font-semibold truncate xl:max-w-sm max-w-xs\">{user.name}</p>\n                      </div>\n                    </div>\n                  </td>\n\n                  {typeof polls === 'object' && Object.values(polls || {}).length > 0 ? (\n                    Object.values(polls || {})\n                      .sort((a, b) => ((a.createdOn > b.createdOn) ? 1 : -1))\n                      .map((poll) => (\n                        <td className=\"px-3.5 2xl:px-4 py-3 text-sm text-center\">\n                          { getUserAnswer(user, poll) }\n                          { poll.anonymous\n                            ? (\n                              <span title={intl.formatMessage({\n                                id: 'app.learningDashboard.pollsTable.anonymousAnswer',\n                                defaultMessage: 'Anonymous Poll (answers in the last row)',\n                              })}\n                              >\n                                <svg\n                                  xmlns=\"http://www.w3.org/2000/svg\"\n                                  className=\"h-4 w-4 inline\"\n                                  fill=\"none\"\n                                  viewBox=\"0 0 24 24\"\n                                  stroke=\"currentColor\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                                  />\n                                </svg>\n                              </span>\n                            )\n                            : null }\n                        </td>\n                      ))\n                  ) : null }\n                </tr>\n              ))) : null }\n          {typeof polls === 'object'\n            && Object.values(polls || {}).length > 0\n            && Object.values(polls).reduce((prev, poll) => ([\n              ...prev,\n              ...poll.anonymousAnswers,\n            ]), []).length > 0 ? (\n              <tr className=\"text-gray-700\">\n                <td className=\"px-3.5 2xl:px-4 py-3\">\n                  <div className=\"flex items-center text-sm\">\n                    <div className=\"relative hidden w-8 h-8 mr-3 rounded-full md:block\">\n                      {/* <img className=\"object-cover w-full h-full rounded-full\" */}\n                      {/*     src=\"\" */}\n                      {/*     alt=\"\" loading=\"lazy\" /> */}\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        className=\"relative hidden w-8 h-8 mr-3 rounded-full md:block\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth=\"2\"\n                          d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                        />\n                      </svg>\n                      <div\n                        className=\"absolute inset-0 rounded-full shadow-inner\"\n                        aria-hidden=\"true\"\n                      />\n                    </div>\n                    <div>\n                      <p className=\"font-semibold\">\n                        <FormattedMessage id=\"app.learningDashboard.pollsTable.anonymousRowName\" defaultMessage=\"Anonymous\" />\n                      </p>\n                    </div>\n                  </div>\n                </td>\n                {Object.values(polls || {})\n                  .sort((a, b) => ((a.createdOn > b.createdOn) ? 1 : -1))\n                  .map((poll) => (\n                    <td className=\"px-3.5 2xl:px-4 py-3 text-sm text-center\">\n                      { poll.anonymousAnswers.map((answer) => <p>{answer}</p>) }\n                    </td>\n                  ))}\n              </tr>\n            ) : null}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nexport default injectIntl(PollsTable);\n","import React from 'react';\n\nfunction ErrorMessage(props) {\n  const { message } = props;\n\n  return (\n    <div className=\"container flex flex-col items-center px-6 mx-auto\">\n      <svg className=\"w-12 h-12 my-8 text-gray-700\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n        <path\n          fillRule=\"evenodd\"\n          d=\"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n      <h1 className=\"text-xl font-semibold text-gray-700 dark:text-gray-200\">\n        {message}\n      </h1>\n    </div>\n  );\n}\n\nexport default ErrorMessage;\n","import React from 'react';\nimport './App.css';\nimport './bbb-icons.css';\nimport { FormattedMessage, FormattedDate, injectIntl } from 'react-intl';\nimport Card from './components/Card';\nimport UsersTable from './components/UsersTable';\nimport StatusTable from './components/StatusTable';\nimport PollsTable from './components/PollsTable';\nimport ErrorMessage from './components/ErrorMessage';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      invalidSessionCount: 0,\n      activitiesJson: {},\n      tab: 'overview',\n      meetingId: '',\n      learningDashboardAccessToken: '',\n      ldAccessTokenCopied: false,\n      sessionToken: '',\n    };\n  }\n\n  componentDidMount() {\n    this.setDashboardParams(() => {\n      this.fetchActivitiesJson();\n    });\n  }\n\n  setDashboardParams(callback) {\n    let learningDashboardAccessToken = '';\n    let meetingId = '';\n    let sessionToken = '';\n\n    const urlSearchParams = new URLSearchParams(window.location.search);\n    const params = Object.fromEntries(urlSearchParams.entries());\n\n    if (typeof params.meeting !== 'undefined') {\n      meetingId = params.meeting;\n    }\n\n    if (typeof params.sessionToken !== 'undefined') {\n      sessionToken = params.sessionToken;\n    }\n\n    if (typeof params.report !== 'undefined') {\n      learningDashboardAccessToken = params.report;\n    } else {\n      const cookieName = `ld-${params.meeting}`;\n      const cDecoded = decodeURIComponent(document.cookie);\n      const cArr = cDecoded.split('; ');\n      cArr.forEach((val) => {\n        if (val.indexOf(`${cookieName}=`) === 0) learningDashboardAccessToken = val.substring((`${cookieName}=`).length);\n      });\n\n      // Extend AccessToken lifetime by 7d (in each access)\n      if (learningDashboardAccessToken !== '') {\n        const cookieExpiresDate = new Date();\n        cookieExpiresDate.setTime(cookieExpiresDate.getTime() + (3600000 * 24 * 7));\n        document.cookie = `ld-${meetingId}=${learningDashboardAccessToken}; expires=${cookieExpiresDate.toGMTString()}; path=/;SameSite=None;Secure`;\n      }\n    }\n\n    this.setState({ learningDashboardAccessToken, meetingId, sessionToken }, () => {\n      if (typeof callback === 'function') callback();\n    });\n  }\n\n  fetchActivitiesJson() {\n    const {\n      learningDashboardAccessToken, meetingId, sessionToken, invalidSessionCount,\n    } = this.state;\n\n    if (learningDashboardAccessToken !== '') {\n      fetch(`${meetingId}/${learningDashboardAccessToken}/learning_dashboard_data.json`)\n        .then((response) => response.json())\n        .then((json) => {\n          this.setState({\n            activitiesJson: json,\n            loading: false,\n            invalidSessionCount: 0,\n          });\n          document.title = `Learning Dashboard - ${json.name}`;\n        }).catch(() => {\n          this.setState({ loading: false, invalidSessionCount: invalidSessionCount + 1 });\n        });\n    } else if (sessionToken !== '') {\n      const url = new URL('/bigbluebutton/api/learningDashboard', window.location);\n      fetch(`${url}?sessionToken=${sessionToken}`)\n        .then((response) => response.json())\n        .then((json) => {\n          if (json.response.returncode === 'SUCCESS') {\n            const jsonData = JSON.parse(json.response.data);\n            this.setState({\n              activitiesJson: jsonData,\n              loading: false,\n              invalidSessionCount: 0,\n            });\n            document.title = `Learning Dashboard - ${jsonData.name}`;\n          } else {\n            // When meeting is ended the sessionToken stop working, check for new cookies\n            this.setDashboardParams();\n            this.setState({ loading: false, invalidSessionCount: invalidSessionCount + 1 });\n          }\n        })\n        .catch(() => {\n          this.setState({ loading: false, invalidSessionCount: invalidSessionCount + 1 });\n        });\n    } else {\n      this.setState({ loading: false });\n    }\n\n    setTimeout(() => {\n      this.fetchActivitiesJson();\n    }, 10000 * (2 ** invalidSessionCount));\n  }\n\n  render() {\n    const {\n      activitiesJson, tab, sessionToken, loading,\n      learningDashboardAccessToken, ldAccessTokenCopied,\n    } = this.state;\n    const { intl } = this.props;\n\n    document.title = `${intl.formatMessage({ id: 'app.learningDashboard.dashboardTitle', defaultMessage: 'Learning Dashboard' })} - ${activitiesJson.name}`;\n\n    function totalOfRaiseHand() {\n      if (activitiesJson && activitiesJson.users) {\n        return Object.values(activitiesJson.users)\n          .reduce((prevVal, elem) => prevVal + elem.emojis.filter((emoji) => emoji.name === 'raiseHand').length, 0);\n      }\n      return 0;\n    }\n\n    function tsToHHmmss(ts) {\n      return (new Date(ts).toISOString().substr(11, 8));\n    }\n\n    function totalOfActivity() {\n      const usersTimes = Object.values(activitiesJson.users || {}).reduce((prev, user) => ([\n        ...prev,\n        ...Object.values(user.intIds),\n      ]), []);\n\n      const minTime = Object.values(usersTimes || {}).reduce((prevVal, elem) => {\n        if (prevVal === 0 || elem.registeredOn < prevVal) return elem.registeredOn;\n        return prevVal;\n      }, 0);\n\n      const maxTime = Object.values(usersTimes || {}).reduce((prevVal, elem) => {\n        if (elem.leftOn === 0) return (new Date()).getTime();\n        if (elem.leftOn > prevVal) return elem.leftOn;\n        return prevVal;\n      }, 0);\n\n      return maxTime - minTime;\n    }\n\n    function getAverageActivityScore() {\n      let meetingAveragePoints = 0;\n\n      const allUsers = Object.values(activitiesJson.users || {})\n        .filter((currUser) => !currUser.isModerator);\n      const nrOfUsers = allUsers.length;\n\n      // Calculate points of Talking\n      const usersTalkTime = allUsers.map((currUser) => currUser.talk.totalTime);\n      const maxTalkTime = Math.max(...usersTalkTime);\n      const totalTalkTime = usersTalkTime.reduce((prev, val) => prev + val, 0);\n      if (totalTalkTime > 0) {\n        meetingAveragePoints += ((totalTalkTime / nrOfUsers) / maxTalkTime) * 2;\n      }\n\n      // Calculate points of Chatting\n      const usersTotalOfMessages = allUsers.map((currUser) => currUser.totalOfMessages);\n      const maxMessages = Math.max(...usersTotalOfMessages);\n      const totalMessages = usersTotalOfMessages.reduce((prev, val) => prev + val, 0);\n      if (maxMessages > 0) {\n        meetingAveragePoints += ((totalMessages / nrOfUsers) / maxMessages) * 2;\n      }\n\n      // Calculate points of Raise hand\n      const usersRaiseHand = allUsers.map((currUser) => currUser.emojis.filter((emoji) => emoji.name === 'raiseHand').length);\n      const maxRaiseHand = Math.max(...usersRaiseHand);\n      const totalRaiseHand = usersRaiseHand.reduce((prev, val) => prev + val, 0);\n      if (maxRaiseHand > 0) {\n        meetingAveragePoints += ((totalRaiseHand / nrOfUsers) / maxMessages) * 2;\n      }\n\n      // Calculate points of Emojis\n      const usersEmojis = allUsers.map((currUser) => currUser.emojis.filter((emoji) => emoji.name !== 'raiseHand').length);\n      const maxEmojis = Math.max(...usersEmojis);\n      const totalEmojis = usersEmojis.reduce((prev, val) => prev + val, 0);\n      if (maxEmojis > 0) {\n        meetingAveragePoints += ((totalEmojis / nrOfUsers) / maxEmojis) * 2;\n      }\n\n      // Calculate points of Polls\n      const totalOfPolls = Object.values(activitiesJson.polls || {}).length;\n      if (totalOfPolls > 0) {\n        const totalAnswers = allUsers\n          .reduce((prevVal, currUser) => prevVal + Object.values(currUser.answers || {}).length, 0);\n        meetingAveragePoints += ((totalAnswers / nrOfUsers) / totalOfPolls) * 2;\n      }\n\n      return meetingAveragePoints;\n    }\n\n    function getErrorMessage() {\n      if (learningDashboardAccessToken === '' && sessionToken === '') {\n        return intl.formatMessage({ id: 'app.learningDashboard.errors.invalidToken', defaultMessage: 'Invalid session token' });\n      }\n\n      if (activitiesJson === {} || typeof activitiesJson.name === 'undefined') {\n        return intl.formatMessage({ id: 'app.learningDashboard.errors.dataUnavailable', defaultMessage: 'Data is no longer available' });\n      }\n\n      return '';\n    }\n\n    if (loading === false && getErrorMessage() !== '') return <ErrorMessage message={getErrorMessage()} />;\n\n    return (\n      <div className=\"mx-10\">\n        <div className=\"flex items-start justify-between pb-3\">\n          <h1 className=\"mt-3 text-2xl font-semibold whitespace-nowrap inline-block\">\n            <FormattedMessage id=\"app.learningDashboard.dashboardTitle\" defaultMessage=\"Learning Dashboard\" />\n            {\n              ldAccessTokenCopied === true\n                ? (\n                  <span className=\"text-xs text-gray-500 font-normal ml-2\">\n                    <FormattedMessage id=\"app.learningDashboard.linkCopied\" defaultMessage=\"Link successfully copied!\" />\n                  </span>\n                )\n                : null\n            }\n            <br />\n            <span className=\"text-sm font-medium\">{activitiesJson.name || ''}</span>\n          </h1>\n          <div className=\"mt-3 col-text-right py-1 text-gray-500 inline-block\">\n            <p className=\"font-bold\">\n              <div className=\"inline\">\n                <FormattedDate\n                  value={activitiesJson.createdOn}\n                  year=\"numeric\"\n                  month=\"short\"\n                  day=\"numeric\"\n                />\n              </div>\n              &nbsp;&nbsp;\n              {\n                activitiesJson.endedOn > 0\n                  ? (\n                    <span className=\"px-2 py-1 font-semibold leading-tight text-red-700 bg-red-100 rounded-full\">\n                      <FormattedMessage id=\"app.learningDashboard.indicators.meetingStatusEnded\" defaultMessage=\"Ended\" />\n                    </span>\n                  )\n                  : null\n              }\n              {\n                activitiesJson.endedOn === 0\n                  ? (\n                    <span className=\"px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-full\">\n                      <FormattedMessage id=\"app.learningDashboard.indicators.meetingStatusActive\" defaultMessage=\"Active\" />\n                    </span>\n                  )\n                  : null\n              }\n            </p>\n            <p>\n              <FormattedMessage id=\"app.learningDashboard.indicators.duration\" defaultMessage=\"Duration\" />\n              :&nbsp;\n              {tsToHHmmss(totalOfActivity())}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid gap-6 mb-8 md:grid-cols-2 xl:grid-cols-4\">\n          <div aria-hidden=\"true\" className=\"cursor-pointer\" onClick={() => { this.setState({ tab: 'overview' }); }}>\n            <Card\n              name={\n                activitiesJson.endedOn === 0\n                  ? intl.formatMessage({ id: 'app.learningDashboard.indicators.usersOnline', defaultMessage: 'Active Users' })\n                  : intl.formatMessage({ id: 'app.learningDashboard.indicators.usersTotal', defaultMessage: 'Total Number Of Users' })\n              }\n              number={Object\n                .values(activitiesJson.users || {})\n                .filter((u) => activitiesJson.endedOn > 0\n                  || Object.values(u.intIds)[Object.values(u.intIds).length - 1].leftOn === 0)\n                .length}\n              cardClass=\"border-pink-500\"\n              iconClass=\"bg-pink-50 text-pink-500\"\n              onClick={() => {\n                this.setState({ tab: 'overview' });\n              }}\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"\n                />\n              </svg>\n            </Card>\n          </div>\n          <div aria-hidden=\"true\" className=\"cursor-pointer\" onClick={() => { this.setState({ tab: 'polling' }); }}>\n            <Card\n              name={intl.formatMessage({ id: 'app.learningDashboard.indicators.polls', defaultMessage: 'Polls' })}\n              number={Object.values(activitiesJson.polls || {}).length}\n              cardClass=\"border-blue-500\"\n              iconClass=\"bg-blue-100 text-blue-500\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\"\n                />\n              </svg>\n            </Card>\n          </div>\n          <div aria-hidden=\"true\" className=\"cursor-pointer\" onClick={() => { this.setState({ tab: 'status_timeline' }); }}>\n            <Card\n              name={intl.formatMessage({ id: 'app.learningDashboard.indicators.raiseHand', defaultMessage: 'Raise Hand' })}\n              number={totalOfRaiseHand()}\n              cardClass=\"border-purple-500\"\n              iconClass=\"bg-purple-200 text-purple-500\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11\"\n                />\n              </svg>\n            </Card>\n          </div>\n          <div aria-hidden=\"true\" className=\"cursor-pointer\" onClick={() => { this.setState({ tab: 'overview_activityscore' }); }}>\n            <Card\n              name={intl.formatMessage({ id: 'app.learningDashboard.indicators.activityScore', defaultMessage: 'Activity Score' })}\n              number={intl.formatNumber((getAverageActivityScore() || 0), {\n                minimumFractionDigits: 0,\n                maximumFractionDigits: 1,\n              })}\n              cardClass=\"border-green-500\"\n              iconClass=\"bg-green-200 text-green-500\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z\"\n                />\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z\"\n                />\n              </svg>\n            </Card>\n          </div>\n        </div>\n        <h1 className=\"block my-1 pr-2 text-xl font-semibold\">\n          { tab === 'overview' || tab === 'overview_activityscore'\n            ? <FormattedMessage id=\"app.learningDashboard.usersTable.title\" defaultMessage=\"Overview\" />\n            : null }\n          { tab === 'status_timeline'\n            ? <FormattedMessage id=\"app.learningDashboard.statusTimelineTable.title\" defaultMessage=\"Status Timeline\" />\n            : null }\n          { tab === 'polling'\n            ? <FormattedMessage id=\"app.learningDashboard.pollsTable.title\" defaultMessage=\"Polling\" />\n            : null }\n        </h1>\n        <div className=\"w-full overflow-hidden rounded-md shadow-xs border-2 border-gray-100\">\n          <div className=\"w-full overflow-x-auto\">\n            { (tab === 'overview' || tab === 'overview_activityscore')\n              ? (\n                <UsersTable\n                  allUsers={activitiesJson.users}\n                  totalOfActivityTime={totalOfActivity()}\n                  totalOfPolls={Object.values(activitiesJson.polls || {}).length}\n                  tab={tab}\n                />\n              )\n              : null }\n            { (tab === 'status_timeline')\n              ? <StatusTable allUsers={activitiesJson.users} />\n              : null }\n            { tab === 'polling'\n              ? <PollsTable polls={activitiesJson.polls} allUsers={activitiesJson.users} />\n              : null }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(App);\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { IntlProvider } from 'react-intl';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst RTL_LANGUAGES = ['ar', 'dv', 'fa', 'he'];\n\nfunction getLanguage() {\n  let { language } = navigator;\n\n  const urlSearchParams = new URLSearchParams(window.location.search);\n  const params = Object.fromEntries(urlSearchParams.entries());\n  if (typeof params.lang !== 'undefined') {\n    language = params.lang;\n  }\n\n  return language;\n}\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      intlMessages: {},\n      intlLocale: getLanguage(),\n    };\n\n    this.setMessages();\n    this.setRtl();\n  }\n\n  setMessages() {\n    const fetchMessages = (lang) => new Promise((resolve, reject) => {\n      const url = `/html5client/locales/${lang.replace('-', '_')}.json`;\n      fetch(url).then((response) => {\n        if (!response.ok) return reject();\n        return resolve(response.json());\n      });\n    });\n\n    Promise.all([fetchMessages('en'), fetchMessages(getLanguage())])\n      .then((values) => {\n        let mergedMessages = {};\n\n        if (values[0]) {\n          mergedMessages = Object.assign(mergedMessages, values[0]);\n        }\n\n        if (values[1]) {\n          mergedMessages = Object.assign(mergedMessages, values[1]);\n        }\n\n        this.setState({ intlMessages: mergedMessages });\n      }).catch(() => {});\n  }\n\n  setRtl() {\n    const { intlLocale } = this.state;\n\n    if (RTL_LANGUAGES.includes(intlLocale.substring(0, 2))) {\n      document.body.parentNode.setAttribute('dir', 'rtl');\n    }\n  }\n\n  render() {\n    const { intlLocale, intlMessages } = this.state;\n\n    return (\n      <IntlProvider defaultLocale=\"en\" locale={intlLocale} messages={intlMessages}>\n        <App />\n      </IntlProvider>\n    );\n  }\n}\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<Dashboard />, rootElement);\n\nreportWebVitals();\n"],"sourceRoot":""}