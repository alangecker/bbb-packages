(this["webpackJsonplearning-dashboard"]=this["webpackJsonplearning-dashboard"]||[]).push([[0],{33:function(e,t,s){},34:function(e,t,s){},35:function(e,t,s){},39:function(e,t,s){"use strict";s.r(t);var n=s(9),a=s(10),r=s(12),i=s(11),l=s(2),c=s.n(l),o=s(24),d=s.n(o),u=(s(33),s(19)),j=s(8),h=(s(34),s(35),s(23)),b=s(13),m=s(15),x=s(0);var p=function(e){var t=e.number,s=e.name,n=e.children,a=e.iconClass,r=e.cardClass;return Object(x.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-md shadow border-l-8 ".concat(r),children:[Object(x.jsxs)("div",{className:"w-70",children:[Object(x.jsx)("p",{className:"text-lg font-semibold text-gray-700",children:t}),Object(x.jsx)("p",{className:"mb-2 text-sm font-medium text-gray-600",children:s})]}),Object(x.jsx)("div",{className:"p-3 mr-4 text-orange-500 rounded-full ".concat(a),children:n})]})},g={away:{icon:"icon-bbb-time",intlId:"app.actionsBar.emojiMenu.awayLabel",defaultMessage:"Away"},neutral:{icon:"icon-bbb-undecided",intlId:"app.actionsBar.emojiMenu.neutralLabel",defaultMessage:"Undecided"},confused:{icon:"icon-bbb-confused",intlId:"app.actionsBar.emojiMenu.confusedLabel",defaultMessage:"Confused"},sad:{icon:"icon-bbb-sad",intlId:"app.actionsBar.emojiMenu.sadLabel",defaultMessage:"Sad"},happy:{icon:"icon-bbb-happy",intlId:"app.actionsBar.emojiMenu.happyLabel",defaultMessage:"Happy"},applause:{icon:"icon-bbb-applause",intlId:"app.actionsBar.emojiMenu.applauseLabel",defaultMessage:"Applaud"},thumbsUp:{icon:"icon-bbb-thumbs_up",intlId:"app.actionsBar.emojiMenu.thumbsUpLabel",defaultMessage:"Thumbs up"},thumbsDown:{icon:"icon-bbb-thumbs_down",intlId:"app.actionsBar.emojiMenu.thumbsDownLabel",defaultMessage:"Thumbs down"},raiseHand:{icon:"icon-bbb-hand",intlId:"app.actionsBar.emojiMenu.raiseHandLabel",defaultMessage:"Raise hand"}};function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a={};return e.emojis.forEach((function(e){"undefined"!==typeof g[e.name]&&(null!=t&&t.split(",").indexOf(e.name)>-1||null!=s&&e.sentOn<s||null!=n&&e.sentOn>n||("undefined"===typeof a[e.name]&&(a[e.name]=0),a[e.name]+=1))})),a}var O=function(e){var t=e.user;return Object(x.jsx)("div",{className:"border-2 border-gray-800 items-center ".concat(t.isModerator?"rounded-md":"rounded-full"),children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full p-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.isDialIn?Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"}):Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})},v=function(e){Object(r.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).state={activityscoreOrder:"desc"},a}return Object(a.a)(s,[{key:"toggleActivityScoreOrder",value:function(){"asc"===this.state.activityscoreOrder?this.setState({activityscoreOrder:"desc"}):this.setState({activityscoreOrder:"asc"})}},{key:"render",value:function(){var e=this,t=this.props,s=t.allUsers,n=t.totalOfActivityTime,a=t.totalOfPolls,r=t.tab,i=this.state.activityscoreOrder;function l(e){return e.reduce((function(e,t){return t.stoppedOn>0?e+(t.stoppedOn-t.startedOn):e+((new Date).getTime()-t.startedOn)}),0)}var c={};function o(e,t){var s=(t>0?t:(new Date).getTime())-e;return Math.ceil(s/n*100)}function d(e){return new Date(e).toISOString().substr(11,8)}Object.values(s||{}).forEach((function(e){c[e.intId]=f(e,"raiseHand")}));var u={};return Object.values(s||{}).forEach((function(e){u[e.intId]=function(e){if(e.isModerator)return 0;var t=Object.values(s||{}).filter((function(e){return!e.isModerator})),n=0,r=t.map((function(e){return e.talk.totalTime})),i=Math.max.apply(Math,Object(j.a)(r));i>0&&(n+=e.talk.totalTime/i*2);var l=t.map((function(e){return e.totalOfMessages})),c=Math.max.apply(Math,Object(j.a)(l));c>0&&(n+=e.totalOfMessages/c*2);var o=t.map((function(e){return e.emojis.filter((function(e){return"raiseHand"===e.name})).length})),d=Math.max.apply(Math,Object(j.a)(o)),u=e.emojis.filter((function(e){return"raiseHand"===e.name})).length;d>0&&(n+=u/d*2);var h=t.map((function(e){return e.emojis.filter((function(e){return"raiseHand"!==e.name})).length})),b=Math.max.apply(Math,Object(j.a)(h)),m=e.emojis.filter((function(e){return"raiseHand"!==e.name})).length;return b>0&&(n+=m/b*2),a>0&&(n+=Object.values(e.answers||{}).length/a*2),n}(e)})),Object(x.jsxs)("table",{className:"w-full",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:"text-xs font-semibold tracking-wide text-left text-gray-500 uppercase border-b bg-gray-100",children:[Object(x.jsxs)("th",{className:"px-3.5 2xl:px-4 py-3 col-text-left",children:[Object(x.jsx)(h.a,{id:"app.learningDashboard.user",defaultMessage:"User"}),"overview"===r?Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 13l-5 5m0 0l-5-5m5 5V6"})}):null]}),Object(x.jsx)("th",{className:"px-3.5 2xl:px-4 py-3 text-center",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.colOnline",defaultMessage:"Online time"})}),Object(x.jsx)("th",{className:"px-3.5 2xl:px-4 py-3 text-center",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.colTalk",defaultMessage:"Talk time"})}),Object(x.jsx)("th",{className:"px-3.5 2xl:px-4 py-3 text-center",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.colWebcam",defaultMessage:"Webcam Time"})}),Object(x.jsx)("th",{className:"px-3.5 2xl:px-4 py-3 text-center",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.colMessages",defaultMessage:"Messages"})}),Object(x.jsx)("th",{className:"px-3.5 2xl:px-4 py-3 col-text-left",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.colEmojis",defaultMessage:"Emojis"})}),Object(x.jsx)("th",{className:"px-3.5 2xl:px-4 py-3 text-center",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.colRaiseHands",defaultMessage:"Raise Hand"})}),Object(x.jsxs)("th",{className:"px-3.5 2xl:px-4 py-3 text-center ".concat("overview_activityscore"===r?"cursor-pointer":""),onClick:function(){"overview_activityscore"===r&&e.toggleActivityScoreOrder()},children:[Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.colActivityScore",defaultMessage:"Activity Score"}),"overview_activityscore"===r?Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"asc"===i?"M17 13l-5 5m0 0l-5-5m5 5V6":"M7 11l5-5m0 0l5 5m-5-5v12"})}):null]}),Object(x.jsx)("th",{className:"px-3.5 2xl:px-4 py-3 text-center",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.colStatus",defaultMessage:"Status"})})]})}),Object(x.jsx)("tbody",{className:"bg-white divide-y whitespace-nowrap",children:"object"===typeof s&&Object.values(s||{}).length>0?Object.values(s||{}).sort((function(e,t){return"overview_activityscore"===r&&u[e.intId]<u[t.intId]?"desc"===i?1:-1:"overview_activityscore"===r&&u[e.intId]>u[t.intId]?"desc"===i?-1:1:!1===e.isModerator&&!0===t.isModerator?1:!0===e.isModerator&&!1===t.isModerator||e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})).map((function(e){return Object(x.jsxs)("tr",{className:"text-gray-700",children:[Object(x.jsxs)("td",{className:"px-3.5 2xl:px-4 py-3 col-text-left text-sm",children:[Object(x.jsxs)("div",{className:"inline-block relative w-8 h-8 rounded-full",children:[Object(x.jsx)(O,{user:e}),Object(x.jsx)("div",{className:"absolute inset-0 rounded-full shadow-inner","aria-hidden":"true"})]}),"\xa0\xa0\xa0",Object(x.jsxs)("div",{className:"inline-block",children:[Object(x.jsx)("p",{className:"font-semibold",children:e.name}),Object(x.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),Object(x.jsx)(b.a,{value:e.registeredOn,month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),e.leftOn>0?Object(x.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Object(x.jsx)(b.a,{value:e.leftOn,month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})]}):null]})]}),Object(x.jsxs)("td",{className:"px-3.5 2xl:px-4 py-3 text-sm text-center items-center",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728m-9.9-2.829a5 5 0 010-7.07m7.072 0a5 5 0 010 7.07M13 12a1 1 0 11-2 0 1 1 0 012 0z"})}),"\xa0",d((e.leftOn>0?e.leftOn:(new Date).getTime())-e.registeredOn),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"bg-gray-200 transition-colors duration-500 rounded-full overflow-hidden",title:"".concat(o(e.registeredOn,e.leftOn).toString(),"%"),children:Object(x.jsx)("div",{"aria-label":" ",className:"bg-gradient-to-br from-green-100 to-green-600 transition-colors duration-900 h-1.5",style:{width:"".concat(o(e.registeredOn,e.leftOn).toString(),"%")},role:"progressbar"})})]}),Object(x.jsx)("td",{className:"px-3.5 2xl:px-4 py-3 text-sm text-center",children:e.talk.totalTime>0?Object(x.jsxs)("span",{className:"text-center",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),"\xa0",d(e.talk.totalTime)]}):null}),Object(x.jsx)("td",{className:"px-3.5 2xl:px-4 py-3 text-sm text-center",children:l(e.webcams)>0?Object(x.jsxs)("span",{className:"text-center",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"\xa0",d(l(e.webcams))]}):null}),Object(x.jsx)("td",{className:"px-3.5 2xl:px-4 py-3 text-sm text-center",children:e.totalOfMessages>0?Object(x.jsxs)("span",{children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"\xa0",e.totalOfMessages]}):null}),Object(x.jsx)("td",{className:"px-3.5 2xl:px-4 py-3 text-sm col-text-left",children:Object.keys(c[e.intId]||{}).map((function(t){return Object(x.jsxs)("div",{className:"text-xs whitespace-nowrap",children:[Object(x.jsx)("i",{className:"".concat(g[t].icon," text-sm")}),"\xa0",c[e.intId][t],"\xa0",Object(x.jsx)(h.a,{id:g[t].intlId,defaultMessage:g[t].defaultMessage})]})}))}),Object(x.jsx)("td",{className:"px-3.5 2xl:px-4 py-3 text-sm text-center",children:e.emojis.filter((function(e){return"raiseHand"===e.name})).length>0?Object(x.jsxs)("span",{children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"\xa0",e.emojis.filter((function(e){return"raiseHand"===e.name})).length]}):null}),e.isModerator?Object(x.jsx)("td",{}):Object(x.jsxs)("td",{className:"px-3.5 2xl:px-4 py-3 text-sm text-center items",children:[Object(x.jsxs)("svg",{viewBox:"0 0 82 12",width:"82",height:"12",className:"flex-none m-auto inline",children:[Object(x.jsx)("rect",{width:"12",height:"12",fill:u[e.intId]>0?"#A7F3D0":"#e4e4e7"}),Object(x.jsx)("rect",{width:"12",height:"12",x:"14",fill:u[e.intId]>2?"#6EE7B7":"#e4e4e7"}),Object(x.jsx)("rect",{width:"12",height:"12",x:"28",fill:u[e.intId]>4?"#34D399":"#e4e4e7"}),Object(x.jsx)("rect",{width:"12",height:"12",x:"42",fill:u[e.intId]>6?"#10B981":"#e4e4e7"}),Object(x.jsx)("rect",{width:"12",height:"12",x:"56",fill:u[e.intId]>8?"#059669":"#e4e4e7"}),Object(x.jsx)("rect",{width:"12",height:"12",x:"70",fill:10===u[e.intId]?"#047857":"#e4e4e7"})]}),"\xa0",Object(x.jsx)("span",{className:"text-xs bg-gray-200 rounded-full px-2",children:Object(x.jsx)(b.b,{value:u[e.intId],minimumFractionDigits:"0",maximumFractionDigits:"1"})})]}),Object(x.jsx)("td",{className:"px-3.5 2xl:px-4 py-3 text-xs text-center",children:e.leftOn>0?Object(x.jsx)("span",{className:"px-2 py-1 font-semibold leading-tight text-red-700 bg-red-100 rounded-full",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.userStatusOffline",defaultMessage:"Offline"})}):Object(x.jsx)("span",{className:"px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-full",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.userStatusOnline",defaultMessage:"Online"})})})]},e)})):Object(x.jsx)("tr",{className:"text-gray-700",children:Object(x.jsx)("td",{colSpan:"8",className:"px-3.5 2xl:px-4 py-3 text-sm text-center",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.noUsers",defaultMessage:"No users"})})})})]})}}]),s}(c.a.Component),w=Object(m.c)(v),k=function(e){Object(r.a)(s,e);var t=Object(i.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(a.a)(s,[{key:"render",value:function(){var e=6e5,t=this.props,s=t.allUsers,n=t.intl;for(var a=Object.values(s||{}).map((function(e){return e.registeredOn})),r=Object.values(s||{}).map((function(e){return 0===e.leftOn?(new Date).getTime():e.leftOn})),i=Math.min.apply(Math,Object(j.a)(a)),l=Math.max.apply(Math,Object(j.a)(r)),c=[],o=i;o<l;)c.push(o),o+=e;return Object(x.jsxs)("table",{className:"w-full",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:"text-xs font-semibold tracking-wide text-gray-500 uppercase border-b bg-gray-100",children:[Object(x.jsxs)("th",{className:"px-3.5 2xl:px-4 py-3 col-text-left",children:[Object(x.jsx)(h.a,{id:"app.learningDashboard.user",defaultMessage:"User"}),Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})]}),c.map((function(e){return Object(x.jsx)("th",{className:"px-3.5 2xl:px-4 py-3 col-text-left",children:"".concat((t=e-i,new Date(t).toISOString().substr(11,8)))});var t}))]})}),Object(x.jsx)("tbody",{className:"bg-white divide-y whitespace-nowrap",children:"object"===typeof s&&Object.values(s||{}).length>0?Object.values(s||{}).sort((function(e,t){return!1===e.isModerator&&!0===t.isModerator?1:!0===e.isModerator&&!1===t.isModerator||e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})).map((function(t){return Object(x.jsxs)("tr",{className:"text-gray-700",children:[Object(x.jsx)("td",{className:"px-3.5 2xl:px-4 py-3",children:Object(x.jsxs)("div",{className:"flex items-center text-sm",children:[Object(x.jsx)("div",{className:"relative hidden w-8 h-8 rounded-full md:block",children:Object(x.jsx)(O,{user:t})}),"\xa0\xa0",Object(x.jsx)("div",{children:Object(x.jsx)("p",{className:"font-semibold",children:t.name})})]})}),c.map((function(s){var a=f(t,null,s,s+e);return Object(x.jsxs)("td",{className:"px-3.5 2xl:px-4 py-3 text-sm col-text-left",children:[t.registeredOn>s&&t.registeredOn<s+e?Object(x.jsx)("span",{title:n.formatDate(t.registeredOn,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-xs text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})})}):null,Object.keys(a).map((function(e){return Object(x.jsxs)("div",{className:"text-sm text-gray-800",children:[Object(x.jsx)("i",{className:"".concat(g[e].icon," text-sm")}),"\xa0",a[e],"\xa0",Object(x.jsx)(h.a,{id:g[e].intlId,defaultMessage:g[e].defaultMessage})]})})),t.leftOn>s&&t.leftOn<s+e?Object(x.jsx)("span",{title:n.formatDate(t.leftOn,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}):null]})}))]})})):null})]})}}]),s}(c.a.Component),y=Object(m.c)(k),M=function(e){Object(r.a)(s,e);var t=Object(i.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(a.a)(s,[{key:"render",value:function(){var e=this.props,t=e.allUsers,s=e.polls,n=this.props.intl;function a(e,t){return"undefined"!==typeof e.answers[t.pollId]?e.answers[t.pollId]:""}return Object(x.jsxs)("table",{className:"w-full",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:"text-xs font-semibold tracking-wide col-text-left text-gray-500 uppercase border-b bg-gray-100",children:[Object(x.jsxs)("th",{className:"px-3.5 2xl:px-4 py-3",children:[Object(x.jsx)(h.a,{id:"app.learningDashboard.user",defaultMessage:"User"}),Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})]}),"object"===typeof s&&Object.values(s||{}).length>0?Object.values(s||{}).map((function(e,t){return Object(x.jsx)("th",{className:"px-3.5 2xl:px-4 py-3 text-center",children:e.question||"Poll ".concat(t+1)})})):null]})}),Object(x.jsxs)("tbody",{className:"bg-white divide-y whitespace-nowrap",children:["object"===typeof t&&Object.values(t||{}).length>0?Object.values(t||{}).filter((function(e){return Object.values(e.answers).length>0})).sort((function(e,t){return!1===e.isModerator&&!0===t.isModerator?1:!0===e.isModerator&&!1===t.isModerator||e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})).map((function(e){return Object(x.jsxs)("tr",{className:"text-gray-700",children:[Object(x.jsx)("td",{className:"px-3.5 2xl:px-4 py-3",children:Object(x.jsxs)("div",{className:"flex items-center text-sm",children:[Object(x.jsx)("div",{className:"relative hidden w-8 h-8 rounded-full md:block",children:Object(x.jsx)(O,{user:e})}),"\xa0\xa0",Object(x.jsx)("div",{children:Object(x.jsx)("p",{className:"font-semibold",children:e.name})})]})}),"object"===typeof s&&Object.values(s||{}).length>0?Object.values(s||{}).map((function(t){return Object(x.jsxs)("td",{className:"px-3.5 2xl:px-4 py-3 text-sm text-center",children:[a(e,t),t.anonymous?Object(x.jsx)("span",{title:n.formatMessage({id:"app.learningDashboard.pollsTable.anonymousAnswer",defaultMessage:"Anonymous Poll (answers in the last row)"}),children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}):null]})})):null]})})):null,Object(x.jsxs)("tr",{className:"text-gray-700",children:[Object(x.jsx)("td",{className:"px-3.5 2xl:px-4 py-3",children:Object(x.jsxs)("div",{className:"flex items-center text-sm",children:[Object(x.jsxs)("div",{className:"relative hidden w-8 h-8 mr-3 rounded-full md:block",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"relative hidden w-8 h-8 mr-3 rounded-full md:block",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Object(x.jsx)("div",{className:"absolute inset-0 rounded-full shadow-inner","aria-hidden":"true"})]}),Object(x.jsx)("div",{children:Object(x.jsx)("p",{className:"font-semibold",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.pollsTable.anonymousRowName",defaultMessage:"Anonymous"})})})]})}),"object"===typeof s&&Object.values(s||{}).length>0?Object.values(s||{}).map((function(e){return Object(x.jsx)("td",{className:"px-3.5 2xl:px-4 py-3 text-sm text-center",children:e.anonymousAnswers.map((function(e){return Object(x.jsx)("p",{children:e})}))})})):null]})]})]})}}]),s}(c.a.Component),N=Object(m.c)(M);var L=function(e){var t=e.message;return Object(x.jsxs)("div",{className:"container flex flex-col items-center px-6 mx-auto",children:[Object(x.jsx)("svg",{className:"w-12 h-12 my-8 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:Object(x.jsx)("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),Object(x.jsx)("h1",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200",children:t})]})},C=function(e){Object(r.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).state={loading:!0,invalidSessionCount:0,activitiesJson:{},tab:"overview",meetingId:"",learningDashboardAccessToken:"",ldAccessTokenCopied:!1,sessionToken:""},a}return Object(a.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.setDashboardParams((function(){e.fetchActivitiesJson()}))}},{key:"setDashboardParams",value:function(e){var t="",s="",n="",a=new URLSearchParams(window.location.search),r=Object.fromEntries(a.entries());if("undefined"!==typeof r.meeting&&(s=r.meeting),"undefined"!==typeof r.sessionToken&&(n=r.sessionToken),"undefined"!==typeof r.report)t=r.report;else{var i="learningDashboardAccessToken-".concat(r.meeting);if(decodeURIComponent(document.cookie).split("; ").forEach((function(e){0===e.indexOf("".concat(i,"="))&&(t=e.substring("".concat(i,"=").length))})),""!==t){var l=new Date;l.setTime(l.getTime()+2592e6),document.cookie="learningDashboardAccessToken-".concat(s,"=").concat(t,"; expires=").concat(l.toGMTString(),"; path=/;SameSite=None;Secure")}}this.setState({learningDashboardAccessToken:t,meetingId:s,sessionToken:n},(function(){"function"===typeof e&&e()}))}},{key:"fetchActivitiesJson",value:function(){var e=this,t=this.state,s=t.learningDashboardAccessToken,n=t.meetingId,a=t.sessionToken,r=t.invalidSessionCount;if(""!==s)fetch("".concat(n,"/").concat(s,"/learning_dashboard_data.json")).then((function(e){return e.json()})).then((function(t){e.setState({activitiesJson:t,loading:!1,invalidSessionCount:0}),document.title="Learning Dashboard - ".concat(t.name)})).catch((function(){e.setState({loading:!1,invalidSessionCount:r+1})}));else if(""!==a){var i=new URL("/bigbluebutton/api/learningDashboard",window.location);fetch("".concat(i,"?sessionToken=").concat(a)).then((function(e){return e.json()})).then((function(t){if("SUCCESS"===t.response.returncode){var s=JSON.parse(t.response.data);e.setState({activitiesJson:s,loading:!1,invalidSessionCount:0}),document.title="Learning Dashboard - ".concat(s.name)}else e.setDashboardParams(),e.setState({loading:!1,invalidSessionCount:r+1})})).catch((function(){e.setState({loading:!1,invalidSessionCount:r+1})}))}else this.setState({loading:!1});setTimeout((function(){e.fetchActivitiesJson()}),1e4*Math.pow(2,r))}},{key:"copyPublicLink",value:function(){var e=this,t=this.state,s=t.learningDashboardAccessToken,n=t.meetingId,a=t.ldAccessTokenCopied,r=this.props.intl,i=window.location.href.split("?")[0];i+="?meeting=".concat(n,"&report=").concat(s,"&lang=").concat(r.locale),navigator.clipboard.writeText(i),!1===a&&(this.setState({ldAccessTokenCopied:!0}),setTimeout((function(){e.setState({ldAccessTokenCopied:!1})}),3e3))}},{key:"render",value:function(){var e,t=this,s=this.state,n=s.activitiesJson,a=s.tab,r=s.sessionToken,i=s.loading,l=s.learningDashboardAccessToken,c=s.ldAccessTokenCopied,o=this.props.intl;function d(){var e=Object.values(n.users||{}).reduce((function(e,t){return 0===e||t.registeredOn<e?t.registeredOn:e}),0);return Object.values(n.users||{}).reduce((function(e,t){return 0===t.leftOn?(new Date).getTime():t.leftOn>e?t.leftOn:e}),0)-e}function u(){return""===l&&""===r?o.formatMessage({id:"app.learningDashboard.errors.invalidToken",defaultMessage:"Invalid session token"}):n==={}||"undefined"===typeof n.name?o.formatMessage({id:"app.learningDashboard.errors.dataUnavailable",defaultMessage:"Data is no longer available"}):""}return document.title="".concat(o.formatMessage({id:"app.learningDashboard.dashboardTitle",defaultMessage:"Learning Dashboard"})," - ").concat(n.name),!1===i&&""!==u()?Object(x.jsx)(L,{message:u()}):Object(x.jsxs)("div",{className:"mx-10",children:[Object(x.jsxs)("div",{className:"flex items-start justify-between pb-3",children:[Object(x.jsxs)("h1",{className:"mt-3 text-2xl font-semibold whitespace-nowrap inline-block",children:[Object(x.jsx)(h.a,{id:"app.learningDashboard.dashboardTitle",defaultMessage:"Learning Dashboard"}),"\xa0",""!==l?Object(x.jsxs)("button",{type:"button",onClick:function(){t.copyPublicLink()},className:"text-sm font-medium text-blue-500 ease-out",children:["(",Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"\xa0",Object(x.jsx)(h.a,{id:"app.learningDashboard.shareButton",defaultMessage:"Share with others"}),")"]}):null,!0===c?Object(x.jsx)("span",{className:"text-xs text-gray-500 font-normal ml-2",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.linkCopied",defaultMessage:"Link successfully copied!"})}):null,Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"text-sm font-medium",children:n.name||""})]}),Object(x.jsxs)("div",{className:"mt-3 col-text-right py-1 text-gray-500 inline-block",children:[Object(x.jsxs)("p",{className:"font-bold",children:[Object(x.jsx)("div",{className:"inline",children:Object(x.jsx)(b.a,{value:n.createdOn,year:"numeric",month:"short",day:"numeric"})}),"\xa0\xa0",n.endedOn>0?Object(x.jsx)("span",{className:"px-2 py-1 font-semibold leading-tight text-red-700 bg-red-100 rounded-full",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.indicators.meetingStatusEnded",defaultMessage:"Ended"})}):null,0===n.endedOn?Object(x.jsx)("span",{className:"px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-full",children:Object(x.jsx)(h.a,{id:"app.learningDashboard.indicators.meetingStatusActive",defaultMessage:"Active"})}):null]}),Object(x.jsxs)("p",{children:[Object(x.jsx)(h.a,{id:"app.learningDashboard.indicators.duration",defaultMessage:"Duration"}),":\xa0",(e=d(),new Date(e).toISOString().substr(11,8))]})]})]}),Object(x.jsxs)("div",{className:"grid gap-6 mb-8 md:grid-cols-2 xl:grid-cols-4",children:[Object(x.jsx)("div",{"aria-hidden":"true",className:"cursor-pointer",onClick:function(){t.setState({tab:"overview"})},children:Object(x.jsx)(p,{name:0===n.endedOn?o.formatMessage({id:"app.learningDashboard.indicators.usersOnline",defaultMessage:"Active Users"}):o.formatMessage({id:"app.learningDashboard.indicators.usersTotal",defaultMessage:"Total Number Of Users"}),number:Object.values(n.users||{}).filter((function(e){return n.endedOn>0||0===e.leftOn})).length,cardClass:"border-pink-500",iconClass:"bg-pink-50 text-pink-500",onClick:function(){t.setState({tab:"overview"})},children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})}),Object(x.jsx)("div",{"aria-hidden":"true",className:"cursor-pointer",onClick:function(){t.setState({tab:"polling"})},children:Object(x.jsx)(p,{name:o.formatMessage({id:"app.learningDashboard.indicators.polls",defaultMessage:"Polls"}),number:Object.values(n.polls||{}).length,cardClass:"border-blue-500",iconClass:"bg-blue-100 text-blue-500",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})})}),Object(x.jsx)("div",{"aria-hidden":"true",className:"cursor-pointer",onClick:function(){t.setState({tab:"status_timeline"})},children:Object(x.jsx)(p,{name:o.formatMessage({id:"app.learningDashboard.indicators.raiseHand",defaultMessage:"Raise Hand"}),number:n&&n.users?Object.values(n.users).reduce((function(e,t){return e+t.emojis.filter((function(e){return"raiseHand"===e.name})).length}),0):0,cardClass:"border-purple-500",iconClass:"bg-purple-200 text-purple-500",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})})})}),Object(x.jsx)("div",{"aria-hidden":"true",className:"cursor-pointer",onClick:function(){t.setState({tab:"overview_activityscore"})},children:Object(x.jsx)(p,{name:o.formatMessage({id:"app.learningDashboard.indicators.activityScore",defaultMessage:"Activity Score"}),number:o.formatNumber(function(){var e=0,t=Object.values(n.users||{}).filter((function(e){return!e.isModerator})),s=t.length,a=t.map((function(e){return e.talk.totalTime})),r=Math.max.apply(Math,Object(j.a)(a)),i=a.reduce((function(e,t){return e+t}),0);i>0&&(e+=i/s/r*2);var l=t.map((function(e){return e.totalOfMessages})),c=Math.max.apply(Math,Object(j.a)(l)),o=l.reduce((function(e,t){return e+t}),0);c>0&&(e+=o/s/c*2);var d=t.map((function(e){return e.emojis.filter((function(e){return"raiseHand"===e.name})).length})),u=Math.max.apply(Math,Object(j.a)(d)),h=d.reduce((function(e,t){return e+t}),0);u>0&&(e+=h/s/c*2);var b=t.map((function(e){return e.emojis.filter((function(e){return"raiseHand"!==e.name})).length})),m=Math.max.apply(Math,Object(j.a)(b)),x=b.reduce((function(e,t){return e+t}),0);m>0&&(e+=x/s/m*2);var p=Object.values(n.polls||{}).length;return p>0&&(e+=t.reduce((function(e,t){return e+Object.values(t.answers||{}).length}),0)/s/p*2),e}()||0,{minimumFractionDigits:0,maximumFractionDigits:1}),cardClass:"border-green-500",iconClass:"bg-green-200 text-green-500",children:Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]})})})]}),Object(x.jsxs)("h1",{className:"block my-1 pr-2 text-xl font-semibold",children:["overview"===a||"overview_activityscore"===a?Object(x.jsx)(h.a,{id:"app.learningDashboard.usersTable.title",defaultMessage:"Overview"}):null,"status_timeline"===a?Object(x.jsx)(h.a,{id:"app.learningDashboard.statusTimelineTable.title",defaultMessage:"Status Timeline"}):null,"polling"===a?Object(x.jsx)(h.a,{id:"app.learningDashboard.pollsTable.title",defaultMessage:"Polling"}):null]}),Object(x.jsx)("div",{className:"w-full overflow-hidden rounded-md shadow-xs border-2 border-gray-100",children:Object(x.jsxs)("div",{className:"w-full overflow-x-auto",children:["overview"===a||"overview_activityscore"===a?Object(x.jsx)(w,{allUsers:n.users,totalOfActivityTime:d(),totalOfPolls:Object.values(n.polls||{}).length,tab:a}):null,"status_timeline"===a?Object(x.jsx)(y,{allUsers:n.users}):null,"polling"===a?Object(x.jsx)(N,{polls:n.polls,allUsers:n.users}):null]})})]})}}]),s}(c.a.Component),D=Object(m.c)(C),T=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,42)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),n(e),a(e),r(e),i(e)}))},S=["ar","dv","fa","he"];function I(){var e=navigator.language,t=new URLSearchParams(window.location.search),s=Object.fromEntries(t.entries());return"undefined"!==typeof s.lang&&(e=s.lang),e}var A=function(e){Object(r.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).state={intlMessages:{},intlLocale:I()},a.setMessages(),a.setRtl(),a}return Object(a.a)(s,[{key:"setMessages",value:function(){var e=this,t=function(e){return new Promise((function(t,s){var n="/html5client/locales/".concat(e.replace("-","_"),".json");fetch(n).then((function(e){return e.ok?t(e.json()):s()}))}))};Promise.all([t("en"),t(I())]).then((function(t){var s={};t[0]&&(s=Object.assign(s,t[0])),t[1]&&(s=Object.assign(s,t[1])),e.setState({intlMessages:s})})).catch((function(){}))}},{key:"setRtl",value:function(){var e=this.state.intlLocale;S.includes(e.substring(0,2))&&document.body.parentNode.setAttribute("dir","rtl")}},{key:"render",value:function(){var e=this.state,t=e.intlLocale,s=e.intlMessages;return Object(x.jsx)(u.a,{defaultLocale:"en",locale:t,messages:s,children:Object(x.jsx)(D,{})})}}]),s}(c.a.Component),B=document.getElementById("root");d.a.render(Object(x.jsx)(A,{}),B),T()}},[[39,1,2]]]);
//# sourceMappingURL=main.076ccbdb.chunk.js.map