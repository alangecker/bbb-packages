{"version":3,"sources":["meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardCleared.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardSend.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardUndo.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/clearWhiteboard.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendAnnotationHelper.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendBulkAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/undoAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/addAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/clearAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/removeAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/annotations/server/index.js","meteor://ðŸ’»app/imports/api/annotations/server/methods.js","meteor://ðŸ’»app/imports/api/annotations/server/publishers.js","meteor://ðŸ’»app/imports/api/annotations/server/streamer.js","meteor://ðŸ’»app/imports/api/annotations/addAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/index.js","meteor://ðŸ’»app/imports/api/auth-token-validation/server/modifiers/clearAuthTokenValidation.js","meteor://ðŸ’»app/imports/api/auth-token-validation/server/modifiers/upsertValidationState.js","meteor://ðŸ’»app/imports/api/auth-token-validation/server/index.js","meteor://ðŸ’»app/imports/api/auth-token-validation/server/publishers.js","meteor://ðŸ’»app/imports/api/auth-token-validation/index.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutClosed.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutJoinURL.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutStarted.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/joinedUsersChanged.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/updateTimeRemaining.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/createBreakout.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/endAllBreakouts.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/extendBreakoutsTime.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/requestJoinURL.js","meteor://ðŸ’»app/imports/api/breakouts/server/modifiers/clearBreakouts.js","meteor://ðŸ’»app/imports/api/breakouts/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/breakouts/server/index.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods.js","meteor://ðŸ’»app/imports/api/breakouts/server/publishers.js","meteor://ðŸ’»app/imports/api/breakouts/index.js","meteor://ðŸ’»app/imports/api/captions/server/handlers/padCreate.js","meteor://ðŸ’»app/imports/api/captions/server/handlers/padUpdate.js","meteor://ðŸ’»app/imports/api/captions/server/methods/addCaptionsPads.js","meteor://ðŸ’»app/imports/api/captions/server/methods/addPad.js","meteor://ðŸ’»app/imports/api/captions/server/methods/appendText.js","meteor://ðŸ’»app/imports/api/captions/server/methods/createCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/methods/editCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/methods/fetchReadOnlyPadId.js","meteor://ðŸ’»app/imports/api/captions/server/methods/takeOwnership.js","meteor://ðŸ’»app/imports/api/captions/server/methods/updateOwner.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/addCaption.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/clearCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/updateOwnerId.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/updatePad.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/updateReadOnlyPadId.js","meteor://ðŸ’»app/imports/api/captions/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/captions/server/helpers.js","meteor://ðŸ’»app/imports/api/captions/server/index.js","meteor://ðŸ’»app/imports/api/captions/server/methods.js","meteor://ðŸ’»app/imports/api/captions/server/publishers.js","meteor://ðŸ’»app/imports/api/captions/index.js","meteor://ðŸ’»app/imports/api/connection-status/server/methods/addConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/methods/voidConnection.js","meteor://ðŸ’»app/imports/api/connection-status/server/modifiers/clearConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/modifiers/updateConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/index.js","meteor://ðŸ’»app/imports/api/connection-status/server/methods.js","meteor://ðŸ’»app/imports/api/connection-status/server/publishers.js","meteor://ðŸ’»app/imports/api/connection-status/index.js","meteor://ðŸ’»app/imports/api/cursor/server/handlers/cursorUpdate.js","meteor://ðŸ’»app/imports/api/cursor/server/methods/publishCursorUpdate.js","meteor://ðŸ’»app/imports/api/cursor/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/cursor/server/index.js","meteor://ðŸ’»app/imports/api/cursor/server/methods.js","meteor://ðŸ’»app/imports/api/cursor/server/streamer.js","meteor://ðŸ’»app/imports/api/external-videos/server/handlers/startExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/handlers/stopExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/handlers/updateExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/emitExternalVideoEvent.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/startWatchingExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/stopWatchingExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/modifiers/startExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/modifiers/stopExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/modifiers/updateExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/external-videos/server/index.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods.js","meteor://ðŸ’»app/imports/api/external-videos/server/streamer.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChatCreated.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChatDestroyed.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChats.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods/createGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods/destroyGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/modifiers/addGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/modifiers/clearGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/group-chat/server/index.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods.js","meteor://ðŸ’»app/imports/api/group-chat/server/publishers.js","meteor://ðŸ’»app/imports/api/group-chat/index.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/clearPublicGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/groupChatMsgBroadcast.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/syncGroupsChat.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/userTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/chatMessageBeforeJoinCounter.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/clearPublicChatHistory.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/fetchMessagePerPage.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/sendGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/startUserTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/stopUserTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/addBulkGroupChatMsgs.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/addGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/addSystemMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/clearGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/startTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/stopTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/syncMeetingChatMsgs.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/index.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/publishers.js","meteor://ðŸ’»app/imports/api/group-chat-msg/index.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestApproved.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestWaitingLeft.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestsWaitingForApproval.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/allowPendingUsers.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/changeGuestPolicy.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/setGuestLobbyMessage.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/clearGuestUsers.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/removeGuest.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/setGuestStatus.js","meteor://ðŸ’»app/imports/api/guest-users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/guest-users/server/index.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods.js","meteor://ðŸ’»app/imports/api/guest-users/server/publishers.js","meteor://ðŸ’»app/imports/api/guest-users/index.js","meteor://ðŸ’»app/imports/api/local-settings/server/methods/userChangedLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/modifiers/clearLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/modifiers/setChangedLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/index.js","meteor://ðŸ’»app/imports/api/local-settings/server/methods.js","meteor://ðŸ’»app/imports/api/local-settings/server/publishers.js","meteor://ðŸ’»app/imports/api/local-settings/index.js","meteor://ðŸ’»app/imports/api/log-client/server/methods/logClient.js","meteor://ðŸ’»app/imports/api/log-client/server/index.js","meteor://ðŸ’»app/imports/api/log-client/server/methods.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/broadcastLayout.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/getAllMeetings.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/guestLobbyMessageChanged.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/guestPolicyChanged.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingCreation.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingDestruction.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingEnd.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingLockChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/recordingStatusChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/recordingTimerChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/selectRandomViewer.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/timeRemainingUpdate.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/userLockChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/webcamOnlyModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/changeLayout.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/clearRandomlySelectedUser.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/endMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleLockSettings.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleRecording.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleWebcamsOnlyForModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/transferUser.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/addMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/changeLayout.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/changeLockSettings.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/changeUserLock.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/clearExternalVideoMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/clearMeetingTimeRemaining.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/clearRecordMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/meetingHasEnded.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/setGuestLobbyMessage.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/setGuestPolicy.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/setPublishedPoll.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/updateRandomViewer.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/webcamOnlyModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/meetings/server/index.js","meteor://ðŸ’»app/imports/api/meetings/server/methods.js","meteor://ðŸ’»app/imports/api/meetings/server/publishers.js","meteor://ðŸ’»app/imports/api/meetings/index.js","meteor://ðŸ’»app/imports/api/note/server/handlers/padUpdate.js","meteor://ðŸ’»app/imports/api/note/server/methods/addPad.js","meteor://ðŸ’»app/imports/api/note/server/methods/createNote.js","meteor://ðŸ’»app/imports/api/note/server/modifiers/addNote.js","meteor://ðŸ’»app/imports/api/note/server/modifiers/clearNote.js","meteor://ðŸ’»app/imports/api/note/server/modifiers/updateNote.js","meteor://ðŸ’»app/imports/api/note/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/note/server/helpers.js","meteor://ðŸ’»app/imports/api/note/server/index.js","meteor://ðŸ’»app/imports/api/note/server/publishers.js","meteor://ðŸ’»app/imports/api/note/index.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollPublished.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollStarted.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollStopped.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/sendPollChatMsg.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/userResponded.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/userTypedResponse.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/userVoted.js","meteor://ðŸ’»app/imports/api/polls/server/methods/publishPoll.js","meteor://ðŸ’»app/imports/api/polls/server/methods/publishTypedVote.js","meteor://ðŸ’»app/imports/api/polls/server/methods/publishVote.js","meteor://ðŸ’»app/imports/api/polls/server/methods/startPoll.js","meteor://ðŸ’»app/imports/api/polls/server/methods/stopPoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/addPoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/clearPolls.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/removePoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/updateVotes.js","meteor://ðŸ’»app/imports/api/polls/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/polls/server/index.js","meteor://ðŸ’»app/imports/api/polls/server/methods.js","meteor://ðŸ’»app/imports/api/polls/server/publishers.js","meteor://ðŸ’»app/imports/api/polls/index.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/createNewPresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/removePresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/setPresenterInPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/syncGetPresentationPods.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/addPresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/clearPresentationPods.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/removePresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/setPresenterInPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/index.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/publishers.js","meteor://ðŸ’»app/imports/api/presentation-pods/index.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/handlers/presentationUploadTokenFail.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/handlers/presentationUploadTokenPass.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods/requestPresentationUploadToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods/setUsedToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/index.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/publishers.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/index.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationAdded.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationConversionUpdate.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationCurrentSet.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationDownloadableSet.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationRemove.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/removePresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/setPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/setPresentationDownloadable.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/addPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/clearPresentations.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/removePresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/setCurrentPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/setPresentationDownloadable.js","meteor://ðŸ’»app/imports/api/presentations/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentations/server/index.js","meteor://ðŸ’»app/imports/api/presentations/server/methods.js","meteor://ðŸ’»app/imports/api/presentations/server/publishers.js","meteor://ðŸ’»app/imports/api/presentations/index.js","meteor://ðŸ’»app/imports/api/screenshare/server/handlers/screenshareStarted.js","meteor://ðŸ’»app/imports/api/screenshare/server/handlers/screenshareStopped.js","meteor://ðŸ’»app/imports/api/screenshare/server/modifiers/addScreenshare.js","meteor://ðŸ’»app/imports/api/screenshare/server/modifiers/clearScreenshare.js","meteor://ðŸ’»app/imports/api/screenshare/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/screenshare/server/index.js","meteor://ðŸ’»app/imports/api/screenshare/server/methods.js","meteor://ðŸ’»app/imports/api/screenshare/server/publishers.js","meteor://ðŸ’»app/imports/api/screenshare/index.js","meteor://ðŸ’»app/imports/api/slides/server/handlers/slideChange.js","meteor://ðŸ’»app/imports/api/slides/server/handlers/slideResize.js","meteor://ðŸ’»app/imports/api/slides/server/methods/switchSlide.js","meteor://ðŸ’»app/imports/api/slides/server/methods/zoomSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/addSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/addSlidePositions.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/changeCurrentSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/clearSlides.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/clearSlidesPresentation.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/resizeSlide.js","meteor://ðŸ’»app/imports/api/slides/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/slides/server/helpers.js","meteor://ðŸ’»app/imports/api/slides/server/index.js","meteor://ðŸ’»app/imports/api/slides/server/methods.js","meteor://ðŸ’»app/imports/api/slides/server/publishers.js","meteor://ðŸ’»app/imports/api/slides/index.js","meteor://ðŸ’»app/imports/api/users/server/handlers/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/handlers/emojiStatus.js","meteor://ðŸ’»app/imports/api/users/server/handlers/presenterAssigned.js","meteor://ðŸ’»app/imports/api/users/server/handlers/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userEjected.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userInactivityInspect.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userJoin.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userJoined.js","meteor://ðŸ’»app/imports/api/users/server/handlers/validateAuthToken.js","meteor://ðŸ’»app/imports/api/users/server/methods/assignPresenter.js","meteor://ðŸ’»app/imports/api/users/server/methods/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/methods/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/methods/setEmojiStatus.js","meteor://ðŸ’»app/imports/api/users/server/methods/setMobileUser.js","meteor://ðŸ’»app/imports/api/users/server/methods/setRandomUser.js","meteor://ðŸ’»app/imports/api/users/server/methods/setUserEffectiveConnectionType.js","meteor://ðŸ’»app/imports/api/users/server/methods/toggleUserLock.js","meteor://ðŸ’»app/imports/api/users/server/methods/userActivitySign.js","meteor://ðŸ’»app/imports/api/users/server/methods/userLeaving.js","meteor://ðŸ’»app/imports/api/users/server/methods/userLeftMeeting.js","meteor://ðŸ’»app/imports/api/users/server/methods/validateAuthToken.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/addDialInUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/addUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/changePresenter.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/clearUsers.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/createDummyUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/setMobile.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/setUserEffectiveConnectionType.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/userEjected.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/userInactivityInspect.js","meteor://ðŸ’»app/imports/api/users/server/store/pendingAuthentications.js","meteor://ðŸ’»app/imports/api/users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/users/server/index.js","meteor://ðŸ’»app/imports/api/users/server/methods.js","meteor://ðŸ’»app/imports/api/users/server/publishers.js","meteor://ðŸ’»app/imports/api/users/index.js","meteor://ðŸ’»app/imports/api/users-infos/server/handlers/userInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods/removeUserInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods/requestUserInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/addUserInfo.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/clearUserInfo.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/clearUserInfoForRequester.js","meteor://ðŸ’»app/imports/api/users-infos/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/users-infos/server/index.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods.js","meteor://ðŸ’»app/imports/api/users-infos/server/publishers.js","meteor://ðŸ’»app/imports/api/users-infos/index.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/addUserPersistentData.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/clearUsersPersistentData.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/setloggedOutStatus.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/updateRole.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/index.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/publishers.js","meteor://ðŸ’»app/imports/api/users-persistent-data/index.js","meteor://ðŸ’»app/imports/api/users-settings/server/methods/addUserSettings.js","meteor://ðŸ’»app/imports/api/users-settings/server/modifiers/addUserSetting.js","meteor://ðŸ’»app/imports/api/users-settings/server/modifiers/clearUsersSettings.js","meteor://ðŸ’»app/imports/api/users-settings/server/index.js","meteor://ðŸ’»app/imports/api/users-settings/server/methods.js","meteor://ðŸ’»app/imports/api/users-settings/server/publishers.js","meteor://ðŸ’»app/imports/api/users-settings/index.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/floorChanged.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/userSharedHtml5Webcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/userUnsharedHtml5Webcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods/userShareWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods/userUnshareWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/clearVideoStreams.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/floorChanged.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/sharedWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/unsharedWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/video-streams/server/helpers.js","meteor://ðŸ’»app/imports/api/video-streams/server/index.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods.js","meteor://ðŸ’»app/imports/api/video-streams/server/publisher.js","meteor://ðŸ’»app/imports/api/video-streams/index.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/handlers/voiceCallStateEvent.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/modifiers/clearVoiceCallStates.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/index.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/publishers.js","meteor://ðŸ’»app/imports/api/voice-call-states/index.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/floorChanged.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/getVoiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/joinVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/leftVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/meetingMuted.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/mutedVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/talkingVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/voiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/ejectUserFromVoice.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteAllExceptPresenterToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteAllToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/addVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/changeMuteMeeting.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/clearVoiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/removeVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/updateVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/voice-users/server/index.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods.js","meteor://ðŸ’»app/imports/api/voice-users/server/publishers.js","meteor://ðŸ’»app/imports/api/voice-users/index.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/handlers/modifyWhiteboardAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods/addGlobalAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods/addIndividualAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods/removeGlobalAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods/removeIndividualAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/modifiers/clearWhiteboardMultiUser.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/modifiers/modifyWhiteboardAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/helpers.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/index.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/publishers.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/index.js","meteor://ðŸ’»app/imports/api/common/server/etherpad.js","meteor://ðŸ’»app/imports/api/common/server/helpers.js","meteor://ðŸ’»app/imports/ui/components/layout/enums.js","meteor://ðŸ’»app/imports/startup/server/ClientConnections.js","meteor://ðŸ’»app/imports/startup/server/etherpad.js","meteor://ðŸ’»app/imports/startup/server/index.js","meteor://ðŸ’»app/imports/startup/server/logger.js","meteor://ðŸ’»app/imports/startup/server/metrics.js","meteor://ðŸ’»app/imports/startup/server/minBrowserVersion.js","meteor://ðŸ’»app/imports/startup/server/redis.js","meteor://ðŸ’»app/imports/startup/server/settings.js","meteor://ðŸ’»app/imports/utils/lineEndings.js","meteor://ðŸ’»app/imports/utils/mimeTypes.js","meteor://ðŸ’»app/imports/utils/regex-weburl.js","meteor://ðŸ’»app/server/main.js"],"names":["module","export","default","handleWhiteboardAnnotations","_","link","v","check","modifyWhiteboardAccess","clearAnnotations","addAnnotation","meetingId","header","body","Object","userId","String","annotations","whiteboardId","multiUser","Array","each","annotation","wbId","handleWhiteboardCleared","AnnotationsStreamer","fullClear","Boolean","emit","handleWhiteboardSend","Metrics","queueMetrics","Meteor","settings","private","redis","metrics","annotationsQueueProcessInterval","ANNOTATION_PROCESS_INTERVAL","public","whiteboard","annotationsQueue","annotationsRecieverIsRunning","process","keys","length","forEach","setAnnotationQueueLength","setTimeout","hasOwnProperty","push","handleWhiteboardUndo","removeAnnotation","shapeId","annotationId","clearWhiteboard","RedisPubSub","extractCredentials","Logger","REDIS_CONFIG","CHANNEL","channels","toAkkaApps","EVENT_NAME","requesterUserId","payload","publishUserMessage","err","error","stack","sendAnnotation","sendAnnotationHelper","annotationType","id","status","annotationInfo","x","Number","y","fontColor","calcedFontSize","textBoxWidth","text","textBoxHeight","fontSize","dataPoints","type","position","color","thickness","points","dimensions","Match","Maybe","drawEndOnly","sendBulkAnnotations","undoAnnotation","Annotations","addAnnotationQuery","query","insertedId","upsert","selector","modifier","info","numberAffected","remove","processForHTML5ServerOnly","on","methods","AuthTokenValidation","ValidationStates","tokenValidation","findOne","connectionId","connection","validationStatus","VALIDATED","warn","find","debug","publish","boundAnnotations","bind","removeAnnotationsStreamer","addAnnotationsStreamer","get","StreamerCentral","instances","streamer","Streamer","retransmit","allowRead","includes","allowWrite","ANNOTATION_TYPE_TEXT","ANNOTATION_TYPE_PENCIL","handleCommonAnnotation","$set","$setOnInsert","$inc","version","handleTextUpdate","replace","handlePencilUpdate","DRAW_START","DRAW_UPDATE","DRAW_END","baseSelector","baseModifier","$push","$each","Mongo","Collection","isServer","_ensureIndex","exportDefault","clearAuthTokenValidation","ClientConnections","num","env","BBB_HTML5_ROLE","removeMeeting","upsertValidationState","reason","updatedAt","Date","getTime","JSON","stringify","authTokenValidation","boundAuthTokenValidation","freeze","NOT_VALIDATED","VALIDATING","INVALID","handleBreakoutClosed","clearBreakouts","breakoutId","handleBreakoutJoinURL","Breakouts","redirectToHtml5JoinURL","users","insertedTime","handleBreakoutRoomStarted","flat","DEFAULT_TIME_REMAINING","parentMeetingId","breakout","assign","joinedUsers","timeRemaining","joinedUsersChanged","parentId","usersMapped","map","user","name","update","handleUpdateTimeRemaining","options","multi","createBreakoutRoom","rooms","durationInMinutes","record","BREAKOUT_LIM","app","breakouts","breakoutRoomLimit","MIN_BREAKOUT_ROOMS","MAX_BREAKOUT_ROOMS","endAllBreakouts","extendBreakoutsTime","extendTimeInMinutes","requestJoinURL","userIdToInvite","handleBreakoutStarted","Users","ROLE_MODERATOR","role_moderator","role","User","fields","presenterSelector","$or","freeJoin","$elemMatch","externalId","isDefaultName","sequence","shortName","boundBreakouts","handlePadCreate","fetchReadOnlyPadId","pad","handlePadUpdate","getDataFromChangeset","updatePad","revs","changeset","data","addCaptionsPads","padIds","addPad","Captions","padId","readOnlyId","appendText","axios","CAPTIONS_TOKEN","appendTextURL","locale","captions","$regex","method","url","responseType","then","response","catch","createCaptions","generatePadId","isEnabled","getLocalesURL","withInstaceId","addCaption","instanceId","locales","editCaptions","getIndex","ownerId","index","startIndex","localeCode","endIndex","getReadOnlyIdURL","getDataFromResponse","updateReadOnlyPadId","readOnlyPadId","takeOwnership","updateOwnerId","updateOwner","verbose","clearCaptions","processForCaptionsPadOnly","hashSHA1","ETHERPAD","etherpad","CAPTIONS_CONFIG","BASENAME","basename","APP","INSTANCE_ID","LOCALES_URL","host","PORT","localesUrl","TOKEN","apikey","isCaptionsPad","splitPadId","split","splitChangeset","shift","join","enabled","fn","message","args","requestedBy","boundCaptions","addConnectionStatus","updateConnectionStatus","STATS","stats","logConnectionStatus","value","jitter","loss","rtt","log","voidConnection","clearConnectionStatus","ConnectionStatus","level","timestamp","connectionStatus","boundNote","handleCursorUpdate","CursorStreamer","CURSOR_PROCCESS_INTERVAL","cursorQueue","proccess","throttle","cursors","publishCursorUpdate","removeCursorStreamer","addCursorStreamer","streamerLog","serverLog","handleStartExternalVideo","startExternalVideo","externalVideoUrl","handleStopExternalVideo","stopExternalVideo","handleUpdateExternalVideo","updateExternalVideo","rate","time","state","emitExternalVideoEvent","playerStatus","startWatchingExternalVideo","stopWatchingExternalVideo","ExternalVideoMeetings","ExternalVideoStreamer","removeExternalVideoStreamer","addExternalVideoStreamer","allowRecentMessages","eventName","streamName","allowEmit","handleGroupChatCreated","addGroupChat","handleGroupChatDestroyed","handleGroupChats","chats","chat","createGroupChat","CHAT_ACCESS_PRIVATE","receiver","correlationId","now","msg","access","destroyGroupChat","GroupChat","chatId","createdBy","chatDocument","u","participants","safe","clearGroupChat","clearGroupChatMsg","groupChat","CHAT_CONFIG","PUBLIC_CHAT_TYPE","type_public","$all","boundGroupChat","CHAT_ACCESS_PUBLIC","CHAT_ACCESS","PUBLIC","PRIVATE","clearPublicChatHistory","handleGroupChatMsgBroadcast","addGroupChatMsg","addBulkGroupChatMsgs","bufferChatInsertsMs","msgBuffer","bulkFn","handleSyncGroupChat","syncMeetingChatMsgs","msgs","handleUserTyping","startTyping","chatMessageBeforeJoinCounter","GroupChatMsg","groupChats","fetch","chatIdWithCounter","msgCount","$lt","authTokenValidatedTime","count","filter","PUBLIC_GROUP_CHAT_ID","public_group_id","fetchMessagePerPage","ITENS_PER_PAGE","itemsPerPage","page","messages","sort","skip","limit","sendGroupChatMsg","RegexWebUrl","HTML_SAFE_MAP","parseMessage","parsedMessage","trim","c","startUserTyping","stopUserTyping","UsersTyping","stopTyping","userTyping","_objectSpread","_objectWithoutProperties","mappedMsgs","sender","restMsg","_id","ObjectID","_str","el","insertedCount","rawCollection","insertMany","BREAK_LINE","msgDocument","insert","addSystemMsg","extra","PUBLIC_CHAT_SYSTEM_ID","system_userid","CHAT_CLEAR_MESSAGE","system_messages_keys","chat_clear","SYSTEM_CHAT_TYPE","type_system","clearMsg","$eq","TYPING_TIMEOUT","isTypingTo","typingUser","sendMsgInitiated","stillTyping","bulkOperations","initializeOrderedBulkOp","msgToSync","updateOne","execute","handleClearPublicGroupChat","handleSyncGroupChatMsg","groupChatMsg","chatsIds","$gte","$in","usersTyping","pubishUsersTyping","boundUsersTyping","handleGuestApproved","setGuestStatus","approvedBy","guests","guest","handleGuestWaitingLeft","removeGuest","handleGuestsWaitingForApproval","stringHash","GuestUsers","COLOR_LIST","intId","approved","denied","loginTime","registeredOn","allowPendingUsers","mappedGuests","changeGuestPolicy","policyRule","setBy","policy","setGuestLobbyMessage","clearGuestUsers","cb","GUEST_STATUS_ALLOW","GUEST_STATUS_DENY","guestUsers","boundSlides","userChangedLocalSettings","LocalSettings","setChangedLocalSettings","userLocalSettings","isEqual","clearLocalSettings","numChanged","localSettings","boundLocalSettings","logDescription","logCode","extraInfo","userInfo","logContents","logClient","broadcastLayout","changeLayout","layout","setByUserId","applyTo","handleGetAllMeetings","handleMeetingCreation","handleGuestLobbyMessageChanged","handleGuestPolicyChanged","setGuestPolicy","addMeeting","meeting","props","durationInSecods","durationProps","duration","handleMeetingDestruction","destroyMeetingQueue","handleMeetingEnd","meetingHasEnded","Meetings","meetingType","meetingEnded","meetingEndedBy","meetingEndedReason","handleLockSettingsInMeeting","changeLockSettings","handleRecordingStatusChange","RecordMeetings","recording","handleRecordingTimerChange","randomlySelectedUser","updateRandomViewer","userIds","choice","handleTimeRemainingUpdate","MeetingTimeRemaining","timeLeftInSec","changeUserLock","handleChangeWebcamOnlyModerator","changeWebcamOnlyModerator","clearRandomlySelectedUser","endMeeting","toggleLockSettings","lockSettingsProps","disableCam","disableMic","disablePrivateChat","disablePublicChat","disableNote","hideUserList","lockedLayout","lockOnJoin","lockOnJoinConfigurable","disablePrivChat","disablePubChat","toggleRecording","meetingRecorded","allowedToRecord","recordObject","allowStartStopRecording","toggleWebcamsOnlyForModerator","webcamsOnlyForModerator","transferUser","fromMeetingId","toMeetingId","SanitizeHTML","initPads","LAYOUT_TYPE","addExternalVideo","meetingProp","breakoutProps","breakoutRooms","privateChatEnabled","extId","isBreakout","activityReportTracking","usersProp","guestPolicy","authenticatedGuest","maxUsers","allowModsToUnmuteUsers","meetingLayout","createdTime","createdDate","meetingExpireIfNoUserJoinedInMinutes","meetingExpireWhenLastUserLeftInMinutes","userInactivityInspectTimerInMinutes","userInactivityThresholdInMinutes","userActivitySignResponseDelayInMinutes","endWhenNoModerator","endWhenNoModeratorDelayInMinutes","welcomeProp","welcomeMsg","modOnlyMessage","welcomeMsgTemplate","recordProp","ObjectIncluding","autoStartRecording","password","viewerPass","moderatorPass","activityReportAccessToken","voiceProp","voiceConf","dialNumber","telVoice","muteOnStart","screenshareProps","red5ScreenshareIp","red5ScreenshareApp","screenshareConf","metadataProp","systemProps","html5InstanceId","restProps","newMeeting","sanitizeTextInChat","original","allowedTags","allowedAttributes","a","img","allowedSchemes","sanitizedWelcomeText","insertBlankTarget","s","i","substr","linkWithoutTarget","RegExp","test","lastIndex","publishedPoll","guestLobbyMessage","affectedUsers","locked","lockedBy","clearExternalVideoMeeting","clearMeetingTimeRemaining","clearUsers","clearUsersSettings","clearSlides","clearPolls","clearPresentationPods","clearVoiceUsers","clearUserInfo","clearScreenshare","clearNote","clearRecordMeeting","clearVoiceCallStates","clearVideoStreams","clearUsersPersistentData","clearWhiteboardMultiUser","setPublishedPoll","isPublished","updateRandomUser","requesterId","userList","intervals","Math","floor","random","previousMeeting","handleMeetingLocksChange","handleUserLockChange","handleSelectRandomViewer","handleBroadcastLayout","meetings","boundMeetings","recordMeetings","recordPublish","boundRecordMeetings","externalVideoMeetings","externalVideoPublish","boundExternalVideoMeetings","meetingTimeRemaining","timeRemainingPublish","boundtimeRemaining","updateNote","createNote","createPadURL","addNote","noteId","createURL","responseOuter","readOnlyURL","readOnlyNoteId","Note","processForNotePadOnly","NOTE_CONFIG","note","key","innerData","isNotePad","search","pollPublished","handleSendSystemChatForPublishedPoll","POLL_CHAT_MESSAGE","poll","chatMessage","pollId","pollStarted","addPoll","pollType","secretPoll","question","pollStopped","removePoll","sendPollChatMsg","CHAT_POLL_RESULTS_MESSAGE","chat_poll_result","pollResultData","userResponded","Polls","answerId","$pull","responses","userTypedResponse","answer","answers","questionId","userVoted","updateVotes","questionType","questionText","numVotes","numRespondents","numResponders","publishPoll","publishTypedVote","pollAnswer","MAX_INPUT_CHARS","maxTypedAnswerLength","activePoll","existingAnsId","substring","publishVote","pollAnswerId","allowedToVote","startPoll","pollTypes","Custom","stopPoll","userSelector","$ne","clientType","requester","handlePollStarted","handlePollStopped","handlePollPublished","handleUserVoted","handleUserResponded","handleUserTypedResponse","currentPoll","hasPoll","publishCurrentPoll","boundPolls","polls","handleCreateNewPresentationPod","addPresentationPod","currentPresenterId","podId","pod","handleRemovePresentationPod","removePresentationPod","handleSetPresenterInPod","setPresenterInPod","nextPresenterId","handleSyncGetPresentationPods","PresentationPods","pods","presentationPodIds","presentationPodsToRemove","$nin","p","currentPresenter","presentations","addPresentation","undefined","presentation","clearPresentations","clearPresentationUploadToken","presentationPods","boundPresentationPods","handlePresentationUploadTokenFail","PresentationUploadToken","filename","failed","authzToken","handlePresentationUploadTokenPass","used","requestPresentationUploadToken","setUsedToken","presentationUploadToken","boundPresentationUploadToken","handlePresentationAdded","handlePresentationConversionUpdate","Presentations","OFFICE_DOC_CONVERSION_FAILED_KEY","OFFICE_DOC_CONVERSION_INVALID_KEY","SUPPORTED_DOCUMENT_KEY","UNSUPPORTED_DOCUMENT_KEY","PAGE_COUNT_FAILED_KEY","PAGE_COUNT_EXCEEDED_KEY","PDF_HAS_BIG_PAGE_KEY","GENERATED_SLIDE_KEY","FILE_TOO_LARGE_KEY","presentationId","messageKey","presName","presentationName","statusModifier","maxFileSize","maxNumberPages","presentationToken","bigPageSize","pagesCompleted","numberOfPages","handlePresentationCurrentSet","setCurrentPresentation","handlePresentationDownloadableSet","setPresentationDownloadable","downloadable","handlePresentationRemove","removePresentation","setPresentation","HTTP","addSlide","getSlideText","content","addSlides","slides","slide","txtUri","current","pages","thumbUri","swfUri","svgUri","xOffset","yOffset","widthRatio","heightRatio","clearSlidesPresentation","oldCurrent","callback","newCurrent","oldPresentation","newPresentation","boundPresentations","handleScreenshareStarted","addScreenshare","handleScreenshareStopped","Screenshare","screenshare","boundScreenshare","handleSlideChange","changeCurrentSlide","pageId","handleSlideResize","resizeSlide","switchSlide","Slides","slideNumber","Presentation","Error","Slide","zoomSlide","probe","SVG","PNG","calculateSlideData","addSlidePositions","loadSlidesFromHttpAlways","requestWhiteboardHistory","slideId","USER_ID","SUPPORTED_TYPES","fetchImageSizes","imageUri","result","mime","width","height","restSlide","pngUri","imageSizeUri","slideData","slidePosition","SlidePositions","viewBoxWidth","viewBoxHeight","oldSlide","newSlide","numberAffectedSlidePositions","whiteboardIds","row","SlidePosition","calculatedData","slidePositions","publishPositions","boundSlidePositions","handleChangeRole","changeRole","changedBy","handleEmojiStatus","emoji","emojiTime","handlePresenterAssigned","changePresenter","setPresenterInPodReqMsg","credentials","presenterId","assignedBy","presenter","prevPresenter","defaultPodSelector","currentDefaultPod","setPresenterPayload","oldPresenter","handleRemoveUser","removeUser","handleEjectedUser","userEjected","reasonCode","handleUserInactivityInspect","userInactivityInspect","responseDelay","Integer","userJoin","authToken","handleUserJoined","addUser","handleValidateAuthToken","pendingAuthenticationsStore","createDummyUser","clearOtherSessions","sessionUserId","serverSessions","server","sessions","close","valid","waitForApproval","authTokenValidatedOn","pendingAuths","take","pendingAuth","methodInvocationObject","e","sessionId","setUserId","add","validated","inactivityCheck","currentConnectionId","assignPresenter","newPresenterId","newPresenterName","banUser","ejectedBy","setEmojiStatus","setMobileUser","setMobile","setRandomUser","setUserEffectiveConnectionType","setEffectiveConnectionType","effectiveConnectionType","toggleUserLock","lock","userActivitySign","userLeaving","auth","loggedOut","removeClientConnection","userLeftMeeting","validateAuthToken","requesterToken","addDialInUser","voiceUser","USER_CONFIG","ROLE_VIEWER","role_viewer","callerName","voiceOnlyUser","toLowerCase","authed","waitingForAcceptance","guestStatus","avatar","VoiceUsers","addUserPsersistentData","addVoiceUser","userData","Meeting","userInfos","sortName","mobile","isBreakoutUser","voiceUserId","callerNum","muted","talking","callingWith","listenOnly","joined","updateRole","doc","VideoStreams","setloggedOutStatus","clearUserInfoForRequester","clearAllSessions","ejectedReason","ejected","PendingAuthentitcations","constructor","store","generateKey","matches","handleUserEjected","currentUser","$exists","publishCurrentUser","boundUsers","handleUserInformation","addUserInfo","removeUserInformation","UserInfos","getUserInformation","externalUserId","toThirdParty","clearUsersInfo","clearUsersInfoForRequester","requestUserInformation","boundUserInfos","addUserPersistentData","UsersPersistentData","token","usersPersistentData","publishUsersPersistentData","addUserSettings","addUserSetting","logger","oldParameters","askForFeedbackOnLogout","autoJoin","autoShareWebcam","autoSwapLayout","clientTitle","customStyle","customStyleUrl","displayBrandingArea","enableScreensharing","enableVideo","forceListenOnly","hidePresentation","listenOnlyMode","multiUserPenOnly","multiUserTools","outsideToggleRecording","outsideToggleSelfVoice","presenterTools","shortcuts","skipCheck","oldParametersKeys","currentParameters","valueParser","val","parsedValue","parse","parameters","settingKey","normalizedKey","matchingNewKey","settingsAdded","entries","setting","UserSettings","Any","userSettings","mainRoomUserSettings","boundUserSettings","handleFloorChanged","floorChanged","lastFloorTime","handleUserSharedHtml5Webcam","sharedWebcam","isValidStream","stream","handleUserUnsharedHtml5Webcam","unsharedWebcam","userShareWebcam","userUnshareWebcam","getDeviceId","getUserName","BASE_FLOOR_TIME","deviceId","vu","FLASH_STREAM_REGEX","splitStream","videoStreams","boundVideoStreams","handleVoiceCallStateEvent","VoiceCallState","clientSession","callState","VoiceCallStates","voiceCallStates","boundVoiceCallStates","handleFloorChange","updateVoiceUser","handleGetVoiceUsers","removeVoiceUser","usersIds","m","voiceUsersIdsToUpdate","indexOf","voiceUsersToRemove","handleJoinVoiceUser","handleVoiceUpdate","isDialInUser","meetingID","handleMeetingMuted","changeMuteMeeting","handleVoiceUsers","voiceUsers","voice","ejectUserFromVoice","muteAllExceptPresenterToggle","toggleMeetingMuted","mutedBy","mute","muteAllToggle","muteToggle","uId","toggle","userToMute","_muted","spoke","clearVoiceUser","clearSpokeTimeout","spokeTimeoutHandles","TALKING_TIMEOUT","startTime","endTime","timeoutHandle","spokeDelay","handleLeftVoiceUser","handleTalkingVoiceUser","handleMutedVoiceUser","toggleVoice","muteAllUsers","muteAllExceptPresenter","onCloseConnection","bindEnvironment","_session","socket","debounce","boundVoiceUser","handleModifyWhiteboardAccess","addGlobalAccess","getUsers","addIndividualAccess","getMultiUser","removeGlobalAccess","removeIndividualAccess","WhiteboardMultiUser","handleGetWhiteboardAccess","isArray","whiteboardMultiUser","boundMultiUser","sha1","BASE_URL","port","HASH_SIZE","encodeURIComponent","checkTokenURL","str","toString","checkServer","Promise","resolve","reject","MSG_DIRECT_TYPE","NODE_USER","clearTimeout","item","l","envelope","routing","msgType","shouldSkip","credentialsArray","DEVICE_TYPE","CAMERADOCK_POSITION","ACTIONS","PANELS","CUSTOM_LAYOUT","SMART_LAYOUT","PRESENTATION_FOCUS","VIDEO_FOCUS","MOBILE","TABLET_PORTRAIT","TABLET_LANDSCAPE","TABLET","DESKTOP","CONTENT_TOP","CONTENT_RIGHT","CONTENT_BOTTOM","CONTENT_LEFT","SIDEBAR_CONTENT_BOTTOM","SET_AUTO_ARRANGE_LAYOUT","SET_IS_RTL","SET_LAYOUT_TYPE","SET_DEVICE_TYPE","SET_FONT_SIZE","SET_LAYOUT_LOADED","SET_LAYOUT_INPUT","SET_SIDEBAR_NAVIGATION_PANEL","SET_SIDEBAR_CONTENT_PANEL","SET_ID_CHAT_OPEN","SET_BROWSER_SIZE","SET_HAS_BANNER_BAR","SET_HAS_NOTIFICATIONS_BAR","SET_NAVBAR_OUTPUT","SET_ACTIONBAR_OUTPUT","SET_SIDEBAR_NAVIGATION_IS_OPEN","SET_SIDEBAR_NAVIGATION_SIZE","SET_SIDEBAR_NAVIGATION_OUTPUT","SET_SIDEBAR_NAVIGATION_IS_RESIZABLE","SET_SIDEBAR_NAVIGATION_RESIZABLE_EDGE","SET_SIDEBAR_CONTENT_IS_OPEN","SET_SIDEBAR_CONTENT_SIZE","SET_SIDEBAR_CONTENT_PANEL_TYPE","SET_SIDEBAR_CONTENT_OUTPUT","SET_SIDEBAR_CONTENT_IS_RESIZABLE","SET_SIDEBAR_CONTENT_RESIZABLE_EDGE","SET_MEDIA_AREA_SIZE","SET_NUM_CAMERAS","SET_CAMERA_DOCK_IS_DRAGGING","SET_CAMERA_DOCK_IS_RESIZING","SET_CAMERA_DOCK_POSITION","SET_CAMERA_DOCK_SIZE","SET_CAMERA_DOCK_OPTIMAL_GRID_SIZE","SET_CAMERA_DOCK_OUTPUT","SET_CAMERA_DOCK_IS_DRAGGABLE","SET_CAMERA_DOCK_IS_RESIZABLE","SET_CAMERA_DOCK_RESIZABLE_EDGE","SET_DROP_AREAS","SET_PRESENTATION_IS_OPEN","SET_PRESENTATION_CURRENT_SLIDE_SIZE","SET_PRESENTATION_NUM_CURRENT_SLIDE","SET_PRESENTATION_SLIDES_LENGTH","SET_PRESENTATION_SIZE","SET_PRESENTATION_OUTPUT","SET_PRESENTATION_IS_RESIZABLE","SET_PRESENTATION_RESIZABLE_EDGE","SET_FULLSCREEN_ELEMENT","SET_HAS_SCREEN_SHARE","SET_SCREEN_SHARE_SIZE","SET_SCREEN_SHARE_OUTPUT","SET_HAS_EXTERNAL_VIDEO","SET_EXTERNAL_VIDEO_SIZE","SET_EXTERNAL_VIDEO_OUTPUT","USERLIST","CHAT","POLL","CAPTIONS","BREAKOUT","SHARED_NOTES","WAITING_USERS","NONE","syncInterval","syncUsersWithConnectionManager","connections","Map","setInterval","print","syncConnections","syncConnectionsWithServer","exists","createMeetingConnections","sessionConnections","has","onClose","set","getConnectionsForClient","mapConnectionsObj","k","meetingConnections","filteredConnections","delete","activeConnections","from","onlineUsers","onlineUsersId","usersQuery","userWithoutConnectionIds","removedUsersWithoutConnection","ClientConnectionsSingleton","isPadMessage","getInstanceIdFromPadMessage","INSTANCE_ID_REGEX","core","isPadCreate","isPadUpdate","match","parseInt","eventEmitter","redisPubSub","WebAppInternals","Langmap","fs","lookupUserAgent","lookup","Redis","setMinBrowserVersions","guestWaitHtml","isDevelopment","meteorRoot","realpathSync","cwd","applicationRoot","AVAILABLE_LOCALES","readdirSync","FALLBACK_LOCALES","Assets","getText","exit","startup","APP_CONFIG","CDN_URL","cdn","customHeartbeat","newHeartbeat","heartbeat","currentTime","ws","lastSentFrameTimestamp","session","_meteorSession","supportsHeartbeats","ping","hto_ref","sentAt","heartbeatTimeout","newSend","send","meteorHeartbeat","_seenPacket","_heartbeatTimeoutHandle","_clearHeartbeatTimeoutTimer","readyState","Buffer","_driver","write","console","values","recv","bbbFixApplied","__proto__","BrowserPolicy","disallowEval","allowInlineScripts","allowInlineStyles","allowImageDataUrl","allowFontDataUrl","allowOriginForAll","setBundledJsCssPrefix","fontRegExp","WebApp","rawConnectHandlers","use","req","res","next","_parsedUrl","pathname","setHeader","generateLocaleOptions","tempAggregateLocales","file","localeName","nativeName","reverse","self","findIndex","avaibleLocalesNamesJSON","connectHandlers","html5clientStatus","writeHead","end","fallback","defaultSettings","application","fallbackLocale","override","overrideLocale","browserLocale","init","localeFile","usableLocales","reduce","normalizedLocale","regionDefault","toUpperCase","normDefault","specFallback","normFallback","regionDefaultLocale","userName","reqUserName","comment","rating","feedback","userAgent","headers","hasError","getBinary","emitter","createLogger","format","transports","LOG_CONFIG","combine","colorize","splat","simple","Console","prettyPrint","humanReadableUnhandledException","handleExceptions","path","metricsDumpIntervalMs","metricsFolderPath","removeMeetingOnEnd","addEvent","messageLength","currentlyInQueue","wasInQueue","payloadSize","processEvent","size","processingStartTimestamp","currentProcessingTimestamp","processTime","min","max","last","total","avg","processingTime","annotationQueueLength","startDumpFile","fileDate","fullYear","getFullYear","month","getMonth","padStart","day","getDate","hour","getHours","minutes","getMinutes","seconds","getSeconds","folderName","fileName","folderPath","fullFilePath","existsSync","mkdirSync","writeFileSync","metricsSingleton","setMinimumBrowserVersions","minBrowserVersions","versions","elem","Infinity","browser","EventEmitter2","queue","NO_MEETING_ID","makeEnvelope","channel","getInstanceIdFromMessage","instanceIdFromMessage","MeetingMessageQueue","asyncMessages","redisDebugEnabled","autostart","handleTask","taskHandler","isAsync","beginHandleTimestamp","called","callNext","queueId","dataLength","queueLength","onError","analytics","includeChat","emitAsync","handlePublishError","config","didSendRequestEvent","REDIS_HOST","redisConf","customRedisChannel","pub","createClient","sub","meetingsQueues","async","handleSubscribe","handleMessage","channelsToSubscribe","subscribeTo","psubscribe","updateConfig","publishSystemMessage","pattern","ignored","ignoredMessages","date","toISOString","meetingIdFromMessageCoreHeader","meetingIdFromMessageMeetingProp","meetingIdForMeetingEnded","publishVoiceMessage","publishMeetingMessage","RedisPubSubSingleton","YAML","DEFAULT_SETTINGS_FILE_PATH","BBB_HTML5_SETTINGS","LOCAL_SETTINGS_FILE_PATH","BBB_HTML5_LOCAL_SETTINGS","SETTINGS","readFileSync","LOCAL_CONFIG","merge","__meteor_runtime_config__","PUBLIC_SETTINGS","CARRIAGE_RETURN","NEW_LINE","XLS","XLSX","DOC","DOCX","PPT","PPTX","ODT","RTF","TXT","ODS","ODP","PDF","JPEG","UPLOAD_SUPORTED","global"],"mappings":"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","file":"/app.js","sourcesContent":["import _ from 'lodash';\nimport { check } from 'meteor/check';\nimport modifyWhiteboardAccess from '/imports/api/whiteboard-multi-user/server/modifiers/modifyWhiteboardAccess';\nimport clearAnnotations from '../modifiers/clearAnnotations';\nimport addAnnotation from '../modifiers/addAnnotation';\n\nexport default function handleWhiteboardAnnotations({ header, body }, meetingId) {\n  check(header, Object);\n  if (header.userId !== 'nodeJSapp') { return false; }\n\n  check(meetingId, String);\n  check(body, Object);\n\n  const { annotations, whiteboardId, multiUser } = body;\n\n  check(annotations, Array);\n  check(whiteboardId, String);\n  check(multiUser, Array);\n\n  clearAnnotations(meetingId, whiteboardId);\n\n  _.each(annotations, (annotation) => {\n    const { wbId, userId } = annotation;\n    addAnnotation(meetingId, wbId, userId, annotation);\n  });\n\n  modifyWhiteboardAccess(meetingId, whiteboardId, multiUser);\n}\n","import { check } from 'meteor/check';\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\n\nimport clearAnnotations from '../modifiers/clearAnnotations';\n\nexport default function handleWhiteboardCleared({ body }, meetingId) {\n  check(body, {\n    userId: String,\n    whiteboardId: String,\n    fullClear: Boolean,\n  });\n\n  const { whiteboardId, fullClear, userId } = body;\n\n  if (fullClear) {\n    AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId });\n    return clearAnnotations(meetingId, whiteboardId);\n  }\n\n  AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId, userId });\n  return clearAnnotations(meetingId, whiteboardId, userId);\n}\n","import { check } from 'meteor/check';\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\nimport addAnnotation from '../modifiers/addAnnotation';\nimport Metrics from '/imports/startup/server/metrics';\n\nconst { queueMetrics } = Meteor.settings.private.redis.metrics;\n\nconst {\n  annotationsQueueProcessInterval: ANNOTATION_PROCESS_INTERVAL,\n} = Meteor.settings.public.whiteboard;\n\nlet annotationsQueue = {};\nlet annotationsRecieverIsRunning = false;\n\nconst process = () => {\n  if (!Object.keys(annotationsQueue).length) {\n    annotationsRecieverIsRunning = false;\n    return;\n  }\n  annotationsRecieverIsRunning = true;\n  Object.keys(annotationsQueue).forEach((meetingId) => {\n    AnnotationsStreamer(meetingId).emit('added', { meetingId, annotations: annotationsQueue[meetingId] });\n    if (queueMetrics) {\n      Metrics.setAnnotationQueueLength(meetingId, 0);\n    }\n  });\n  annotationsQueue = {};\n\n  Meteor.setTimeout(process, ANNOTATION_PROCESS_INTERVAL);\n};\n\nexport default function handleWhiteboardSend({ header, body }, meetingId) {\n  const userId = header.userId;\n  const annotation = body.annotation;\n\n  check(userId, String);\n  check(annotation, Object);\n\n  const whiteboardId = annotation.wbId;\n  check(whiteboardId, String);\n\n  if (!annotationsQueue.hasOwnProperty(meetingId)) {\n    annotationsQueue[meetingId] = [];\n  }\n\n  annotationsQueue[meetingId].push({ meetingId, whiteboardId, userId, annotation });\n  if (queueMetrics) {\n    Metrics.setAnnotationQueueLength(meetingId, annotationsQueue[meetingId].length);\n  }\n  if (!annotationsRecieverIsRunning) process();\n\n  return addAnnotation(meetingId, whiteboardId, userId, annotation);\n}\n","import { check } from 'meteor/check';\n\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\nimport removeAnnotation from '../modifiers/removeAnnotation';\n\nexport default function handleWhiteboardUndo({ body }, meetingId) {\n  const whiteboardId = body.whiteboardId;\n  const shapeId = body.annotationId;\n\n  check(whiteboardId, String);\n  check(shapeId, String);\n\n  AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId, shapeId });\n  return removeAnnotation(meetingId, whiteboardId, shapeId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearWhiteboard(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ClearWhiteboardPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(whiteboardId, String);\n\n    const payload = {\n      whiteboardId,\n    };\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method clearWhiteboard ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport sendAnnotationHelper from './sendAnnotationHelper';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function sendAnnotation(annotation) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    sendAnnotationHelper(annotation, meetingId, requesterUserId);\n  } catch (err) {\n    Logger.error(`Exception while invoking method sendAnnotation ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function sendAnnotationHelper(annotation, meetingId, requesterUserId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendWhiteboardAnnotationPubMsg';\n\n  try {\n    const whiteboardId = annotation.wbId;\n\n    check(annotation, Object);\n    check(whiteboardId, String);\n\n    if (annotation.annotationType === 'text') {\n      check(annotation, {\n        id: String,\n        status: String,\n        annotationType: String,\n        annotationInfo: {\n          x: Number,\n          y: Number,\n          fontColor: Number,\n          calcedFontSize: Number,\n          textBoxWidth: Number,\n          text: String,\n          textBoxHeight: Number,\n          id: String,\n          whiteboardId: String,\n          status: String,\n          fontSize: Number,\n          dataPoints: String,\n          type: String,\n        },\n        wbId: String,\n        userId: String,\n        position: Number,\n      });\n    } else {\n      check(annotation, {\n        id: String,\n        status: String,\n        annotationType: String,\n        annotationInfo: {\n          color: Number,\n          thickness: Number,\n          points: Array,\n          id: String,\n          whiteboardId: String,\n          status: String,\n          type: String,\n          dimensions: Match.Maybe([Number]),\n        },\n        wbId: String,\n        userId: String,\n        position: Number,\n      });\n    }\n\n    const payload = {\n      annotation,\n      drawEndOnly: true,\n    };\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method sendAnnotationHelper ${err.stack}`);\n  }\n}\n","import { extractCredentials } from '/imports/api/common/server/helpers';\nimport sendAnnotationHelper from './sendAnnotationHelper';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function sendBulkAnnotations(payload) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  try {\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    payload.forEach((annotation) => sendAnnotationHelper(annotation, meetingId, requesterUserId));\n    return true;\n  } catch (err) {\n    Logger.error(`Exception while invoking method sendBulkAnnotations ${err.stack}`);\n    return false;\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function undoAnnotation(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UndoWhiteboardPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(whiteboardId, String);\n\n    const payload = {\n      whiteboardId,\n    };\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method undoAnnotation ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Annotations from '/imports/api/annotations';\nimport addAnnotationQuery from '/imports/api/annotations/addAnnotation';\n\nexport default function addAnnotation(meetingId, whiteboardId, userId, annotation) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(annotation, Object);\n\n  const query = addAnnotationQuery(meetingId, whiteboardId, userId, annotation);\n\n  try {\n    const { insertedId } = Annotations.upsert(query.selector, query.modifier);\n\n    if (insertedId) {\n      Logger.info(`Added annotation id=${annotation.id} whiteboard=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding annotation to collection: ${err}`);\n  }\n}\n","import Annotations from '/imports/api/annotations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearAnnotations(meetingId, whiteboardId, userId) {\n  const selector = {};\n\n  if (meetingId) {\n    selector.meetingId = meetingId;\n  }\n\n  if (whiteboardId) {\n    selector.whiteboardId = whiteboardId;\n  }\n\n  if (userId) {\n    selector.userId = userId;\n  }\n\n  try {\n    const numberAffected = Annotations.remove(selector);\n\n    if (numberAffected) {\n      if (userId) {\n        Logger.info(`Cleared Annotations for userId=${userId} where whiteboard=${whiteboardId}`);\n        return;\n      }\n\n      if (whiteboardId) {\n        Logger.info(`Cleared Annotations for whiteboard=${whiteboardId}`);\n        return;\n      }\n\n      if (meetingId) {\n        Logger.info(`Cleared Annotations (${meetingId})`);\n        return;\n      }\n\n      Logger.info('Cleared Annotations (all)');\n    }\n  } catch (err) {\n    Logger.error(`Removing Annotations from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Annotations from '/imports/api/annotations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeAnnotation(meetingId, whiteboardId, shapeId) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(shapeId, String);\n\n  const selector = {\n    meetingId,\n    whiteboardId,\n    id: shapeId,\n  };\n\n  try {\n    const numberAffected = Annotations.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed annotation id=${shapeId} whiteboard=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing annotation from collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleWhiteboardCleared from './handlers/whiteboardCleared';\nimport handleWhiteboardUndo from './handlers/whiteboardUndo';\nimport handleWhiteboardSend from './handlers/whiteboardSend';\nimport handleWhiteboardAnnotations from './handlers/whiteboardAnnotations';\n\nRedisPubSub.on('ClearWhiteboardEvtMsg', handleWhiteboardCleared);\nRedisPubSub.on('UndoWhiteboardEvtMsg', handleWhiteboardUndo);\nRedisPubSub.on('SendWhiteboardAnnotationEvtMsg', handleWhiteboardSend);\nRedisPubSub.on('GetWhiteboardAnnotationsRespMsg', processForHTML5ServerOnly(handleWhiteboardAnnotations));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport undoAnnotation from './methods/undoAnnotation';\nimport clearWhiteboard from './methods/clearWhiteboard';\nimport sendAnnotation from './methods/sendAnnotation';\nimport sendBulkAnnotations from './methods/sendBulkAnnotations';\n\nMeteor.methods({\n  undoAnnotation,\n  clearWhiteboard,\n  sendAnnotation,\n  sendBulkAnnotations,\n});\n","import Annotations from '/imports/api/annotations';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction annotations() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Annotations was requested by unauth connection ${this.connection.id}`);\n    return Annotations.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Annotations', { meetingId, userId });\n\n  return Annotations.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundAnnotations = annotations.bind(this);\n  return boundAnnotations(...args);\n}\n\nMeteor.publish('annotations', publish);\n","import Logger from '/imports/startup/server/logger';\n\nexport function removeAnnotationsStreamer(meetingId) {\n  Logger.info(`Removing Annotations streamer object for meeting ${meetingId}`);\n  delete Meteor.StreamerCentral.instances[`annotations-${meetingId}`];\n}\n\nexport function addAnnotationsStreamer(meetingId) {\n  const streamer = new Meteor.Streamer(`annotations-${meetingId}`, { retransmit: false });\n\n  streamer.allowRead(function allowRead() {\n    if (!this.userId) return false;\n\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.allowWrite(function allowWrite() {\n    return false;\n  });\n}\n\nexport default function get(meetingId) {\n  return Meteor.StreamerCentral.instances[`annotations-${meetingId}`];\n}\n","import { check } from 'meteor/check';\n\nconst ANNOTATION_TYPE_TEXT = 'text';\nconst ANNOTATION_TYPE_PENCIL = 'pencil';\n\n// line, triangle, ellipse, rectangle\nfunction handleCommonAnnotation(meetingId, whiteboardId, userId, annotation) {\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const selector = {\n    meetingId,\n    id,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      whiteboardId,\n      meetingId,\n      id,\n      status,\n      annotationType,\n      annotationInfo,\n      wbId,\n    },\n    $setOnInsert: {\n      position,\n    },\n    $inc: { version: 1 },\n  };\n\n  return { selector, modifier };\n}\n\nfunction handleTextUpdate(meetingId, whiteboardId, userId, annotation) {\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const selector = {\n    meetingId,\n    id,\n    userId,\n  };\n\n  annotationInfo.text = annotationInfo.text.replace(/[\\r]/g, '\\n');\n\n  const modifier = {\n    $set: {\n      whiteboardId,\n      meetingId,\n      id,\n      status,\n      annotationType,\n      annotationInfo,\n      wbId,\n    },\n    $setOnInsert: {\n      position,\n    },\n    $inc: { version: 1 },\n  };\n\n  return { selector, modifier };\n}\n\nfunction handlePencilUpdate(meetingId, whiteboardId, userId, annotation) {\n  const DRAW_START = 'DRAW_START';\n  const DRAW_UPDATE = 'DRAW_UPDATE';\n  const DRAW_END = 'DRAW_END';\n\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const baseSelector = {\n    meetingId,\n    id,\n    userId,\n    whiteboardId,\n  };\n\n  let baseModifier;\n  switch (status) {\n    case DRAW_START:\n      // on start we split the points\n\n      // create the 'pencil_base'\n      // TODO: find and removed unused props (chunks, version, etc)\n      baseModifier = {\n        $set: {\n          id,\n          userId,\n          meetingId,\n          whiteboardId,\n          position,\n          status,\n          annotationType,\n          annotationInfo,\n          wbId,\n          version: 1,\n        },\n      };\n      break;\n    case DRAW_UPDATE:\n      baseModifier = {\n        $push: {\n          'annotationInfo.points': { $each: annotationInfo.points },\n        },\n        $set: {\n          status,\n        },\n        $inc: { version: 1 },\n      };\n      break;\n    case DRAW_END:\n      // Updating the main pencil object with the final info\n      baseModifier = {\n        $set: {\n          whiteboardId,\n          meetingId,\n          id,\n          status,\n          annotationType,\n          annotationInfo,\n          wbId,\n          position,\n        },\n        $inc: { version: 1 },\n      };\n      break;\n    default:\n      break;\n  }\n\n  return { selector: baseSelector, modifier: baseModifier };\n}\n\nexport default function addAnnotation(meetingId, whiteboardId, userId, annotation) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(annotation, Object);\n\n  switch (annotation.annotationType) {\n    case ANNOTATION_TYPE_TEXT:\n      return handleTextUpdate(meetingId, whiteboardId, userId, annotation);\n    case ANNOTATION_TYPE_PENCIL:\n      return handlePencilUpdate(meetingId, whiteboardId, userId, annotation);\n    default:\n      return handleCommonAnnotation(meetingId, whiteboardId, userId, annotation);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\n\nconst Annotations = new Mongo.Collection('annotations');\n\nif (Meteor.isServer) {\n  // types of queries for the annotations  (Total):\n  // 1. meetingId, id, userId               ( 8 )\n  // 2. meetingId, id, userId, whiteboardId ( 1 )\n  // 3. meetingId                           ( 1 )\n  // 4. meetingId, whiteboardId             ( 1 )\n  // 5. meetingId, whiteboardId, id         ( 1 )\n  // 6. meetingId, whiteboardId, userId     ( 1 )\n  // These 2 indexes seem to cover all of the cases\n\n  Annotations._ensureIndex({ id: 1 });\n  Annotations._ensureIndex({ meetingId: 1, whiteboardId: 1, userId: 1 });\n}\n\nexport default Annotations;\n","import AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Logger from '/imports/startup/server/logger';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nexport default function clearAuthTokenValidation(meetingId) {\n  return AuthTokenValidation.remove({ meetingId }, (err, num) => {\n    if (err) {\n      Logger.info(`Error when removing auth-token-validation for meeting=${meetingId}`);\n    }\n\n    if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n      ClientConnections.removeMeeting(meetingId);\n    }\n    Logger.info(`Cleared AuthTokenValidation (${meetingId})`);\n  });\n}\n","import Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\n\nexport default function upsertValidationState(meetingId, userId, validationStatus, connectionId, reason = null) {\n  const selector = {\n    meetingId, userId, connectionId,\n  };\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      connectionId,\n      validationStatus,\n      updatedAt: new Date().getTime(),\n      reason,\n    },\n  };\n\n  try {\n    const { numberAffected } = AuthTokenValidation.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Upserted ${JSON.stringify(selector)} ${validationStatus} in AuthTokenValidation`);\n    }\n  } catch (err) {\n    Logger.error(`Could not upsert to collection AuthTokenValidation: ${err}`);\n  }\n}\n","import './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Logger from '/imports/startup/server/logger';\n\nfunction authTokenValidation({ meetingId, userId }) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  Logger.debug(`Publishing auth-token-validation for ${meetingId} ${userId}`);\n\n  return AuthTokenValidation.find(selector);\n}\n\nfunction publish(...args) {\n  const boundAuthTokenValidation = authTokenValidation.bind(this);\n  return boundAuthTokenValidation(...args);\n}\n\nMeteor.publish('auth-token-validation', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst AuthTokenValidation = new Mongo.Collection('auth-token-validation');\n\nif (Meteor.isServer) {\n  AuthTokenValidation._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport const ValidationStates = Object.freeze({\n  NOT_VALIDATED: 1,\n  VALIDATING: 2,\n  VALIDATED: 3,\n  INVALID: 4,\n});\n\nexport default AuthTokenValidation;\n","import { check } from 'meteor/check';\nimport clearBreakouts from '../modifiers/clearBreakouts';\n\nexport default function handleBreakoutClosed({ body }) {\n  const { breakoutId } = body;\n  check(breakoutId, String);\n\n  return clearBreakouts(breakoutId);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function handleBreakoutJoinURL({ body }) {\n  const {\n    redirectToHtml5JoinURL,\n    userId,\n    breakoutId,\n  } = body;\n\n  check(redirectToHtml5JoinURL, String);\n\n  const selector = {\n    breakoutId,\n  };\n\n  const modifier = {\n    $push: {\n      users: {\n        userId,\n        redirectToHtml5JoinURL,\n        insertedTime: new Date().getTime(),\n      },\n    },\n  };\n\n  try {\n    const { insertedId, numberAffected } = Breakouts.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added breakout id=${breakoutId}`);\n    } else if (numberAffected) {\n      Logger.info(`Upserted breakout id=${breakoutId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding breakout to collection: ${err}`);\n  }\n}\n","import Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\n\nexport default function handleBreakoutRoomStarted({ body }, meetingId) {\n  // 0 seconds default breakout time, forces use of real expiration time\n  const DEFAULT_TIME_REMAINING = 0;\n\n  const {\n    parentMeetingId,\n    breakout,\n  } = body;\n\n  const { breakoutId } = breakout;\n\n  check(meetingId, String);\n\n  const selector = {\n    breakoutId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      {\n        users: [],\n        joinedUsers: [],\n      },\n      { timeRemaining: DEFAULT_TIME_REMAINING },\n      { parentMeetingId },\n      flat(breakout),\n    ),\n  };\n\n  try {\n    const { numberAffected } = Breakouts.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info('Updated timeRemaining and externalMeetingId '\n        + `for breakout id=${breakoutId}`);\n    }\n  } catch (err) {\n    Logger.error(`updating breakout: ${err}`);\n  }\n}\n","import Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function joinedUsersChanged({ body }) {\n  check(body, Object);\n\n  const {\n    parentId,\n    breakoutId,\n    users,\n  } = body;\n\n  check(parentId, String);\n  check(breakoutId, String);\n  check(users, Array);\n\n  const selector = {\n    parentMeetingId: parentId,\n    breakoutId,\n  };\n\n  const usersMapped = users.map(user => ({ userId: user.id, name: user.name }));\n  const modifier = {\n    $set: {\n      joinedUsers: usersMapped,\n    },\n  };\n\n  try {\n    const numberAffected = Breakouts.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated joined users in breakout id=${breakoutId}`);\n    }\n  } catch (err) {\n    Logger.error(`updating joined users in breakout: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function handleUpdateTimeRemaining({ body }, meetingId) {\n  const {\n    timeRemaining,\n  } = body;\n\n  check(meetingId, String);\n  check(timeRemaining, Number);\n\n  const selector = {\n    parentMeetingId: meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      timeRemaining,\n    },\n  };\n\n  const options = {\n    multi: true,\n  };\n\n  try {\n    const numberAffected = Breakouts.update(selector, modifier, options);\n\n    if (numberAffected) {\n      Logger.info(`Updated breakout time remaining for breakouts where parentMeetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating breakouts: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function createBreakoutRoom(rooms, durationInMinutes, record = false) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const BREAKOUT_LIM = Meteor.settings.public.app.breakouts.breakoutRoomLimit;\n  const MIN_BREAKOUT_ROOMS = 2;\n  const MAX_BREAKOUT_ROOMS = BREAKOUT_LIM > MIN_BREAKOUT_ROOMS ? BREAKOUT_LIM : MIN_BREAKOUT_ROOMS;\n  const EVENT_NAME = 'CreateBreakoutRoomsCmdMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    if (rooms.length > MAX_BREAKOUT_ROOMS) {\n      Logger.info(`Attempt to create breakout rooms with invalid number of rooms in meeting id=${meetingId}`);\n      return;\n    }\n    const payload = {\n      record,\n      durationInMinutes,\n      rooms,\n      meetingId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method createBreakoutRoom ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function endAllBreakouts() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EndAllBreakoutRoomsMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, null);\n  } catch (err) {\n    Logger.error(`Exception while invoking method endAllBreakouts ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function extendBreakoutsTime({ extendTimeInMinutes }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ExtendBreakoutRoomsTimeReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    return RedisPubSub.publishUserMessage(\n      CHANNEL, EVENT_NAME, meetingId, requesterUserId,\n      {\n        meetingId,\n        extendTimeInMinutes,\n      },\n    );\n  } catch (err) {\n    Logger.error(`Exception while invoking method extendBreakoutsTime ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function requestJoinURL({ breakoutId, userId: userIdToInvite }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RequestBreakoutJoinURLReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const userId = userIdToInvite || requesterUserId;\n\n    return RedisPubSub.publishUserMessage(\n      CHANNEL, EVENT_NAME, meetingId, requesterUserId,\n      {\n        meetingId,\n        breakoutId,\n        userId,\n      },\n    );\n  } catch (err) {\n    Logger.error(`Exception while invoking method requestJoinURL ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function clearBreakouts(breakoutId) {\n  if (breakoutId) {\n    const selector = {\n      breakoutId,\n    };\n\n    try {\n      const numberAffected = Breakouts.remove(selector);\n\n      if (numberAffected) {\n        Logger.info(`Cleared Breakouts (${breakoutId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Breakouts (${breakoutId})`);\n    }\n  } else {\n    try {\n      const numberAffected = Breakouts.remove({});\n      if (numberAffected) {\n        Logger.info('Cleared Breakouts (all)');\n      }\n    } catch (err) {\n      Logger.error('Error on clearing Breakouts (all)');\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleBreakoutJoinURL from './handlers/breakoutJoinURL';\nimport handleBreakoutStarted from './handlers/breakoutStarted';\nimport handleUpdateTimeRemaining from './handlers/updateTimeRemaining';\nimport handleBreakoutClosed from './handlers/breakoutClosed';\nimport joinedUsersChanged from './handlers/joinedUsersChanged';\n\nRedisPubSub.on('BreakoutRoomStartedEvtMsg', handleBreakoutStarted);\nRedisPubSub.on('BreakoutRoomJoinURLEvtMsg', handleBreakoutJoinURL);\nRedisPubSub.on('RequestBreakoutJoinURLRespMsg', handleBreakoutJoinURL);\nRedisPubSub.on('BreakoutRoomsTimeRemainingUpdateEvtMsg', handleUpdateTimeRemaining);\nRedisPubSub.on('BreakoutRoomEndedEvtMsg', handleBreakoutClosed);\nRedisPubSub.on('UpdateBreakoutUsersEvtMsg', joinedUsersChanged);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport createBreakoutRoom from '/imports/api/breakouts/server/methods/createBreakout';\nimport requestJoinURL from './methods/requestJoinURL';\nimport endAllBreakouts from './methods/endAllBreakouts';\nimport extendBreakoutsTime from './methods/extendBreakoutsTime';\n\nMeteor.methods({\n  requestJoinURL,\n  createBreakoutRoom,\n  endAllBreakouts,\n  extendBreakoutsTime,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Breakouts from '/imports/api/breakouts';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction breakouts(role) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Breakouts was requested by unauth connection ${this.connection.id}`);\n    return Breakouts.find({ meetingId: '' });\n  }\n  const { meetingId, userId } = tokenValidation;\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  Logger.debug('Publishing Breakouts', { meetingId, userId });\n\n  if (!!User && User.role === ROLE_MODERATOR) {\n    const presenterSelector = {\n      $or: [\n        { parentMeetingId: meetingId },\n        { breakoutId: meetingId },\n      ],\n    };\n\n    return Breakouts.find(presenterSelector);\n  }\n\n  const selector = {\n    $or: [\n      {\n        parentMeetingId: meetingId,\n        freeJoin: true,\n      },\n      {\n        parentMeetingId: meetingId,\n        'users.userId': userId,\n      },\n      {\n        breakoutId: meetingId,\n      },\n    ],\n  };\n\n  const fields = {\n    fields: {\n      users: {\n        $elemMatch: {\n          // do not allow users to obtain 'redirectToHtml5JoinURL' for others\n          userId,\n        },\n      },\n      breakoutId: 1,\n      externalId: 1,\n      freeJoin: 1,\n      isDefaultName: 1,\n      joinedUsers: 1,\n      name: 1,\n      parentMeetingId: 1,\n      sequence: 1,\n      shortName: 1,\n      timeRemaining: 1,\n    },\n  };\n\n  return Breakouts.find(selector, fields);\n}\n\nfunction publish(...args) {\n  const boundBreakouts = breakouts.bind(this);\n  return boundBreakouts(...args);\n}\n\nMeteor.publish('breakouts', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Breakouts = new Mongo.Collection('breakouts');\n\nif (Meteor.isServer) {\n  // types of queries for the breakouts:\n  // 1. breakoutId ( handleJoinUrl, roomStarted, clearBreakouts )\n  // 2. parentMeetingId ( updateTimeRemaining )\n\n  Breakouts._ensureIndex({ breakoutId: 1 });\n  Breakouts._ensureIndex({ parentMeetingId: 1 });\n}\n\nexport default Breakouts;\n","import { check } from 'meteor/check';\nimport fetchReadOnlyPadId from '/imports/api/captions/server/methods/fetchReadOnlyPadId';\n\nexport default function handlePadCreate({ body }) {\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  fetchReadOnlyPadId(id);\n}\n","import { check } from 'meteor/check';\nimport { getDataFromChangeset } from '/imports/api/captions/server/helpers';\nimport updatePad from '/imports/api/captions/server/modifiers/updatePad';\n\nexport default function handlePadUpdate({ body }) {\n  const { pad, revs, changeset } = body;\n  const { id } = pad;\n\n  check(id, String);\n  check(changeset, String);\n  check(revs, Number);\n\n  const data = getDataFromChangeset(changeset);\n\n  if (data !== '') {\n    updatePad(id, data, revs);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addCaptionsPads(meetingId, padIds) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'AddCaptionsPadsSysMsg';\n\n  try {\n    check(meetingId, String);\n    check(padIds, [String]);\n\n    const payload = {\n      padIds,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, 'nodeJSapp', payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method addCaptionsPads ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function addPad(padId, readOnlyId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'AddPadSysMsg';\n\n  try {\n    check(padId, String);\n    check(readOnlyId, String);\n\n    const pad = Captions.findOne({ padId });\n\n    if (!pad) {\n      Logger.error(`Could not find closed captions pad ${padId}`);\n      return;\n    }\n\n    const { meetingId } = pad;\n\n    check(meetingId, String);\n\n    const payload = {\n      padId,\n      readOnlyId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, 'nodeJSapp', payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method addPad ${err.stack}`);\n  }\n}\n","import axios from 'axios';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Captions from '/imports/api/captions';\nimport { CAPTIONS_TOKEN } from '/imports/api/captions/server/helpers';\nimport { appendTextURL } from '/imports/api/common/server/etherpad';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function appendText(text, locale) {\n  try {\n    const { meetingId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(text, String);\n    check(locale, String);\n\n    const captions = Captions.findOne({\n      meetingId,\n      padId: { $regex: `${CAPTIONS_TOKEN}${locale}$` },\n    });\n\n    if (!captions) {\n      Logger.error(`Could not find captions' pad for meetingId=${meetingId} locale=${locale}`);\n      return;\n    }\n\n    const { padId } = captions;\n\n    axios({\n      method: 'get',\n      url: appendTextURL(padId, text),\n      responseType: 'json',\n    }).then((response) => {\n      const { status } = response;\n      if (status !== 200) {\n        Logger.error(`Could not append captions for padId=${padId}`);\n      }\n    }).catch((error) => Logger.error(`Could not append captions for padId=${padId}: ${error}`));\n  } catch (err) {\n    Logger.error(`Exception while invoking method appendText ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  generatePadId,\n  isEnabled,\n  getLocalesURL,\n} from '/imports/api/captions/server/helpers';\nimport { withInstaceId } from '/imports/api/common/server/etherpad';\nimport addCaption from '/imports/api/captions/server/modifiers/addCaption';\nimport addCaptionsPads from '/imports/api/captions/server/methods/addCaptionsPads';\nimport axios from 'axios';\n\nexport default function createCaptions(meetingId, instanceId) {\n  // Avoid captions creation if this feature is disabled\n  if (!isEnabled()) {\n    Logger.warn('Closed captions are disabled');\n    return;\n  }\n\n  try {\n    check(meetingId, String);\n    check(instanceId, Number);\n\n    axios({\n      method: 'get',\n      url: getLocalesURL(),\n      responseType: 'json',\n    }).then((response) => {\n      const { status } = response;\n      if (status !== 200) {\n        Logger.error(`Could not get locales info for ${meetingId} ${status}`);\n        return;\n      }\n      const padIds = [];\n      const locales = response.data;\n      locales.forEach((locale) => {\n        const padId = withInstaceId(instanceId, generatePadId(meetingId, locale.locale));\n        addCaption(meetingId, padId, locale);\n        padIds.push(padId);\n      });\n      addCaptionsPads(meetingId, padIds);\n    }).catch((error) => Logger.error(`Could not create captions for ${meetingId}: ${error}`));\n  } catch (err) {\n    Logger.error(`Exception while invoking method createCaptions ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nconst getIndex = (data, length) => length - data.length;\n\nexport default function editCaptions(padId, data) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EditCaptionHistoryPubMsg';\n\n  try {\n    check(padId, String);\n    check(data, String);\n\n    const pad = Captions.findOne({ padId });\n\n    if (!pad) {\n      Logger.error(`Editing captions history: ${padId}`);\n      return;\n    }\n\n    const {\n      meetingId,\n      ownerId,\n      locale,\n      length,\n    } = pad;\n\n    check(meetingId, String);\n    check(ownerId, String);\n    check(locale, { locale: String, name: String });\n    check(length, Number);\n\n    const index = getIndex(data, length);\n\n    const payload = {\n      startIndex: index,\n      localeCode: locale.locale,\n      locale: locale.name,\n      endIndex: index,\n      text: data,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, ownerId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method editCaptions ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { getReadOnlyIdURL } from '/imports/api/common/server/etherpad';\nimport { getDataFromResponse } from '/imports/api/note/server/helpers';\nimport updateReadOnlyPadId from '/imports/api/captions/server/modifiers/updateReadOnlyPadId';\nimport axios from 'axios';\n\nexport default function fetchReadOnlyPadId(padId) {\n  try {\n    check(padId, String);\n\n    axios({\n      method: 'get',\n      url: getReadOnlyIdURL(padId),\n      responseType: 'json',\n    }).then((response) => {\n      const { status } = response;\n      if (status !== 200) {\n        Logger.error(`Could not get closed captions readOnlyID for ${padId} ${status}`);\n        return;\n      }\n      const readOnlyPadId = getDataFromResponse(response.data, 'readOnlyID');\n      if (readOnlyPadId) {\n        updateReadOnlyPadId(padId, readOnlyPadId);\n      } else {\n        Logger.error(`Could not get pad readOnlyID for ${padId}`);\n      }\n    }).catch((error) => Logger.error(`Could not get pad readOnlyID for ${padId}: ${error}`));\n  } catch (err) {\n    Logger.error(`Exception while invoking method fetchReadOnlyPadId ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport updateOwnerId from '/imports/api/captions/server/modifiers/updateOwnerId';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { CAPTIONS_TOKEN } from '/imports/api/captions/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function takeOwnership(locale) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(locale, String);\n\n    const pad = Captions.findOne({ meetingId, padId: { $regex: `${CAPTIONS_TOKEN}${locale}$` } });\n\n    if (pad) {\n      updateOwnerId(meetingId, requesterUserId, pad.padId);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method takeOwnership ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function updateOwner(meetingId, userId, padId) { // TODO\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateCaptionOwnerPubMsg';\n\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(padId, String);\n\n    const pad = Captions.findOne({ meetingId, padId });\n\n    if (!pad) {\n      Logger.error(`Editing captions owner: ${padId}`);\n      return;\n    }\n\n    const { locale } = pad;\n\n    check(locale, { locale: String, name: String });\n\n    const payload = {\n      ownerId: userId,\n      locale: locale.name,\n      localeCode: locale.locale,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method updateOwner ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addCaption(meetingId, padId, locale) {\n  check(meetingId, String);\n  check(padId, String);\n  check(locale, {\n    locale: String,\n    name: String,\n  });\n\n  const selector = {\n    meetingId,\n    padId,\n  };\n\n  const modifier = {\n    meetingId,\n    padId,\n    locale,\n    ownerId: '',\n    readOnlyPadId: '',\n    data: '',\n    revs: 0,\n    length: 0,\n  };\n\n  try {\n    const { insertedId, numberAffected } = Captions.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.verbose('Captions: added locale', { locale: locale.locale, meetingId });\n    } else if (numberAffected) {\n      Logger.verbose('Captions: upserted locale', { locale: locale.locale, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Adding caption to collection: ${err}`);\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearCaptions(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Captions.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Captions (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing captions (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Captions.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Captions (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing captions (all). ${err}`);\n    }\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport updateOwner from '/imports/api/captions/server/methods/updateOwner';\nimport { check } from 'meteor/check';\n\nexport default function updateOwnerId(meetingId, userId, padId) {\n  check(meetingId, String);\n  check(userId, String);\n  check(padId, String);\n\n  const selector = {\n    meetingId,\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      ownerId: userId,\n    },\n  };\n\n  try {\n    const numberAffected = Captions.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      updateOwner(meetingId, userId, padId);\n      Logger.verbose('Captions: updated caption', { padId, ownerId: userId });\n    }\n  } catch (err) {\n    Logger.error('Captions: error while updating pad', { err });\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport editCaptions from '/imports/api/captions/server/methods/editCaptions';\nimport { check } from 'meteor/check';\n\nexport default function updatePad(padId, data, revs) {\n  check(padId, String);\n  check(data, String);\n  check(revs, Number);\n\n  const selector = {\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      data,\n      revs,\n    },\n    $inc: {\n      length: data.length,\n    },\n  };\n\n  try {\n    const numberAffected = Captions.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      editCaptions(padId, data, revs);\n      Logger.verbose('Captions: updated pad', { padId, revs });\n    }\n  } catch (err) {\n    Logger.error(`Updating captions pad: ${err}`);\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport addPad from '/imports/api/captions/server/methods/addPad';\n\nexport default function updateReadOnlyPadId(padId, readOnlyPadId) {\n  check(padId, String);\n  check(readOnlyPadId, String);\n\n  const selector = {\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      readOnlyPadId,\n    },\n  };\n\n  try {\n    const numberAffected = Captions.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      addPad(padId, readOnlyPadId);\n      Logger.verbose('Captions: added readOnlyPadId', { padId, readOnlyPadId });\n    }\n  } catch (err) {\n    Logger.error('Captions: error when adding readOnlyPadId', { err });\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForCaptionsPadOnly } from '/imports/api/captions/server/helpers';\nimport handlePadCreate from './handlers/padCreate';\nimport handlePadUpdate from './handlers/padUpdate';\n\nRedisPubSub.on('PadCreateSysMsg', processForCaptionsPadOnly(handlePadCreate));\nRedisPubSub.on('PadUpdateSysMsg', processForCaptionsPadOnly(handlePadUpdate));\n","import { Meteor } from 'meteor/meteor';\nimport { hashSHA1 } from '/imports/api/common/server/etherpad';\nimport { check } from 'meteor/check';\n\nconst ETHERPAD = Meteor.settings.private.etherpad;\nconst CAPTIONS_CONFIG = Meteor.settings.public.captions;\nconst BASENAME = Meteor.settings.public.app.basename;\nconst APP = Meteor.settings.private.app;\nconst INSTANCE_ID = Meteor.settings.public.app.instanceId;\nconst LOCALES_URL = `http://${APP.host}:${process.env.PORT}${BASENAME}${INSTANCE_ID}${APP.localesUrl}`;\nconst CAPTIONS_TOKEN = '_cc_';\nconst TOKEN = '$';\n\n// Captions padId should look like: {prefix}_cc_{locale}\nconst generatePadId = (meetingId, locale) => `${hashSHA1(meetingId + locale + ETHERPAD.apikey)}${CAPTIONS_TOKEN}${locale}`;\n\nconst isCaptionsPad = (padId) => {\n  const splitPadId = padId.split(CAPTIONS_TOKEN);\n  return splitPadId.length === 2;\n};\n\nconst getDataFromChangeset = (changeset) => {\n  const splitChangeset = changeset.split(TOKEN);\n  if (splitChangeset.length > 1) {\n    splitChangeset.shift();\n    return splitChangeset.join(TOKEN);\n  }\n  return '';\n};\n\nconst isEnabled = () => CAPTIONS_CONFIG.enabled;\n\nconst getLocalesURL = () => LOCALES_URL;\n\nconst processForCaptionsPadOnly = fn => (message, ...args) => {\n  const { body } = message;\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  if (isCaptionsPad(id)) return fn(message, ...args);\n  return () => { };\n};\n\nexport {\n  CAPTIONS_TOKEN,\n  generatePadId,\n  processForCaptionsPadOnly,\n  isEnabled,\n  getLocalesURL,\n  getDataFromChangeset,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport takeOwnership from '/imports/api/captions/server/methods/takeOwnership';\nimport appendText from '/imports/api/captions/server/methods/appendText';\n\nMeteor.methods({\n  takeOwnership,\n  appendText,\n});\n","import Captions from '/imports/api/captions';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction captions() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Captions was requested by unauth connection ${this.connection.id}`);\n    return Captions.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug('Publishing Captions', { meetingId, requestedBy: userId });\n\n  return Captions.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundCaptions = captions.bind(this);\n  return boundCaptions(...args);\n}\n\nMeteor.publish('captions', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Captions = new Mongo.Collection('captions');\n\nif (Meteor.isServer) {\n  Captions._ensureIndex({ meetingId: 1, padId: 1 });\n}\n\nexport default Captions;\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport updateConnectionStatus from '/imports/api/connection-status/server/modifiers/updateConnectionStatus';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst STATS = Meteor.settings.public.stats;\n\nconst logConnectionStatus = (meetingId, userId, status, type, value) => {\n  switch (status) {\n    case 'normal':\n      Logger.info(`Connection status updated: meetingId=${meetingId} userId=${userId} status=${status} type=${type}`);\n      break;\n    case 'warning':\n    case 'danger':\n    case 'critical':\n      switch (type) {\n        case 'audio': {\n          const {\n            jitter,\n            loss,\n          } = value;\n          Logger.info(`Connection status updated: meetingId=${meetingId} userId=${userId} status=${status} type=${type} jitter=${jitter} loss=${loss}`);\n          break;\n        }\n        case 'socket': {\n          const { rtt } = value;\n          Logger.info(`Connection status updated: meetingId=${meetingId} userId=${userId} status=${status} type=${type} rtt=${rtt}`);\n          break;\n        }\n        default:\n      }\n      break;\n    default:\n  }\n};\n\nexport default function addConnectionStatus(status, type, value) {\n  try {\n    check(status, String);\n    check(type, String);\n    check(value, Object);\n\n    if (!this.userId) return;\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    if (STATS.log) logConnectionStatus(meetingId, requesterUserId, status, type, value);\n\n    // Avoid storing recoveries\n    if (status !== 'normal') {\n      updateConnectionStatus(meetingId, requesterUserId, status);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method addConnectionStatus ${err.stack}`);\n  }\n}\n","// Round-trip time helper\nexport default function voidConnection() {\n  return 0;\n}\n","import ConnectionStatus from '/imports/api/connection-status';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearConnectionStatus(meetingId) {\n  const selector = {};\n\n  if (meetingId) {\n    selector.meetingId = meetingId;\n  }\n\n  try {\n    const numberAffected = ConnectionStatus.remove(selector);\n\n    if (numberAffected) {\n      if (meetingId) {\n        Logger.info(`Removed ConnectionStatus (${meetingId})`);\n      } else {\n        Logger.info('Removed ConnectionStatus (all)');\n      }\n    } else {\n      Logger.warn('Removing ConnectionStatus nonaffected');\n    }\n  } catch (err) {\n    Logger.error(`Removing ConnectionStatus: ${err}`);\n  }\n}\n","import ConnectionStatus from '/imports/api/connection-status';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateConnectionStatus(meetingId, userId, level) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const timestamp = new Date().getTime();\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    meetingId,\n    userId,\n    level,\n    timestamp,\n  };\n\n  try {\n    const { numberAffected } = ConnectionStatus.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Updated connection status meetingId=${meetingId} userId=${userId} level=${level}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating connection status meetingId=${meetingId} userId=${userId}: ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addConnectionStatus from './methods/addConnectionStatus';\nimport voidConnection from './methods/voidConnection';\n\nMeteor.methods({\n  addConnectionStatus,\n  voidConnection,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport ConnectionStatus from '/imports/api/connection-status';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction connectionStatus() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing ConnectionStatus was requested by unauth connection ${this.connection.id}`);\n    return ConnectionStatus.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  check(meetingId, String);\n  check(userId, String);\n\n  Logger.info(`Publishing connection status for ${meetingId} ${userId}`);\n\n  return ConnectionStatus.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundNote = connectionStatus.bind(this);\n  return boundNote(...args);\n}\n\nMeteor.publish('connection-status', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst ConnectionStatus = new Mongo.Collection('connection-status');\n\nif (Meteor.isServer) {\n  ConnectionStatus._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default ConnectionStatus;\n","import { check } from 'meteor/check';\nimport CursorStreamer from '/imports/api/cursor/server/streamer';\nimport Logger from '/imports/startup/server/logger';\nimport _ from 'lodash';\n\nconst CURSOR_PROCCESS_INTERVAL = 30;\n\nconst cursorQueue = {};\n\nconst proccess = _.throttle(() => {\n  try {\n    Object.keys(cursorQueue).forEach((meetingId) => {\n      try {\n        const cursors = [];\n        for (let userId in cursorQueue[meetingId]){\n          cursorQueue[meetingId][userId].userId = userId;\n          cursors.push(cursorQueue[meetingId][userId]);\n        }\n        delete cursorQueue[meetingId];\n        CursorStreamer(meetingId).emit('message', { meetingId, cursors });\n      } catch (error) {\n        Logger.error(`Error while trying to send cursor streamer data for meeting ${meetingId}. ${error}`);\n      }\n    });\n  } catch (error) {\n    Logger.error(`Error while processing cursor queue. ${error}`);\n  }\n}, CURSOR_PROCCESS_INTERVAL);\n\nexport default function handleCursorUpdate({ header, body }, meetingId) {\n  const { userId } = header;\n  check(body, Object);\n\n  check(meetingId, String);\n  check(userId, String);\n\n  if (!cursorQueue[meetingId]) {\n    cursorQueue[meetingId] = {};\n  }\n\n  // overwrite since we dont care about the other positions\n  cursorQueue[meetingId][userId] = body;\n\n  proccess();\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\n\nexport default function publishCursorUpdate(meetingId, requesterUserId, payload) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendCursorPositionPubMsg';\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleCursorUpdate from './handlers/cursorUpdate';\n\nRedisPubSub.on('SendCursorPositionEvtMsg', handleCursorUpdate);\n","import './eventHandlers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport publishCursorUpdate from './methods/publishCursorUpdate';\n\nMeteor.methods({\n  publishCursorUpdate,\n});\n","import Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport publishCursorUpdate from './methods/publishCursorUpdate';\n\nconst { streamerLog } = Meteor.settings.private.serverLog;\n\nexport function removeCursorStreamer(meetingId) {\n  Logger.info(`Removing Cursor streamer object for meeting ${meetingId}`);\n  delete Meteor.StreamerCentral.instances[`cursor-${meetingId}`];\n}\n\nexport function addCursorStreamer(meetingId) {\n  const streamer = new Meteor.Streamer(`cursor-${meetingId}`, { retransmit: false });\n  if (streamerLog) {\n    Logger.debug('Cursor streamer created', { meetingId });\n  }\n\n  streamer.allowRead(function allowRead() {\n    if (streamerLog) {\n      Logger.debug('Cursor streamer called allowRead', { userId: this.userId, meetingId });\n    }\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.allowWrite(function allowWrite() {\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.on('publish', function (message) {\n    const { requesterUserId } = extractCredentials(this.userId);\n    publishCursorUpdate(meetingId, requesterUserId, message);\n  });\n}\n\nexport default function get(meetingId) {\n  return Meteor.StreamerCentral.instances[`cursor-${meetingId}`];\n}\n","import { check } from 'meteor/check';\nimport startExternalVideo from '../modifiers/startExternalVideo';\n\nexport default function handleStartExternalVideo({ header, body }, meetingId) {\n  check(header, Object);\n  check(body, Object);\n  check(meetingId, String);\n\n  const { userId } = header;\n  const { externalVideoUrl } = body;\n\n  startExternalVideo(meetingId, userId, externalVideoUrl);\n}\n","import { check } from 'meteor/check';\nimport stopExternalVideo from '../modifiers/stopExternalVideo';\n\nexport default function handleStopExternalVideo({ header }, meetingId) {\n  check(header, Object);\n  check(meetingId, String);\n\n  const { userId } = header;\n\n  stopExternalVideo(userId, meetingId);\n}\n","import { check } from 'meteor/check';\nimport updateExternalVideo from '../modifiers/updateExternalVideo';\n\nexport default function handleUpdateExternalVideo({ header, body }, meetingId) {\n  check(header, Object);\n  check(body, Object);\n  check(meetingId, String);\n\n  const { userId } = header;\n\n  const {\n    status,\n    rate,\n    time,\n    state,\n  } = body;\n\n  updateExternalVideo(meetingId, userId, status, rate, time, state);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function emitExternalVideoEvent(options) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateExternalVideoPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const { status, playerStatus } = options;\n\n    check(status, String);\n    check(playerStatus, {\n      rate: Match.Maybe(Number),\n      time: Match.Maybe(Number),\n      state: Match.Maybe(Number),\n    });\n\n    const state = playerStatus.state || 0;\n\n    const payload = {\n      status,\n      rate: playerStatus.rate || 0,\n      time: playerStatus.time || 0,\n      state,\n    };\n\n    Logger.debug(`User id=${requesterUserId} sending ${EVENT_NAME} event:${state} for meeting ${meetingId}`);\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method emitExternalVideoEvent ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startWatchingExternalVideo(externalVideoUrl) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StartExternalVideoPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(externalVideoUrl, String);\n\n    const payload = { externalVideoUrl };\n\n    Logger.info(`User ${requesterUserId} sharing an external video ${externalVideoUrl} for meeting ${meetingId}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (error) {\n    Logger.error(`Error on sharing an external video for meeting ${meetingId}: ${error}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nexport default function stopWatchingExternalVideo() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StopExternalVideoPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {};\n\n    Logger.info(`User ${requesterUserId} stoping an external video for meeting ${meetingId}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (error) {\n    Logger.error(`Error on stoping an external video for meeting ${meetingId}: ${error}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { ExternalVideoMeetings } from '/imports/api/meetings';\n\nexport default function startExternalVideo(meetingId, userId, externalVideoUrl) {\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(externalVideoUrl, String);\n\n    const selector = { meetingId };\n    const modifier = { $set: { externalVideoUrl } };\n\n    Logger.info(`User id=${userId} sharing an external video: ${externalVideoUrl} for meeting ${meetingId}`);\n    ExternalVideoMeetings.update(selector, modifier);\n  } catch (err) {\n    Logger.error(`Error on setting shared external video start in Meetings collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { ExternalVideoMeetings } from '/imports/api/meetings';\n\nexport default function stopExternalVideo(userId, meetingId) {\n  try {\n    check(meetingId, String);\n    check(userId, String);\n\n    const selector = { meetingId };\n    const modifier = { $set: { externalVideoUrl: null } };\n\n    Logger.info(`External video stop sharing was initiated by:[${userId}] for meeting ${meetingId}`);\n    ExternalVideoMeetings.update(selector, modifier);\n  } catch (err) {\n    Logger.error(`Error on setting shared external video stop in Meetings collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport ExternalVideoStreamer from '/imports/api/external-videos/server/streamer';\n\nexport default function updateExternalVideo(meetingId, userId, status, rate, time, state) {\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(status, String);\n    check(rate, Number);\n    check(time, Number);\n    check(state, Number);\n\n    const modifier = {\n      meetingId,\n      userId,\n      rate,\n      time,\n      state,\n    };\n\n    Logger.debug(`UpdateExternalVideoEvtMsg received for user ${userId} and meeting ${meetingId} event:${status}`);\n    ExternalVideoStreamer(meetingId).emit(status, modifier);\n  } catch (err) {\n    Logger.error(`Error on setting shared external video update in Meetings collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleStartExternalVideo from './handlers/startExternalVideo';\nimport handleStopExternalVideo from './handlers/stopExternalVideo';\nimport handleUpdateExternalVideo from './handlers/updateExternalVideo';\n\nRedisPubSub.on('StartExternalVideoEvtMsg', handleStartExternalVideo);\nRedisPubSub.on('StopExternalVideoEvtMsg', handleStopExternalVideo);\nRedisPubSub.on('UpdateExternalVideoEvtMsg', handleUpdateExternalVideo);\n","import './methods';\nimport './eventHandlers';\n","import { Meteor } from 'meteor/meteor';\nimport startWatchingExternalVideo from './methods/startWatchingExternalVideo';\nimport stopWatchingExternalVideo from './methods/stopWatchingExternalVideo';\nimport emitExternalVideoEvent from './methods/emitExternalVideoEvent';\n\nMeteor.methods({\n  startWatchingExternalVideo,\n  stopWatchingExternalVideo,\n  emitExternalVideoEvent,\n});\n","import { Meteor } from 'meteor/meteor';\r\nimport Logger from '/imports/startup/server/logger';\r\n\r\nconst allowRecentMessages = (eventName, message) => {\r\n\r\n  const {\r\n    userId,\r\n    meetingId,\r\n    time,\r\n    rate,\r\n    state,\r\n  } = message;\r\n\r\n  Logger.debug(`ExternalVideo Streamer auth allowed userId: ${userId}, meetingId: ${meetingId}, event: ${eventName}, time: ${time} rate: ${rate}, state: ${state}`);\r\n  return true;\r\n};\r\n\r\nexport function removeExternalVideoStreamer(meetingId) {\r\n  const streamName = `external-videos-${meetingId}`;\r\n\r\n  if (Meteor.StreamerCentral.instances[streamName]) {\r\n    Logger.info(`Destroying External Video streamer object for ${streamName}`);\r\n    delete Meteor.StreamerCentral.instances[streamName];\r\n  }\r\n}\r\n\r\nexport function addExternalVideoStreamer(meetingId) {\r\n\r\n  const streamName = `external-videos-${meetingId}`;\r\n  if (!Meteor.StreamerCentral.instances[streamName]) {\r\n\r\n    const streamer = new Meteor.Streamer(streamName);\r\n    streamer.allowRead('all');\r\n    streamer.allowWrite('none');\r\n    streamer.allowEmit(allowRecentMessages);\r\n    Logger.info(`Created External Video streamer for ${streamName}`);\r\n  } else {\r\n    Logger.debug(`External Video streamer is already created for ${streamName}`);\r\n  }\r\n}\r\n\r\nexport default function get(meetingId) {\r\n  const streamName = `external-videos-${meetingId}`;\r\n  return Meteor.StreamerCentral.instances[streamName];\r\n}\r\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChatCreated({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  addGroupChat(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChatDestroyed({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  addGroupChat(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChats({ body }, meetingId) {\n  const { chats } = body;\n\n  check(meetingId, String);\n  check(chats, Array);\n\n  chats.forEach(chat => addGroupChat(meetingId, chat));\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { CHAT_ACCESS_PRIVATE } from '/imports/api/group-chat';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function createGroupChat(receiver) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'CreateGroupChatReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(receiver, Object);\n\n    const payload = {\n      correlationId: `${requesterUserId}-${Date.now()}`,\n      msg: [],\n      users: [receiver.userId],\n      access: CHAT_ACCESS_PRIVATE,\n      name: receiver.name,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method createGroupChat ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function destroyGroupChat() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const eventName = 'DestroyGroupChatReqMsg';\n\n    const payload = {\n      // TODO: Implement this together with #4988\n      // chats: Array[String],\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method createGroupChat ${err.stack}`);\n  }\n}\n","import flat from 'flat';\nimport { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport GroupChat from '/imports/api/group-chat';\n\nexport default function addGroupChat(meetingId, chat) {\n  check(meetingId, String);\n  check(chat, {\n    id: Match.Maybe(String),\n    chatId: Match.Maybe(String),\n    correlationId: Match.Maybe(String),\n    name: String,\n    access: String,\n    createdBy: Object,\n    users: Array,\n    msg: Match.Maybe(Array),\n  });\n\n  const chatDocument = {\n    meetingId,\n    chatId: chat.chatId || chat.id,\n    name: chat.name,\n    access: chat.access,\n    users: chat.users.map(u => u.id),\n    participants: chat.users,\n    createdBy: chat.createdBy.id,\n  };\n\n  const selector = {\n    chatId: chatDocument.chatId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: flat(chatDocument, { safe: true }),\n  };\n\n  try {\n    const { insertedId } = GroupChat.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added group-chat name=${chat.name} meetingId=${meetingId}`);\n    } else {\n      Logger.info(`Upserted group-chat name=${chat.name} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding group-chat to collection: ${err}`);\n  }\n}\n","import GroupChat from '/imports/api/group-chat';\nimport Logger from '/imports/startup/server/logger';\nimport clearGroupChatMsg from '/imports/api/group-chat-msg/server/modifiers/clearGroupChatMsg';\n\nexport default function clearGroupChat(meetingId) {\n  try {\n    clearGroupChatMsg(meetingId);\n    const numberAffected = GroupChat.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared GroupChat (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing GroupChat (${meetingId}). ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleGroupChats from './handlers/groupChats';\nimport handleGroupChatCreated from './handlers/groupChatCreated';\nimport handleGroupChatDestroyed from './handlers/groupChatDestroyed';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nRedisPubSub.on('GetGroupChatsRespMsg', processForHTML5ServerOnly(handleGroupChats));\nRedisPubSub.on('GroupChatCreatedEvtMsg', handleGroupChatCreated);\nRedisPubSub.on('GroupChatDestroyedEvtMsg', handleGroupChatDestroyed);\nRedisPubSub.on('SyncGetGroupChatsRespMsg', handleGroupChats);\n","import '/imports/api/group-chat-msg/server';\nimport './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport createGroupChat from './methods/createGroupChat';\nimport destroyGroupChat from './methods/destroyGroupChat';\n\nMeteor.methods({\n  createGroupChat,\n  destroyGroupChat,\n});\n","import GroupChat from '/imports/api/group-chat';\nimport { Meteor } from 'meteor/meteor';\n\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction groupChat() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GroupChat was requested by unauth connection ${this.connection.id}`);\n    return GroupChat.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_CHAT_TYPE = CHAT_CONFIG.type_public;\n\n  Logger.debug('Publishing group-chat', { meetingId, userId });\n\n  return GroupChat.find({\n    $or: [\n      { meetingId, access: PUBLIC_CHAT_TYPE },\n      { meetingId, users: { $all: [userId] } },\n    ],\n\n  });\n}\n\nfunction publish(...args) {\n  const boundGroupChat = groupChat.bind(this);\n  return boundGroupChat(...args);\n}\n\nMeteor.publish('group-chat', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst GroupChat = new Mongo.Collection('group-chat');\n\nif (Meteor.isServer) {\n  GroupChat._ensureIndex({\n    meetingId: 1, chatId: 1, access: 1, users: 1,\n  });\n}\n\nexport default GroupChat;\n\nconst CHAT_ACCESS = {\n  PUBLIC: 'PUBLIC_ACCESS',\n  PRIVATE: 'PRIVATE_ACCESS',\n};\n\nexport const CHAT_ACCESS_PUBLIC = CHAT_ACCESS.PUBLIC;\nexport const CHAT_ACCESS_PRIVATE = CHAT_ACCESS.PRIVATE;\n","import { check } from 'meteor/check';\nimport clearGroupChatMsg from '../modifiers/clearGroupChatMsg';\n\nexport default function clearPublicChatHistory({ header, body }) {\n  const { meetingId } = header;\n  const { chatId } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n\n  return clearGroupChatMsg(meetingId, chatId);\n}\n","import { check } from 'meteor/check';\nimport _ from 'lodash';\nimport addGroupChatMsg from '../modifiers/addGroupChatMsg';\nimport addBulkGroupChatMsgs from '../modifiers/addBulkGroupChatMsgs';\n\nconst { bufferChatInsertsMs } = Meteor.settings.public.chat;\n\nconst msgBuffer = [];\n\nconst bulkFn = _.throttle(addBulkGroupChatMsgs, bufferChatInsertsMs);\n\nexport default function handleGroupChatMsgBroadcast({ body }, meetingId) {\n  const { chatId, msg } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, Object);\n\n  if (bufferChatInsertsMs) {\n    msgBuffer.push({ meetingId, chatId, msg });\n    bulkFn(msgBuffer);\n  } else {\n    addGroupChatMsg(meetingId, chatId, msg);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport syncMeetingChatMsgs from '../modifiers/syncMeetingChatMsgs';\n\nexport default function handleSyncGroupChat({ body }, meetingId) {\n  const { chatId, msgs } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msgs, Match.Maybe(Array));\n\n  syncMeetingChatMsgs(meetingId, chatId, msgs);\n}\n","import { check } from 'meteor/check';\nimport startTyping from '../modifiers/startTyping';\n\nexport default function handleUserTyping({ body }, meetingId) {\n  const { chatId, userId } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(chatId, String);\n\n  startTyping(meetingId, userId, chatId);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport GroupChat from '/imports/api/group-chat';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nconst CHAT_CONFIG = Meteor.settings.public.chat;\nconst PUBLIC_CHAT_TYPE = CHAT_CONFIG.type_public;\n\nexport default function chatMessageBeforeJoinCounter() {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const groupChats = GroupChat.find({\n      $or: [\n        { meetingId, access: PUBLIC_CHAT_TYPE },\n        { meetingId, users: { $all: [requesterUserId] } },\n      ],\n    }).fetch();\n\n    const User = Users.findOne({ userId: requesterUserId, meetingId });\n\n    const chatIdWithCounter = groupChats.map((groupChat) => {\n      const msgCount = GroupChatMsg.find({\n        meetingId,\n        chatId: groupChat.chatId,\n        timestamp: { $lt: User.authTokenValidatedTime },\n      }).count();\n      return {\n        chatId: groupChat.chatId,\n        count: msgCount,\n      };\n    }).filter((chat) => chat.count);\n    return chatIdWithCounter;\n  } catch (err) {\n    Logger.error(`Exception while invoking method chatMessageBeforeJoinCounter ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPublicChatHistory() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ClearPublicChatHistoryPubMsg';\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      chatId: PUBLIC_GROUP_CHAT_ID,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method clearPublicChatHistory ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nconst CHAT_CONFIG = Meteor.settings.public.chat;\nconst ITENS_PER_PAGE = CHAT_CONFIG.itemsPerPage;\n\nexport default function fetchMessagePerPage(chatId, page) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(chatId, String);\n    check(page, Number);\n\n    const User = Users.findOne({ userId: requesterUserId, meetingId });\n\n    const messages = GroupChatMsg.find(\n      { chatId, meetingId, timestamp: { $lt: User.authTokenValidatedTime } },\n      {\n        sort: { timestamp: 1 },\n        skip: page > 0 ? ((page - 1) * ITENS_PER_PAGE) : 0,\n        limit: ITENS_PER_PAGE,\n      },\n    )\n      .fetch();\n    return messages;\n  } catch (err) {\n    Logger.error(`Exception while invoking method fetchMessagePerPage ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport RegexWebUrl from '/imports/utils/regex-weburl';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nconst HTML_SAFE_MAP = {\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n};\n\nconst parseMessage = (message) => {\n  let parsedMessage = message || '';\n  parsedMessage = parsedMessage.trim();\n\n  // Replace <br/> with \\n\\r\n  parsedMessage = parsedMessage.replace(/<br\\s*[\\\\/]?>/gi, '\\n\\r');\n\n  // Sanitize. See: http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\n  parsedMessage = parsedMessage.replace(/[<>'\"]/g, (c) => HTML_SAFE_MAP[c]);\n\n  // Replace flash links to flash valid ones\n  parsedMessage = parsedMessage.replace(RegexWebUrl, \"<a href='event:$&'><u>$&</u></a>\");\n\n  return parsedMessage;\n};\n\nexport default function sendGroupChatMsg(chatId, message) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendGroupChatMessageMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(chatId, String);\n    check(message, Object);\n\n    const parsedMessage = parseMessage(message.message);\n\n    message.message = parsedMessage;\n\n    const payload = {\n      msg: message,\n      chatId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method sendGroupChatMsg ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function startUserTyping(chatId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserTypingPubMsg';\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(chatId, String);\n\n    const payload = {\n      chatId: chatId || PUBLIC_GROUP_CHAT_ID,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method startUserTyping ${err.stack}`);\n  }\n}\n","import { UsersTyping } from '/imports/api/group-chat-msg';\nimport stopTyping from '../modifiers/stopTyping';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function stopUserTyping() {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const userTyping = UsersTyping.findOne({\n      meetingId,\n      userId: requesterUserId,\n    });\n\n    if (userTyping && meetingId && requesterUserId) {\n      stopTyping(meetingId, requesterUserId, true);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method stopUserTyping ${err.stack}`);\n  }\n}\n","import { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport { parseMessage } from './addGroupChatMsg';\n\nexport default async function addBulkGroupChatMsgs(msgs) {\n  if (!msgs.length) return;\n\n  const mappedMsgs = msgs\n    .map(({ chatId, meetingId, msg }) => {\n      const {\n        sender,\n        color,\n        ...restMsg\n      } = msg;\n\n      return {\n        _id: new Mongo.ObjectID()._str,\n        ...restMsg,\n        meetingId,\n        chatId,\n        message: parseMessage(msg.message),\n        sender: sender.id,\n      };\n    })\n    .map(el => flat(el, { safe: true }));\n\n  try {\n    const { insertedCount } = await GroupChatMsg.rawCollection().insertMany(mappedMsgs);\n    msgs.length = 0;\n\n    if (insertedCount) {\n      Logger.info(`Inserted ${insertedCount} messages`);\n    }\n  } catch (err) {\n    Logger.error(`Error on bulk insert. ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport { BREAK_LINE } from '/imports/utils/lineEndings';\n\nexport function parseMessage(message) {\n  let parsedMessage = message || '';\n\n  // Replace \\r and \\n to <br/>\n  parsedMessage = parsedMessage.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, `$1${BREAK_LINE}$2`);\n\n  // Replace flash links to html valid ones\n  parsedMessage = parsedMessage.split('<a href=\\'event:').join('<a target=\"_blank\" href=\\'');\n  parsedMessage = parsedMessage.split('<a href=\"event:').join('<a target=\"_blank\" href=\"');\n\n  return parsedMessage;\n}\n\nexport default function addGroupChatMsg(meetingId, chatId, msg) {\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, {\n    id: Match.Maybe(String),\n    timestamp: Number,\n    sender: Object,\n    color: String,\n    message: String,\n    correlationId: Match.Maybe(String),\n  });\n\n  const {\n    color,\n    sender,\n    ...restMsg\n  } = msg;\n\n  const msgDocument = {\n    ...restMsg,\n    sender: sender.id,\n    meetingId,\n    chatId,\n    message: parseMessage(msg.message),\n  };\n\n  try {\n    const insertedId = GroupChatMsg.insert(msgDocument);\n\n    if (insertedId) {\n      Logger.info(`Added group-chat-msg msgId=${msg.id} chatId=${chatId} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on adding group-chat-msg to collection: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport { BREAK_LINE } from '/imports/utils/lineEndings';\n\nexport function parseMessage(message) {\n  let parsedMessage = message || '';\n\n  // Replace \\r and \\n to <br/>\n  parsedMessage = parsedMessage.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, `$1${BREAK_LINE}$2`);\n\n  // Replace flash links to html valid ones\n  parsedMessage = parsedMessage.split('<a href=\\'event:').join('<a target=\"_blank\" href=\\'');\n  parsedMessage = parsedMessage.split('<a href=\"event:').join('<a target=\"_blank\" href=\"');\n\n  return parsedMessage;\n}\n\nexport default function addSystemMsg(meetingId, chatId, msg) {\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, {\n    id: Match.Maybe(String),\n    timestamp: Number,\n    sender: Object,\n    message: String,\n    extra: Object,\n    correlationId: Match.Maybe(String),\n  });\n  const msgDocument = {\n    ...msg,\n    sender: msg.sender.id,\n    meetingId,\n    chatId,\n    message: parseMessage(msg.message),\n  };\n\n  try {\n    const insertedId = GroupChatMsg.insert(msgDocument);\n\n    if (insertedId) {\n      Logger.info(`Added system-msg msgId=${msg.id} chatId=${chatId} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on adding system-msg to collection: ${err}`);\n  }\n}\n","import { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport addGroupChatMsg from '/imports/api/group-chat-msg/server/modifiers/addGroupChatMsg';\n\nexport default function clearGroupChatMsg(meetingId, chatId) {\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_CHAT_SYSTEM_ID = CHAT_CONFIG.system_userid;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const CHAT_CLEAR_MESSAGE = CHAT_CONFIG.system_messages_keys.chat_clear;\n  const SYSTEM_CHAT_TYPE = CHAT_CONFIG.type_system;\n\n  if (chatId) {\n    try {\n      const numberAffected = GroupChatMsg.remove({ meetingId, chatId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GroupChatMsg (${meetingId}, ${chatId})`);\n        const clearMsg = {\n          id: `${SYSTEM_CHAT_TYPE}-${CHAT_CLEAR_MESSAGE}`,\n          color: '0',\n          timestamp: Date.now(),\n          correlationId: `${PUBLIC_CHAT_SYSTEM_ID}-${Date.now()}`,\n          sender: {\n            id: PUBLIC_CHAT_SYSTEM_ID,\n            name: '',\n          },\n          message: CHAT_CLEAR_MESSAGE,\n        };\n        addGroupChatMsg(meetingId, PUBLIC_GROUP_CHAT_ID, clearMsg);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChat (${meetingId}, ${chatId}). ${err}`);\n    }\n    return true;\n  }\n\n  if (meetingId) {\n    try {\n      const numberAffected = GroupChatMsg.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GroupChatMsg (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChatMsg (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = GroupChatMsg.remove({ chatId: { $eq: PUBLIC_GROUP_CHAT_ID } });\n\n      if (numberAffected) {\n        Logger.info('Cleared GroupChatMsg (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChatMsg (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { UsersTyping } from '/imports/api/group-chat-msg';\nimport stopTyping from './stopTyping';\n\nconst TYPING_TIMEOUT = 5000;\n\nexport default function startTyping(meetingId, userId, chatId) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = Users.findOne(selector, { fields: { name: 1, role: 1 } });\n\n  const modifier = {\n    meetingId,\n    userId,\n    name: user.name,\n    isTypingTo: chatId,\n    role: user.role,\n    time: (new Date()),\n  };\n\n  const typingUser = UsersTyping.findOne(selector, {\n    fields: {\n      time: 1,\n    },\n  });\n\n  if (typingUser) {\n    if (modifier.time - typingUser.time <= TYPING_TIMEOUT - 100) return;\n  }\n\n  try {\n    const { numberAffected } = UsersTyping.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Typing indicator update', { userId, chatId });\n      Meteor.setTimeout(() => {\n        stopTyping(meetingId, userId);\n      }, TYPING_TIMEOUT);\n    }\n  } catch (err) {\n    Logger.error(`Typing indicator update error: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { UsersTyping } from '/imports/api/group-chat-msg';\n\nexport default function stopTyping(meetingId, userId, sendMsgInitiated = false) {\n  check(meetingId, String);\n  check(userId, String);\n  check(sendMsgInitiated, Boolean);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = UsersTyping.findOne(selector);\n  const stillTyping = !sendMsgInitiated && user && (new Date()) - user.time < 3000;\n  if (stillTyping) return;\n\n  try {\n    const numberAffected = UsersTyping.remove(selector);\n\n    if (numberAffected) {\n      Logger.debug('Stopped typing indicator', { userId });\n    }\n  } catch (err) {\n    Logger.error(`Stop user=${userId} typing indicator error: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport flat from 'flat';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport { parseMessage } from './addGroupChatMsg';\n\nexport default function syncMeetingChatMsgs(meetingId, chatId, msgs) {\n  if (!msgs.length) return;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msgs, Match.Maybe(Array));\n\n  try {\n    const bulkOperations = GroupChatMsg.rawCollection().initializeOrderedBulkOp();\n\n    msgs\n      .forEach((msg) => {\n        const {\n          sender,\n          color,\n          ...restMsg\n        } = msg;\n\n        const msgToSync = {\n          ...restMsg,\n          meetingId,\n          chatId,\n          message: parseMessage(msg.message),\n          sender: sender.id,\n        };\n\n        const modifier = flat(msgToSync, { safe: true });\n\n        bulkOperations\n          .find({ chatId, meetingId, id: msg.id })\n          .upsert()\n          .updateOne({\n            $setOnInsert: { _id: new Mongo.ObjectID()._str },\n            $set: { ...modifier },\n          });\n      });\n\n    bulkOperations.execute();\n\n    Logger.info('Chat messages synchronized', { chatId, meetingId });\n  } catch (err) {\n    Logger.error(`Error on sync chat messages: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleGroupChatMsgBroadcast from './handlers/groupChatMsgBroadcast';\nimport handleClearPublicGroupChat from './handlers/clearPublicGroupChat';\nimport handleUserTyping from './handlers/userTyping';\nimport handleSyncGroupChatMsg from './handlers/syncGroupsChat';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nRedisPubSub.on('GetGroupChatMsgsRespMsg', processForHTML5ServerOnly(handleSyncGroupChatMsg));\nRedisPubSub.on('GroupChatMessageBroadcastEvtMsg', handleGroupChatMsgBroadcast);\nRedisPubSub.on('ClearPublicChatHistoryEvtMsg', handleClearPublicGroupChat);\nRedisPubSub.on('SyncGetGroupChatMsgsRespMsg', handleSyncGroupChatMsg);\nRedisPubSub.on('UserTypingEvtMsg', handleUserTyping);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport sendGroupChatMsg from './methods/sendGroupChatMsg';\nimport clearPublicChatHistory from './methods/clearPublicChatHistory';\nimport startUserTyping from './methods/startUserTyping';\nimport stopUserTyping from './methods/stopUserTyping';\nimport chatMessageBeforeJoinCounter from './methods/chatMessageBeforeJoinCounter';\nimport fetchMessagePerPage from './methods/fetchMessagePerPage';\n\nMeteor.methods({\n  fetchMessagePerPage,\n  chatMessageBeforeJoinCounter,\n  sendGroupChatMsg,\n  clearPublicChatHistory,\n  startUserTyping,\n  stopUserTyping,\n});\n","import { GroupChatMsg, UsersTyping } from '/imports/api/group-chat-msg';\nimport Users from '/imports/api/users';\nimport { Meteor } from 'meteor/meteor';\n\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction groupChatMsg(chatsIds) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GroupChatMsg was requested by unauth connection ${this.connection.id}`);\n    return GroupChatMsg.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  Logger.debug('Publishing group-chat-msg', { meetingId, userId });\n\n  const User = Users.findOne({ userId, meetingId });\n  const selector = {\n    timestamp: { $gte: User.authTokenValidatedTime },\n    $or: [\n      { meetingId, chatId: { $eq: PUBLIC_GROUP_CHAT_ID } },\n      { meetingId, chatId: { $in: chatsIds } },\n    ],\n  };\n  return GroupChatMsg.find(selector);\n}\n\nfunction publish(...args) {\n  const boundGroupChat = groupChatMsg.bind(this);\n  return boundGroupChat(...args);\n}\n\nMeteor.publish('group-chat-msg', publish);\n\nfunction usersTyping() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing users-typing was requested by unauth connection ${this.connection.id}`);\n    return UsersTyping.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing users-typing', { meetingId, userId });\n\n  return UsersTyping.find({ meetingId });\n}\n\nfunction pubishUsersTyping(...args) {\n  const boundUsersTyping = usersTyping.bind(this);\n  return boundUsersTyping(...args);\n}\n\nMeteor.publish('users-typing', pubishUsersTyping);\n","import { Meteor } from 'meteor/meteor';\n\nconst GroupChatMsg = new Mongo.Collection('group-chat-msg');\nconst UsersTyping = new Mongo.Collection('users-typing');\n\nif (Meteor.isServer) {\n  GroupChatMsg._ensureIndex({ meetingId: 1, chatId: 1 });\n  UsersTyping._ensureIndex({ meetingId: 1, isTypingTo: 1 });\n}\n\nexport { GroupChatMsg, UsersTyping };\n","import { check } from 'meteor/check';\nimport setGuestStatus from '../modifiers/setGuestStatus';\n\nexport default function handleGuestApproved({ body }, meetingId) {\n  const { approvedBy, guests } = body;\n  check(meetingId, String);\n  check(approvedBy, String);\n  check(guests, Array);\n\n  return guests.forEach(guest => setGuestStatus(meetingId, guest.guest, guest.status, approvedBy));\n}\n","import { check } from 'meteor/check';\nimport removeGuest from '../modifiers/removeGuest';\n\nexport default function handleGuestWaitingLeft({ body }, meetingId) {\n  const { userId } = body;\n  check(meetingId, String);\n  check(userId, String);\n\n  return removeGuest(meetingId, userId);\n}\n","import stringHash from 'string-hash';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport GuestUsers from '/imports/api/guest-users/';\n\nconst COLOR_LIST = [\n  '#7b1fa2', '#6a1b9a', '#4a148c', '#5e35b1', '#512da8', '#4527a0',\n  '#311b92', '#3949ab', '#303f9f', '#283593', '#1a237e', '#1976d2', '#1565c0',\n  '#0d47a1', '#0277bd', '#01579b',\n];\n\nexport default function handleGuestsWaitingForApproval({ body }, meetingId) {\n  const { guests } = body;\n  check(guests, Array);\n  check(meetingId, String);\n\n  return guests.map((guest) => {\n    try {\n      const { insertedId, numberAffected } = GuestUsers.upsert({\n        meetingId,\n        intId: guest.intId,\n      }, {\n        approved: false,\n        denied: false,\n        ...guest,\n        meetingId,\n        loginTime: guest.registeredOn,\n        color: COLOR_LIST[stringHash(guest.intId) % COLOR_LIST.length],\n      });\n\n      if (insertedId) {\n        Logger.info(`Added guest user meeting=${meetingId}`);\n      } else if (numberAffected) {\n        Logger.info(`Upserted guest user meeting=${meetingId}`);\n      }\n    } catch (err) {\n      Logger.error(`Adding guest user to collection: ${err}`);\n    }\n  });\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'GuestsWaitingApprovedMsg';\n\nexport default function allowPendingUsers(guests, status) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(guests, Array);\n    const mappedGuests = guests.map((guest) => ({ status, guest: guest.intId }));\n\n    const payload = {\n      approvedBy: requesterUserId,\n      guests: mappedGuests,\n    };\n\n    Logger.info(`User=${requesterUserId} ${status} guests ${JSON.stringify(mappedGuests)}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method allowPendingUsers ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'SetGuestPolicyCmdMsg';\n\nexport default function changeGuestPolicy(policyRule) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(policyRule, String);\n\n    const payload = {\n      setBy: requesterUserId,\n      policy: policyRule,\n    };\n\n    Logger.info(`User=${requesterUserId} change guest policy to ${policyRule}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method changeGuestPolicy ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'SetGuestLobbyMessageCmdMsg';\n\nexport default function setGuestLobbyMessage(message) {\n  try {\n    check(message, String);\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = { message };\n\n    Logger.info(`User=${requesterUserId} set guest lobby message to ${message}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setGuestLobbyMessage ${err.stack}`);\n  }\n}\n","import GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearGuestUsers(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = GuestUsers.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GuestUsers in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing GuestUsers in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = GuestUsers.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared GuestUsers in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GuestUsers in all meetings. ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeGuest(meetingId, intId) {\n  check(meetingId, String);\n  check(intId, String);\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing guest user from collection: ${err}`);\n    }\n\n    return Logger.info(`Removed guest user id=${intId} meetingId=${meetingId}`);\n  };\n\n  return GuestUsers.remove(selector, cb);\n}\n","import { check } from 'meteor/check';\nimport GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nconst GUEST_STATUS_ALLOW = 'ALLOW';\nconst GUEST_STATUS_DENY = 'DENY';\nexport default function setGuestStatus(meetingId, intId, status, approvedBy = null) {\n  check(meetingId, String);\n  check(intId, String);\n  check(status, String);\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      approved: status === GUEST_STATUS_ALLOW,\n      denied: status === GUEST_STATUS_DENY,\n      approvedBy,\n    },\n  };\n\n  try {\n    const numberAffected = GuestUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated status=${status} user=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating status=${status} user=${intId}: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleGuestApproved from './handlers/guestApproved';\nimport handleGuestsWaitingForApproval from './handlers/guestsWaitingForApproval';\nimport handleGuestWaitingLeft from './handlers/guestWaitingLeft';\n\nRedisPubSub.on('GuestWaitingLeftEvtMsg', handleGuestWaitingLeft);\nRedisPubSub.on('GuestsWaitingForApprovalEvtMsg', processForHTML5ServerOnly(handleGuestsWaitingForApproval));\nRedisPubSub.on('GuestsWaitingApprovedEvtMsg', processForHTML5ServerOnly(handleGuestApproved));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport allowPendingUsers from '/imports/api/guest-users/server/methods/allowPendingUsers';\nimport changeGuestPolicy from '/imports/api/guest-users/server/methods/changeGuestPolicy';\nimport setGuestLobbyMessage from '/imports/api/guest-users/server/methods/setGuestLobbyMessage';\n\nMeteor.methods({\n  allowPendingUsers,\n  changeGuestPolicy,\n  setGuestLobbyMessage,\n});\n","import GuestUsers from '/imports/api/guest-users/';\nimport Users from '/imports/api/users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction guestUsers() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GuestUser was requested by unauth connection ${this.connection.id}`);\n    return GuestUsers.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  if (!User || User.role !== ROLE_MODERATOR) {\n    Logger.warn(\n      'Publishing current-poll was requested by non-moderator connection',\n      { meetingId, userId, connectionId: this.connection.id },\n    );\n    return GuestUsers.find({ meetingId: '' });\n  }\n\n  Logger.debug(`Publishing GuestUsers for ${meetingId} ${userId}`);\n\n  return GuestUsers.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundSlides = guestUsers.bind(this);\n  return boundSlides(...args);\n}\n\nMeteor.publish('guestUser', publish);\n","import { Mongo } from 'meteor/mongo';\n\nconst GuestUsers = new Mongo.Collection('guestUsers');\n\nexport default GuestUsers;\n","import _ from 'lodash';\nimport { check } from 'meteor/check';\nimport LocalSettings from '/imports/api/local-settings';\nimport setChangedLocalSettings from '../modifiers/setChangedLocalSettings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userChangedLocalSettings(settings) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    if (!meetingId || !requesterUserId) return;\n\n    check(settings, Object);\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const userLocalSettings = LocalSettings\n      .findOne({ meetingId, userId: requesterUserId },\n        {\n          fields: { settings: 1 },\n        });\n\n    if (!userLocalSettings || !_.isEqual(userLocalSettings.settings, settings)) {\n      setChangedLocalSettings(meetingId, requesterUserId, settings);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method userChangedLocalSettings ${err.stack}`);\n  }\n}\n","import LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearLocalSettings(meetingId) {\n  try {\n    const numberAffected = LocalSettings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared Local Settings (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing Local Settings (${meetingId}). ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setChangedLocalSettings(meetingId, userId, settings) {\n  check(meetingId, String);\n  check(userId, String);\n  check(settings, Object);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      settings,\n    },\n  };\n\n  try {\n    const { numChanged } = LocalSettings.upsert(selector, modifier);\n\n    if (numChanged) {\n      Logger.info(`Updated settings for user ${userId} on meeting ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on update settings. ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport userChangedLocalSettings from './methods/userChangedLocalSettings';\n\nMeteor.methods({\n  userChangedLocalSettings,\n});\n","import { Meteor } from 'meteor/meteor';\nimport LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction localSettings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing LocalSettings was requested by unauth connection ${this.connection.id}`);\n    return LocalSettings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing local settings', { userId });\n\n  return LocalSettings.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundLocalSettings = localSettings.bind(this);\n  return boundLocalSettings(...args);\n}\n\nMeteor.publish('local-settings', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst LocalSettings = new Mongo.Collection('local-settings');\n\nif (Meteor.isServer) {\n  LocalSettings._ensureIndex({\n    meetingId: 1, userId: 1,\n  });\n}\n\nexport default LocalSettings;\n","import Logger from '/imports/startup/server/logger';\n\nexport default function (type, logDescription, logCode = 'was_not_provided', extraInfo = {}, userInfo = {}) {\n  const connectionId = this.connection.id;\n  const logContents = {\n    logCode,\n    logDescription,\n    connectionId,\n    extraInfo,\n    userInfo,\n  };\n\n  // If I don't pass message, logs will start with `undefined`\n  Logger.log({ message: JSON.stringify(logContents), level: type });\n}\n","import './methods';\n","import { Meteor } from 'meteor/meteor';\nimport logClient from './methods/logClient';\n\nMeteor.methods({ logClient });\n","import changeLayout from '../modifiers/changeLayout';\n\nexport default function broadcastLayout({ body }, meetingId) {\n  const { layout, setByUserId, applyTo } = body;\n\n  changeLayout(meetingId, layout, setByUserId, applyTo);\n}\n","import handleMeetingCreation from './meetingCreation';\n\nexport default function handleGetAllMeetings({ body }) {\n  return handleMeetingCreation({ body });\n}\n","import setGuestLobbyMessage from '../modifiers/setGuestLobbyMessage';\nimport { check } from 'meteor/check';\n\nexport default function handleGuestLobbyMessageChanged({ body }, meetingId) {\n  const { message } = body;\n\n  check(meetingId, String);\n  check(message, String);\n\n  return setGuestLobbyMessage(meetingId, message);\n}\n","import setGuestPolicy from '../modifiers/setGuestPolicy';\nimport { check } from 'meteor/check';\n\nexport default function handleGuestPolicyChanged({ body }, meetingId) {\n  const { policy } = body;\n\n  check(meetingId, String);\n  check(policy, String);\n\n\n  return setGuestPolicy(meetingId, policy);\n}\n","import { check } from 'meteor/check';\nimport addMeeting from '../modifiers/addMeeting';\n\nexport default function handleMeetingCreation({ body }) {\n  const meeting = body.props;\n  const durationInSecods = (meeting.durationProps.duration * 60);\n  meeting.durationProps.timeRemaining = durationInSecods;\n  check(meeting, Object);\n\n  return addMeeting(meeting);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\n\nimport { removeAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { removeCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport { removeExternalVideoStreamer } from '/imports/api/external-videos/server/streamer';\n\nexport default function handleMeetingDestruction({ body }) {\n  check(body, Object);\n  const { meetingId } = body;\n  check(meetingId, String);\n\n  if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n    removeAnnotationsStreamer(meetingId);\n    removeCursorStreamer(meetingId);\n    removeExternalVideoStreamer(meetingId);\n  }\n\n  return RedisPubSub.destroyMeetingQueue(meetingId);\n}\n","import { check } from 'meteor/check';\nimport meetingHasEnded from '../modifiers/meetingHasEnded';\nimport Meetings from '/imports/api/meetings';\nimport Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleMeetingEnd({ header, body }) {\n  check(body, Object);\n  const { meetingId, reason } = body;\n  check(meetingId, String);\n\n  check(header, Object);\n  const { userId } = header;\n  check(userId, String);\n\n  const cb = (err, num, meetingType) => {\n    if (err) {\n      Logger.error(`${meetingType} ending error: ${err}`);\n      return;\n    }\n    if (num) {\n      Meteor.setTimeout(() => { meetingHasEnded(meetingId); }, 10000);\n    }\n  };\n\n  Meetings.update({ meetingId },\n    { $set: { meetingEnded: true, meetingEndedBy: userId, meetingEndedReason: reason } },\n    (err, num) => { cb(err, num, 'Meeting'); });\n\n  Breakouts.update({ parentMeetingId: meetingId },\n    { $set: { meetingEnded: true } },\n    (err, num) => { cb(err, num, 'Breakout'); });\n}\n","import changeLockSettings from '../modifiers/changeLockSettings';\n\nexport default function handleLockSettingsInMeeting({ body }, meetingId) {\n  changeLockSettings(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleRecordingStatusChange({ body }, meetingId) {\n  const { recording } = body;\n  check(recording, Boolean);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: { recording },\n  };\n\n  try {\n    const { numberAffected } = RecordMeetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting record status id=${meetingId} recording=${recording}`);\n    }\n  } catch (err) {\n    Logger.error(`Changing record status: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleRecordingTimerChange({ body }, meetingId) {\n  const { time } = body;\n\n  check(meetingId, String);\n\n  check(body, {\n    time: Number,\n  });\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: { time },\n  };\n\n  try {\n    RecordMeetings.upsert(selector, modifier);\n  } catch (err) {\n    Logger.error(`Changing recording time: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport updateRandomViewer from '../modifiers/updateRandomViewer';\n\nexport default function randomlySelectedUser({ header, body }) {\n  const { userIds, choice, requestedBy } = body;\n  const { meetingId } = header;\n\n  check(meetingId, String);\n  check(requestedBy, String);\n  check(userIds, Array);\n  check(choice, Number);\n\n  updateRandomViewer(meetingId, userIds, choice, requestedBy);\n}\n","import { check } from 'meteor/check';\nimport { MeetingTimeRemaining } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleTimeRemainingUpdate({ body }, meetingId) {\n  check(meetingId, String);\n\n  check(body, {\n    timeLeftInSec: Number,\n  });\n  const { timeLeftInSec } = body;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      timeRemaining: timeLeftInSec,\n    },\n  };\n\n  try {\n    MeetingTimeRemaining.upsert(selector, modifier);\n  } catch (err) {\n    Logger.error(`Changing recording time: ${err}`);\n  }\n}\n","import changeUserLock from '../modifiers/changeUserLock';\n\nexport default function handleLockSettingsInMeeting({ body }, meetingId) {\n  changeUserLock(meetingId, body);\n}\n","import changeWebcamOnlyModerator from '../modifiers/webcamOnlyModerator';\n\nexport default function handleChangeWebcamOnlyModerator({ body }, meetingId) {\n  changeWebcamOnlyModerator(meetingId, body);\n}\n","import Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function changeLayout(layout) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'BroadcastLayoutMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      layout,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method changeLayout ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function clearRandomlySelectedUser() {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const selector = {\n      meetingId,\n    };\n\n    const modifier = {\n      $set: {\n        randomlySelectedUser: [],\n      },\n    };\n\n    const { insertedId } = Meetings.update(selector, modifier);\n    if (insertedId) {\n      Logger.info(`Cleared randomly selected user from meeting=${meetingId} by id=${requesterUserId}`);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method clearRandomlySelectedUser ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function endMeeting() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'LogoutAndEndMeetingCmdMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      userId: requesterUserId,\n    };\n    Logger.warn(`Meeting '${meetingId}' is destroyed by '${requesterUserId}'`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method endMeeting ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function toggleLockSettings(lockSettingsProps) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeLockSettingsInMeetingCmdMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(lockSettingsProps, {\n      disableCam: Boolean,\n      disableMic: Boolean,\n      disablePrivateChat: Boolean,\n      disablePublicChat: Boolean,\n      disableNote: Boolean,\n      hideUserList: Boolean,\n      lockedLayout: Boolean,\n      lockOnJoin: Boolean,\n      lockOnJoinConfigurable: Boolean,\n      setBy: Match.Maybe(String),\n    });\n\n    const {\n      disableCam,\n      disableMic,\n      disablePrivateChat: disablePrivChat,\n      disablePublicChat: disablePubChat,\n      disableNote,\n      hideUserList,\n      lockedLayout,\n      lockOnJoin,\n      lockOnJoinConfigurable,\n    } = lockSettingsProps;\n\n    const payload = {\n      disableCam,\n      disableMic,\n      disablePrivChat,\n      disablePubChat,\n      disableNote,\n      hideUserList,\n      lockedLayout,\n      lockOnJoin,\n      lockOnJoinConfigurable,\n      setBy: requesterUserId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method toggleLockSettings ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function toggleRecording() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n  const EVENT_NAME = 'SetRecordingStatusCmdMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    let meetingRecorded;\n    let allowedToRecord;\n\n    const recordObject = RecordMeetings.findOne({ meetingId });\n\n    if (recordObject != null) {\n      const {\n        allowStartStopRecording,\n        recording,\n        record,\n      } = recordObject;\n\n      meetingRecorded = recording;\n      allowedToRecord = record && allowStartStopRecording; // TODO-- remove some day\n    }\n\n    const payload = {\n      recording: !meetingRecorded,\n      setBy: requesterUserId,\n    };\n\n    const selector = {\n      meetingId,\n      userId: requesterUserId,\n    };\n    const user = Users.findOne(selector);\n\n    if (allowedToRecord && !!user && user.role === ROLE_MODERATOR) {\n      Logger.info(`Setting the record parameter to ${!meetingRecorded} for ${meetingId} by ${requesterUserId}`);\n      RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method toggleRecording ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '../../../common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function toggleWebcamsOnlyForModerator(webcamsOnlyForModerator) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateWebcamsOnlyForModeratorCmdMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(webcamsOnlyForModerator, Boolean);\n\n    const payload = {\n      webcamsOnlyForModerator,\n      setBy: requesterUserId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method toggleWebcamsOnlyForModerator ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function transferUser(fromMeetingId, toMeetingId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'TransferUserToMeetingRequestMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      fromMeetingId,\n      toMeetingId,\n      userId: requesterUserId,\n    };\n\n    Logger.verbose('User was transferred from one meting to another', { requesterUserId, fromMeetingId, toMeetingId });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method transferUser ${err.stack}`);\n  }\n}\n","import flat from 'flat';\nimport {\n  check,\n  Match,\n} from 'meteor/check';\nimport SanitizeHTML from 'sanitize-html';\nimport Meetings, {\n  RecordMeetings,\n  ExternalVideoMeetings,\n} from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { initPads } from '/imports/api/common/server/etherpad';\nimport { addAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { addCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport { addExternalVideoStreamer } from '/imports/api/external-videos/server/streamer';\nimport { LAYOUT_TYPE } from '/imports/ui/components/layout/enums';\n\nconst addExternalVideo = (meetingId) => {\n  const selector = { meetingId };\n\n  const modifier = {\n    meetingId,\n    externalVideoUrl: null,\n  };\n\n  try {\n    const { numberAffected } = ExternalVideoMeetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Added external video meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding external video: ${err}`);\n  }\n};\n\nexport default function addMeeting(meeting) {\n  const meetingId = meeting.meetingProp.intId;\n\n  check(meetingId, String);\n  check(meeting, {\n    breakoutProps: {\n      sequence: Number,\n      freeJoin: Boolean,\n      breakoutRooms: Array,\n      parentId: String,\n      enabled: Boolean,\n      record: Boolean,\n      privateChatEnabled: Boolean,\n    },\n    meetingProp: {\n      intId: String,\n      extId: String,\n      isBreakout: Boolean,\n      activityReportTracking: Boolean,\n      name: String,\n    },\n    usersProp: {\n      webcamsOnlyForModerator: Boolean,\n      guestPolicy: String,\n      authenticatedGuest: Boolean,\n      maxUsers: Number,\n      allowModsToUnmuteUsers: Boolean,\n      meetingLayout: String,\n    },\n    durationProps: {\n      createdTime: Number,\n      duration: Number,\n      createdDate: String,\n      meetingExpireIfNoUserJoinedInMinutes: Number,\n      meetingExpireWhenLastUserLeftInMinutes: Number,\n      userInactivityInspectTimerInMinutes: Number,\n      userInactivityThresholdInMinutes: Number,\n      userActivitySignResponseDelayInMinutes: Number,\n      endWhenNoModerator: Boolean,\n      endWhenNoModeratorDelayInMinutes: Number,\n      timeRemaining: Number,\n    },\n    welcomeProp: {\n      welcomeMsg: String,\n      modOnlyMessage: String,\n      welcomeMsgTemplate: String,\n    },\n    recordProp: Match.ObjectIncluding({\n      allowStartStopRecording: Boolean,\n      autoStartRecording: Boolean,\n      record: Boolean,\n    }),\n    password: {\n      viewerPass: String,\n      moderatorPass: String,\n      activityReportAccessToken: String,\n    },\n    voiceProp: {\n      voiceConf: String,\n      dialNumber: String,\n      telVoice: String,\n      muteOnStart: Boolean,\n    },\n    screenshareProps: {\n      red5ScreenshareIp: String,\n      red5ScreenshareApp: String,\n      screenshareConf: String,\n    },\n    metadataProp: Object,\n    lockSettingsProps: {\n      disableCam: Boolean,\n      disableMic: Boolean,\n      disablePrivateChat: Boolean,\n      disablePublicChat: Boolean,\n      disableNote: Boolean,\n      hideUserList: Boolean,\n      lockOnJoin: Boolean,\n      lockOnJoinConfigurable: Boolean,\n      lockedLayout: Boolean,\n    },\n    systemProps: {\n      html5InstanceId: Number,\n    },\n  });\n\n  const {\n    recordProp,\n    ...restProps\n  } = meeting;\n\n  const newMeeting = restProps;\n\n  const selector = {\n    meetingId,\n  };\n\n  newMeeting.lockSettingsProps = Object.assign(meeting.lockSettingsProps, { setBy: 'temp' });\n\n  const meetingEnded = false;\n\n  let { welcomeMsg } = newMeeting.welcomeProp;\n\n  const sanitizeTextInChat = original => SanitizeHTML(original, {\n    allowedTags: ['a', 'b', 'br', 'i', 'img', 'li', 'small', 'span', 'strong', 'u', 'ul'],\n    allowedAttributes: {\n      a: ['href', 'name', 'target'],\n      img: ['src', 'width', 'height'],\n    },\n    allowedSchemes: ['https'],\n  });\n\n  const sanitizedWelcomeText = sanitizeTextInChat(welcomeMsg);\n  welcomeMsg = sanitizedWelcomeText.replace(\n    'href=\"event:',\n    'href=\"',\n  );\n\n  const insertBlankTarget = (s, i) => `${s.substr(0, i)} target=\"_blank\"${s.substr(i)}`;\n  const linkWithoutTarget = new RegExp('<a href=\"(.*?)\">', 'g');\n  linkWithoutTarget.test(welcomeMsg);\n\n  if (linkWithoutTarget.lastIndex > 0) {\n    welcomeMsg = insertBlankTarget(\n      welcomeMsg,\n      linkWithoutTarget.lastIndex - 1,\n    );\n  }\n\n  newMeeting.welcomeProp.welcomeMsg = welcomeMsg;\n\n  // note: as of July 2020 `modOnlyMessage` is not published to the client side.\n  // We are sanitizing this data simply to prevent future potential usage\n  // At the moment `modOnlyMessage` is obtained from client side as a response to Enter API\n  newMeeting.welcomeProp.modOnlyMessage = sanitizeTextInChat(newMeeting.welcomeProp.modOnlyMessage);\n\n  const modifier = {\n    $set: Object.assign({\n      meetingId,\n      meetingEnded,\n      layout: LAYOUT_TYPE[meeting.usersProp.meetingLayout] || 'smart',\n      publishedPoll: false,\n      guestLobbyMessage: '',\n      randomlySelectedUser: [],\n    }, flat(newMeeting, {\n      safe: true,\n    })),\n  };\n\n  if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n    addAnnotationsStreamer(meetingId);\n    addCursorStreamer(meetingId);\n    addExternalVideoStreamer(meetingId);\n\n    // we don't want to fully process the create meeting message in frontend since it can lead to duplication of meetings in mongo.\n    if (process.env.BBB_HTML5_ROLE === 'frontend') {\n      return;\n    }\n  }\n\n  try {\n    const { insertedId, numberAffected } = RecordMeetings.upsert(selector, { meetingId, ...recordProp });\n\n    if (insertedId) {\n      Logger.info(`Added record prop id=${meetingId}`);\n    } else if (numberAffected) {\n      Logger.info(`Upserted record prop id=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding record prop to collection: ${err}`);\n  }\n\n  addExternalVideo(meetingId);\n\n  try {\n    const { insertedId, numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added meeting id=${meetingId}`);\n\n      const { html5InstanceId } = meeting.systemProps;\n      initPads(meetingId, html5InstanceId);\n    } else if (numberAffected) {\n      Logger.info(`Upserted meeting id=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding meeting to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\nimport { LAYOUT_TYPE } from '/imports/ui/components/layout/enums';\n\nexport default function changeLayout(meetingId, layout, requesterUserId, affectedUsers) {\n  try {\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(layout, String);\n    check(affectedUsers, Match.Maybe([String]));\n\n    const selector = {\n      meetingId,\n    };\n\n    const modifier = {\n      $set: {\n        layout: LAYOUT_TYPE[layout] || 'smart',\n      },\n    };\n\n    const numberAffected = Meetings.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Meeting layout changed to ${layout} for meeting=${meetingId} requested by user=${requesterUserId}`);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method changeLayout ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\n\nexport default function changeLockSettings(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    disableCam: Boolean,\n    disableMic: Boolean,\n    disablePrivChat: Boolean,\n    disablePubChat: Boolean,\n    disableNote: Boolean,\n    hideUserList: Boolean,\n    lockedLayout: Boolean,\n    lockOnJoin: Boolean,\n    lockOnJoinConfigurable: Boolean,\n    setBy: Match.Maybe(String),\n  });\n\n  const {\n    disableCam,\n    disableMic,\n    disablePrivChat,\n    disablePubChat,\n    disableNote,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n    setBy,\n  } = payload;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      lockSettingsProps: {\n        disableCam,\n        disableMic,\n        disablePrivateChat: disablePrivChat,\n        disablePublicChat: disablePubChat,\n        disableNote,\n        hideUserList,\n        lockedLayout,\n        lockOnJoin,\n        lockOnJoinConfigurable,\n        setBy,\n      },\n    },\n  };\n\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting={${meetingId}} updated lock settings`);\n    } else {\n      Logger.info(`meeting={${meetingId}} lock settings were not updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changing meeting={${meetingId}} lock settings: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { check } from 'meteor/check';\n\nexport default function changeUserLock(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    userId: String,\n    locked: Boolean,\n    lockedBy: String,\n  });\n\n  const { userId, locked, lockedBy } = payload;\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      locked,\n    },\n  };\n\n  try {\n    const { numberAffected } = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`User's userId=${userId} lock status was changed to: ${locked} by user userId=${lockedBy}`);\n    } else {\n      Logger.info(`User's userId=${userId} lock status wasn't updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changing user lock setting: ${err}`);\n  }\n}\n","import { ExternalVideoMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearExternalVideoMeeting(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = ExternalVideoMeetings.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared ExternalVideoMeetings in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing ExternalVideoMeetings in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = ExternalVideoMeetings.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared ExternalVideoMeetings in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing ExternalVideoMeetings in all meetings. ${err}`);\n    }\n  }\n}\n","import { MeetingTimeRemaining } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearMeetingTimeRemaining(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = MeetingTimeRemaining.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared MeetingTimeRemaining in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing MeetingTimeRemaining in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = MeetingTimeRemaining.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared MeetingTimeRemaining in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing MeetingTimeRemaining in all meetings. ${err}`);\n    }\n  }\n}\n","import { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function meetingHasEnded(meetingId) {\n  try {\n    const numberAffected = RecordMeetings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared record prop from meeting with id ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing record prop from meeting with id ${meetingId}. ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nimport { removeAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { removeCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport { removeExternalVideoStreamer } from '/imports/api/external-videos/server/streamer';\n\nimport clearUsers from '/imports/api/users/server/modifiers/clearUsers';\nimport clearUsersSettings from '/imports/api/users-settings/server/modifiers/clearUsersSettings';\nimport clearGroupChat from '/imports/api/group-chat/server/modifiers/clearGroupChat';\nimport clearGuestUsers from '/imports/api/guest-users/server/modifiers/clearGuestUsers';\nimport clearBreakouts from '/imports/api/breakouts/server/modifiers/clearBreakouts';\nimport clearAnnotations from '/imports/api/annotations/server/modifiers/clearAnnotations';\nimport clearSlides from '/imports/api/slides/server/modifiers/clearSlides';\nimport clearPolls from '/imports/api/polls/server/modifiers/clearPolls';\nimport clearCaptions from '/imports/api/captions/server/modifiers/clearCaptions';\nimport clearPresentationPods from '/imports/api/presentation-pods/server/modifiers/clearPresentationPods';\nimport clearVoiceUsers from '/imports/api/voice-users/server/modifiers/clearVoiceUsers';\nimport clearUserInfo from '/imports/api/users-infos/server/modifiers/clearUserInfo';\nimport clearConnectionStatus from '/imports/api/connection-status/server/modifiers/clearConnectionStatus';\nimport clearScreenshare from '/imports/api/screenshare/server/modifiers/clearScreenshare';\nimport clearNote from '/imports/api/note/server/modifiers/clearNote';\nimport clearMeetingTimeRemaining from '/imports/api/meetings/server/modifiers/clearMeetingTimeRemaining';\nimport clearLocalSettings from '/imports/api/local-settings/server/modifiers/clearLocalSettings';\nimport clearRecordMeeting from './clearRecordMeeting';\nimport clearExternalVideoMeeting from './clearExternalVideoMeeting';\nimport clearVoiceCallStates from '/imports/api/voice-call-states/server/modifiers/clearVoiceCallStates';\nimport clearVideoStreams from '/imports/api/video-streams/server/modifiers/clearVideoStreams';\nimport clearAuthTokenValidation from '/imports/api/auth-token-validation/server/modifiers/clearAuthTokenValidation';\nimport clearUsersPersistentData from '/imports/api/users-persistent-data/server/modifiers/clearUsersPersistentData';\n\nimport clearWhiteboardMultiUser from '/imports/api/whiteboard-multi-user/server/modifiers/clearWhiteboardMultiUser';\nimport Metrics from '/imports/startup/server/metrics';\n\nexport default function meetingHasEnded(meetingId) {\n  if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n    removeAnnotationsStreamer(meetingId);\n    removeCursorStreamer(meetingId);\n    removeExternalVideoStreamer(meetingId);\n  }\n\n  return Meetings.remove({ meetingId }, () => {\n    clearCaptions(meetingId);\n    clearGroupChat(meetingId);\n    clearGuestUsers(meetingId);\n    clearPresentationPods(meetingId);\n    clearBreakouts(meetingId);\n    clearPolls(meetingId);\n    clearAnnotations(meetingId);\n    clearSlides(meetingId);\n    clearUsers(meetingId);\n    clearUsersSettings(meetingId);\n    clearVoiceUsers(meetingId);\n    clearUserInfo(meetingId);\n    clearConnectionStatus(meetingId);\n    clearNote(meetingId);\n    clearLocalSettings(meetingId);\n    clearMeetingTimeRemaining(meetingId);\n    clearRecordMeeting(meetingId);\n    clearExternalVideoMeeting(meetingId);\n    clearVoiceCallStates(meetingId);\n    clearVideoStreams(meetingId);\n    clearAuthTokenValidation(meetingId);\n    clearWhiteboardMultiUser(meetingId);\n    clearScreenshare(meetingId);\n    clearUsersPersistentData(meetingId);\n    Metrics.removeMeeting(meetingId);\n\n    Logger.info(`Cleared Meetings with id ${meetingId}`);\n  });\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setGuestLobbyMessage(meetingId, guestLobbyMessage) {\n  check(meetingId, String);\n  check(guestLobbyMessage, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      guestLobbyMessage,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Set guest lobby message meetingId=${meetingId} guestLobbyMessage=${guestLobbyMessage}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting guest lobby message: ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setGuestPolicy(meetingId, guestPolicy) {\n  check(meetingId, String);\n  check(guestPolicy, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'usersProp.guestPolicy': guestPolicy,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Set guest policy meetingId=${meetingId} guestPolicy=${guestPolicy}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting guest policy: ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setPublishedPoll(meetingId, isPublished) {\n  check(meetingId, String);\n  check(isPublished, Boolean);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      publishedPoll: isPublished,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set publishedPoll=${isPublished} in meeitingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting publishedPoll=${isPublished} for meetingId=${meetingId}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateRandomUser(meetingId, userIds, choice, requesterId) {\n  check(meetingId, String);\n  check(userIds, Array);\n  check(choice, Number);\n  check(requesterId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const userList = [];\n  if (choice < 0) { // no viewer\n    userList.push([requesterId,0]);\n  } else if (userIds.length == 1) {\n    userList.push([userIds[0],0]);\n  } else {\n    const intervals = [0, 200, 450, 750, 1100, 1500];\n    while (intervals.length > 0) {\n      const userId = userIds[Math.floor(Math.random() * userIds.length )];\n      if (userList.length != 0 && userList[userList.length-1][0] == userId) {// prevent same viewer from being selected sequentially\n        continue;\n      }\n      userList.push([userId, intervals.shift()]);\n    }\n    userList[userList.length-1][0] = userIds[choice]; // last one should be chosen in akka-app\n  }\n\n  if (userIds.length == 2) {\n    // I don't like this.. When the userList is same as previous one, we need to change it a bit to make sure that clients does not skip the change in MongoDB\n    const previousMeeting = Meetings.findOne(selector, { fields: {randomlySelectedUser:1}});\n    if (previousMeeting.randomlySelectedUser.length != 0 && userList[0][0] == previousMeeting.randomlySelectedUser[0][0]) {\n      userList[0][0] = userList[1][0];\n    }\n  }\n\n  const modifier = {\n    $set: {\n      randomlySelectedUser: userList,\n    },\n  };\n\n  try {\n    const { insertedId } = Meetings.upsert(selector, modifier);\n    if (insertedId) {\n      Logger.info(`Set randomly selected userId and interval = ${userList} by requesterId=${requesterId} in meeitingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting randomly selected userId and interval = ${userList} by requesterId=${requesterId} in meetingId=${meetingId}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\n\nexport default function changeWebcamOnlyModerator(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    webcamsOnlyForModerator: Boolean,\n    setBy: String,\n  });\n  const { webcamsOnlyForModerator } = payload;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'usersProp.webcamsOnlyForModerator': webcamsOnlyForModerator,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting={${meetingId}} updated webcam Only for Moderator`);\n    } else {\n      Logger.info(`meeting={${meetingId}} webcam Only for Moderator were not updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changwing meeting={${meetingId}} webcam Only for Moderator: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleMeetingCreation from './handlers/meetingCreation';\nimport handleGetAllMeetings from './handlers/getAllMeetings';\nimport handleMeetingEnd from './handlers/meetingEnd';\nimport handleMeetingDestruction from './handlers/meetingDestruction';\nimport handleMeetingLocksChange from './handlers/meetingLockChange';\nimport handleGuestPolicyChanged from './handlers/guestPolicyChanged';\nimport handleGuestLobbyMessageChanged from './handlers/guestLobbyMessageChanged';\nimport handleUserLockChange from './handlers/userLockChange';\nimport handleRecordingStatusChange from './handlers/recordingStatusChange';\nimport handleRecordingTimerChange from './handlers/recordingTimerChange';\nimport handleTimeRemainingUpdate from './handlers/timeRemainingUpdate';\nimport handleChangeWebcamOnlyModerator from './handlers/webcamOnlyModerator';\nimport handleSelectRandomViewer from './handlers/selectRandomViewer';\nimport handleBroadcastLayout from './handlers/broadcastLayout';\n\nRedisPubSub.on('MeetingCreatedEvtMsg', handleMeetingCreation);\nRedisPubSub.on('SyncGetMeetingInfoRespMsg', handleGetAllMeetings);\nRedisPubSub.on('MeetingEndingEvtMsg', handleMeetingEnd);\nRedisPubSub.on('MeetingDestroyedEvtMsg', handleMeetingDestruction);\nRedisPubSub.on('LockSettingsInMeetingChangedEvtMsg', handleMeetingLocksChange);\nRedisPubSub.on('UserLockedInMeetingEvtMsg', handleUserLockChange);\nRedisPubSub.on('RecordingStatusChangedEvtMsg', handleRecordingStatusChange);\nRedisPubSub.on('UpdateRecordingTimerEvtMsg', handleRecordingTimerChange);\nRedisPubSub.on('WebcamsOnlyForModeratorChangedEvtMsg', handleChangeWebcamOnlyModerator);\nRedisPubSub.on('GetLockSettingsRespMsg', handleMeetingLocksChange);\nRedisPubSub.on('GuestPolicyChangedEvtMsg', handleGuestPolicyChanged);\nRedisPubSub.on('GuestLobbyMessageChangedEvtMsg', handleGuestLobbyMessageChanged);\nRedisPubSub.on('MeetingTimeRemainingUpdateEvtMsg', handleTimeRemainingUpdate);\nRedisPubSub.on('SelectRandomViewerRespMsg', handleSelectRandomViewer);\nRedisPubSub.on('BroadcastLayoutEvtMsg', handleBroadcastLayout);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport endMeeting from './methods/endMeeting';\nimport toggleRecording from './methods/toggleRecording';\nimport transferUser from './methods/transferUser';\nimport toggleLockSettings from './methods/toggleLockSettings';\nimport toggleWebcamsOnlyForModerator from './methods/toggleWebcamsOnlyForModerator';\nimport clearRandomlySelectedUser from './methods/clearRandomlySelectedUser';\nimport changeLayout from './methods/changeLayout';\n\nMeteor.methods({\n  endMeeting,\n  toggleRecording,\n  toggleLockSettings,\n  transferUser,\n  toggleWebcamsOnlyForModerator,\n  clearRandomlySelectedUser,\n  changeLayout,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Meetings, {\n  RecordMeetings,\n  MeetingTimeRemaining,\n  ExternalVideoMeetings,\n} from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction meetings(role) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Meetings was requested by unauth connection ${this.connection.id}`);\n    return Meetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing meeting', { meetingId, userId });\n\n  const selector = {\n    $or: [\n      { meetingId },\n    ],\n  };\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    selector.$or.push({\n      'meetingProp.isBreakout': true,\n      'breakoutProps.parentId': meetingId,\n    });\n  }\n\n  const options = {\n    fields: {\n      password: false,\n      'welcomeProp.modOnlyMessage': false,\n    },\n  };\n\n  if (User.role === ROLE_MODERATOR) {\n    delete options.fields.password;\n    options.fields['password.viewerPass'] = false;\n    options.fields['password.moderatorPass'] = false;\n  }\n\n  return Meetings.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundMeetings = meetings.bind(this);\n  return boundMeetings(...args);\n}\n\nMeteor.publish('meetings', publish);\n\nfunction recordMeetings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing RecordMeetings was requested by unauth connection ${this.connection.id}`);\n    return RecordMeetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing RecordMeetings for ${meetingId} ${userId}`);\n\n  return RecordMeetings.find({ meetingId });\n}\nfunction recordPublish(...args) {\n  const boundRecordMeetings = recordMeetings.bind(this);\n  return boundRecordMeetings(...args);\n}\n\nMeteor.publish('record-meetings', recordPublish);\n\nfunction externalVideoMeetings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing ExternalVideoMeetings was requested by unauth connection ${this.connection.id}`);\n    return ExternalVideoMeetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing ExternalVideoMeetings for ${meetingId} ${userId}`);\n\n  return ExternalVideoMeetings.find({ meetingId });\n}\n\nfunction externalVideoPublish(...args) {\n  const boundExternalVideoMeetings = externalVideoMeetings.bind(this);\n  return boundExternalVideoMeetings(...args);\n}\n\nMeteor.publish('external-video-meetings', externalVideoPublish);\n\nfunction meetingTimeRemaining() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing MeetingTimeRemaining was requested by unauth connection ${this.connection.id}`);\n    return MeetingTimeRemaining.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug(`Publishing MeetingTimeRemaining for ${meetingId} ${userId}`);\n\n  return MeetingTimeRemaining.find({ meetingId });\n}\nfunction timeRemainingPublish(...args) {\n  const boundtimeRemaining = meetingTimeRemaining.bind(this);\n  return boundtimeRemaining(...args);\n}\n\nMeteor.publish('meeting-time-remaining', timeRemainingPublish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Meetings = new Mongo.Collection('meetings');\nconst RecordMeetings = new Mongo.Collection('record-meetings');\nconst ExternalVideoMeetings = new Mongo.Collection('external-video-meetings');\nconst MeetingTimeRemaining = new Mongo.Collection('meeting-time-remaining');\n\nif (Meteor.isServer) {\n  // types of queries for the meetings:\n  // 1. meetingId\n\n  Meetings._ensureIndex({ meetingId: 1 });\n  RecordMeetings._ensureIndex({ meetingId: 1 });\n  ExternalVideoMeetings._ensureIndex({ meetingId: 1 });\n  MeetingTimeRemaining._ensureIndex({ meetingId: 1 });\n}\n\nexport {\n  RecordMeetings,\n  ExternalVideoMeetings,\n  MeetingTimeRemaining,\n};\nexport default Meetings;\n","import { check } from 'meteor/check';\nimport updateNote from '/imports/api/note/server/modifiers/updateNote';\n\nexport default function handlePadUpdate({ body }) {\n  const { pad, revs } = body;\n  const { id } = pad;\n\n  check(id, String);\n  check(revs, Number);\n\n  updateNote(id, revs);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addPad(meetingId, padId, readOnlyId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'AddPadSysMsg';\n\n  try {\n    check(meetingId, String);\n    check(padId, String);\n    check(readOnlyId, String);\n\n    const payload = {\n      padId,\n      readOnlyId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, 'nodeJSapp', payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method addPad ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  createPadURL,\n  getReadOnlyIdURL,\n  withInstaceId,\n} from '/imports/api/common/server/etherpad';\nimport {\n  generatePadId,\n  isEnabled,\n  getDataFromResponse,\n} from '/imports/api/note/server/helpers';\nimport addNote from '/imports/api/note/server/modifiers/addNote';\nimport axios from 'axios';\n\nexport default function createNote(meetingId, instanceId) {\n  try {\n    // Avoid note creation if this feature is disabled\n    if (!isEnabled()) {\n      Logger.warn('Shared notes are disabled');\n      return;\n    }\n\n    check(meetingId, String);\n    check(instanceId, Number);\n\n    const noteId = withInstaceId(instanceId, generatePadId(meetingId));\n\n    const createURL = createPadURL(noteId);\n\n    axios({\n      method: 'get',\n      url: createURL,\n      responseType: 'json',\n    }).then((responseOuter) => {\n      const { status } = responseOuter;\n      if (status !== 200) {\n        Logger.error(`Could not get note info for ${meetingId} ${status}`);\n        return;\n      }\n      const readOnlyURL = getReadOnlyIdURL(noteId);\n      axios({\n        method: 'get',\n        url: readOnlyURL,\n        responseType: 'json',\n      }).then((response) => {\n        const readOnlyNoteId = getDataFromResponse(response.data, 'readOnlyID');\n        if (readOnlyNoteId) {\n          addNote(meetingId, noteId, readOnlyNoteId);\n        } else {\n          Logger.error(`Could not get note readOnlyID for ${meetingId}`);\n        }\n      }).catch((error) => Logger.error(`Could not get note readOnlyID for ${meetingId}: ${error}`));\n    }).catch((error) => Logger.error(`Could not create note for ${meetingId}: ${error}`));\n  } catch (err) {\n    Logger.error(`Exception while invoking method createNote ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\nimport addPad from '/imports/api/note/server/methods/addPad';\n\nexport default function addNote(meetingId, noteId, readOnlyNoteId) {\n  check(meetingId, String);\n  check(noteId, String);\n  check(readOnlyNoteId, String);\n\n  const selector = {\n    meetingId,\n    noteId,\n  };\n\n  const modifier = {\n    meetingId,\n    noteId,\n    readOnlyNoteId,\n    revs: 0,\n  };\n\n  try {\n    const { insertedId } = Note.upsert(selector, modifier);\n\n    if (insertedId) {\n      addPad(meetingId, noteId, readOnlyNoteId);\n      Logger.info(`Added note id=${noteId} readOnlyId=${readOnlyNoteId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted note id=${noteId} readOnlyId=${readOnlyNoteId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding note to the collection: ${err}`);\n  }\n}\n","import Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearNote(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Note.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Note (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Note (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Note.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Note (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Note (all). ${err}`);\n    }\n  }\n}\n","import Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateNote(noteId, revs) {\n  check(noteId, String);\n  check(revs, Number);\n\n  const selector = {\n    noteId,\n  };\n\n  const modifier = {\n    $set: {\n      revs,\n    },\n  };\n\n  try {\n    const numberAffected = Note.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      Logger.verbose('Notes: update note pad', { pad: noteId, revs });\n    }\n  } catch (err) {\n    Logger.error('Notes: error when updating note pad', { err });\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForNotePadOnly } from '/imports/api/note/server/helpers';\nimport handlePadUpdate from './handlers/padUpdate';\n\nRedisPubSub.on('PadUpdateSysMsg', processForNotePadOnly(handlePadUpdate));\n","import { Meteor } from 'meteor/meteor';\nimport { hashSHA1 } from '/imports/api/common/server/etherpad';\n\nconst ETHERPAD = Meteor.settings.private.etherpad;\nconst NOTE_CONFIG = Meteor.settings.public.note;\nconst TOKEN = '_';\n\nconst isEnabled = () => NOTE_CONFIG.enabled;\n\nconst getDataFromResponse = (data, key) => {\n  if (data) {\n    const innerData = data.data;\n    if (innerData && innerData[key]) {\n      return innerData[key];\n    }\n  }\n  return null;\n};\n\nconst isNotePad = padId => padId.search(TOKEN);\n\nconst processForNotePadOnly = fn => (message, ...args) => {\n  const { body } = message;\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  if (isNotePad(id)) return fn(message, ...args);\n  return () => { };\n};\n\nconst generatePadId = meetingId => hashSHA1(meetingId + ETHERPAD.apikey);\n\nexport {\n  generatePadId,\n  isEnabled,\n  getDataFromResponse,\n  processForNotePadOnly,\n};\n","import './publishers';\nimport './eventHandlers';\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Note from '/imports/api/note';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction note() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Note was requested by unauth connection ${this.connection.id}`);\n    return Note.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.info(`Publishing Note for ${meetingId} ${userId}`);\n\n  return Note.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundNote = note.bind(this);\n  return boundNote(...args);\n}\n\nMeteor.publish('note', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Note = new Mongo.Collection('note');\n\nif (Meteor.isServer) {\n  Note._ensureIndex({ meetingId: 1, noteId: 1 });\n}\n\nexport default Note;\n","import { check } from 'meteor/check';\nimport setPublishedPoll from '../../../meetings/server/modifiers/setPublishedPoll';\nimport handleSendSystemChatForPublishedPoll from './sendPollChatMsg';\n\nconst POLL_CHAT_MESSAGE = Meteor.settings.public.poll.chatMessage;\n\nexport default function pollPublished({ body }, meetingId) {\n  const { pollId } = body;\n\n  check(meetingId, String);\n  check(pollId, String);\n\n  setPublishedPoll(meetingId, true);\n\n  if (POLL_CHAT_MESSAGE) {\n    handleSendSystemChatForPublishedPoll({ body }, meetingId);\n  }\n}\n","import { check } from 'meteor/check';\nimport addPoll from '../modifiers/addPoll';\nimport setPublishedPoll from '../../../meetings/server/modifiers/setPublishedPoll';\n\nexport default function pollStarted({ body }, meetingId) {\n  const {\n    userId, poll, pollType, secretPoll, question,\n  } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(poll, Object);\n  check(pollType, String);\n  check(secretPoll, Boolean);\n  check(question, String);\n\n  setPublishedPoll(meetingId, false);\n\n  return addPoll(meetingId, userId, poll, pollType, secretPoll, question);\n}\n","import { check } from 'meteor/check';\nimport removePoll from '../modifiers/removePoll';\nimport clearPolls from '../modifiers/clearPolls';\n\nexport default function pollStopped({ body }, meetingId) {\n  const { poll } = body;\n\n  check(meetingId, String);\n\n  if (poll) {\n    const { pollId } = poll;\n\n    check(pollId, String);\n\n    return removePoll(meetingId, pollId);\n  }\n\n  return clearPolls(meetingId);\n}\n","import addSystemMsg from '../../../group-chat-msg/server/modifiers/addSystemMsg';\n\nexport default function sendPollChatMsg({ body }, meetingId) {\n  const { poll } = body;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const PUBLIC_CHAT_SYSTEM_ID = CHAT_CONFIG.system_userid;\n  const CHAT_POLL_RESULTS_MESSAGE = CHAT_CONFIG.system_messages_keys.chat_poll_result;\n  const SYSTEM_CHAT_TYPE = CHAT_CONFIG.type_system;\n\n  const pollResultData = poll;\n  const extra = {\n    type: 'poll',\n    pollResultData,\n  };\n\n  const payload = {\n    id: `${SYSTEM_CHAT_TYPE}-${CHAT_POLL_RESULTS_MESSAGE}`,\n    timestamp: Date.now(),\n    correlationId: `${PUBLIC_CHAT_SYSTEM_ID}-${Date.now()}`,\n    sender: {\n      id: PUBLIC_CHAT_SYSTEM_ID,\n      name: '',\n    },\n    message: '',\n    extra,\n  };\n\n  return addSystemMsg(meetingId, PUBLIC_GROUP_CHAT_ID, payload);\n}\n","import { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userResponded({ body }) {\n  const { pollId, userId, answerId } = body;\n\n  check(pollId, String);\n  check(userId, String);\n  check(answerId, Number);\n\n  const selector = {\n    id: pollId,\n  };\n\n  const modifier = {\n    $pull: {\n      users: userId,\n    },\n    $push: {\n      responses: { userId, answerId },\n    },\n  };\n\n  try {\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updating Poll response (userId: ${userId}, response: ${answerId}, pollId: ${pollId})`);\n    }\n  } catch (err) {\n    Logger.error(`Updating Poll responses: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nexport default function userTypedResponse({ header, body }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RespondToPollReqMsg';\n\n  const { pollId, userId, answer } = body;\n  const { meetingId } = header;\n\n  check(pollId, String);\n  check(meetingId, String);\n  check(userId, String);\n  check(answer, String);\n\n  const poll = Polls.findOne({ meetingId, id: pollId });\n\n  let answerId = 0;\n  poll.answers.forEach((a) => {\n    const { id, key } = a;\n    if (key === answer) answerId = id;\n  });\n\n  const payload = {\n    requesterId: userId,\n    pollId,\n    questionId: 0,\n    answerId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\nimport updateVotes from '../modifiers/updateVotes';\n\nexport default function userVoted({ body }, meetingId) {\n  const { poll } = body;\n\n  check(meetingId, String);\n  check(poll, {\n    id: String,\n    questionType: String,\n    questionText: String,\n    answers: [\n      {\n        id: Number,\n        key: String,\n        numVotes: Number,\n      },\n    ],\n    numRespondents: Number,\n    numResponders: Number,\n  });\n\n  return updateVotes(poll, meetingId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function publishPoll() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ShowPollResultReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const poll = Polls.findOne({ meetingId }); // TODO--send pollid from client\n    if (!poll) {\n      Logger.error(`Attempted to publish inexisting poll for meetingId: ${meetingId}`);\n      return false;\n    }\n\n    RedisPubSub.publishUserMessage(\n      CHANNEL,\n      EVENT_NAME,\n      meetingId,\n      requesterUserId,\n      ({ requesterId: requesterUserId, pollId: poll.id }),\n    );\n  } catch (err) {\n    Logger.error(`Exception while invoking method publishPoll ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function publishTypedVote(id, pollAnswer) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const MAX_INPUT_CHARS = Meteor.settings.public.poll.maxTypedAnswerLength;\n  let EVENT_NAME = 'RespondToTypedPollReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(pollAnswer, String);\n    check(id, String);\n\n    const activePoll = Polls.findOne({ meetingId, id }, {\n      fields: {\n        answers: 1,\n      },\n    });\n\n    let existingAnsId = null;\n    activePoll.answers.forEach((a) => {\n      if (a.key === pollAnswer) existingAnsId = a.id;\n    });\n\n    if (existingAnsId !== null) {\n      check(existingAnsId, Number);\n      EVENT_NAME = 'RespondToPollReqMsg';\n\n      return RedisPubSub.publishUserMessage(\n        CHANNEL,\n        EVENT_NAME,\n        meetingId,\n        requesterUserId,\n        {\n          requesterId: requesterUserId,\n          pollId: id,\n          questionId: 0,\n          answerId: existingAnsId,\n        },\n      );\n    }\n\n    const payload = {\n      requesterId: requesterUserId,\n      pollId: id,\n      questionId: 0,\n      answer: pollAnswer.substring(0, MAX_INPUT_CHARS),\n    };\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method publishTypedVote ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function publishVote(pollId, pollAnswerId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'RespondToPollReqMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(pollAnswerId, Number);\n    check(pollId, String);\n\n    const allowedToVote = Polls.findOne({\n      id: pollId,\n      users: { $in: [requesterUserId] },\n      meetingId,\n    }, {\n      fields: {\n        users: 1,\n      },\n    });\n\n    if (!allowedToVote) {\n      Logger.info(`Poll User={${requesterUserId}} has already voted in PollId={${pollId}}`);\n      return null;\n    }\n\n    const selector = {\n      users: requesterUserId,\n      meetingId,\n      'answers.id': pollAnswerId,\n    };\n\n    const payload = {\n      requesterId: requesterUserId,\n      pollId,\n      questionId: 0,\n      answerId: pollAnswerId,\n    };\n\n    /*\n     We keep an array of people who were in the meeting at the time the poll\n     was started. The poll is published to them only.\n     Once they vote - their ID is removed and they cannot see the poll anymore\n    */\n    const modifier = {\n      $pull: {\n        users: requesterUserId,\n      },\n    };\n\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Removed responded user=${requesterUserId} from poll (meetingId: ${meetingId}, pollId: ${pollId}!)`);\n\n      RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method publishVote ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function startPoll(pollTypes, pollType, pollId, secretPoll, question, answers) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  let EVENT_NAME = 'StartPollReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(pollId, String);\n    check(pollType, String);\n    check(secretPoll, Boolean);\n\n    const payload = {\n      requesterId: requesterUserId,\n      pollId: `${pollId}/${new Date().getTime()}`,\n      pollType,\n      secretPoll,\n      question,\n    };\n\n    if (pollType === pollTypes.Custom) {\n      EVENT_NAME = 'StartCustomPollReqMsg';\n      check(answers, Array);\n      payload.answers = answers;\n    }\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method startPoll ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function stopPoll() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StopPollReqMsg';\n\n  try {\n    const { meetingId, requesterUserId: requesterId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterId, String);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterId, ({ requesterId }));\n  } catch (err) {\n    Logger.error(`Exception while invoking method stopPoll ${err.stack}`);\n  }\n}\n","import Users from '/imports/api/users';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport { check } from 'meteor/check';\n\nexport default function addPoll(meetingId, requesterId, poll, pollType, secretPoll, question = '') {\n  check(requesterId, String);\n  check(meetingId, String);\n  check(poll, {\n    id: String,\n    answers: [\n      {\n        id: Number,\n        key: String,\n      },\n    ],\n  });\n\n  const userSelector = {\n    meetingId,\n    userId: { $ne: requesterId },\n    clientType: { $ne: 'dial-in-user' },\n  };\n\n  const userIds = Users.find(userSelector, { fields: { userId: 1 } })\n    .fetch()\n    .map(user => user.userId);\n\n  const selector = {\n    meetingId,\n    requester: requesterId,\n    id: poll.id,\n  };\n\n  const modifier = Object.assign(\n    { meetingId },\n    { requester: requesterId },\n    { users: userIds },\n    { question, pollType, secretPoll },\n    flat(poll, { safe: true }),\n  );\n\n\n  try {\n    const { insertedId } = Polls.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added Poll id=${poll.id}`);\n    } else {\n      Logger.info(`Upserted Poll id=${poll.id}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding Poll to collection: ${poll.id}`);\n  }\n}\n","import Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPolls(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Polls.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Polls (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Polls (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Polls.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Polls (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Polls (all). ${err}`);\n    }\n  }\n}\n","import Polls from '/imports/api/polls';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removePoll(meetingId, id) {\n  check(meetingId, String);\n  check(id, String);\n\n  const selector = {\n    meetingId,\n    id,\n  };\n\n  try {\n    const numberAffected = Polls.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed Poll id=${id}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing Poll from collection: ${err}`);\n  }\n}\n","import Polls from '/imports/api/polls';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\n\nexport default function updateVotes(poll, meetingId) {\n  check(meetingId, String);\n  check(poll, Object);\n\n  const {\n    id,\n    answers,\n    numResponders,\n    numRespondents,\n  } = poll;\n\n  check(id, String);\n  check(answers, Array);\n\n  check(numResponders, Number);\n  check(numRespondents, Number);\n\n  const selector = {\n    meetingId,\n    id,\n  };\n\n  const modifier = {\n    $set: flat(poll, { safe: true }),\n  };\n\n  try {\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updating Polls collection vote (meetingId: ${meetingId}, pollId: ${id}!)`);\n    }\n  } catch (err) {\n    Logger.error(`Updating Polls collection vote: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handlePollStarted from './handlers/pollStarted';\nimport handlePollStopped from './handlers/pollStopped';\nimport handlePollPublished from './handlers/pollPublished';\nimport handleUserVoted from './handlers/userVoted';\nimport handleUserResponded from './handlers/userResponded';\nimport handleUserTypedResponse from './handlers/userTypedResponse';\n\nRedisPubSub.on('PollShowResultEvtMsg', handlePollPublished);\nRedisPubSub.on('PollStartedEvtMsg', handlePollStarted);\nRedisPubSub.on('PollStoppedEvtMsg', handlePollStopped);\nRedisPubSub.on('PollUpdatedEvtMsg', handleUserVoted);\nRedisPubSub.on('UserRespondedToPollRespMsg', handleUserResponded);\nRedisPubSub.on('UserRespondedToTypedPollRespMsg', handleUserTypedResponse);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport publishTypedVote from './methods/publishTypedVote';\nimport publishVote from './methods/publishVote';\nimport publishPoll from './methods/publishPoll';\nimport startPoll from './methods/startPoll';\nimport stopPoll from './methods/stopPoll';\n\nMeteor.methods({\n  publishVote,\n  publishTypedVote,\n  publishPoll,\n  startPoll,\n  stopPoll,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Polls from '/imports/api/polls';\nimport AuthTokenValidation, {\n  ValidationStates,\n} from '/imports/api/auth-token-validation';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction currentPoll(secretPoll) {\n  const tokenValidation = AuthTokenValidation.findOne({\n    connectionId: this.connection.id,\n  });\n\n  if (\n    !tokenValidation ||\n    tokenValidation.validationStatus !== ValidationStates.VALIDATED\n  ) {\n    Logger.warn(\n      `Publishing Polls was requested by unauth connection ${this.connection.id}`\n    );\n    return Polls.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  if (!User || User.role !== ROLE_MODERATOR) {\n    Logger.warn(\n      'Publishing current-poll was requested by non-moderator connection',\n      { meetingId, userId, connectionId: this.connection.id }\n    );\n    return Polls.find({ meetingId: '' });\n  }\n\n  Logger.debug('Publishing Polls', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n  };\n\n  const options = { fields: {} };\n\n  const hasPoll = Polls.findOne(selector);\n\n  if ((hasPoll && hasPoll.secretPoll) || secretPoll) {\n    options.fields.responses = 0;\n  }\n\n  return Polls.find(selector, options);\n}\n\nfunction publishCurrentPoll(...args) {\n  const boundPolls = currentPoll.bind(this);\n  return boundPolls(...args);\n}\n\nMeteor.publish('current-poll', publishCurrentPoll);\n\nfunction polls() {\n  const tokenValidation = AuthTokenValidation.findOne({\n    connectionId: this.connection.id,\n  });\n\n  if (\n    !tokenValidation ||\n    tokenValidation.validationStatus !== ValidationStates.VALIDATED\n  ) {\n    Logger.warn(\n      `Publishing Polls was requested by unauth connection ${this.connection.id}`\n    );\n    return Polls.find({ meetingId: '' });\n  }\n\n  const options = {\n    fields: {\n      'answers.numVotes': 0,\n      responses: 0,\n    },\n  };\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing polls', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n    users: userId,\n  };\n\n  return Polls.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundPolls = polls.bind(this);\n  return boundPolls(...args);\n}\n\nMeteor.publish('polls', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Polls = new Mongo.Collection('polls');\n\nif (Meteor.isServer) {\n  // We can have just one active poll per meeting\n  // makes no sense to index it by anything other than meetingId\n\n  Polls._ensureIndex({ meetingId: 1 });\n}\n\nexport default Polls;\n","import { check } from 'meteor/check';\nimport addPresentationPod from '../modifiers/addPresentationPod';\n\nexport default function handleCreateNewPresentationPod({ body }, meetingId) {\n  check(body, {\n    currentPresenterId: String,\n    podId: String,\n  });\n  check(meetingId, String);\n\n  const { currentPresenterId, podId } = body;\n\n  const pod = {\n    currentPresenterId,\n    podId,\n  };\n\n  addPresentationPod(meetingId, pod);\n}\n","import { check } from 'meteor/check';\nimport removePresentationPod from '../modifiers/removePresentationPod';\n\nexport default function handleRemovePresentationPod({ body }, meetingId) {\n  check(body, Object);\n  check(meetingId, String);\n\n  const { podId } = body;\n\n  check(podId, String);\n\n  removePresentationPod(meetingId, podId);\n}\n","import { check } from 'meteor/check';\nimport setPresenterInPod from '../modifiers/setPresenterInPod';\n\nexport default function handleSetPresenterInPod({ body }, meetingId) {\n  check(body, Object);\n\n  const { podId, nextPresenterId } = body;\n\n  check(podId, String);\n  check(nextPresenterId, String);\n\n  setPresenterInPod(meetingId, podId, nextPresenterId);\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport removePresentationPod from '../modifiers/removePresentationPod';\nimport addPresentationPod from '../modifiers/addPresentationPod';\n\nexport default function handleSyncGetPresentationPods({ body }, meetingId) {\n  check(body, Object);\n  check(meetingId, String);\n\n  const { pods } = body;\n  check(pods, Array);\n\n  const presentationPodIds = pods.map(pod => pod.id);\n\n  const presentationPodsToRemove = PresentationPods.find({\n    meetingId,\n    podId: { $nin: presentationPodIds },\n  }, { fields: { podId: 1 } }).fetch();\n\n  presentationPodsToRemove.forEach(p => removePresentationPod(meetingId, p.podId));\n\n  pods.forEach((pod) => {\n    // 'podId' and 'currentPresenterId' for some reason called 'id' and 'currentPresenter'\n    // in this message\n    const {\n      id: podId,\n      currentPresenter: currentPresenterId,\n      presentations,\n    } = pod;\n    addPresentationPod(meetingId, { podId, currentPresenterId }, presentations);\n  });\n}\n","import { Match, check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport addPresentation from '/imports/api/presentations/server/modifiers/addPresentation';\n\n// 'presentations' is passed down here when we receive a Sync message\n// and it's not used when we just create a new presentation pod\nexport default function addPresentationPod(meetingId, pod, presentations = undefined) {\n  check(meetingId, String);\n  check(presentations, Match.Maybe(Array));\n  check(pod, {\n    currentPresenterId: String,\n    podId: String,\n  });\n\n  const { currentPresenterId, podId } = pod;\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const modifier = {\n    meetingId,\n    podId,\n    currentPresenterId,\n  };\n\n  try {\n    const { insertedId } = PresentationPods.upsert(selector, modifier);\n\n    // if it's a Sync message - continue adding the attached presentations\n    if (presentations) {\n      presentations.forEach(presentation => addPresentation(meetingId, podId, presentation));\n    }\n\n    if (insertedId) {\n      Logger.info(`Added presentation pod id=${podId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted presentation pod id=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding presentation pod to the collection: ${err}`);\n  }\n}\n","import PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport clearPresentations from '/imports/api/presentations/server/modifiers/clearPresentations';\nimport clearPresentationUploadToken from '/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken';\n\nexport default function clearPresentationPods(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = PresentationPods.remove({ meetingId });\n\n      if (numberAffected) {\n        clearPresentations(meetingId);\n        clearPresentationUploadToken(meetingId);\n        Logger.info(`Cleared Presentations Pods (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Presentations Pods (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = PresentationPods.remove({});\n\n      if (numberAffected) {\n        clearPresentations();\n        clearPresentationUploadToken();\n        Logger.info('Cleared Presentations Pods (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Presentations Pods (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport clearPresentations from '/imports/api/presentations/server/modifiers/clearPresentations';\nimport clearPresentationUploadToken from '/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken';\n\nexport default function removePresentationPod(meetingId, podId) {\n  check(meetingId, String);\n  check(podId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  try {\n    const numberAffected = PresentationPods.remove(selector);\n\n    if (numberAffected && podId) {\n      Logger.info(`Removed presentation pod id=${podId} meeting=${meetingId}`);\n      clearPresentations(meetingId, podId);\n      clearPresentationUploadToken(meetingId, podId);\n    }\n  } catch (err) {\n    Logger.error(`Error on removing presentation pod from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresenterInPod(meetingId, podId, nextPresenterId) {\n  check(meetingId, String);\n  check(podId, String);\n  check(nextPresenterId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const modifier = {\n    $set: {\n      currentPresenterId: nextPresenterId,\n    },\n  };\n\n  try {\n    const { numberAffected } = PresentationPods.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set a new presenter in pod id=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting a presenter in pod: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleCreateNewPresentationPod from './handlers/createNewPresentationPod';\nimport handleRemovePresentationPod from './handlers/removePresentationPod';\nimport handleSyncGetPresentationPods from './handlers/syncGetPresentationPods';\nimport handleSetPresenterInPod from './handlers/setPresenterInPod';\n\nRedisPubSub.on('CreateNewPresentationPodEvtMsg', handleCreateNewPresentationPod);\nRedisPubSub.on('RemovePresentationPodEvtMsg', handleRemovePresentationPod);\nRedisPubSub.on('SetPresenterInPodRespMsg', handleSetPresenterInPod);\nRedisPubSub.on('SyncGetPresentationPodsRespMsg', handleSyncGetPresentationPods);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentationPods() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing PresentationPods was requested by unauth connection ${this.connection.id}`);\n    return PresentationPods.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug('Publishing presentation-pods', { meetingId, userId });\n\n  return PresentationPods.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundPresentationPods = presentationPods.bind(this);\n  return boundPresentationPods(...args);\n}\n\nMeteor.publish('presentation-pods', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst PresentationPods = new Mongo.Collection('presentation-pods');\n\nif (Meteor.isServer) {\n  // types of queries for the presentation pods:\n  // 1. meetingId, podId  ( 4 )\n\n  PresentationPods._ensureIndex({ meetingId: 1, podId: 1 });\n}\n\nexport default PresentationPods;\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\n\nexport default function handlePresentationUploadTokenFail({ body, header }, meetingId) {\n  check(body, Object);\n\n  const { userId } = header;\n  const { podId, filename } = body;\n\n  check(userId, String);\n  check(podId, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    podId,\n    filename,\n  };\n\n  try {\n    const { numberAffected } = PresentationUploadToken.upsert(selector, { failed: true, authzToken: null });\n\n    if (numberAffected) {\n      Logger.info(`Removing presentationToken filename=${filename} podId=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing presentationToken from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\n\nexport default function handlePresentationUploadTokenPass({ body, header }, meetingId) {\n  check(body, Object);\n\n  const { userId } = header;\n  const { podId, authzToken, filename } = body;\n\n  check(userId, String);\n  check(podId, String);\n  check(authzToken, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n  };\n\n  const modifier = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n    authzToken,\n    failed: false,\n    used: false,\n  };\n\n  try {\n    const { insertedId } = PresentationUploadToken.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Inserting presentationToken filename=${filename} podId=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Inserting presentationToken from collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function requestPresentationUploadToken(podId, filename) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'PresentationUploadTokenReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(podId, String);\n    check(filename, String);\n\n    const payload = {\n      podId,\n      filename,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method requestPresentationUploadToken ${err.stack}`);\n  }\n}\n","import PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function setUsedToken(authzToken) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(authzToken, String);\n\n    const payload = {\n      $set: {\n        used: true,\n      },\n    };\n\n    const numberAffected = PresentationUploadToken.update({\n      meetingId,\n      userId: requesterUserId,\n      authzToken,\n    }, payload);\n\n    if (numberAffected) {\n      Logger.info(`Token: ${authzToken} has been set as used in meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method setUsedToken ${err.stack}`);\n  }\n}\n","import PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPresentationUploadToken(meetingId, podId) {\n  if (meetingId && podId) {\n    try {\n      const numberAffected = PresentationUploadToken.remove({ meetingId, podId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations Upload Token (${meetingId}, ${podId})`);\n        return true;\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (${meetingId}, ${podId}). ${err}`);\n      return false;\n    }\n  }\n\n  if (meetingId) {\n    try {\n      const numberAffected = PresentationUploadToken.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations Upload Token (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      // clearing presentations for the whole server\n      const numberAffected = PresentationUploadToken.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Presentations Upload Token (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (all). ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nimport handlePresentationUploadTokenPass from './handlers/presentationUploadTokenPass';\nimport handlePresentationUploadTokenFail from './handlers/presentationUploadTokenFail';\n\nRedisPubSub.on('PresentationUploadTokenPassRespMsg', processForHTML5ServerOnly(handlePresentationUploadTokenPass));\nRedisPubSub.on('PresentationUploadTokenFailRespMsg', processForHTML5ServerOnly(handlePresentationUploadTokenFail));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport requestPresentationUploadToken from './methods/requestPresentationUploadToken';\nimport setUsedToken from './methods/setUsedToken';\n\nMeteor.methods({\n  requestPresentationUploadToken,\n  setUsedToken,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentationUploadToken(podId, filename) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing PresentationUploadToken was requested by unauth connection ${this.connection.id}`);\n    return PresentationUploadToken.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  check(podId, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n  };\n\n  Logger.debug('Publishing PresentationUploadToken', { meetingId, userId });\n\n  return PresentationUploadToken.find(selector);\n}\n\nfunction publish(...args) {\n  const boundPresentationUploadToken = presentationUploadToken.bind(this);\n  return boundPresentationUploadToken(...args);\n}\n\nMeteor.publish('presentation-upload-token', publish);\n","const PresentationUploadToken = new Mongo.Collection('presentation-upload-token');\n\nexport default PresentationUploadToken;\n","import { check } from 'meteor/check';\nimport addPresentation from '../modifiers/addPresentation';\n\nexport default function handlePresentationAdded({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentation, podId } = body;\n\n  check(meetingId, String);\n  check(podId, String);\n  check(presentation, Object);\n\n  return addPresentation(meetingId, podId, presentation);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Presentations from '/imports/api/presentations';\n\n// const OFFICE_DOC_CONVERSION_SUCCESS_KEY = 'OFFICE_DOC_CONVERSION_SUCCESS';\nconst OFFICE_DOC_CONVERSION_FAILED_KEY = 'OFFICE_DOC_CONVERSION_FAILED';\nconst OFFICE_DOC_CONVERSION_INVALID_KEY = 'OFFICE_DOC_CONVERSION_INVALID';\nconst SUPPORTED_DOCUMENT_KEY = 'SUPPORTED_DOCUMENT';\nconst UNSUPPORTED_DOCUMENT_KEY = 'UNSUPPORTED_DOCUMENT';\nconst PAGE_COUNT_FAILED_KEY = 'PAGE_COUNT_FAILED';\nconst PAGE_COUNT_EXCEEDED_KEY = 'PAGE_COUNT_EXCEEDED';\nconst PDF_HAS_BIG_PAGE_KEY = 'PDF_HAS_BIG_PAGE';\nconst GENERATED_SLIDE_KEY = 'GENERATED_SLIDE';\nconst FILE_TOO_LARGE_KEY = 'FILE_TOO_LARGE';\n// const GENERATING_THUMBNAIL_KEY = 'GENERATING_THUMBNAIL';\n// const GENERATED_THUMBNAIL_KEY = 'GENERATED_THUMBNAIL';\n// const GENERATING_TEXTFILES_KEY = 'GENERATING_TEXTFILES';\n// const GENERATED_TEXTFILES_KEY = 'GENERATED_TEXTFILES';\n// const GENERATING_SVGIMAGES_KEY = 'GENERATING_SVGIMAGES';\n// const GENERATED_SVGIMAGES_KEY = 'GENERATED_SVGIMAGES';\n// const CONVERSION_COMPLETED_KEY = 'CONVERSION_COMPLETED';\n\nexport default function handlePresentationConversionUpdate({ body }, meetingId) {\n  check(body, Object);\n\n  const {\n    presentationId, podId, messageKey: status, presName: presentationName,\n  } = body;\n\n  check(meetingId, String);\n  check(presentationId, Match.Maybe(String));\n  check(podId, String);\n  check(status, String);\n\n  const statusModifier = {\n    'conversion.status': status,\n    'conversion.error': false,\n    'conversion.done': false,\n  };\n\n  switch (status) {\n    case SUPPORTED_DOCUMENT_KEY:\n      statusModifier.id = presentationId;\n      statusModifier.name = presentationName;\n      break;\n\n    case FILE_TOO_LARGE_KEY:\n      statusModifier['conversion.maxFileSize'] = body.maxFileSize;\n    case UNSUPPORTED_DOCUMENT_KEY:\n    case OFFICE_DOC_CONVERSION_FAILED_KEY:\n    case OFFICE_DOC_CONVERSION_INVALID_KEY:\n    case PAGE_COUNT_FAILED_KEY:\n    case PAGE_COUNT_EXCEEDED_KEY:\n      statusModifier['conversion.maxNumberPages'] = body.maxNumberPages;\n    case PDF_HAS_BIG_PAGE_KEY:\n      statusModifier.id = presentationId ?? body.presentationToken;\n      statusModifier.name = presentationName ?? body.presentationName;\n      statusModifier['conversion.error'] = true;\n      statusModifier['conversion.bigPageSize'] = body.bigPageSize;\n      break;\n    case GENERATED_SLIDE_KEY:\n      statusModifier['conversion.pagesCompleted'] = body.pagesCompleted;\n      statusModifier['conversion.numPages'] = body.numberOfPages;\n      break;\n\n    default:\n      break;\n  }\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId ?? body.presentationToken,\n  };\n\n  const modifier = {\n    $set: Object.assign({ meetingId, podId }, statusModifier),\n  };\n\n  try {\n    const { insertedId } = Presentations.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Updated presentation conversion status=${status} id=${presentationId} meeting=${meetingId}`);\n    } else {\n      Logger.debug('Upserted presentation conversion', { status, presentationId, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Updating conversion status presentation to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport setCurrentPresentation from '../modifiers/setCurrentPresentation';\n\nexport default function handlePresentationCurrentSet({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentationId, podId } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  return setCurrentPresentation(meetingId, podId, presentationId);\n}\n","import { check } from 'meteor/check';\nimport setPresentationDownloadable from '../modifiers/setPresentationDownloadable';\n\nexport default function handlePresentationDownloadableSet({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentationId, podId, downloadable } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(downloadable, Boolean);\n\n  return setPresentationDownloadable(meetingId, podId, presentationId, downloadable);\n}\n","import { check } from 'meteor/check';\n\nimport removePresentation from '../modifiers/removePresentation';\n\nexport default function handlePresentationRemove({ body }, meetingId) {\n  const { podId, presentationId } = body;\n\n  check(meetingId, String);\n  check(podId, String);\n  check(presentationId, String);\n\n  return removePresentation(meetingId, podId, presentationId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removePresentation(presentationId, podId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RemovePresentationPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(presentationId, String);\n    check(podId, String);\n\n    const payload = {\n      presentationId,\n      podId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method removePresentation ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresentation(presentationId, podId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetCurrentPresentationPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(presentationId, String);\n    check(podId, String);\n\n    const payload = {\n      presentationId,\n      podId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setPresentation ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresentationDownloadable(presentationId, downloadable) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetPresentationDownloadablePubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(downloadable, Boolean);\n    check(presentationId, String);\n\n    const payload = {\n      presentationId,\n      podId: 'DEFAULT_PRESENTATION_POD',\n      downloadable,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setPresentationDownloadable ${err.stack}`);\n  }\n}\n","import { HTTP } from 'meteor/http';\nimport { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport addSlide from '/imports/api/slides/server/modifiers/addSlide';\nimport setCurrentPresentation from './setCurrentPresentation';\n\nconst getSlideText = async (url) => {\n  let content = '';\n  try {\n    content = await HTTP.get(url).content;\n  } catch (error) {\n    Logger.error(`No file found. ${error}`);\n  }\n  return content;\n};\n\nconst addSlides = (meetingId, podId, presentationId, slides) => {\n  slides.forEach(async (slide) => {\n    const content = await getSlideText(slide.txtUri);\n\n    Object.assign(slide, { content });\n\n    addSlide(meetingId, podId, presentationId, slide);\n  });\n};\n\nexport default function addPresentation(meetingId, podId, presentation) {\n  check(meetingId, String);\n  check(podId, String);\n  check(presentation, {\n    id: String,\n    name: String,\n    current: Boolean,\n    pages: [\n      {\n        id: String,\n        num: Number,\n        thumbUri: String,\n        swfUri: String,\n        txtUri: String,\n        svgUri: String,\n        current: Boolean,\n        xOffset: Number,\n        yOffset: Number,\n        widthRatio: Number,\n        heightRatio: Number,\n      },\n    ],\n    downloadable: Boolean,\n  });\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentation.id,\n  };\n\n  const modifier = {\n    $set: Object.assign({\n      meetingId,\n      podId,\n      'conversion.done': true,\n      'conversion.error': false,\n    }, flat(presentation, { safe: true })),\n  };\n\n  try {\n    const { insertedId } = Presentations.upsert(selector, modifier);\n\n    addSlides(meetingId, podId, presentation.id, presentation.pages);\n\n    if (insertedId) {\n      if (presentation.current) {\n        setCurrentPresentation(meetingId, podId, presentation.id);\n        Logger.info(`Added presentation id=${presentation.id} meeting=${meetingId}`);\n      } else {\n        Logger.info(`Upserted presentation id=${presentation.id} meeting=${meetingId}`);\n      }\n    }\n  } catch (err) {\n    Logger.error(`Adding presentation to collection: ${err}`);\n  }\n}\n","import Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPresentations(meetingId, podId) {\n  // clearing presentations for 1 pod\n  if (meetingId && podId) {\n    try {\n      const numberAffected = Presentations.remove({ meetingId, podId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations (${meetingId}, ${podId})`);\n        return true;\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (${meetingId}, ${podId}). ${err}`);\n      return false;\n    }\n  }\n\n  // clearing presentations for the whole meeting\n  if (meetingId) {\n    try {\n      const numberAffected = Presentations.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Presentations.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Presentations (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nimport clearSlidesPresentation from '/imports/api/slides/server/modifiers/clearSlidesPresentation';\n\nexport default function removePresentation(meetingId, podId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  try {\n    const numberAffected = Presentations.remove(selector);\n\n    if (numberAffected) {\n      clearSlidesPresentation(meetingId, presentationId);\n      Logger.info(`Removed presentation id=${presentationId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing presentation from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setCurrentPresentation(meetingId, podId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const oldCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      current: true,\n    },\n    modifier: {\n      $set: { current: false },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Unsetting the current presentation: ${err}`);\n        return;\n      }\n\n      Logger.info('Unsetted as current presentation');\n    },\n  };\n\n  const newCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      id: presentationId,\n    },\n    modifier: {\n      $set: { current: true },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Setting as current presentation id=${presentationId}: ${err}`);\n        return;\n      }\n\n      Logger.info(`Setted as current presentation id=${presentationId}`);\n    },\n  };\n\n  const oldPresentation = Presentations.findOne(oldCurrent.selector);\n  const newPresentation = Presentations.findOne(newCurrent.selector);\n\n  // Prevent bug with presentation being unset, same happens in the slide\n  // See: https://github.com/bigbluebutton/bigbluebutton/pull/4431\n  if (oldPresentation && newPresentation && (oldPresentation._id === newPresentation._id)) {\n    return;\n  }\n\n  if (newPresentation) {\n    Presentations.update(newPresentation._id, newCurrent.modifier, newCurrent.callback);\n  }\n\n  if (oldPresentation) {\n    Presentations.update(oldPresentation._id, oldCurrent.modifier, oldCurrent.callback);\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresentationDownloadable(meetingId, podId,\n  presentationId, downloadable) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(downloadable, Boolean);\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  const modifier = {\n    $set: {\n      downloadable,\n    },\n  };\n\n  try {\n    const { numberAffected } = Presentations.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set downloadable status on presentation {${presentationId} in meeting {${meetingId}}`);\n    }\n  } catch (err) {\n    Logger.error(`Could not set downloadable on pres {${presentationId} in meeting {${meetingId}} ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handlePresentationAdded from './handlers/presentationAdded';\nimport handlePresentationRemove from './handlers/presentationRemove';\nimport handlePresentationCurrentSet from './handlers/presentationCurrentSet';\nimport handlePresentationConversionUpdate from './handlers/presentationConversionUpdate';\nimport handlePresentationDownloadableSet from './handlers/presentationDownloadableSet';\n\nRedisPubSub.on('PdfConversionInvalidErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationPageGeneratedEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationPageCountErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationConversionUpdateEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationUploadedFileTooLargeErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationConversionCompletedEvtMsg', handlePresentationAdded);\nRedisPubSub.on('RemovePresentationEvtMsg', handlePresentationRemove);\nRedisPubSub.on('SetCurrentPresentationEvtMsg', handlePresentationCurrentSet);\nRedisPubSub.on('SetPresentationDownloadableEvtMsg', handlePresentationDownloadableSet);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport removePresentation from './methods/removePresentation';\nimport setPresentation from './methods/setPresentation';\nimport setPresentationDownloadable from './methods/setPresentationDownloadable';\n\nMeteor.methods({\n  removePresentation,\n  setPresentation,\n  setPresentationDownloadable,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentations() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Presentation was requested by unauth connection ${this.connection.id}`);\n    return Presentations.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Presentations', { meetingId, userId });\n\n  return Presentations.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundPresentations = presentations.bind(this);\n  return boundPresentations(...args);\n}\n\nMeteor.publish('presentations', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Presentations = new Mongo.Collection('presentations');\n\nif (Meteor.isServer) {\n  // types of queries for the presentations:\n  // 1. meetingId, podId, id        ( 3 )\n  // 2. meetingId, id               ( 1 )\n  // 3. meetingId, id, current      ( 2 )\n  // 4. meetingId                   ( 1 )\n\n  Presentations._ensureIndex({ meetingId: 1, podId: 1, id: 1 });\n}\n\nexport default Presentations;\n","import { check } from 'meteor/check';\nimport addScreenshare from '../modifiers/addScreenshare';\n\nexport default function handleScreenshareStarted({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  return addScreenshare(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport clearScreenshare from '../modifiers/clearScreenshare';\n\nexport default function handleScreenshareStopped({ body }, meetingId) {\n  const { screenshareConf } = body;\n\n  check(meetingId, String);\n  check(screenshareConf, String);\n\n  return clearScreenshare(meetingId, screenshareConf);\n}\n","import { check } from 'meteor/check';\nimport flat from 'flat';\nimport Logger from '/imports/startup/server/logger';\nimport Screenshare from '/imports/api/screenshare';\n\nexport default function addScreenshare(meetingId, body) {\n  check(meetingId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      screenshare: flat(body),\n    },\n  };\n\n  try {\n    const { numberAffected } = Screenshare.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Upserted screenshare id=${body.screenshareConf}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding screenshare to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Screenshare from '/imports/api/screenshare';\n\nexport default function clearScreenshare(meetingId, screenshareConf) {\n  try {\n    let numberAffected;\n\n    if (meetingId && screenshareConf) {\n      numberAffected = Screenshare.remove({ meetingId, 'screenshare.screenshareConf': screenshareConf });\n    } else if (meetingId) {\n      numberAffected = Screenshare.remove({ meetingId });\n    } else {\n      numberAffected = Screenshare.remove({});\n    }\n\n    if (numberAffected) {\n      Logger.info(`removed screenshare meetingId=${meetingId} id=${screenshareConf}`);\n    }\n  } catch (err) {\n    Logger.error(`removing screenshare to collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleScreenshareStarted from './handlers/screenshareStarted';\nimport handleScreenshareStopped from './handlers/screenshareStopped';\n\nRedisPubSub.on('ScreenshareRtmpBroadcastStartedEvtMsg', handleScreenshareStarted);\nRedisPubSub.on('ScreenshareRtmpBroadcastStoppedEvtMsg', handleScreenshareStopped);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\n\nMeteor.methods({\n});\n","import Screenshare from '/imports/api/screenshare';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction screenshare() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Screenshare was requested by unauth connection ${this.connection.id}`);\n    return Screenshare.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Screenshare', { meetingId, userId });\n\n  return Screenshare.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundScreenshare = screenshare.bind(this);\n  return boundScreenshare(...args);\n}\n\nMeteor.publish('screenshare', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Screenshare = new Mongo.Collection('screenshare');\n\nif (Meteor.isServer) {\n  // types of queries for the screenshare:\n  // 1. meetingId\n\n  Screenshare._ensureIndex({ meetingId: 1 });\n}\n\nexport default Screenshare;\n","import { check } from 'meteor/check';\nimport changeCurrentSlide from '../modifiers/changeCurrentSlide';\n\nexport default function handleSlideChange({ body }, meetingId) {\n  const { pageId, presentationId, podId } = body;\n\n  check(pageId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  return changeCurrentSlide(meetingId, podId, presentationId, pageId);\n}\n","import { check } from 'meteor/check';\nimport resizeSlide from '../modifiers/resizeSlide';\n\nexport default function handleSlideResize({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  return resizeSlide(meetingId, body);\n}\n","import Presentations from '/imports/api/presentations';\nimport { Slides } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function switchSlide(slideNumber, podId) { // TODO-- send presentationId and SlideId\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetCurrentPagePubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(slideNumber, Number);\n    check(podId, String);\n\n    const selector = {\n      meetingId,\n      podId,\n      current: true,\n    };\n\n    const Presentation = Presentations.findOne(selector);\n\n    if (!Presentation) {\n      throw new Meteor.Error('presentation-not-found', 'You need a presentation to be able to switch slides');\n    }\n\n    const Slide = Slides.findOne({\n      meetingId,\n      podId,\n      presentationId: Presentation.id,\n      num: slideNumber,\n    });\n\n    if (!Slide) {\n      throw new Meteor.Error('slide-not-found', `Slide number ${slideNumber} not found in the current presentation`);\n    }\n\n    const payload = {\n      podId,\n      presentationId: Presentation.id,\n      pageId: Slide.id,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method switchSlide ${err.stack}`);\n  }\n}\n","import Presentations from '/imports/api/presentations';\nimport { Slides } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function zoomSlide(slideNumber, podId, widthRatio, heightRatio, x, y) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ResizeAndMovePagePubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const selector = {\n      meetingId,\n      podId,\n      current: true,\n    };\n    const Presentation = Presentations.findOne(selector);\n\n    if (!Presentation) {\n      throw new Meteor.Error('presentation-not-found', 'You need a presentation to be able to switch slides');\n    }\n\n    const Slide = Slides.findOne({\n      meetingId,\n      podId,\n      presentationId: Presentation.id,\n      num: slideNumber,\n    });\n\n    if (!Slide) {\n      throw new Meteor.Error('slide-not-found', `Slide number ${slideNumber} not found in the current presentation`);\n    }\n\n    const payload = {\n      podId,\n      presentationId: Presentation.id,\n      pageId: Slide.id,\n      xOffset: x,\n      yOffset: y,\n      widthRatio,\n      heightRatio,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method zoomSlide ${err.stack}`);\n  }\n}\n","import probe from 'probe-image-size';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { Slides } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { SVG, PNG } from '/imports/utils/mimeTypes';\nimport calculateSlideData from '/imports/api/slides/server/helpers';\nimport addSlidePositions from './addSlidePositions';\n\nconst loadSlidesFromHttpAlways = Meteor.settings.private.app.loadSlidesFromHttpAlways || false;\n\nconst requestWhiteboardHistory = (meetingId, slideId) => {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'GetWhiteboardAnnotationsReqMsg';\n  const USER_ID = 'nodeJSapp';\n\n  const payload = {\n    whiteboardId: slideId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, USER_ID, payload);\n};\n\nconst SUPPORTED_TYPES = [SVG, PNG];\n\nconst fetchImageSizes = imageUri => probe(imageUri)\n  .then((result) => {\n    if (!SUPPORTED_TYPES.includes(result.mime)) {\n      throw new Meteor.Error('invalid-image-type', `received ${result.mime} expecting ${SUPPORTED_TYPES.join()}`);\n    }\n\n    return {\n      width: result.width,\n      height: result.height,\n    };\n  })\n  .catch((reason) => {\n    Logger.error(`Error parsing image size. ${reason}. uri=${imageUri}`);\n    return reason;\n  });\n\nexport default function addSlide(meetingId, podId, presentationId, slide) {\n  check(podId, String);\n  check(presentationId, String);\n\n  check(slide, {\n    id: String,\n    num: Number,\n    thumbUri: String,\n    swfUri: String,\n    txtUri: String,\n    svgUri: String,\n    current: Boolean,\n    xOffset: Number,\n    yOffset: Number,\n    widthRatio: Number,\n    heightRatio: Number,\n    content: String,\n  });\n\n  const {\n    id: slideId,\n    xOffset,\n    yOffset,\n    widthRatio,\n    heightRatio,\n    ...restSlide\n  } = slide;\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: slideId,\n  };\n\n  const imageUri = slide.svgUri || slide.pngUri;\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId },\n      { podId },\n      { presentationId },\n      { id: slideId },\n      { imageUri },\n      flat(restSlide),\n      { safe: true },\n    ),\n  };\n\n  const imageSizeUri = (loadSlidesFromHttpAlways ? imageUri.replace(/^https/i, 'http') : imageUri);\n\n  return fetchImageSizes(imageSizeUri)\n    .then(({ width, height }) => {\n      // there is a rare case when for a very long not-active meeting the presentation\n      // files just disappear and width/height can't be retrieved\n      if (width && height) {\n        // pre-calculating the width, height, and vieBox coordinates / dimensions\n        // to unload the client-side\n        const slideData = {\n          width,\n          height,\n          xOffset,\n          yOffset,\n          widthRatio,\n          heightRatio,\n        };\n        const slidePosition = calculateSlideData(slideData);\n\n        addSlidePositions(meetingId, podId, presentationId, slideId, slidePosition);\n      }\n\n      try {\n        const { insertedId, numberAffected } = Slides.upsert(selector, modifier);\n\n        requestWhiteboardHistory(meetingId, slideId);\n\n        if (insertedId) {\n          Logger.info(`Added slide id=${slideId} pod=${podId} presentation=${presentationId}`);\n        } else if (numberAffected) {\n          Logger.info(`Upserted slide id=${slideId} pod=${podId} presentation=${presentationId}`);\n        }\n      } catch (err) {\n        Logger.error(`Error on adding slide to collection: ${err}`);\n      }\n    })\n    .catch(reason => Logger.error(`Error parsing image size. ${reason}. slide=${slideId} uri=${imageUri}`));\n}\n","import { SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\n\nexport default function addSlidePositions(\n  meetingId,\n  podId,\n  presentationId,\n  slideId,\n  slidePosition,\n) {\n  check(meetingId, String);\n  check(podId, String);\n  check(presentationId, String);\n  check(slideId, String);\n\n  check(slidePosition, {\n    width: Number,\n    height: Number,\n    x: Number,\n    y: Number,\n    viewBoxWidth: Number,\n    viewBoxHeight: Number,\n  });\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: slideId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId },\n      { podId },\n      { presentationId },\n      { id: slideId },\n      flat(slidePosition),\n      { safe: true },\n    ),\n  };\n\n  try {\n    const { insertedId } = SlidePositions.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added slide position id=${slideId} pod=${podId} presentation=${presentationId}`);\n    } else {\n      Logger.info(`Upserted slide position id=${slideId} pod=${podId} presentation=${presentationId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding slide position to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { Slides } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function changeCurrentSlide(meetingId, podId, presentationId, slideId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(slideId, String);\n  check(podId, String);\n\n  const oldCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      presentationId,\n      current: true,\n    },\n    modifier: {\n      $set: { current: false },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Unsetting the current slide: ${err}`);\n        return;\n      }\n\n      Logger.info('Unsetted the current slide');\n    },\n  };\n\n  const newCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      presentationId,\n      id: slideId,\n    },\n    modifier: {\n      $set: { current: true },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Setting as current slide id=${slideId}: ${err}`);\n        return;\n      }\n\n      Logger.info(`Setted as current slide id=${slideId}`);\n    },\n  };\n\n  const oldSlide = Slides.findOne(oldCurrent.selector);\n  const newSlide = Slides.findOne(newCurrent.selector);\n\n  // if the oldCurrent and newCurrent have the same ids\n  if (oldSlide && newSlide && (oldSlide._id === newSlide._id)) {\n    return;\n  }\n\n  if (newSlide) {\n    Slides.update(newSlide._id, newCurrent.modifier, newCurrent.callback);\n  }\n\n  if (oldSlide) {\n    Slides.update(oldSlide._id, oldCurrent.modifier, oldCurrent.callback);\n  }\n}\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearSlides(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffectedSlidePositions = SlidePositions.remove({ meetingId });\n\n      const numberAffected = Slides.remove({ meetingId });\n\n      if (numberAffectedSlidePositions) {\n        Logger.info(`Cleared SlidePositions (${meetingId})`);\n      }\n\n      if (numberAffected) {\n        Logger.info(`Cleared Slides (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Slides (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffectedSlidePositions = SlidePositions.remove({ meetingId });\n\n      const numberAffected = Slides.remove({ meetingId });\n\n      if (numberAffectedSlidePositions) {\n        Logger.info(`Cleared SlidePositions (${meetingId})`);\n      }\n\n      if (numberAffected) {\n        Logger.info('Cleared Slides (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Slides (all). ${err}`);\n    }\n  }\n}\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport clearAnnotations from '/imports/api/annotations/server/modifiers/clearAnnotations';\n\nexport default function clearSlidesPresentation(meetingId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n\n  const selector = {\n    meetingId,\n    presentationId,\n  };\n\n  const whiteboardIds = Slides.find(selector, { fields: { id: 1 } }).map(row => row.id);\n\n  try {\n    SlidePositions.remove(selector);\n\n    const numberAffected = Slides.remove(selector);\n\n    if (numberAffected) {\n      whiteboardIds.forEach(whiteboardId => clearAnnotations(meetingId, whiteboardId));\n\n      Logger.info(`Removed Slides where presentationId=${presentationId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing Slides from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport calculateSlideData from '/imports/api/slides/server/helpers';\n\nexport default function resizeSlide(meetingId, slide) {\n  check(meetingId, String);\n\n  const {\n    podId,\n    presentationId,\n    pageId,\n    widthRatio,\n    heightRatio,\n    xOffset,\n    yOffset,\n  } = slide;\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: pageId,\n  };\n\n  // fetching the current slide data\n  // and pre-calculating the width, height, and vieBox coordinates / sizes\n  // to reduce the client-side load\n  const SlidePosition = SlidePositions.findOne(selector);\n\n  if (SlidePosition) {\n    const {\n      width,\n      height,\n    } = SlidePosition;\n\n    const slideData = {\n      width,\n      height,\n      xOffset,\n      yOffset,\n      widthRatio,\n      heightRatio,\n    };\n    const calculatedData = calculateSlideData(slideData);\n\n    const modifier = {\n      $set: calculatedData,\n    };\n\n    try {\n      const numberAffected = SlidePositions.update(selector, modifier);\n\n      if (numberAffected) {\n        Logger.debug(`Resized slide positions id=${pageId}`);\n      } else {\n        Logger.info(`No slide positions found with id=${pageId}`);\n      }\n    } catch (err) {\n      Logger.error(`Resizing slide positions id=${pageId}: ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleSlideResize from './handlers/slideResize';\nimport handleSlideChange from './handlers/slideChange';\n\nRedisPubSub.on('ResizeAndMovePageEvtMsg', handleSlideResize);\nRedisPubSub.on('SetCurrentPageEvtMsg', handleSlideChange);\n","\nconst calculateSlideData = (slideData) => {\n  const {\n    width, height, xOffset, yOffset, widthRatio, heightRatio,\n  } = slideData;\n\n  // calculating viewBox and offsets for the current presentation\n  return {\n    width,\n    height,\n    x: ((-xOffset * 2) * width) / 100,\n    y: ((-yOffset * 2) * height) / 100,\n    viewBoxWidth: (width * widthRatio) / 100,\n    viewBoxHeight: (height * heightRatio) / 100,\n  };\n};\n\nexport default calculateSlideData;\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport switchSlide from './methods/switchSlide';\nimport zoomSlide from './methods/zoomSlide';\n\nMeteor.methods({\n  switchSlide,\n  zoomSlide,\n});\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction slides() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Slides was requested by unauth connection ${this.connection.id}`);\n    return Slides.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Slides', { meetingId, userId });\n\n  return Slides.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundSlides = slides.bind(this);\n  return boundSlides(...args);\n}\n\nMeteor.publish('slides', publish);\n\nfunction slidePositions() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing SlidePositions was requested by unauth connection ${this.connection.id}`);\n    return SlidePositions.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing SlidePositions', { meetingId, userId });\n\n  return SlidePositions.find({ meetingId });\n}\n\nfunction publishPositions(...args) {\n  const boundSlidePositions = slidePositions.bind(this);\n  return boundSlidePositions(...args);\n}\n\nMeteor.publish('slide-positions', publishPositions);\n","import { Meteor } from 'meteor/meteor';\n\nconst Slides = new Mongo.Collection('slides');\nconst SlidePositions = new Mongo.Collection('slide-positions');\n\nif (Meteor.isServer) {\n  // types of queries for the slides:\n\n  // 1. meetingId                                  ( 1 )\n  // 2. meetingId, podId                           ( 1 )\n  // 3. meetingId, presentationId                  ( 1 )\n  // 3. meetingId, presentationId, num             ( 1 )\n  // 4. meetingId, podId, presentationId, id       ( 3 ) - incl. resizeSlide, which can be intense\n  // 5. meetingId, podId, presentationId, current  ( 1 )\n\n  Slides._ensureIndex({\n    meetingId: 1, podId: 1, presentationId: 1, id: 1,\n  });\n\n  SlidePositions._ensureIndex({\n    meetingId: 1, podId: 1, presentationId: 1, id: 1,\n  });\n}\n\nexport { Slides, SlidePositions };\n","import { check } from 'meteor/check';\nimport changeRole from '/imports/api/users/server/modifiers/changeRole';\n\nexport default function handleChangeRole(payload, meetingId) {\n  check(payload.body, Object);\n  check(meetingId, String);\n\n  const { userId, role, changedBy } = payload.body;\n\n  changeRole(role, userId, meetingId, changedBy);\n}\n","import Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport Users from '/imports/api/users';\n\nexport default function handleEmojiStatus({ body }, meetingId) {\n  const { userId, emoji } = body;\n\n  check(userId, String);\n  check(emoji, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      emojiTime: (new Date()).getTime(),\n      emoji,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Assigned user emoji status ${emoji} id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Assigning user emoji status: ${err}`);\n  }\n}\n","import Users from '/imports/api/users';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport changePresenter from '/imports/api/users/server/modifiers/changePresenter';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nfunction setPresenterInPodReqMsg(credentials) { // TODO-- switch to meetingId, etc\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetPresenterInPodReqMsg';\n\n  const { meetingId, requesterUserId, presenterId } = credentials;\n\n  const payload = {\n    podId: 'DEFAULT_PRESENTATION_POD',\n    nextPresenterId: presenterId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n\nexport default function handlePresenterAssigned({ body }, meetingId) {\n  const { presenterId, assignedBy } = body;\n\n  changePresenter(true, presenterId, meetingId, assignedBy);\n\n  const selector = {\n    meetingId,\n    userId: { $ne: presenterId },\n    presenter: true,\n  };\n\n  const prevPresenter = Users.findOne(selector);\n\n  const defaultPodSelector = {\n    meetingId,\n    podId: 'DEFAULT_PRESENTATION_POD',\n  };\n\n  const currentDefaultPod = PresentationPods.findOne(defaultPodSelector);\n\n  // no previous presenters\n  // The below code is responsible for set Meeting presenter to be default pod presenter as well.\n  // It's been handled here because right now akka-apps don't handle all cases scenarios.\n  if (!prevPresenter || currentDefaultPod?.currentPresenterId !== presenterId) {\n    const setPresenterPayload = {\n      meetingId,\n      requesterUserId: assignedBy,\n      presenterId,\n    };\n\n    const { currentPresenterId } = currentDefaultPod;\n\n    if (currentPresenterId === '') {\n      return setPresenterInPodReqMsg(setPresenterPayload);\n    }\n\n    const oldPresenter = Users.findOne({ meetingId, userId: currentPresenterId });\n\n    if (oldPresenter?.userId !== currentPresenterId) {\n      return setPresenterInPodReqMsg(setPresenterPayload);\n    }\n\n    return true;\n  }\n\n  changePresenter(false, prevPresenter.userId, meetingId, assignedBy);\n}\n","import { check } from 'meteor/check';\n\nimport removeUser from '../modifiers/removeUser';\n\nexport default function handleRemoveUser({ body }, meetingId) {\n  const { intId } = body;\n\n  check(meetingId, String);\n  check(intId, String);\n\n  return removeUser(meetingId, intId);\n}\n","import userEjected from '../modifiers/userEjected';\n\nexport default function handleEjectedUser({ header, body }) {\n  const { meetingId, userId } = header;\n  const { reasonCode } = body;\n\n  userEjected(meetingId, userId, reasonCode);\n}\n","import { check } from 'meteor/check';\nimport userInactivityInspect from '../modifiers/userInactivityInspect';\n\nexport default function handleUserInactivityInspect({ header, body }, meetingId) {\n  const { userId } = header;\n  const { responseDelay } = body;\n\n  check(userId, String);\n  check(responseDelay, Match.Integer);\n  check(meetingId, String);\n\n\n  userInactivityInspect(userId, responseDelay);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userJoin(meetingId, userId, authToken) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserJoinMeetingReqMsg';\n\n  check(authToken, String);\n\n  const payload = {\n    userId,\n    authToken,\n    clientType: 'HTML5',\n  };\n\n  Logger.info(`User='${userId}' is joining meeting='${meetingId}' authToken='${authToken}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\n\nimport addUser from '../modifiers/addUser';\n\nexport default function handleUserJoined({ body }, meetingId) {\n  const user = body;\n\n  check(user, Object);\n\n  addUser(meetingId, user);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport userJoin from './userJoin';\nimport pendingAuthenticationsStore from '../store/pendingAuthentications';\nimport createDummyUser from '../modifiers/createDummyUser';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nimport upsertValidationState from '/imports/api/auth-token-validation/server/modifiers/upsertValidationState';\nimport { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst clearOtherSessions = (sessionUserId, current = false) => {\n  const serverSessions = Meteor.server.sessions;\n  Object.keys(serverSessions)\n    .filter(i => serverSessions[i].userId === sessionUserId)\n    .filter(i => i !== current)\n    .forEach(i => serverSessions[i].close());\n};\n\nexport default function handleValidateAuthToken({ body }, meetingId) {\n  const {\n    userId,\n    valid,\n    authToken,\n    waitForApproval,\n    registeredOn,\n    authTokenValidatedOn,\n    reasonCode,\n  } = body;\n\n  check(userId, String);\n  check(authToken, String);\n  check(valid, Boolean);\n  check(waitForApproval, Boolean);\n  check(registeredOn, Number);\n  check(authTokenValidatedOn, Number);\n  check(reasonCode, String);\n\n  const pendingAuths = pendingAuthenticationsStore.take(meetingId, userId, authToken);\n\n  Logger.info(`PendingAuths length [${pendingAuths.length}]`);\n  if (pendingAuths.length === 0) return;\n\n  if (!valid) {\n    pendingAuths.forEach(\n      (pendingAuth) => {\n        try {\n          const { methodInvocationObject } = pendingAuth;\n          const connectionId = methodInvocationObject.connection.id;\n\n          upsertValidationState(meetingId, userId, ValidationStates.INVALID, connectionId, reasonCode);\n\n          // Schedule socket disconnection for this user, giving some time for client receiving the reason of disconnection\n          Meteor.setTimeout(() => {\n            methodInvocationObject.connection.close();\n          }, 2000);\n\n          Logger.info(`Closed connection ${connectionId} due to invalid auth token.`);\n        } catch (e) {\n          Logger.error(`Error closing socket for meetingId '${meetingId}', userId '${userId}', authToken ${authToken}`);\n        }\n      },\n    );\n\n    return;\n  }\n\n  // Define user ID on connections\n  pendingAuths.forEach(\n    (pendingAuth) => {\n      const { methodInvocationObject } = pendingAuth;\n\n      /* Logic migrated from validateAuthToken method ( postponed to only run in case of success response ) - Begin */\n      const sessionId = `${meetingId}--${userId}`;\n\n      methodInvocationObject.setUserId(sessionId);\n\n      const User = Users.findOne({\n        meetingId,\n        userId,\n      });\n\n      if (!User) {\n        createDummyUser(meetingId, userId, authToken);\n      }\n\n      ClientConnections.add(sessionId, methodInvocationObject.connection);\n      upsertValidationState(meetingId, userId, ValidationStates.VALIDATED, methodInvocationObject.connection.id);\n\n      /* End of logic migrated from validateAuthToken */\n    },\n  );\n\n  const selector = {\n    meetingId,\n    userId,\n    clientType: 'HTML5',\n  };\n\n  const User = Users.findOne(selector);\n\n  // If we dont find the user on our collection is a flash user and we can skip\n  if (!User) return;\n\n  // Publish user join message\n  if (!waitForApproval) {\n    Logger.info('User=', User);\n    userJoin(meetingId, userId, User.authToken);\n  }\n\n  const modifier = {\n    $set: {\n      validated: valid,\n      approved: !waitForApproval,\n      loginTime: registeredOn,\n      authTokenValidatedTime: authTokenValidatedOn,\n      inactivityCheck: false,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      const sessionUserId = `${meetingId}-${userId}`;\n      const currentConnectionId = User.connectionId ? User.connectionId : false;\n      clearOtherSessions(sessionUserId, currentConnectionId);\n\n      Logger.info(`Validated auth token as ${valid} user=${userId} meeting=${meetingId}`);\n    } else {\n      Logger.info('No auth to validate');\n    }\n  } catch (err) {\n    Logger.error(`Validating auth token: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function assignPresenter(userId) { // TODO-- send username from client side\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'AssignPresenterReqMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(userId, String);\n\n    const User = Users.findOne({\n      meetingId,\n      userId,\n    });\n\n    if (!User) {\n      throw new Meteor.Error('user-not-found', 'You need a valid user to be able to set presenter');\n    }\n\n    const payload = {\n      newPresenterId: userId,\n      newPresenterName: User.name,\n      assignedBy: requesterUserId,\n      requesterId: requesterUserId,\n    };\n\n    Logger.verbose('User set as presenter', { userId, meetingId, setBy: requesterUserId });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method assignPresenter ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function changeRole(userId, role) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ChangeUserRoleCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(userId, String);\n    check(role, String);\n\n    const payload = {\n      userId,\n      role,\n      changedBy: requesterUserId,\n    };\n\n    Logger.verbose('Changed user role', {\n      userId, role, changedBy: requesterUserId, meetingId,\n    });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method changeRole ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeUser(userId, banUser) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'EjectUserFromMeetingCmdMsg';\n\n    const { meetingId, requesterUserId: ejectedBy } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(ejectedBy, String);\n    check(userId, String);\n    check(banUser, Boolean);\n\n    const payload = {\n      userId,\n      ejectedBy,\n      banUser,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, ejectedBy, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method removeUser ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setEmojiStatus(userId, status) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ChangeUserEmojiCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(userId, String);\n    check(status, String);\n\n    const payload = {\n      emoji: status,\n      userId,\n    };\n\n    Logger.verbose('User emoji status updated', {\n      userId, status, requesterUserId, meetingId,\n    });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setEmojiStatus ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport setMobile from '../modifiers/setMobile';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setMobileUser() {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    Logger.verbose(`Mobile user ${requesterUserId} from meeting ${meetingId}`);\n\n    setMobile(meetingId, requesterUserId);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setMobileUser ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setRandomUser() {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'SelectRandomViewerReqMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      requestedBy: requesterUserId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setRandomUser ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport setEffectiveConnectionType from '../modifiers/setUserEffectiveConnectionType';\n\nexport default function setUserEffectiveConnectionType(effectiveConnectionType) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ChangeUserEffectiveConnectionMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(effectiveConnectionType, String);\n\n    const payload = {\n      meetingId,\n      userId: requesterUserId,\n      effectiveConnectionType,\n    };\n\n    setEffectiveConnectionType(meetingId, requesterUserId, effectiveConnectionType);\n\n    Logger.verbose('Updated user effective connection', { requesterUserId, effectiveConnectionType });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setUserEffectiveConnectionType ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function toggleUserLock(userId, lock) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'LockUserInMeetingCmdMsg';\n\n    const { meetingId, requesterUserId: lockedBy } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(lockedBy, String);\n    check(userId, String);\n    check(lock, Boolean);\n\n    const payload = {\n      lockedBy,\n      userId,\n      lock,\n    };\n\n    Logger.verbose('Updated lock status for user', {\n      meetingId, userId, lock, lockedBy,\n    });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, lockedBy, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method toggleUserLock ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport Users from '/imports/api/users';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function userActivitySign() {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'UserActivitySignCmdMsg';\n    const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(userId, String);\n\n    const payload = {\n      userId,\n    };\n\n    const selector = {\n      userId,\n    };\n\n    const modifier = {\n      $set: {\n        inactivityCheck: false,\n      },\n    };\n\n    Users.update(selector, modifier); // TODO-- we should move this to a modifier\n\n    Logger.info(`User ${userId} sent a activity sign for meeting ${meetingId}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method userActivitySign ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Users from '/imports/api/users';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nexport default function userLeaving(meetingId, userId, connectionId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'UserLeaveReqMsg';\n\n    check(userId, String);\n\n    const selector = {\n      meetingId,\n      userId,\n    };\n\n    const user = Users.findOne(selector);\n\n    if (!user) {\n      Logger.info(`Skipping userLeaving. Could not find ${userId} in ${meetingId}`);\n      return;\n    }\n\n    const auth = AuthTokenValidation.findOne({\n      meetingId,\n      userId,\n    }, { sort: { updatedAt: -1 } });\n\n    // If the current user connection is not the same that triggered the leave we skip\n    if (auth?.connectionId !== connectionId) {\n      Logger.info(`Skipping userLeaving. User connectionId=${user.connectionId} is different from requester connectionId=${connectionId}`);\n      return false;\n    }\n\n    const payload = {\n      userId,\n      sessionId: meetingId,\n      loggedOut: user.loggedOut || false,\n    };\n\n    ClientConnections.removeClientConnection(`${meetingId}--${userId}`, connectionId);\n\n    Logger.info(`User '${userId}' is leaving meeting '${meetingId}'`);\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method userLeaving ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\nimport { check } from 'meteor/check';\n\nexport default function userLeftMeeting() { // TODO-- spread the code to method/modifier/handler\n  try {\n    // so we don't update the db in a method\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const selector = {\n      meetingId,\n      userId: requesterUserId,\n    };\n\n    const numberAffected = Users.update(selector, { $set: { loggedOut: true } });\n\n    if (numberAffected) {\n      Logger.info(`user left id=${requesterUserId} meeting=${meetingId}`);\n      ClientConnections.removeClientConnection(this.userId, this.connection.id);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method userLeftMeeting ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport upsertValidationState from '/imports/api/auth-token-validation/server/modifiers/upsertValidationState';\nimport { ValidationStates } from '/imports/api/auth-token-validation';\nimport pendingAuthenticationsStore from '../store/pendingAuthentications';\n\nexport default function validateAuthToken(meetingId, requesterUserId, requesterToken, externalId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ValidateAuthTokenReqMsg';\n\n    Logger.debug('ValidateAuthToken method called', { meetingId, requesterUserId, requesterToken, externalId });\n\n    if (!meetingId) return false;\n\n    // Store reference of methodInvocationObject ( to postpone the connection userId definition )\n    pendingAuthenticationsStore.add(meetingId, requesterUserId, requesterToken, this);\n    upsertValidationState(meetingId, requesterUserId, ValidationStates.VALIDATING, this.connection.id);\n\n    const payload = {\n      userId: requesterUserId,\n      authToken: requesterToken,\n    };\n\n    Logger.info(`User '${requesterUserId}' is trying to validate auth token for meeting '${meetingId}' from connection '${this.connection.id}'`);\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method validateAuthToken ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport addUser from '/imports/api/users/server/modifiers/addUser';\n\n\nexport default function addDialInUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, Object);\n\n  const USER_CONFIG = Meteor.settings.public.user;\n  const ROLE_VIEWER = USER_CONFIG.role_viewer;\n\n  const { intId, callerName } = voiceUser;\n\n  const voiceOnlyUser = {\n    intId,\n    extId: intId, // TODO\n    name: callerName,\n    role: ROLE_VIEWER.toLowerCase(),\n    guest: false,\n    authed: true,\n    waitingForAcceptance: false,\n    guestStatus: 'ALLOW',\n    emoji: 'none',\n    presenter: false,\n    locked: false, // TODO\n    avatar: '',\n    clientType: 'dial-in-user',\n  };\n\n  return addUser(meetingId, voiceOnlyUser);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Meetings from '/imports/api/meetings';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport addUserPsersistentData from '/imports/api/users-persistent-data/server/modifiers/addUserPersistentData';\nimport stringHash from 'string-hash';\nimport flat from 'flat';\n\nimport addVoiceUser from '/imports/api/voice-users/server/modifiers/addVoiceUser';\n\nconst COLOR_LIST = [\n  '#7b1fa2', '#6a1b9a', '#4a148c', '#5e35b1', '#512da8', '#4527a0',\n  '#311b92', '#3949ab', '#303f9f', '#283593', '#1a237e', '#1976d2', '#1565c0',\n  '#0d47a1', '#0277bd', '#01579b',\n];\n\nexport default function addUser(meetingId, userData) {\n  const user = userData;\n\n  check(meetingId, String);\n\n  check(user, {\n    intId: String,\n    extId: String,\n    name: String,\n    role: String,\n    guest: Boolean,\n    authed: Boolean,\n    waitingForAcceptance: Match.Maybe(Boolean),\n    guestStatus: String,\n    emoji: String,\n    presenter: Boolean,\n    locked: Boolean,\n    avatar: String,\n    clientType: String,\n  });\n\n  const userId = user.intId;\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n  const Meeting = Meetings.findOne({ meetingId });\n\n  /* While the akka-apps dont generate a color we just pick one\n    from a list based on the userId */\n  const color = COLOR_LIST[stringHash(user.intId) % COLOR_LIST.length];\n\n  const userInfos = Object.assign(\n    {\n      meetingId,\n      sortName: user.name.trim().toLowerCase(),\n      color,\n      mobile: false,\n      breakoutProps: {\n        isBreakoutUser: Meeting.meetingProp.isBreakout,\n        parentId: Meeting.breakoutProps.parentId,\n      },\n      effectiveConnectionType: null,\n      inactivityCheck: false,\n      responseDelay: 0,\n      loggedOut: false,\n    },\n    flat(user),\n  );\n\n  const modifier = {\n    $set: userInfos,\n  };\n  addUserPsersistentData(userInfos);\n  // Only add an empty VoiceUser if there isn't one already and if the user coming in isn't a\n  // dial-in user. We want to avoid overwriting good data\n  if (user.clientType !== 'dial-in-user' && !VoiceUsers.findOne({ meetingId, intId: userId })) {\n    addVoiceUser(meetingId, {\n      voiceUserId: '',\n      intId: userId,\n      callerName: user.name,\n      callerNum: '',\n      muted: false,\n      talking: false,\n      callingWith: '',\n      listenOnly: false,\n      voiceConf: '',\n      joined: false,\n    });\n  }\n\n  try {\n    const { insertedId } = Users.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added user id=${userId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted user id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding user to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function changePresenter(presenter, userId, meetingId, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      presenter,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed presenter=${presenter} id=${userId} meeting=${meetingId}`\n        + `${changedBy ? ` changedBy=${changedBy}` : ''}`);\n    }\n  } catch (err) {\n    Logger.error(`Change presenter error: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport updateRole from '/imports/api/users-persistent-data/server/modifiers/updateRole';\nimport Users from '/imports/api/users';\n\nexport default function changeRole(role, userId, meetingId, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      role,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      updateRole(userId, meetingId, role);\n      Logger.info(`Changed user role=${role} id=${userId} meeting=${meetingId}`\n        + `${changedBy ? ` changedBy=${changedBy}` : ''}`);\n    }\n  } catch (err) {\n    Logger.error(`Changed user role: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users/index';\n\nexport default function clearUsers(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Users.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Users (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error clearing Users (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Users.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Users (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error clearing Users (all). ${err}`);\n    }\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function createDummyUser(meetingId, userId, authToken) {\n  check(meetingId, String);\n  check(userId, String);\n  check(authToken, String);\n\n  const User = Users.findOne({ meetingId, userId });\n  if (User) {\n    throw new Meteor.Error('existing-user', 'Tried to create a dummy user for an existing user');\n  }\n\n  const doc = {\n    meetingId,\n    userId,\n    authToken,\n    clientType: 'HTML5',\n    validated: null,\n  };\n\n  try {\n    const insertedId = Users.insert(doc);\n\n    if (insertedId) {\n      Logger.info(`Created dummy user id=${userId} token=${authToken} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Creating dummy user to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport VideoStreams from '/imports/api/video-streams';\nimport Logger from '/imports/startup/server/logger';\nimport setloggedOutStatus from '/imports/api/users-persistent-data/server/modifiers/setloggedOutStatus';\nimport clearUserInfoForRequester from '/imports/api/users-infos/server/modifiers/clearUserInfoForRequester';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nconst clearAllSessions = (sessionUserId) => {\n  const serverSessions = Meteor.server.sessions;\n  Object.keys(serverSessions)\n    .filter((i) => serverSessions[i].userId === sessionUserId)\n    .forEach((i) => serverSessions[i].close());\n};\n\nexport default function removeUser(meetingId, userId) {\n  check(meetingId, String);\n  check(userId, String);\n\n  try {\n    if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n      const sessionUserId = `${meetingId}-${userId}`;\n      ClientConnections.removeClientConnection(`${meetingId}--${userId}`);\n      clearAllSessions(sessionUserId);\n\n      // we don't want to fully process the redis message in frontend\n      // since the backend is supposed to update Mongo\n      if (process.env.BBB_HTML5_ROLE === 'frontend') {\n        return;\n      }\n    }\n\n    const selector = {\n      meetingId,\n      userId,\n    };\n\n    setloggedOutStatus(userId, meetingId, true);\n    VideoStreams.remove({ meetingId, userId });\n\n    clearUserInfoForRequester(meetingId, userId);\n\n    Users.remove(selector);\n\n    Logger.info(`Removed user id=${userId} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Removing user from Users collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function setMobile(meetingId, userId) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      mobile: true,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Assigned mobile user id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Assigning mobile user: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setUserEffectiveConnectionType(meetingId, userId, effectiveConnectionType) {\n  check(meetingId, String);\n  check(userId, String);\n  check(effectiveConnectionType, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    effectiveConnectionType: { $ne: effectiveConnectionType },\n  };\n\n  const modifier = {\n    $set: {\n      effectiveConnectionType,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated user ${userId} effective connection to ${effectiveConnectionType} in meeting ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating user ${userId}: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport clearUserInfoForRequester from '/imports/api/users-infos/server/modifiers/clearUserInfoForRequester';\n\nexport default function userEjected(meetingId, userId, ejectedReason) {\n  check(meetingId, String);\n  check(userId, String);\n  check(ejectedReason, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      ejected: true,\n      ejectedReason,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      clearUserInfoForRequester(meetingId, userId);\n      Logger.info(`Ejected user id=${userId} meeting=${meetingId} reason=${ejectedReason}`);\n    }\n  } catch (err) {\n    Logger.error(`Ejecting user from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function userInactivityInspect(userId, responseDelay) {\n  check(userId, String);\n  check(responseDelay, Match.Integer);\n\n  const selector = {\n    userId,\n    inactivityCheck: false,\n  };\n\n  const modifier = {\n    $set: {\n      inactivityCheck: true,\n      responseDelay,\n    },\n  };\n\n  try {\n    const { numberAffected } = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated user ${userId} with inactivity inspect`);\n    }\n  } catch (err) {\n    Logger.error(`Inactivity check for user ${userId}: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\n\nclass PendingAuthentitcations {\n  constructor() {\n    Logger.debug('PendingAuthentitcations :: constructor');\n    this.store = [];\n  }\n\n  generateKey(meetingId, userId, authToken) {\n    // Protect against separator injection\n    meetingId = meetingId.replace(/ /g, '');\n    userId = userId.replace(/ /g, '');\n    authToken = authToken.replace(/ /g, '');\n\n    // Space separated key\n    return `${meetingId} ${userId} ${authToken}`;\n  }\n\n  add(meetingId, userId, authToken, methodInvocationObject) {\n    Logger.debug('PendingAuthentitcations :: add', { meetingId, userId, authToken });\n    this.store.push({\n      key: this.generateKey(meetingId, userId, authToken),\n      meetingId,\n      userId,\n      authToken,\n      methodInvocationObject,\n    });\n  }\n\n  take(meetingId, userId, authToken) {\n    const key = this.generateKey(meetingId, userId, authToken);\n    Logger.debug('PendingAuthentitcations :: take', {\n      key, meetingId, userId, authToken,\n    });\n\n    // find matches\n    const matches = this.store.filter(e => e.key === key);\n\n    // remove matches (if any)\n    if (matches.length) {\n      this.store = this.store.filter(e => e.key !== key);\n    }\n\n    // return matches\n    return matches;\n  }\n}\nexport default new PendingAuthentitcations();\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleRemoveUser from './handlers/removeUser';\nimport handleUserJoined from './handlers/userJoined';\nimport handleValidateAuthToken from './handlers/validateAuthToken';\nimport handlePresenterAssigned from './handlers/presenterAssigned';\nimport handleEmojiStatus from './handlers/emojiStatus';\nimport handleUserEjected from './handlers/userEjected';\nimport handleChangeRole from './handlers/changeRole';\nimport handleUserInactivityInspect from './handlers/userInactivityInspect';\n\nRedisPubSub.on('PresenterAssignedEvtMsg', handlePresenterAssigned);\nRedisPubSub.on('UserJoinedMeetingEvtMsg', handleUserJoined);\nRedisPubSub.on('UserLeftMeetingEvtMsg', handleRemoveUser);\nRedisPubSub.on('ValidateAuthTokenRespMsg', handleValidateAuthToken);\nRedisPubSub.on('UserEmojiChangedEvtMsg', handleEmojiStatus);\nRedisPubSub.on('UserEjectedFromMeetingEvtMsg', handleUserEjected);\nRedisPubSub.on('UserRoleChangedEvtMsg', handleChangeRole);\nRedisPubSub.on('UserInactivityInspectMsg', handleUserInactivityInspect);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport validateAuthToken from './methods/validateAuthToken';\nimport setEmojiStatus from './methods/setEmojiStatus';\nimport setMobileUser from './methods/setMobileUser';\nimport assignPresenter from './methods/assignPresenter';\nimport changeRole from './methods/changeRole';\nimport removeUser from './methods/removeUser';\nimport toggleUserLock from './methods/toggleUserLock';\nimport setUserEffectiveConnectionType from './methods/setUserEffectiveConnectionType';\nimport userActivitySign from './methods/userActivitySign';\nimport userLeftMeeting from './methods/userLeftMeeting';\nimport setRandomUser from './methods/setRandomUser';\n\nMeteor.methods({\n  setEmojiStatus,\n  setMobileUser,\n  assignPresenter,\n  changeRole,\n  removeUser,\n  validateAuthToken,\n  toggleUserLock,\n  setUserEffectiveConnectionType,\n  userActivitySign,\n  userLeftMeeting,\n  setRandomUser,\n});\n","import Users from '/imports/api/users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction currentUser() {\n  if (!this.userId) {\n    return Users.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n    intId: { $exists: true },\n  };\n\n  const options = {\n    fields: {\n      user: false,\n      authToken: false, // Not asking for authToken from client side but also not exposing it\n    },\n  };\n\n  return Users.find(selector, options);\n}\n\nfunction publishCurrentUser(...args) {\n  const boundUsers = currentUser.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('current-user', publishCurrentUser);\n\nfunction users(role) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Users was requested by unauth connection ${this.connection.id}`);\n    return Users.find({ meetingId: '' });\n  }\n\n  if (!this.userId) {\n    return Users.find({ meetingId: '' });\n  }\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing Users for ${meetingId} ${userId}`);\n\n  const selector = {\n    $or: [\n      { meetingId },\n    ],\n    intId: { $exists: true },\n  };\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    selector.$or.push({\n      'breakoutProps.isBreakoutUser': true,\n      'breakoutProps.parentId': meetingId,\n    });\n  }\n\n  const options = {\n    fields: {\n      authToken: false,\n    },\n  };\n\n  Logger.debug('Publishing Users', { meetingId, userId });\n\n  return Users.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundUsers = users.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('users', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Users = new Mongo.Collection('users');\n\nif (Meteor.isServer) {\n  // types of queries for the users:\n  // 1. meetingId\n  // 2. meetingId, userId\n\n  Users._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default Users;\n","import { check } from 'meteor/check';\nimport addUserInfo from '../modifiers/addUserInfo';\n\nexport default function handleUserInformation({ header, body }) {\n  check(body, Object);\n  check(header, Object);\n\n  const { userInfo } = body;\n  const { userId, meetingId } = header;\n\n  check(userInfo, Array);\n  check(userId, String);\n  check(meetingId, String);\n\n  return addUserInfo(userInfo, userId, meetingId);\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function removeUserInformation() {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const selector = {\n      meetingId,\n      requesterUserId,\n    };\n\n    const numberAffected = UserInfos.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed user information: requester id=${requesterUserId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method removeUserInformation ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function getUserInformation(externalUserId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toThirdParty;\n    const EVENT_NAME = 'LookUpUserReqMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(externalUserId, String);\n\n    const payload = {\n      externalUserId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method getUserInformation ${err.stack}`);\n  }\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserInfo(userInfo, requesterUserId, meetingId) {\n  const info = {\n    meetingId,\n    requesterUserId,\n    userInfo,\n  };\n\n  try {\n    const numberAffected = UserInfos.insert(info);\n\n    if (numberAffected) {\n      Logger.info(`Added user information: requester id=${requesterUserId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding user information to collection: ${err}`);\n  }\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersInfo(meetingId) {\n  try {\n    const numberAffected = UserInfos.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Infos (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing User Infos (${meetingId}). ${err}`);\n  }\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersInfoForRequester(meetingId, requesterUserId) {\n  try {\n    const numberAffected = UserInfos.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Infos requested by user=${requesterUserId}`);\n    }\n  } catch (err) {\n    Logger.info(`Error on clearing User Infos requested by user=${requesterUserId}. ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleUserInformation from './handlers/userInformation';\n\nRedisPubSub.on('LookUpUserRespMsg', handleUserInformation);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport requestUserInformation from './methods/requestUserInformation';\nimport removeUserInformation from './methods/removeUserInformation';\n\nMeteor.methods({\n  requestUserInformation,\n  removeUserInformation,\n});\n","import { Meteor } from 'meteor/meteor';\nimport UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction userInfos() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing UserInfos was requested by unauth connection ${this.connection.id}`);\n    return UserInfos.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId: requesterUserId } = tokenValidation;\n\n  Logger.debug('Publishing UserInfos requested', { meetingId, requesterUserId });\n\n  return UserInfos.find({ meetingId, requesterUserId });\n}\n\nfunction publish(...args) {\n  const boundUserInfos = userInfos.bind(this);\n  return boundUserInfos(...args);\n}\n\nMeteor.publish('users-infos', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst UserInfos = new Mongo.Collection('users-infos');\n\nif (Meteor.isServer) {\n  UserInfos._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default UserInfos;\n","import { check } from 'meteor/check';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserPersistentData(user) {\n  check(user, {\n    meetingId: String,\n    sortName: String,\n    color: String,\n    mobile: Boolean,\n    breakoutProps: Object,\n    inactivityCheck: Boolean,\n    responseDelay: Number,\n    loggedOut: Boolean,\n    intId: String,\n    extId: String,\n    name: String,\n    role: String,\n    guest: Boolean,\n    authed: Boolean,\n    waitingForAcceptance: Match.Maybe(Boolean),\n    guestStatus: String,\n    emoji: String,\n    presenter: Boolean,\n    locked: Boolean,\n    avatar: String,\n    clientType: String,\n    effectiveConnectionType: null,\n  });\n\n\n  const {\n    intId,\n    extId,\n    meetingId,\n    name,\n    role,\n    token,\n    avatar,\n    guest,\n    color,\n  } = user;\n\n  const userData = {\n    userId: intId,\n    extId,\n    meetingId,\n    name,\n    role,\n    token,\n    avatar,\n    guest,\n    color,\n    loggedOut: false,\n  };\n\n  const selector = {\n    userId: intId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: userData,\n  };\n\n  try {\n    const { insertedId } = UsersPersistentData.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added user id=${intId} to user persistent Data: meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted user id=${intId} to user persistent Data: meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding note to the collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport UsersPersistentData from '/imports/api/users-persistent-data/index';\n\nexport default function clearUsersPersistentData(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = UsersPersistentData.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared users persistent data (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error clearing users persistent data (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = UsersPersistentData.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared users persistent data (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error clearing users persistent data (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setloggedOutStatus(userId, meetingId, status = true) {\n  check(userId, String);\n  check(meetingId, String);\n  check(status, Boolean);\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      loggedOut: status,\n    },\n  };\n\n  try {\n    UsersPersistentData.update(selector, modifier);\n  } catch (err) {\n    Logger.error(`Setting users persistent data's logged out status to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function updateRole(userId, meetingId, role) {\n  check(userId, String);\n  check(meetingId, String);\n  check(role, String);\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      role,\n    },\n  };\n\n  try {\n    UsersPersistentData.update(selector, modifier);\n  } catch (err) {\n    Logger.error(`Updating users persistent data's role to the collection: ${err}`);\n  }\n}\n","import './publishers';\n","import UsersPersistentData from '/imports/api/users-persistent-data';\nimport { Meteor } from 'meteor/meteor';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nfunction usersPersistentData() {\n  if (!this.userId) {\n    return UsersPersistentData.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  return UsersPersistentData.find(selector);\n}\n\nfunction publishUsersPersistentData(...args) {\n  const boundUsers = usersPersistentData.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('users-persistent-data', publishUsersPersistentData);\n","import { Meteor } from 'meteor/meteor';\n\nconst UsersPersistentData = new Mongo.Collection('users-persistent-data');\n\nif (Meteor.isServer) {\n  UsersPersistentData._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default UsersPersistentData;\n","import { check } from 'meteor/check';\nimport addUserSetting from '/imports/api/users-settings/server/modifiers/addUserSetting';\nimport logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst oldParameters = {\n  askForFeedbackOnLogout: 'bbb_ask_for_feedback_on_logout',\n  autoJoin: 'bbb_auto_join_audio',\n  autoShareWebcam: 'bbb_auto_share_webcam',\n  autoSwapLayout: 'bbb_auto_swap_layout',\n  clientTitle: 'bbb_client_title',\n  customStyle: 'bbb_custom_style',\n  customStyleUrl: 'bbb_custom_style_url',\n  displayBrandingArea: 'bbb_display_branding_area',\n  enableScreensharing: 'bbb_enable_screen_sharing',\n  enableVideo: 'bbb_enable_video',\n  forceListenOnly: 'bbb_force_listen_only',\n  hidePresentation: 'bbb_hide_presentation',\n  listenOnlyMode: 'bbb_listen_only_mode',\n  multiUserPenOnly: 'bbb_multi_user_pen_only',\n  multiUserTools: 'bbb_multi_user_tools',\n  outsideToggleRecording: 'bbb_outside_toggle_recording',\n  outsideToggleSelfVoice: 'bbb_outside_toggle_self_voice',\n  presenterTools: 'bbb_presenter_tools',\n  shortcuts: 'bbb_shortcuts',\n  skipCheck: 'bbb_skip_check_audio',\n};\n\nconst oldParametersKeys = Object.keys(oldParameters);\n\nconst currentParameters = [\n  // APP\n  'bbb_ask_for_feedback_on_logout',\n  'bbb_override_default_locale',\n  'bbb_auto_join_audio',\n  'bbb_client_title',\n  'bbb_force_listen_only',\n  'bbb_listen_only_mode',\n  'bbb_skip_check_audio',\n  'bbb_skip_check_audio_on_first_join',\n  // BRANDING\n  'bbb_display_branding_area',\n  // SHORTCUTS\n  'bbb_shortcuts',\n  // KURENTO\n  'bbb_auto_share_webcam',\n  'bbb_preferred_camera_profile',\n  'bbb_enable_screen_sharing',\n  'bbb_enable_video',\n  'bbb_record_video',\n  'bbb_skip_video_preview',\n  'bbb_skip_video_preview_on_first_join',\n  'bbb_mirror_own_webcam',\n  // PRESENTATION\n  'bbb_force_restore_presentation_on_new_events',\n  // WHITEBOARD\n  'bbb_multi_user_pen_only',\n  'bbb_presenter_tools',\n  'bbb_multi_user_tools',\n  // SKINNING/THEMMING\n  'bbb_custom_style',\n  'bbb_custom_style_url',\n  // LAYOUT\n  'bbb_auto_swap_layout',\n  'bbb_hide_presentation',\n  'bbb_show_participants_on_login',\n  'bbb_show_public_chat_on_login',\n  // OUTSIDE COMMANDS\n  'bbb_outside_toggle_self_voice',\n  'bbb_outside_toggle_recording',\n];\n\nfunction valueParser(val) {\n  try {\n    const parsedValue = JSON.parse(val.toLowerCase().trim());\n    return parsedValue;\n  } catch (error) {\n    logger.warn(`addUserSettings:Parameter ${val} could not be parsed (was not json)`);\n    return val;\n  }\n}\n\nexport default function addUserSettings(settings) {\n  try {\n    check(settings, [Object]);\n\n    const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(userId, String);\n\n    let parameters = {};\n\n    settings.forEach((el) => {\n      const settingKey = Object.keys(el).shift();\n      const normalizedKey = settingKey.trim();\n\n      if (currentParameters.includes(normalizedKey)) {\n        if (!Object.keys(parameters).includes(normalizedKey)) {\n          parameters = {\n            [normalizedKey]: valueParser(el[settingKey]),\n            ...parameters,\n          };\n        } else {\n          parameters[normalizedKey] = el[settingKey];\n        }\n        return;\n      }\n\n      if (oldParametersKeys.includes(normalizedKey)) {\n        const matchingNewKey = oldParameters[normalizedKey];\n        if (!Object.keys(parameters).includes(matchingNewKey)) {\n          parameters = {\n            [matchingNewKey]: valueParser(el[settingKey]),\n            ...parameters,\n          };\n        }\n        return;\n      }\n\n      logger.warn(`Parameter ${normalizedKey} not handled`);\n    });\n\n    const settingsAdded = [];\n    Object.entries(parameters).forEach((el) => {\n      const setting = el[0];\n      const value = el[1];\n      settingsAdded.push(addUserSetting(meetingId, userId, setting, value));\n    });\n\n    return settingsAdded;\n  } catch (err) {\n    logger.error(`Exception while invoking method addUserSettings ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserSetting(meetingId, userId, setting, value) {\n  check(meetingId, String);\n  check(userId, String);\n  check(setting, String);\n  check(value, Match.Any);\n\n  const selector = {\n    meetingId,\n    userId,\n    setting,\n  };\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      setting,\n      value,\n    },\n  };\n\n  try {\n    const { numberAffected } = UserSettings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose('Upserted user setting', { meetingId, userId, setting });\n    }\n  } catch (err) {\n    Logger.error(`Adding user setting to collection: ${err}`);\n  }\n}\n","import UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersSettings(meetingId) {\n  try {\n    const numberAffected = UserSettings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Settings (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing User Settings (${meetingId}). ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addUserSettings from './methods/addUserSettings';\n\nMeteor.methods({\n  addUserSettings,\n});\n","import { Meteor } from 'meteor/meteor';\nimport UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport User from '/imports/api/users';\n\nfunction userSettings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing UserSettings was requested by unauth connection ${this.connection.id}`);\n    return UserSettings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const currentUser = User.findOne({ userId, meetingId });\n\n  if (currentUser && currentUser?.breakoutProps?.isBreakoutUser) {\n    const { parentId } = currentUser.breakoutProps;\n\n    const [externalId] = currentUser.extId.split('-');\n\n    const mainRoomUserSettings = UserSettings.find({ meetingId: parentId, userId: externalId });\n\n    mainRoomUserSettings.map(({ setting, value }) => ({\n      meetingId,\n      setting,\n      userId,\n      value,\n    })).forEach((doc) => {\n      const selector = {\n        meetingId,\n        setting: doc.setting,\n      };\n\n      UserSettings.upsert(selector, doc);\n    });\n\n    Logger.debug('Publishing UserSettings', { meetingId, userId });\n\n    return UserSettings.find({ meetingId, userId });\n  }\n\n  Logger.debug('Publishing UserSettings', { meetingId, userId });\n\n  return UserSettings.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundUserSettings = userSettings.bind(this);\n  return boundUserSettings(...args);\n}\n\nMeteor.publish('users-settings', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst UserSettings = new Mongo.Collection('users-settings');\n\nif (Meteor.isServer) {\n  UserSettings._ensureIndex({\n    meetingId: 1, userId: 1,\n  });\n}\n\nexport default UserSettings;\n","import { check } from 'meteor/check';\nimport floorChanged from '../modifiers/floorChanged';\n\nexport default function handleFloorChanged({ header, body }, meetingId) {\n  const { intId, floor, lastFloorTime } = body;\n  check(meetingId, String);\n  check(intId, String);\n  check(floor, Boolean);\n  check(lastFloorTime, String);\n\n  return floorChanged(meetingId, intId, floor, lastFloorTime);\n}\n","import { check } from 'meteor/check';\nimport sharedWebcam from '../modifiers/sharedWebcam';\nimport { isValidStream } from '/imports/api/video-streams/server/helpers';\n\nexport default function handleUserSharedHtml5Webcam({ header, body }, meetingId) {\n  const { userId, stream } = body;\n\n  check(header, Object);\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  if (!isValidStream(stream)) return false;\n\n  return sharedWebcam(meetingId, userId, stream);\n}\n","import { check } from 'meteor/check';\nimport unsharedWebcam from '../modifiers/unsharedWebcam';\nimport { isValidStream } from '/imports/api/video-streams/server/helpers';\n\nexport default function handleUserUnsharedHtml5Webcam({ header, body }, meetingId) {\n  const { userId, stream } = body;\n\n  check(header, Object);\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  if (!isValidStream(stream)) return false;\n\n  return unsharedWebcam(meetingId, userId, stream);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userShareWebcam(stream) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'UserBroadcastCamStartMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(stream, String);\n\n    Logger.info(`user sharing webcam: ${meetingId} ${requesterUserId}`);\n\n    // const actionName = 'joinVideo';\n    /* TODO throw an error if user has no permission to share webcam\n    if (!isAllowedTo(actionName, credentials)) {\n      throw new Meteor.Error('not-allowed', `You are not allowed to share webcam`);\n    } */\n\n    const payload = {\n      stream,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method userShareWebcam ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userUnshareWebcam(stream) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'UserBroadcastCamStopMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(stream, String);\n\n    Logger.info(`user unsharing webcam: ${meetingId} ${requesterUserId}`);\n\n    // const actionName = 'joinVideo';\n    /* TODO throw an error if user has no permission to share webcam\n    if (!isAllowedTo(actionName, credentials)) {\n      throw new Meteor.Error('not-allowed', `You are not allowed to share webcam`);\n    } */\n\n    const payload = {\n      stream,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method userUnshareWebcam ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\n\nexport default function clearVideoStreams(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VideoStreams.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VideoStreams in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VideoStreams (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VideoStreams.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VideoStreams in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VideoStreams (all). ${err}`);\n    }\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\n\nexport default function floorChanged(meetingId, userId, floor, lastFloorTime) {\n  check(meetingId, String);\n  check(userId, String);\n  check(floor, Boolean);\n  check(lastFloorTime, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  }\n\n  const modifier = {\n    $set: {\n      floor,\n      lastFloorTime: floor ? lastFloorTime : undefined,\n    },\n  };\n\n  try {\n    const numberAffected = VideoStreams.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      Logger.info(`Updated user streams floor times userId=${userId} floor=${floor} lastFloorTime=${lastFloorTime}`);\n    }\n  } catch (error) {\n    return Logger.error(`Error updating stream floor status: ${error}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\nimport {\n  getDeviceId,\n  getUserName,\n} from '/imports/api/video-streams/server/helpers';\nimport VoiceUsers from '/imports/api/voice-users/';\n\nconst BASE_FLOOR_TIME = \"0\";\n\nexport default function sharedWebcam(meetingId, userId, stream) {\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  const deviceId = getDeviceId(stream);\n  const name = getUserName(userId, meetingId);\n  const vu = VoiceUsers.findOne(\n    { meetingId, intId: userId },\n    { fields: { floor: 1, lastFloorTime: 1 }}\n  ) || {};\n  const floor = vu.floor || false;\n  const lastFloorTime = vu.lastFloorTime || BASE_FLOOR_TIME;\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  const modifier = {\n    $set: {\n      stream,\n      name,\n      lastFloorTime,\n      floor,\n    },\n  };\n\n  try {\n    const { insertedId } = VideoStreams.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Updated stream=${stream} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error setting stream: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\nimport { getDeviceId } from '/imports/api/video-streams/server/helpers';\n\nexport default function unsharedWebcam(meetingId, userId, stream) {\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  const deviceId = getDeviceId(stream);\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  try {\n    VideoStreams.remove(selector);\n\n    Logger.info(`Removed stream=${stream} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Error removing stream: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleUserSharedHtml5Webcam from './handlers/userSharedHtml5Webcam';\nimport handleUserUnsharedHtml5Webcam from './handlers/userUnsharedHtml5Webcam';\nimport handleFloorChanged from './handlers/floorChanged';\n\nRedisPubSub.on('UserBroadcastCamStartedEvtMsg', handleUserSharedHtml5Webcam);\nRedisPubSub.on('UserBroadcastCamStoppedEvtMsg', handleUserUnsharedHtml5Webcam);\nRedisPubSub.on('AudioFloorChangedEvtMsg', handleFloorChanged);\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nconst FLASH_STREAM_REGEX = /^([A-z0-9]+)-([A-z0-9]+)-([A-z0-9]+)(-recorded)?$/;\nconst TOKEN = '_';\n\nconst isValidStream = stream => !FLASH_STREAM_REGEX.test(stream);\nconst getDeviceId = (stream) => {\n  const splitStream = stream.split(TOKEN);\n  if (splitStream.length === 3) return splitStream[2];\n  Logger.warn(`Could not get deviceId from stream=${stream}`);\n  return stream;\n};\n\nconst getUserName = (userId, meetingId) => {\n  const user = Users.findOne(\n    { userId, meetingId },\n    { fields: { name: 1 } },\n  );\n  if (user) return user.name;\n  return userId;\n};\n\nexport {\n  isValidStream,\n  getDeviceId,\n  getUserName,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publisher';\n","import { Meteor } from 'meteor/meteor';\nimport userShareWebcam from './methods/userShareWebcam';\nimport userUnshareWebcam from './methods/userUnshareWebcam';\n\nMeteor.methods({\n  userShareWebcam,\n  userUnshareWebcam,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction videoStreams() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VideoStreams was requested by unauth connection ${this.connection.id}`);\n    return VideoStreams.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing VideoStreams', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n  };\n\n  return VideoStreams.find(selector);\n}\n\nfunction publish(...args) {\n  const boundVideoStreams = videoStreams.bind(this);\n  return boundVideoStreams(...args);\n}\n\nMeteor.publish('video-streams', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VideoStreams = new Mongo.Collection('video-streams');\n\nif (Meteor.isServer) {\n  // types of queries for the video users:\n  // 2. meetingId\n\n  VideoStreams._ensureIndex({ meetingId: 1 });\n}\n\nexport default VideoStreams;\n","import { check } from 'meteor/check';\nimport VoiceCallState from '/imports/api/voice-call-states';\nimport Logger from '/imports/startup/server/logger';\n\n// \"CALL_STARTED\", \"IN_ECHO_TEST\", \"IN_CONFERENCE\", \"CALL_ENDED\"\n\nexport default function handleVoiceCallStateEvent({ body }, meetingId) {\n  const {\n    voiceConf,\n    clientSession,\n    userId,\n    callerName,\n    callState,\n  } = body;\n\n  check(meetingId, String);\n  check(voiceConf, String);\n  check(clientSession, String);\n  check(userId, String);\n  check(callerName, String);\n  check(callState, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    clientSession,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      voiceConf,\n      clientSession,\n      callState,\n    },\n  };\n\n  try {\n    const { numberAffected } = VoiceCallState.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Update voice call', {\n        state: userId, meetingId, clientSession, callState,\n      });\n    }\n  } catch (err) {\n    Logger.error(`Update voice call state=${userId}: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VoiceCallStates from '/imports/api/voice-call-states';\n\nexport default function clearVoiceCallStates(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VoiceCallStates.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VoiceCallStates in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing VoiceCallStates in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VoiceCallStates.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VoiceCallStates in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceCallStates in all meetings. ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleVoiceCallStateEvent from './handlers/voiceCallStateEvent';\n\nRedisPubSub.on('VoiceCallStateEvtMsg', handleVoiceCallStateEvent);\n","import './eventHandlers';\nimport './publishers';\n","import VoiceCallStates from '/imports/api/voice-call-states';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction voiceCallStates() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VoiceCallStates was requested by unauth connection ${this.connection.id}`);\n    return VoiceCallStates.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Voice Call States', { meetingId, userId });\n\n  return VoiceCallStates.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundVoiceCallStates = voiceCallStates.bind(this);\n  return boundVoiceCallStates(...args);\n}\n\nMeteor.publish('voice-call-states', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VoiceCallStates = new Mongo.Collection('voiceCallStates');\n\nif (Meteor.isServer) {\n  // types of queries for the voice users:\n  // 1. intId\n  // 2. meetingId, intId\n\n  VoiceCallStates._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default VoiceCallStates;\n","import { check } from 'meteor/check';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleFloorChange({ header, body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport Meetings from '/imports/api/meetings';\nimport addVoiceUser from '../modifiers/addVoiceUser';\nimport removeVoiceUser from '../modifiers/removeVoiceUser';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleGetVoiceUsers({ body }, meetingId) {\n  const { users } = body;\n\n  check(meetingId, String);\n  check(users, Array);\n\n  const meeting = Meetings.findOne({ meetingId }, { fields: { 'voiceProp.voiceConf': 1 } });\n  const usersIds = users.map(m => m.intId);\n\n  const voiceUsersIdsToUpdate = VoiceUsers.find({\n    meetingId,\n    intId: { $in: usersIds },\n  }, { fields: { intId: 1 } }).fetch().map(m => m.intId);\n\n  users.forEach((user) => {\n    if (voiceUsersIdsToUpdate.indexOf(user.intId) >= 0) {\n      // user already exist, then update\n      updateVoiceUser(meetingId, {\n        intId: user.intId,\n        voiceUserId: user.voiceUserId,\n        talking: user.talking,\n        muted: user.muted,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    } else {\n      // user doesn't exist yet, then add it\n      addVoiceUser(meetingId, {\n        voiceUserId: user.voiceUserId,\n        intId: user.intId,\n        callerName: user.callerName,\n        callerNum: user.callerNum,\n        muted: user.muted,\n        talking: user.talking,\n        callingWith: user.callingWith,\n        listenOnly: user.listenOnly,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    }\n  });\n\n  // removing extra users already existing in Mongo\n  const voiceUsersToRemove = VoiceUsers.find({\n    meetingId,\n    intId: { $nin: usersIds },\n  }).fetch();\n  voiceUsersToRemove.forEach(user => removeVoiceUser(meetingId, {\n    voiceConf: meeting.voiceProp.voiceConf,\n    voiceUserId: user.voiceUserId,\n    intId: user.intId,\n  }));\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport addDialInUser from '/imports/api/users/server/modifiers/addDialInUser';\nimport addVoiceUser from '../modifiers/addVoiceUser';\n\n\nexport default function handleJoinVoiceUser({ body }, meetingId) {\n  const voiceUser = body;\n  voiceUser.joined = true;\n\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    intId: String,\n    voiceUserId: String,\n    callerName: String,\n    callerNum: String,\n    muted: Boolean,\n    talking: Boolean,\n    callingWith: String,\n    listenOnly: Boolean,\n    joined: Boolean,\n  });\n\n  const {\n    intId,\n  } = voiceUser;\n\n  const User = Users.findOne({\n    meetingId,\n    intId,\n  });\n\n  if (!User) {\n    /* voice-only user - called into the conference */\n    addDialInUser(meetingId, voiceUser);\n  }\n\n  return addVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\n\nimport removeVoiceUser from '/imports/api/voice-users/server/modifiers/removeVoiceUser';\nimport removeUser from '/imports/api/users/server/modifiers/removeUser';\nimport Users from '/imports/api/users';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    intId: String,\n    voiceUserId: String,\n  });\n\n  const {\n    intId,\n    voiceUserId,\n  } = voiceUser;\n\n  const isDialInUser = (userId, meetingID) => !!Users.findOne({ meetingId: meetingID, userId, clientType: 'dial-in-user' });\n\n  // if the user is dial-in, leaving voice also means leaving userlist\n  if (isDialInUser(voiceUserId, meetingId)) removeUser(meetingId, intId);\n\n  return removeVoiceUser(meetingId, voiceUser);\n}\n","import changeMuteMeeting from '../modifiers/changeMuteMeeting';\n\nexport default function handleMeetingMuted({ body }, meetingId) {\n  changeMuteMeeting(meetingId, body);\n}\n","import { check } from 'meteor/check';\n\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  // If a person is muted we have to force them to not talking\n  if (voiceUser.muted) {\n    voiceUser.talking = false;\n  }\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\n\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import VoiceUsers from '/imports/api/voice-users/';\nimport Meetings from '/imports/api/meetings';\nimport addDialInUser from '/imports/api/users/server/modifiers/addDialInUser';\nimport removeVoiceUser from '../modifiers/removeVoiceUser';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\nimport addVoiceUser from '../modifiers/addVoiceUser';\n\n\nexport default function handleVoiceUsers({ header, body }) {\n  const { voiceUsers } = body;\n  const { meetingId } = header;\n\n  const meeting = Meetings.findOne({ meetingId }, { fields: { 'voiceProp.voiceConf': 1 } });\n  const usersIds = voiceUsers.map(m => m.intId);\n\n  const voiceUsersIdsToUpdate = VoiceUsers.find({\n    meetingId,\n    intId: { $in: usersIds },\n  }, { fields: { intId: 1 } }).fetch().map(m => m.intId);\n\n  voiceUsers.forEach((voice) => {\n    if (voiceUsersIdsToUpdate.indexOf(voice.intId) >= 0) {\n      // user already exist, then update\n      updateVoiceUser(meetingId, {\n        intId: voice.intId,\n        voiceUserId: voice.voiceUserId,\n        talking: voice.talking,\n        muted: voice.muted,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    } else {\n      // user doesn't exist yet, then add it\n      addVoiceUser(meetingId, {\n        voiceUserId: voice.voiceUserId,\n        intId: voice.intId,\n        callerName: voice.callerName,\n        callerNum: voice.callerNum,\n        muted: voice.muted,\n        talking: voice.talking,\n        callingWith: voice.callingWith,\n        listenOnly: voice.listenOnly,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n\n      addDialInUser(meetingId, voice);\n    }\n  });\n\n  // removing extra users already existing in Mongo\n  const voiceUsersToRemove = VoiceUsers.find({\n    meetingId,\n    intId: { $nin: usersIds },\n  }, { fields: { voiceUserId: 1, intId: 1 } }).fetch();\n  voiceUsersToRemove.forEach(user => removeVoiceUser(meetingId, {\n    voiceConf: meeting.voiceProp.voiceConf,\n    voiceUserId: user.voiceUserId,\n    intId: user.intId,\n  }));\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function ejectUserFromVoice(userId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'EjectUserFromVoiceCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(userId, String);\n\n    const payload = {\n      userId,\n      ejectedBy: requesterUserId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method ejectUserFromVoice ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function muteAllExceptPresenterToggle() {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'MuteAllExceptPresentersCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const meeting = Meetings.findOne({ meetingId });\n    const toggleMeetingMuted = !meeting.voiceProp.muteOnStart;\n\n    const payload = {\n      mutedBy: requesterUserId,\n      mute: toggleMeetingMuted,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method muteAllExceptPresenterToggle ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function muteAllToggle() {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'MuteMeetingCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const meeting = Meetings.findOne({ meetingId });\n    const toggleMeetingMuted = !meeting.voiceProp.muteOnStart;\n\n    const payload = {\n      mutedBy: requesterUserId,\n      mute: toggleMeetingMuted,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method muteAllToggle ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Users from '/imports/api/users';\nimport VoiceUsers from '/imports/api/voice-users';\nimport Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function muteToggle(uId, toggle) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'MuteUserCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const userToMute = uId || requesterUserId;\n\n    const requester = Users.findOne({\n      meetingId,\n      userId: requesterUserId,\n    });\n\n    const voiceUser = VoiceUsers.findOne({\n      intId: userToMute,\n      meetingId,\n    });\n\n    if (!requester || !voiceUser) return;\n\n    const { listenOnly, muted } = voiceUser;\n    if (listenOnly) return;\n\n    // if allowModsToUnmuteUsers is false, users will be kicked out for attempting to unmute others\n    if (requesterUserId !== userToMute && muted) {\n      const meeting = Meetings.findOne({ meetingId },\n        { fields: { 'usersProp.allowModsToUnmuteUsers': 1 } });\n      if (meeting.usersProp && !meeting.usersProp.allowModsToUnmuteUsers) {\n        Logger.warn(`Attempted unmuting by another user meetingId:${meetingId} requester: ${requesterUserId} userId: ${userToMute}`);\n        return;\n      }\n    }\n\n    let _muted;\n\n    if ((toggle === undefined) || (toggle === null)) {\n      _muted = !muted;\n    } else {\n      _muted = !!toggle;\n    }\n\n    const payload = {\n      userId: userToMute,\n      mutedBy: requesterUserId,\n      mute: _muted,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method muteToggle ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport Users from '/imports/api/users';\nimport flat from 'flat';\n\nexport default function addVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceUserId: String,\n    intId: String,\n    callerName: String,\n    callerNum: String,\n    muted: Boolean,\n    talking: Boolean,\n    callingWith: String,\n    listenOnly: Boolean,\n    voiceConf: String,\n    joined: Boolean, // This is a HTML5 only param.\n  });\n\n  const { intId, talking } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId, spoke: talking },\n      flat(voiceUser),\n    ),\n  };\n\n  const user = Users.findOne({ meetingId, userId: intId }, {\n    fields: {\n      color: 1,\n    },\n  });\n\n  if (user) modifier.$set.color = user.color;\n\n  try {\n    const { numberAffected } = VoiceUsers.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Add voice user=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Add voice user=${intId}: ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function changeMuteMeeting(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    muted: Boolean,\n    mutedBy: String,\n  });\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'voiceProp.muteOnStart': payload.muted,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting mute status meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Changing meeting mute status meeting={${meetingId}} ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\n\nexport default function clearVoiceUser(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VoiceUsers.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VoiceUsers in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceUsers in ${meetingId}. ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VoiceUsers.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VoiceUsers in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceUsers. ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport { clearSpokeTimeout } from '/imports/api/common/server/helpers';\n\nexport default function removeVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    voiceUserId: String,\n    intId: String,\n  });\n\n  const { intId } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      muted: false,\n      talking: false,\n      listenOnly: false,\n      joined: false,\n      spoke: false,\n    },\n  };\n\n  try {\n    clearSpokeTimeout(meetingId, intId);\n    const numberAffected = VoiceUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Remove voiceUser=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Remove voiceUser=${intId}: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport flat from 'flat';\nimport { spokeTimeoutHandles, clearSpokeTimeout } from '/imports/api/common/server/helpers';\n\nconst TALKING_TIMEOUT = 6000;\n\nexport default function updateVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    intId: String,\n    voiceUserId: String,\n    talking: Match.Maybe(Boolean),\n    muted: Match.Maybe(Boolean),\n    voiceConf: String,\n    joined: Match.Maybe(Boolean),\n    floor: Match.Maybe(Boolean),\n    lastFloorTime: Match.Maybe(String),\n  });\n\n  const { intId } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      flat(voiceUser),\n    ),\n  };\n\n  if (voiceUser.talking) {\n    const user = VoiceUsers.findOne({ meetingId, intId }, {\n      fields: {\n        startTime: 1,\n      },\n    });\n\n    if (user && !user.startTime) modifier.$set.startTime = Date.now();\n    modifier.$set.spoke = true;\n    modifier.$set.endTime = null;\n    clearSpokeTimeout(meetingId, intId);\n  }\n\n  if (!voiceUser.talking) {\n    const timeoutHandle = Meteor.setTimeout(() => {\n      const user = VoiceUsers.findOne({ meetingId, intId }, {\n        fields: {\n          endTime: 1,\n          talking: 1,\n        },\n      });\n\n      if (user) {\n        const { endTime, talking } = user;\n        const spokeDelay = ((Date.now() - endTime) < TALKING_TIMEOUT);\n        if (talking || spokeDelay) return;\n        modifier.$set.spoke = false;\n        modifier.$set.startTime = null;\n        try {\n          const numberAffected = VoiceUsers.update(selector, modifier);\n\n          if (numberAffected) {\n            Logger.debug('Update voiceUser', { voiceUser: intId, meetingId });\n          }\n        } catch (err) {\n          Logger.error(`Update voiceUser=${intId}: ${err}`);\n        }\n      }\n    }, TALKING_TIMEOUT);\n\n    spokeTimeoutHandles[`${meetingId}-${intId}`] = timeoutHandle;\n    modifier.$set.endTime = Date.now();\n  }\n\n  try {\n    const numberAffected = VoiceUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Update voiceUser', { voiceUser: intId, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Update voiceUser=${intId}: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleJoinVoiceUser from './handlers/joinVoiceUser';\nimport handleLeftVoiceUser from './handlers/leftVoiceUser';\nimport handleTalkingVoiceUser from './handlers/talkingVoiceUser';\nimport handleMutedVoiceUser from './handlers/mutedVoiceUser';\nimport handleGetVoiceUsers from './handlers/getVoiceUsers';\nimport handleVoiceUsers from './handlers/voiceUsers';\nimport handleMeetingMuted from './handlers/meetingMuted';\nimport handleFloorChange from './handlers/floorChanged';\n\nRedisPubSub.on('UserLeftVoiceConfToClientEvtMsg', handleLeftVoiceUser);\nRedisPubSub.on('UserJoinedVoiceConfToClientEvtMsg', handleJoinVoiceUser);\nRedisPubSub.on('UserTalkingVoiceEvtMsg', handleTalkingVoiceUser);\nRedisPubSub.on('UserMutedVoiceEvtMsg', handleMutedVoiceUser);\nRedisPubSub.on('GetVoiceUsersMeetingRespMsg', processForHTML5ServerOnly(handleGetVoiceUsers));\nRedisPubSub.on('SyncGetVoiceUsersRespMsg', handleVoiceUsers);\nRedisPubSub.on('MeetingMutedEvtMsg', handleMeetingMuted);\nRedisPubSub.on('AudioFloorChangedEvtMsg', handleFloorChange);\n","import './eventHandlers';\nimport './publishers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport muteToggle from './methods/muteToggle';\nimport muteAllToggle from './methods/muteAllToggle';\nimport muteAllExceptPresenterToggle from './methods/muteAllExceptPresenterToggle';\nimport ejectUserFromVoice from './methods/ejectUserFromVoice';\n\nMeteor.methods({\n  toggleVoice: muteToggle,\n  muteAllUsers: muteAllToggle,\n  muteAllExceptPresenter: muteAllExceptPresenterToggle,\n  ejectUserFromVoice,\n});\n","import VoiceUsers from '/imports/api/voice-users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport ejectUserFromVoice from './methods/ejectUserFromVoice';\n\nfunction voiceUser() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VoiceUsers was requested by unauth connection ${this.connection.id}`);\n    return VoiceUsers.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId: requesterUserId } = tokenValidation;\n\n  const onCloseConnection = Meteor.bindEnvironment(() => {\n    try {\n      // I used user because voiceUser is the function's name\n      const User = VoiceUsers.findOne({ meetingId, requesterUserId });\n      if (User) {\n        ejectUserFromVoice(requesterUserId);\n      }\n    } catch (e) {\n      Logger.error(`Exception while executing ejectUserFromVoice for ${requesterUserId}: ${e}`);\n    }\n  });\n\n  Logger.debug('Publishing Voice User', { meetingId, requesterUserId });\n\n  this._session.socket.on('close', _.debounce(onCloseConnection, 100));\n  return VoiceUsers.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundVoiceUser = voiceUser.bind(this);\n  return boundVoiceUser(...args);\n}\n\nMeteor.publish('voiceUsers', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VoiceUsers = new Mongo.Collection('voiceUsers');\n\nif (Meteor.isServer) {\n  // types of queries for the voice users:\n  // 1. intId\n  // 2. meetingId, intId\n\n  VoiceUsers._ensureIndex({ intId: 1 });\n  VoiceUsers._ensureIndex({ meetingId: 1, intId: 1 });\n}\n\nexport default VoiceUsers;\n","import { check } from 'meteor/check';\nimport modifyWhiteboardAccess from '../modifiers/modifyWhiteboardAccess';\n\nexport default function handleModifyWhiteboardAccess({ body }, meetingId) {\n  const { multiUser, whiteboardId } = body;\n\n  check(multiUser, Array);\n  check(whiteboardId, String);\n  check(meetingId, String);\n\n  return modifyWhiteboardAccess(meetingId, whiteboardId, multiUser);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { getUsers } from '/imports/api/whiteboard-multi-user/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addGlobalAccess(whiteboardId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n    check(whiteboardId, String);\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const multiUser = getUsers(meetingId);\n\n    const payload = {\n      multiUser,\n      whiteboardId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method addGlobalAccess ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { getMultiUser } from '/imports/api/whiteboard-multi-user/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addIndividualAccess(whiteboardId, userId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n    check(whiteboardId, String);\n    check(userId, String);\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const multiUser = getMultiUser(meetingId, whiteboardId);\n\n    if (!multiUser.includes(userId)) {\n      multiUser.push(userId);\n\n      const payload = {\n        multiUser,\n        whiteboardId,\n      };\n\n      RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method addIndividualAccess ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeGlobalAccess(whiteboardId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n    check(whiteboardId, String);\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      multiUser: [],\n      whiteboardId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method removeGlobalAccess ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { getMultiUser } from '/imports/api/whiteboard-multi-user/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeIndividualAccess(whiteboardId, userId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n    check(whiteboardId, String);\n    check(userId, String);\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const multiUser = getMultiUser(meetingId, whiteboardId);\n\n    if (multiUser.includes(userId)) {\n      const payload = {\n        multiUser: multiUser.filter(id => id !== userId),\n        whiteboardId,\n      };\n\n      RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method removeIndividualAccess ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user';\n\nexport default function clearWhiteboardMultiUser(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = WhiteboardMultiUser.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared WhiteboardMultiUser (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error clearing WhiteboardMultiUser (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = WhiteboardMultiUser.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared WhiteboardMultiUser (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error clearing WhiteboardMultiUser (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\n\nexport default function modifyWhiteboardAccess(meetingId, whiteboardId, multiUser) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(multiUser, Array);\n\n  const selector = {\n    meetingId,\n    whiteboardId,\n  };\n\n  const modifier = {\n    meetingId,\n    whiteboardId,\n    multiUser,\n  };\n\n  try {\n    const { insertedId } = WhiteboardMultiUser.upsert(selector, modifier);\n    if (insertedId) {\n      Logger.info(`Added multiUser flag=${multiUser} meetingId=${meetingId} whiteboardId=${whiteboardId}`);\n    } else {\n      Logger.info(`Upserted multiUser flag=${multiUser} meetingId=${meetingId} whiteboardId=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error while adding an entry to Multi-User collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleGetWhiteboardAccess from './handlers/modifyWhiteboardAccess';\n\nRedisPubSub.on('GetWhiteboardAccessRespMsg', processForHTML5ServerOnly(handleGetWhiteboardAccess));\nRedisPubSub.on('SyncGetWhiteboardAccessRespMsg', handleGetWhiteboardAccess);\nRedisPubSub.on('ModifyWhiteboardAccessEvtMsg', handleGetWhiteboardAccess);\n","import Users from '/imports/api/users';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\n\nconst getMultiUser = (meetingId, whiteboardId) => {\n  const data = WhiteboardMultiUser.findOne(\n    {\n      meetingId,\n      whiteboardId,\n    }, { fields: { multiUser: 1 } },\n  );\n\n  if (!data || !data.multiUser || !Array.isArray(data.multiUser)) return [];\n\n  return data.multiUser;\n};\n\nconst getUsers = (meetingId) => {\n  const data = Users.find(\n    { meetingId },\n    { fields: { userId: 1 } },\n  ).fetch();\n\n  if (!data) return [];\n\n  return data.map(user => user.userId);\n};\n\nexport {\n  getMultiUser,\n  getUsers,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addGlobalAccess from './methods/addGlobalAccess';\nimport addIndividualAccess from './methods/addIndividualAccess';\nimport removeGlobalAccess from './methods/removeGlobalAccess';\nimport removeIndividualAccess from './methods/removeIndividualAccess';\n\nMeteor.methods({\n  addGlobalAccess,\n  addIndividualAccess,\n  removeGlobalAccess,\n  removeIndividualAccess,\n});\n","import WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction whiteboardMultiUser() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing WhiteboardMultiUser was requested by unauth connection ${this.connection.id}`);\n    return WhiteboardMultiUser.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing WhiteboardMultiUser', { meetingId, userId });\n\n  return WhiteboardMultiUser.find({ meetingId });\n}\n\n\nfunction publish(...args) {\n  const boundMultiUser = whiteboardMultiUser.bind(this);\n  return boundMultiUser(...args);\n}\n\nMeteor.publish('whiteboard-multi-user', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst WhiteboardMultiUser = new Mongo.Collection('whiteboard-multi-user');\n\nif (Meteor.isServer) {\n  // types of queries for the whiteboard-multi-user:\n  // 1. meetingId\n\n  WhiteboardMultiUser._ensureIndex({ meetingId: 1 });\n}\n\nexport default WhiteboardMultiUser;\n","import axios from 'axios';\nimport sha1 from 'crypto-js/sha1';\nimport Logger from '/imports/startup/server/logger';\nimport createNote from '/imports/api/note/server/methods/createNote';\nimport createCaptions from '/imports/api/captions/server/methods/createCaptions';\n\nconst ETHERPAD = Meteor.settings.private.etherpad;\nconst BASE_URL = `http://${ETHERPAD.host}:${ETHERPAD.port}/api/${ETHERPAD.version}`;\nconst HASH_SIZE = 36;\n\nconst createPadURL = padId => `${BASE_URL}/createPad?apikey=${ETHERPAD.apikey}&padID=${padId}`;\n\nconst getReadOnlyIdURL = padId => `${BASE_URL}/getReadOnlyID?apikey=${ETHERPAD.apikey}&padID=${padId}`;\n\nconst appendTextURL = (padId, text) => `${BASE_URL}/appendText?apikey=${ETHERPAD.apikey}&padID=${padId}&text=${encodeURIComponent(text)}`;\n\nconst checkTokenURL = () => `${BASE_URL}/checkToken?apikey=${ETHERPAD.apikey}`;\n\nconst hashSHA1 = (str) => sha1(str).toString().substring(0, HASH_SIZE);\n\nconst checkServer = () => {\n  return new Promise((resolve, reject) => {\n    axios({\n      method: 'get',\n      url: checkTokenURL(),\n      responseType: 'json',\n    }).then((response) => {\n      const { status } = response;\n      if (status !== 200) return reject();\n      const { message } = response.data;\n      if (message !== 'ok') return reject();\n      resolve();\n    }).catch(() => reject());\n  });\n};\n\nconst initPads = (meetingId, html5InstanceId) => {\n  checkServer().then(() => {\n    createNote(meetingId, html5InstanceId);\n    createCaptions(meetingId, html5InstanceId);\n  }).catch(() => Logger.error(`Pads' server unreachable`));\n};\n\nconst withInstaceId = (instanceId, id) => `[${instanceId}]${id}`;\n\nexport {\n  hashSHA1,\n  createPadURL,\n  getReadOnlyIdURL,\n  appendTextURL,\n  initPads,\n  withInstaceId,\n}\n","import Users from '/imports/api/users';\n\nconst MSG_DIRECT_TYPE = 'DIRECT';\nconst NODE_USER = 'nodeJSapp';\n\nexport const spokeTimeoutHandles = {};\nexport const clearSpokeTimeout = (meetingId, userId) => {\n  if (spokeTimeoutHandles[`${meetingId}-${userId}`]) {\n    Meteor.clearTimeout(spokeTimeoutHandles[`${meetingId}-${userId}`]);\n    delete spokeTimeoutHandles[`${meetingId}-${userId}`];\n  }\n};\n\nexport const indexOf = [].indexOf || function (item) {\n  for (let i = 0, l = this.length; i < l; i += 1) {\n    if (i in this && this[i] === item) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nexport const processForHTML5ServerOnly = fn => (message, ...args) => {\n  const { envelope } = message;\n  const { routing } = envelope;\n  const { msgType, meetingId, userId } = routing;\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const user = Users.findOne(selector);\n\n  const shouldSkip = user && msgType === MSG_DIRECT_TYPE && userId !== NODE_USER && user.clientType !== 'HTML5';\n  if (shouldSkip) return () => { };\n  return fn(message, ...args);\n};\n\nexport const extractCredentials = (credentials) => {\n  if (!credentials) return {};\n  const credentialsArray = credentials.split('--');\n  const meetingId = credentialsArray[0];\n  const requesterUserId = credentialsArray[1];\n  return { meetingId, requesterUserId };\n};\n","export const LAYOUT_TYPE = {\n  CUSTOM_LAYOUT: 'custom',\n  SMART_LAYOUT: 'smart',\n  PRESENTATION_FOCUS: 'presentationFocus',\n  VIDEO_FOCUS: 'videoFocus',\n};\n\nexport const DEVICE_TYPE = {\n  MOBILE: 'mobile',\n  TABLET_PORTRAIT: 'tablet_portrait',\n  TABLET_LANDSCAPE: 'tablet_landscape',\n  TABLET: 'tablet',\n  DESKTOP: 'desktop',\n};\n\nexport const CAMERADOCK_POSITION = {\n  CONTENT_TOP: 'contentTop',\n  CONTENT_RIGHT: 'contentRight',\n  CONTENT_BOTTOM: 'contentBottom',\n  CONTENT_LEFT: 'contentLeft',\n  SIDEBAR_CONTENT_BOTTOM: 'sidebarContentBottom',\n};\n\nexport const ACTIONS = {\n  SET_AUTO_ARRANGE_LAYOUT: 'setAutoArrangeLayout',\n  SET_IS_RTL: 'setIsRTL',\n  SET_LAYOUT_TYPE: 'setLayoutType',\n  SET_DEVICE_TYPE: 'setDeviceType',\n  SET_FONT_SIZE: 'setFontSize',\n\n  SET_LAYOUT_LOADED: 'setLayoutLoaded',\n  SET_LAYOUT_INPUT: 'setLayoutInput',\n\n  SET_SIDEBAR_NAVIGATION_PANEL: 'setSidebarNavigationPanel',\n  SET_SIDEBAR_CONTENT_PANEL: 'setSidebarcontentPanel',\n\n  SET_ID_CHAT_OPEN: 'setIdChatOpen',\n\n  SET_BROWSER_SIZE: 'setBrowserSize',\n\n  SET_HAS_BANNER_BAR: 'setHasBannerBar',\n  SET_HAS_NOTIFICATIONS_BAR: 'setHasNotificationsBar',\n\n  SET_NAVBAR_OUTPUT: 'setNavBarOutput',\n\n  SET_ACTIONBAR_OUTPUT: 'setActionBarOutput',\n\n  SET_SIDEBAR_NAVIGATION_IS_OPEN: 'setSidebarNavigationIsOpen',\n  SET_SIDEBAR_NAVIGATION_SIZE: 'setSidebarNavigationSize',\n  SET_SIDEBAR_NAVIGATION_OUTPUT: 'setSidebarNavigationOutput',\n  SET_SIDEBAR_NAVIGATION_IS_RESIZABLE: 'setSidebarNavigationIsResizable',\n  SET_SIDEBAR_NAVIGATION_RESIZABLE_EDGE: 'setSidebarNavigationResizableEdge',\n\n  SET_SIDEBAR_CONTENT_IS_OPEN: 'setSidebarContentIsOpen',\n  SET_SIDEBAR_CONTENT_SIZE: 'setSidebarContentSize',\n  SET_SIDEBAR_CONTENT_PANEL_TYPE: 'setSidebarContentPanelType',\n  SET_SIDEBAR_CONTENT_OUTPUT: 'setSidebarContentOutput',\n  SET_SIDEBAR_CONTENT_IS_RESIZABLE: 'setSidebarContentIsResizable',\n  SET_SIDEBAR_CONTENT_RESIZABLE_EDGE: 'setSidebarContentResizableEdge',\n\n  SET_MEDIA_AREA_SIZE: 'setMediaAreaSize',\n\n  SET_NUM_CAMERAS: 'setNumCameras',\n  SET_CAMERA_DOCK_IS_DRAGGING: 'setCameraDockIsDragging',\n  SET_CAMERA_DOCK_IS_RESIZING: 'setCameraDockIsResizing',\n  SET_CAMERA_DOCK_POSITION: 'setCameraDockPosition',\n  SET_CAMERA_DOCK_SIZE: 'setCameraDockSize',\n  SET_CAMERA_DOCK_OPTIMAL_GRID_SIZE: 'setCameraDockOptimalGridSize',\n  SET_CAMERA_DOCK_OUTPUT: 'setCameraDockOutput',\n  SET_CAMERA_DOCK_IS_DRAGGABLE: 'setCameraDockIsDraggable',\n  SET_CAMERA_DOCK_IS_RESIZABLE: 'setCameraDockIsResizable',\n  SET_CAMERA_DOCK_RESIZABLE_EDGE: 'setCameraDockResizableEdge',\n\n  SET_DROP_AREAS: 'setDropAreas',\n\n  SET_PRESENTATION_IS_OPEN: 'setPresentationIsOpen',\n  SET_PRESENTATION_CURRENT_SLIDE_SIZE: 'setPresentationCurrentSlideSize',\n  SET_PRESENTATION_NUM_CURRENT_SLIDE: 'setPresentationNumCurrentSlide',\n  SET_PRESENTATION_SLIDES_LENGTH: 'setPresentationSlideslength',\n  SET_PRESENTATION_SIZE: 'setPresentationSize',\n  SET_PRESENTATION_OUTPUT: 'setPresentationOutput',\n  SET_PRESENTATION_IS_RESIZABLE: 'setPresentationIsResizable',\n  SET_PRESENTATION_RESIZABLE_EDGE: 'setPresentationResizableEdge',\n\n  SET_FULLSCREEN_ELEMENT: 'setFullscreenElement',\n\n  SET_HAS_SCREEN_SHARE: 'setHasScreenShare',\n  SET_SCREEN_SHARE_SIZE: 'setScreenShareSize',\n  SET_SCREEN_SHARE_OUTPUT: 'setScreenShareOutput',\n\n  SET_HAS_EXTERNAL_VIDEO: 'setHasExternalVideo',\n  SET_EXTERNAL_VIDEO_SIZE: 'setExternalVideoSize',\n  SET_EXTERNAL_VIDEO_OUTPUT: 'setExternalVideoOutput',\n};\n\nexport const PANELS = {\n  USERLIST: 'userlist',\n  CHAT: 'chat',\n  POLL: 'poll',\n  CAPTIONS: 'captions',\n  BREAKOUT: 'breakoutroom',\n  SHARED_NOTES: 'shared-notes',\n  WAITING_USERS: 'waiting-users',\n  NONE: 'none',\n};\n","import Logger from './logger';\nimport userLeaving from '/imports/api/users/server/methods/userLeaving';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Users from '/imports/api/users';\nimport { check } from 'meteor/check';\n\nconst { enabled, syncInterval } = Meteor.settings.public.syncUsersWithConnectionManager;\n\nclass ClientConnections {\n  constructor() {\n    Logger.debug('Initializing client connections structure', { logCode: 'client_connections_init' });\n    this.connections = new Map();\n\n    setInterval(() => {\n      this.print();\n    }, 30000);\n\n    if (enabled) {\n      const syncConnections = Meteor.bindEnvironment(() => {\n        this.syncConnectionsWithServer();\n      });\n\n      setInterval(() => {\n        syncConnections();\n      }, syncInterval);\n    }\n  }\n\n  add(sessionId, connection) {\n    Logger.info('Client connections add called', { logCode: 'client_connections_add', extraInfo: { sessionId, connection } });\n    if (!sessionId || !connection) {\n      Logger.error(`Error on add new client connection. sessionId=${sessionId} connection=${connection.id}`,\n        { logCode: 'client_connections_add_error', extraInfo: { sessionId, connection } }\n      );\n\n      return;\n    }\n\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    check(meetingId, String);\n    check(userId, String);\n      \n    if (!meetingId) {\n      Logger.error(`Error on add new client connection. sessionId=${sessionId} connection=${connection.id}`,\n        { logCode: 'client_connections_add_error_meeting_id_null', extraInfo: { meetingId, userId } }\n      );\n      return false;\n    }\n\n    if (!this.exists(meetingId)) {\n      Logger.info(`Meeting not found in connections: meetingId=${meetingId}`);\n      this.createMeetingConnections(meetingId);\n    }\n\n    const sessionConnections = this.connections.get(meetingId);\n\n    if (sessionConnections.has(userId) && sessionConnections.get(userId).includes(connection.id)) {\n      Logger.info(`Connection already exists for user. userId=${userId} connectionId=${connection.id}`);\n\n      return false;\n    }\n\n    connection.onClose(Meteor.bindEnvironment(() => {\n      userLeaving(meetingId, userId, connection.id);\n    }));\n\n    Logger.info(`Adding new connection for sessionId=${sessionId} connection=${connection.id}`);\n\n    if (!sessionConnections.has(userId)) {\n      Logger.info(`Creating connections poll for ${userId}`);\n\n      sessionConnections.set(userId, []);\n      return sessionConnections.get(userId).push(connection.id);\n    } else {\n      return sessionConnections.get(userId).push(connection.id);\n    }\n  }\n\n  createMeetingConnections(meetingId) {\n    Logger.info(`Creating meeting in connections. meetingId=${meetingId}`);\n\n    if (!this.exists(meetingId))\n      return this.connections.set(meetingId, new Map());\n  }\n\n  exists(meetingId) {\n    return this.connections.has(meetingId);\n  }\n\n  getConnectionsForClient(sessionId) {\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    check(meetingId, String);\n    check(userId, String);\n  \n    return this.connections.get(meetingId)?.get(userId);\n  }\n\n  print() {\n    const mapConnectionsObj = {};\n    this.connections.forEach((value, key) => {\n      mapConnectionsObj[key] = {};\n\n      value.forEach((v, k) => {\n        mapConnectionsObj[key][k] = v;\n      });\n\n    });\n    Logger.info('Active connections', mapConnectionsObj);\n  }\n\n  removeClientConnection(sessionId, connectionId = null) {\n    Logger.info(`Removing connectionId for user. sessionId=${sessionId} connectionId=${connectionId}`);\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    check(meetingId, String);\n    check(userId, String);\n  \n    const meetingConnections = this.connections.get(meetingId);\n\n    if (meetingConnections?.has(userId)) {\n      const filteredConnections = meetingConnections.get(userId).filter(c => c !== connectionId);\n\n      return connectionId && filteredConnections.length ? meetingConnections.set(userId, filteredConnections) : meetingConnections.delete(userId);\n    }\n\n    return false;\n  }\n\n  removeMeeting(meetingId) {\n    Logger.debug(`Removing connections for meeting=${meetingId}`);\n    return this.connections.delete(meetingId);\n  }\n\n  syncConnectionsWithServer() {\n    Logger.info('Syncing ClientConnections with server');\n    const activeConnections = Array.from(Meteor.server.sessions.keys());\n\n    Logger.debug(`Found ${activeConnections.length} active connections in server`);\n\n    const onlineUsers = AuthTokenValidation\n      .find(\n        { connectionId: { $in: activeConnections } },\n        { fields: { meetingId: 1, userId: 1 } }\n      )\n      .fetch();\n\n    const onlineUsersId = onlineUsers.map(({ userId }) => userId);\n\n    const usersQuery = { userId: { $nin: onlineUsersId } };\n\n    const userWithoutConnectionIds = Users.find(usersQuery, { fields: { meetingId: 1, userId: 1 } }).fetch();\n\n    const removedUsersWithoutConnection = Users.remove(usersQuery);\n\n    if (removedUsersWithoutConnection) {\n      Logger.info(`Removed ${removedUsersWithoutConnection} users that are not connected`);\n      Logger.info(`Clearing connections`);\n      try {\n        userWithoutConnectionIds\n          .forEach(({ meetingId, userId }) => {\n            this.removeClientConnection(`${meetingId}--${userId}`);\n          });\n      } catch (err) {\n        Logger.error('Error on sync ClientConnections', err);\n      }\n    }\n  }\n\n}\n\nif (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n  Logger.info(\"ClientConnectionsSingleton was created\")\n\n  const ClientConnectionsSingleton = new ClientConnections();\n\n  export default ClientConnectionsSingleton;\n}\n","const INSTANCE_ID_REGEX = /\\d+/;\n\nconst isPadMessage = (message) => {\n const { name } = message.core.header;\n\n  const isPadCreate = name === 'PadCreateSysMsg';\n  const isPadUpdate = name === 'PadUpdateSysMsg';\n\n  return isPadCreate || isPadUpdate;\n};\n\nconst getInstanceIdFromPadMessage = (message) => {\n  let instanceId;\n  const { id } = message.core.body.pad;\n\n  // Pad id is composed by the instance id between brackets\n  const match = id.match(INSTANCE_ID_REGEX);\n  if (match) instanceId = parseInt(match[0]);\n\n  return instanceId;\n};\n\nexport {\n  isPadMessage,\n  getInstanceIdFromPadMessage,\n};\n","import { Meteor } from 'meteor/meteor';\nimport { WebAppInternals } from 'meteor/webapp';\nimport Langmap from 'langmap';\nimport fs from 'fs';\nimport Users from '/imports/api/users';\nimport './settings';\nimport { lookup as lookupUserAgent } from 'useragent';\nimport { check } from 'meteor/check';\nimport Logger from './logger';\nimport Redis from './redis';\n\nimport setMinBrowserVersions from './minBrowserVersion';\n\nlet guestWaitHtml = '';\n\nconst env = Meteor.isDevelopment ? 'development' : 'production';\n\nconst meteorRoot = fs.realpathSync(`${process.cwd()}/../`);\n\nconst applicationRoot = (env === 'development')\n  ? fs.realpathSync(`${meteorRoot}'/../../../../public/locales/`)\n  : fs.realpathSync(`${meteorRoot}/../programs/web.browser/app/locales/`);\n\nconst AVAILABLE_LOCALES = fs.readdirSync(`${applicationRoot}`);\nconst FALLBACK_LOCALES = JSON.parse(Assets.getText('config/fallbackLocales.json'));\n\nprocess.on('uncaughtException', (err) => {\n  Logger.error(`uncaughtException: ${err}`);\n  process.exit(1);\n});\n\nprocess.on('uncaughtException', (err) => {\n  Logger.error(`uncaughtException: ${err}`);\n  process.exit(1);\n});\n\nMeteor.startup(() => {\n  const APP_CONFIG = Meteor.settings.public.app;\n  const CDN_URL = APP_CONFIG.cdn;\n  const instanceId = parseInt(process.env.INSTANCE_ID, 10) || 1;\n\n  Logger.warn(`Started bbb-html5 process with instanceId=${instanceId}`);\n\n  const { customHeartbeat } = APP_CONFIG;\n\n  if (customHeartbeat) {\n    Logger.warn('Custom heartbeat functions are enabled');\n    // https://github.com/sockjs/sockjs-node/blob/1ef08901f045aae7b4df0f91ef598d7a11e82897/lib/transport/websocket.js#L74-L82\n    const newHeartbeat = function heartbeat() {\n      const currentTime = new Date().getTime();\n\n      // Skipping heartbeat, because websocket is sending data\n      if (currentTime - this.ws.lastSentFrameTimestamp < 10000) {\n        try {\n          Logger.info('Skipping heartbeat, because websocket is sending data', {\n            currentTime,\n            lastSentFrameTimestamp: this.ws.lastSentFrameTimestamp,\n            userId: this.session.connection._meteorSession.userId,\n          });\n          return;\n        } catch (err) {\n          Logger.error(`Skipping heartbeat error: ${err}`);\n        }\n      }\n\n      const supportsHeartbeats = this.ws.ping(null, () => clearTimeout(this.hto_ref));\n      if (supportsHeartbeats) {\n        this.hto_ref = setTimeout(() => {\n          try {\n            Logger.info('Heartbeat timeout', { userId: this.session.connection._meteorSession.userId, sentAt: currentTime, now: new Date().getTime() });\n          } catch (err) {\n            Logger.error(`Heartbeat timeout error: ${err}`);\n          }\n        }, Meteor.server.options.heartbeatTimeout);\n      } else {\n        Logger.error('Unexpected error supportsHeartbeats=false');\n      }\n    };\n\n    // https://github.com/davhani/hagty/blob/6a5c78e9ae5a5e4ade03e747fb4cc8ea2df4be0c/faye-websocket/lib/faye/websocket/api.js#L84-L88\n    const newSend = function send(data) {\n      try {\n        this.lastSentFrameTimestamp = new Date().getTime();\n\n        if (this.meteorHeartbeat) {\n          // Call https://github.com/meteor/meteor/blob/1e7e56eec8414093cd0c1c70750b894069fc972a/packages/ddp-common/heartbeat.js#L80-L88\n          this.meteorHeartbeat._seenPacket = true;\n          if (this.meteorHeartbeat._heartbeatTimeoutHandle) {\n            this.meteorHeartbeat._clearHeartbeatTimeoutTimer();\n          }\n        }\n\n        if (this.readyState > 1/* API.OPEN = 1 */) return false;\n        if (!(data instanceof Buffer)) data = String(data);\n        return this._driver.messages.write(data);\n      } catch (err) {\n        console.error('Error on send data', err);\n        return false;\n      }\n    };\n\n    Meteor.setInterval(() => {\n      for (const session of Meteor.server.sessions.values()) {\n        const { socket } = session;\n        const recv = socket._session.recv;\n\n        if (session.bbbFixApplied || !recv || !recv.ws) {\n          continue;\n        }\n\n        recv.ws.meteorHeartbeat = session.heartbeat;\n        recv.__proto__.heartbeat = newHeartbeat;\n        recv.ws.__proto__.send = newSend;\n        session.bbbFixApplied = true;\n      }\n    }, 5000);\n  }\n  if (CDN_URL.trim()) {\n    // Add CDN\n    BrowserPolicy.content.disallowEval();\n    BrowserPolicy.content.allowInlineScripts();\n    BrowserPolicy.content.allowInlineStyles();\n    BrowserPolicy.content.allowImageDataUrl(CDN_URL);\n    BrowserPolicy.content.allowFontDataUrl(CDN_URL);\n    BrowserPolicy.content.allowOriginForAll(CDN_URL);\n    WebAppInternals.setBundledJsCssPrefix(CDN_URL + APP_CONFIG.basename + Meteor.settings.public.app.instanceId);\n\n    const fontRegExp = /\\.(eot|ttf|otf|woff|woff2)$/;\n\n    WebApp.rawConnectHandlers.use('/', (req, res, next) => {\n      if (fontRegExp.test(req._parsedUrl.pathname)) {\n        res.setHeader('Access-Control-Allow-Origin', '*');\n        res.setHeader('Vary', 'Origin');\n        res.setHeader('Pragma', 'public');\n        res.setHeader('Cache-Control', '\"public\"');\n      }\n      return next();\n    });\n  }\n\n  setMinBrowserVersions();\n\n  Logger.warn(`SERVER STARTED.\n  ENV=${env}\n  nodejs version=${process.version}\n  BBB_HTML5_ROLE=${process.env.BBB_HTML5_ROLE}\n  INSTANCE_ID=${instanceId}\n  PORT=${process.env.PORT}\n  CDN=${CDN_URL}\\n`, APP_CONFIG);\n});\n\n\nconst generateLocaleOptions = () => {\n  try {\n    Logger.warn('Calculating aggregateLocales (heavy)');\n\n\n    // remove duplicated locales (always remove more generic if same name)\n    const tempAggregateLocales = AVAILABLE_LOCALES\n      .map(file => file.replace('.json', ''))\n      .map(file => file.replace('_', '-'))\n      .map((locale) => {\n        const localeName = (Langmap[locale] || {}).nativeName\n          || (FALLBACK_LOCALES[locale] || {}).nativeName\n          || locale;\n        return {\n          locale,\n          name: localeName,\n        };\n      }).reverse()\n      .filter((item, index, self) => index === self.findIndex(i => (\n        i.name === item.name\n      )))\n      .reverse();\n\n    Logger.warn(`Total locales: ${tempAggregateLocales.length}`, tempAggregateLocales);\n\n    return tempAggregateLocales;\n  } catch (e) {\n    Logger.error(`'Could not process locales error: ${e}`);\n    return [];\n  }\n};\n\nlet avaibleLocalesNamesJSON = JSON.stringify(generateLocaleOptions());\n\nWebApp.connectHandlers.use('/check', (req, res) => {\n  const payload = { html5clientStatus: 'running' };\n\n  res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(JSON.stringify(payload));\n});\n\nWebApp.connectHandlers.use('/locale', (req, res) => {\n  const APP_CONFIG = Meteor.settings.public.app;\n  const fallback = APP_CONFIG.defaultSettings.application.fallbackLocale;\n  const override = APP_CONFIG.defaultSettings.application.overrideLocale;\n  const browserLocale = override && req.query.init === 'true'\n    ? override.split(/[-_]/g) : req.query.locale.split(/[-_]/g);\n\n  let localeFile = fallback;\n\n  const usableLocales = AVAILABLE_LOCALES\n    .map(file => file.replace('.json', ''))\n    .reduce((locales, locale) => (locale.match(browserLocale[0])\n      ? [...locales, locale]\n      : locales), []);\n\n  let normalizedLocale;\n\n  const regionDefault = usableLocales.find(locale => browserLocale[0] === locale);\n\n  if (browserLocale.length > 1) {\n    // browser asks for specific locale\n    normalizedLocale = `${browserLocale[0]}_${browserLocale[1].toUpperCase()}`;\n\n    const normDefault = usableLocales.find(locale => normalizedLocale === locale);\n    if (normDefault) {\n      localeFile = normDefault;\n    } else {\n      if (regionDefault) {\n        localeFile = regionDefault;\n      } else {\n        const specFallback = usableLocales.find(locale => browserLocale[0] === locale.split(\"_\")[0]);\n        if (specFallback) localeFile = specFallback;\n      }\n    }\n  } else {\n    // browser asks for region default locale\n    if (regionDefault && localeFile === fallback && regionDefault !== localeFile) {\n      localeFile = regionDefault;\n    } else {\n      const normFallback = usableLocales.find(locale => browserLocale[0] === locale.split(\"_\")[0]);\n      if (normFallback) localeFile = normFallback;\n    }\n  }\n\n  res.setHeader('Content-Type', 'application/json');\n  res.end(JSON.stringify({\n    normalizedLocale: localeFile,\n    regionDefaultLocale: (regionDefault && regionDefault !== localeFile) ? regionDefault : '',\n  }));\n});\n\nWebApp.connectHandlers.use('/locale-list', (req, res) => {\n  if (!avaibleLocalesNamesJSON) {\n    avaibleLocalesNamesJSON = JSON.stringify(generateLocaleOptions());\n  }\n\n  res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(avaibleLocalesNamesJSON);\n});\n\nWebApp.connectHandlers.use('/feedback', (req, res) => {\n  req.on('data', Meteor.bindEnvironment((data) => {\n    const body = JSON.parse(data);\n    const {\n      meetingId,\n      userId,\n      authToken,\n      userName: reqUserName,\n      comment,\n      rating,\n    } = body;\n\n    check(meetingId, String);\n    check(userId, String);\n    check(authToken, String);\n    check(reqUserName, String);\n    check(comment, String);\n    check(rating, Number);\n\n    const user = Users.findOne({\n      meetingId,\n      userId,\n      authToken,\n    });\n\n    if (!user) {\n      Logger.warn('Couldn\\'t find user for feedback');\n    }\n\n    res.setHeader('Content-Type', 'application/json');\n    res.writeHead(200);\n    res.end(JSON.stringify({ status: 'ok' }));\n\n    body.userName = user ? user.name : `[unconfirmed] ${reqUserName}`;\n\n    const feedback = {\n      ...body,\n    };\n    Logger.info('FEEDBACK LOG:', feedback);\n  }));\n});\n\nWebApp.connectHandlers.use('/useragent', (req, res) => {\n  const userAgent = req.headers['user-agent'];\n  let response = 'No user agent found in header';\n  if (userAgent) {\n    response = lookupUserAgent(userAgent).toString();\n  }\n\n  Logger.info(`The requesting user agent is ${response}`);\n\n  // res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(response);\n});\n\nWebApp.connectHandlers.use('/guestWait', (req, res) => {\n  if (!guestWaitHtml) {\n    try {\n      guestWaitHtml = Assets.getText('static/guest-wait/guest-wait.html');\n    } catch (e) {\n      Logger.warn(`Could not process guest wait html file: ${e}`);\n    }\n  }\n\n  res.setHeader('Content-Type', 'text/html');\n  res.writeHead(200);\n  res.end(guestWaitHtml);\n});\n\n// WASM endpoint to be used to fetch the .wasm models for camera effects\n// (blur, virtual background).\n// See: /imports/ui/services/virtual-backgrounds/\nWebApp.connectHandlers.use('/wasm', (req, res) => {\n  const pathname = req._parsedUrl.pathname;\n  let file = \"\";\n  let hasError = false;\n  try {\n    file = Assets.getBinary(pathname.substr(1, pathname.length-1));\n  } catch (error) {\n    hasError = true;\n    Logger.warn(`Could not find WASM file: ${error}`);\n  }\n\n  res.setHeader('Content-Type', 'application/wasm');\n  if (hasError) {\n    res.writeHead(404);\n  } else {\n    res.writeHead(200);\n  }\n  res.end(file);\n});\n\n\nexport const eventEmitter = Redis.emitter;\n\nexport const redisPubSub = Redis;\n","import { Meteor } from 'meteor/meteor';\nimport { createLogger, format, transports } from 'winston';\n\nconst LOG_CONFIG = Meteor?.settings?.private?.serverLog || {};\nconst { level } = LOG_CONFIG;\n\nconst Logger = createLogger({\n  level,\n  format: format.combine(\n    format.colorize({ level: true }),\n    format.splat(),\n    format.simple(),\n  ),\n  transports: [\n    // console logging\n    new transports.Console({\n      prettyPrint: false,\n      humanReadableUnhandledException: true,\n      colorize: true,\n      handleExceptions: true,\n      level,\n    }),\n  ],\n});\n\nexport default Logger;\n\nexport const logger = Logger;\n","/* eslint-disable no-prototype-builtins */\n\nimport fs from 'fs';\nimport path from 'path';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from './logger';\n\nconst {\n  metricsDumpIntervalMs,\n  metricsFolderPath,\n  removeMeetingOnEnd,\n} = Meteor.settings.private.redis.metrics;\n\nclass Metrics {\n  constructor() {\n    this.metrics = {};\n  }\n\n  addEvent(meetingId, eventName, messageLength) {\n    if (!this.metrics.hasOwnProperty(meetingId)) {\n      this.metrics[meetingId] = {\n        currentlyInQueue: {},\n        wasInQueue: {},\n      };\n    }\n\n    const { currentlyInQueue } = this.metrics[meetingId];\n\n    if (!currentlyInQueue.hasOwnProperty(eventName)) {\n      currentlyInQueue[eventName] = {\n        count: 1,\n        payloadSize: messageLength,\n      };\n    } else {\n      currentlyInQueue[eventName].count += 1;\n      currentlyInQueue[eventName].payloadSize += messageLength;\n    }\n  }\n\n  processEvent(meetingId, eventName, size, processingStartTimestamp) {\n    const currentProcessingTimestamp = Date.now();\n    const processTime = currentProcessingTimestamp - processingStartTimestamp;\n\n    this.addEvent(meetingId, eventName, size);\n\n    if (!this.metrics[meetingId].wasInQueue.hasOwnProperty(eventName)) {\n      this.metrics[meetingId].wasInQueue[eventName] = {\n        count: 1,\n        payloadSize: {\n          min: size,\n          max: size,\n          last: size,\n          total: size,\n          avg: size,\n        },\n        processingTime: {\n          min: processTime,\n          max: processTime,\n          last: processTime,\n          total: processTime,\n          avg: processTime,\n        },\n      };\n      this.metrics[meetingId].currentlyInQueue[eventName].count -= 1;\n\n      if (!this.metrics[meetingId].currentlyInQueue[eventName].count) {\n        delete this.metrics[meetingId].currentlyInQueue[eventName];\n      }\n    } else {\n      const { currentlyInQueue, wasInQueue } = this.metrics[meetingId];\n\n      currentlyInQueue[eventName].count -= 1;\n\n      if (!currentlyInQueue[eventName].count) {\n        delete currentlyInQueue[eventName];\n      }\n\n      const { payloadSize, processingTime } = wasInQueue[eventName];\n\n      wasInQueue[eventName].count += 1;\n\n      payloadSize.last = size;\n      payloadSize.total += size;\n\n      if (payloadSize.min > size) payloadSize.min = size;\n      if (payloadSize.max < size) payloadSize.max = size;\n\n      payloadSize.avg = payloadSize.total / wasInQueue[eventName].count;\n\n      if (processingTime.min > processTime) processingTime.min = processTime;\n      if (processingTime.max < processTime) processingTime.max = processTime;\n\n      processingTime.last = processTime;\n      processingTime.total += processTime;\n      processingTime.avg = processingTime.total / wasInQueue[eventName].count;\n    }\n  }\n\n  setAnnotationQueueLength(meetingId, size) {\n    this.metrics[meetingId].annotationQueueLength = size;\n  }\n\n  startDumpFile() {\n    Meteor.setInterval(() => {\n      try {\n        const fileDate = new Date();\n        const fullYear = fileDate.getFullYear();\n        const month = (fileDate.getMonth() + 1).toString().padStart(2, '0');\n        const day = fileDate.getDate().toString().padStart(2, '0');\n        const hour = fileDate.getHours().toString().padStart(2, '0');\n        const minutes = fileDate.getMinutes().toString().padStart(2, '0');\n        const seconds = fileDate.getSeconds().toString().padStart(2, '0');\n\n        const folderName = `${fullYear}${month}${day}_${hour}`;\n        const fileName = `${folderName}${minutes}${seconds}_metrics.json`;\n\n        const folderPath = path.join(metricsFolderPath, folderName);\n        const fullFilePath = path.join(folderPath, fileName);\n\n        if (!fs.existsSync(folderPath)) {\n          Logger.debug(`Creating folder: ${folderPath}`);\n          fs.mkdirSync(folderPath);\n        }\n\n        fs.writeFileSync(fullFilePath, JSON.stringify(this.metrics));\n\n        Logger.info('Metric file successfully written');\n      } catch (err) {\n        Logger.error('Error on writing metrics to disk.', err);\n      }\n    }, metricsDumpIntervalMs);\n  }\n\n  removeMeeting(meetingId) {\n    if (removeMeetingOnEnd) {\n      Logger.info(`Removing meeting ${meetingId} from metrics`);\n      delete this.metrics[meetingId];\n    } else {\n      Logger.info(`Skipping remove of meeting ${meetingId} from metrics`);\n    }\n  }\n}\n\nconst metricsSingleton = new Metrics();\n\nexport default metricsSingleton;\n","import { Meteor } from 'meteor/meteor';\nimport { setMinimumBrowserVersions } from 'meteor/modern-browsers';\n\nconst setMinBrowserVersions = () => {\n  const { minBrowserVersions } = Meteor.settings.private;\n\n  const versions = {};\n\n  minBrowserVersions.forEach((elem) => {\n    let { version } = elem;\n    if (version === 'Infinity') version = Infinity;\n\n    versions[elem.browser] = version;\n  });\n\n  setMinimumBrowserVersions(versions, 'bbb-min');\n};\n\nexport default setMinBrowserVersions;\n","import Redis from 'redis';\nimport { Meteor } from 'meteor/meteor';\nimport { EventEmitter2 } from 'eventemitter2';\nimport { check } from 'meteor/check';\nimport {\n  isPadMessage,\n  getInstanceIdFromPadMessage,\n} from './etherpad';\nimport Logger from './logger';\nimport Metrics from './metrics';\nimport queue from 'queue';\n\n// Fake meetingId used for messages that have no meetingId\nconst NO_MEETING_ID = '_';\n\nconst { queueMetrics } = Meteor.settings.private.redis.metrics;\n\nconst makeEnvelope = (channel, eventName, header, body, routing) => {\n  const envelope = {\n    envelope: {\n      name: eventName,\n      routing: routing || {\n        sender: 'html5-server',\n      },\n      timestamp: Date.now(),\n    },\n    core: {\n      header,\n      body,\n    },\n  };\n\n  return JSON.stringify(envelope);\n};\n\nconst getInstanceIdFromMessage = (parsedMessage) => {\n  // End meeting message does not seem to have systemProps\n  let instanceIdFromMessage = parsedMessage.core.body.props?.systemProps?.html5InstanceId;\n\n  // Pad messages does not have systemProps\n  if (!instanceIdFromMessage && isPadMessage(parsedMessage)) {\n    instanceIdFromMessage = getInstanceIdFromPadMessage(parsedMessage);\n  }\n\n  return instanceIdFromMessage;\n};\n\nclass MeetingMessageQueue {\n  constructor(eventEmitter, asyncMessages = [], redisDebugEnabled = false) {\n    this.asyncMessages = asyncMessages;\n    this.emitter = eventEmitter;\n    this.queue = queue({ autostart: true });\n    this.redisDebugEnabled = redisDebugEnabled;\n\n    this.handleTask = this.handleTask.bind(this);\n    this.queue.taskHandler = this.handleTask;\n  }\n\n  handleTask(data, next) {\n    const { channel } = data;\n    const { envelope } = data.parsedMessage;\n    const { header } = data.parsedMessage.core;\n    const { body } = data.parsedMessage.core;\n    const { meetingId } = header;\n    const eventName = header.name;\n    const isAsync = this.asyncMessages.includes(channel)\n      || this.asyncMessages.includes(eventName);\n\n    const beginHandleTimestamp = Date.now();\n    let called = false;\n\n    check(eventName, String);\n    check(body, Object);\n\n    const callNext = () => {\n      if (called) return;\n      if (this.redisDebugEnabled) {\n        Logger.debug(`Redis: ${eventName} completed ${isAsync ? 'async' : 'sync'}`);\n      }\n      called = true;\n\n      if (queueMetrics) {\n        const queueId = meetingId || NO_MEETING_ID;\n        const dataLength = JSON.stringify(data).length;\n\n        Metrics.processEvent(queueId, eventName, dataLength, beginHandleTimestamp);\n      }\n\n      const queueLength = this.queue.length;\n      if (queueLength > 100) {\n        Logger.warn(`Redis: MeetingMessageQueue for meetingId=${meetingId} has queue size=${queueLength} `);\n      }\n      next();\n    };\n\n    const onError = (reason) => {\n      Logger.error(`${eventName}: ${reason.stack ? reason.stack : reason}`);\n      callNext();\n    };\n\n    try {\n      if (this.redisDebugEnabled) {\n        if (!Meteor.settings.private.analytics.includeChat && eventName === 'GroupChatMessageBroadcastEvtMsg') {\n          return;\n        }\n        Logger.debug(`Redis: ${JSON.stringify(data.parsedMessage.core)} emitted`);\n      }\n\n      if (isAsync) {\n        callNext();\n      }\n\n      this.emitter\n        .emitAsync(eventName, { envelope, header, body }, meetingId)\n        .then(callNext)\n        .catch(onError);\n    } catch (reason) {\n      onError(reason);\n    }\n  }\n\n  add(...args) {\n    const { taskHandler } = this.queue;\n\n    this.queue.push(function (next) {\n      taskHandler(...args, next);\n    })\n\n  }\n}\n\nclass RedisPubSub {\n  static handlePublishError(err) {\n    if (err) {\n      Logger.error(err);\n    }\n  }\n\n  constructor(config = {}) {\n    this.config = config;\n\n    this.didSendRequestEvent = false;\n    const host = process.env.REDIS_HOST || Meteor.settings.private.redis.host;\n    const redisConf = Meteor.settings.private.redis;\n    this.instanceId = parseInt(process.env.INSTANCE_ID, 10) || 1; // 1 also handles running in dev mode\n    this.role = process.env.BBB_HTML5_ROLE;\n    this.customRedisChannel = `to-html5-redis-channel${this.instanceId}`;\n\n    const { password, port } = redisConf;\n\n    if (password) {\n      this.pub = Redis.createClient({ host, port, password });\n      this.sub = Redis.createClient({ host, port, password });\n      this.pub.auth(password);\n      this.sub.auth(password);\n    } else {\n      this.pub = Redis.createClient({ host, port });\n      this.sub = Redis.createClient({ host, port });\n    }\n\n    if (queueMetrics) {\n      Metrics.startDumpFile();\n    }\n\n    this.emitter = new EventEmitter2();\n    this.meetingsQueues = {};\n    // We create this _ meeting queue because we need to be able to handle system messages (no meetingId in core.header)\n    this.meetingsQueues[NO_MEETING_ID] = new MeetingMessageQueue(this.emitter, this.config.async, this.config.debug);\n\n    this.handleSubscribe = this.handleSubscribe.bind(this);\n    this.handleMessage = this.handleMessage.bind(this);\n  }\n\n  init() {\n    this.sub.on('psubscribe', Meteor.bindEnvironment(this.handleSubscribe));\n    this.sub.on('pmessage', Meteor.bindEnvironment(this.handleMessage));\n\n    const channelsToSubscribe = this.config.subscribeTo;\n\n    channelsToSubscribe.push(this.customRedisChannel);\n\n    switch (this.role) {\n      case 'frontend':\n        this.sub.psubscribe('from-akka-apps-frontend-redis-channel');\n        if (this.redisDebugEnabled) {\n          Logger.debug(`Redis: NodeJSPool:${this.instanceId} Role: frontend. Subscribed to 'from-akka-apps-frontend-redis-channel'`);\n        }\n        break;\n      case 'backend':\n        channelsToSubscribe.forEach((channel) => {\n          this.sub.psubscribe(channel);\n          if (this.redisDebugEnabled) {\n            Logger.debug(`Redis: NodeJSPool:${this.instanceId} Role: backend. Subscribed to '${channelsToSubscribe}'`);\n          }\n        });\n        break;\n      default:\n        this.sub.psubscribe('from-akka-apps-frontend-redis-channel');\n        channelsToSubscribe.forEach((channel) => {\n          this.sub.psubscribe(channel);\n          if (this.redisDebugEnabled) {\n            Logger.debug(`Redis: NodeJSPool:${this.instanceId} Role:${this.role} (likely only one nodejs running, doing both frontend and backend. Dev env? ). Subscribed to '${channelsToSubscribe}'`);\n          }\n        });\n\n        break;\n    }\n  }\n\n  updateConfig(config) {\n    this.config = Object.assign({}, this.config, config);\n    this.redisDebugEnabled = this.config.debug;\n  }\n\n\n  // TODO: Move this out of this class, maybe pass as a callback to init?\n  handleSubscribe() {\n    if (this.didSendRequestEvent || this.role === 'frontend') return;\n\n    // populate collections with pre-existing data\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'GetAllMeetingsReqMsg';\n\n    const body = {\n      requesterId: 'nodeJSapp',\n      html5InstanceId: this.instanceId,\n    };\n\n    this.publishSystemMessage(CHANNEL, EVENT_NAME, body);\n    this.didSendRequestEvent = true;\n  }\n\n  handleMessage(pattern, channel, message) {\n    const parsedMessage = JSON.parse(message);\n    const { ignored: ignoredMessages, async } = this.config;\n    const eventName = parsedMessage.core.header.name;\n\n    if (ignoredMessages.includes(channel)\n      || ignoredMessages.includes(eventName)) {\n      if (eventName === 'CheckAlivePongSysMsg') {\n        return;\n      }\n      if (this.redisDebugEnabled) {\n        Logger.debug(`Redis: ${eventName} skipped`);\n      }\n      return;\n    }\n\n    if (this.redisDebugEnabled) {\n      Logger.warn('Received event to handle', { date: new Date().toISOString(), eventName });\n    }\n\n    // System messages like Create / Destroy Meeting, etc do not have core.header.meetingId.\n    // Process them in MeetingQueue['_']  --- the NO_MEETING queueId\n    const meetingIdFromMessageCoreHeader = parsedMessage.core.header.meetingId || NO_MEETING_ID;\n\n    if (this.role === 'frontend') {\n      // receiving this message means we need to look at it. Frontends do not have instanceId.\n      if (meetingIdFromMessageCoreHeader === NO_MEETING_ID) { // if this is a system message\n        if (eventName === 'MeetingCreatedEvtMsg' || eventName === 'SyncGetMeetingInfoRespMsg') {\n          const meetingIdFromMessageMeetingProp = parsedMessage.core.body.props.meetingProp.intId;\n          this.meetingsQueues[meetingIdFromMessageMeetingProp] = new MeetingMessageQueue(this.emitter, async, this.redisDebugEnabled);\n          if (this.redisDebugEnabled) {\n            Logger.warn('Created frontend queue for meeting', { date: new Date().toISOString(), eventName, meetingIdFromMessageMeetingProp });\n          }\n        }\n      }\n\n      if (!this.meetingsQueues[meetingIdFromMessageCoreHeader]) {\n        Logger.warn(`Frontend meeting queue had not been initialized   ${message}`, { eventName, meetingIdFromMessageCoreHeader });\n        this.meetingsQueues[NO_MEETING_ID].add({\n          pattern,\n          channel,\n          eventName,\n          parsedMessage,\n        });\n      } else {\n        // process the event - whether it's a system message or not, the meetingIdFromMessageCoreHeader value is adjusted\n        this.meetingsQueues[meetingIdFromMessageCoreHeader].add({\n          pattern,\n          channel,\n          eventName,\n          parsedMessage,\n        });\n      }\n    } else { // backend\n      if (meetingIdFromMessageCoreHeader === NO_MEETING_ID) { // if this is a system message\n        const meetingIdFromMessageMeetingProp = parsedMessage.core.body.props?.meetingProp?.intId;\n        const instanceIdFromMessage = getInstanceIdFromMessage(parsedMessage);\n\n        if (this.instanceId === instanceIdFromMessage) {\n          // create queue or destroy queue\n          if (eventName === 'MeetingCreatedEvtMsg' || eventName === 'SyncGetMeetingInfoRespMsg') {\n            this.meetingsQueues[meetingIdFromMessageMeetingProp] = new MeetingMessageQueue(this.emitter, async, this.redisDebugEnabled);\n            if (this.redisDebugEnabled) {\n              Logger.warn('Created backend queue for meeting', { date: new Date().toISOString(), eventName, meetingIdFromMessageMeetingProp });\n            }\n          }\n          this.meetingsQueues[NO_MEETING_ID].add({\n            pattern,\n            channel,\n            eventName,\n            parsedMessage,\n          });\n        } else {\n          if (eventName === 'MeetingEndedEvtMsg' || eventName === 'MeetingDestroyedEvtMsg') {\n            // MeetingEndedEvtMsg does not follow the system message pattern for meetingId\n            // but we still need to process it on the backend which is processing the rest of the events\n            // for this meetingId (it does not contain instanceId either, so we cannot compare that)\n            const meetingIdForMeetingEnded = parsedMessage.core.body.meetingId;\n            if (!!this.meetingsQueues[meetingIdForMeetingEnded]) {\n              this.meetingsQueues[NO_MEETING_ID].add({\n                pattern,\n                channel,\n                eventName,\n                parsedMessage,\n              });\n            }\n          }\n          // ignore\n        }\n      } else {\n        // add to existing queue\n        if (!!this.meetingsQueues[meetingIdFromMessageCoreHeader]) {\n          // only handle message if we have a queue for the meeting. If we don't have a queue, it means it's for a different instanceId\n          this.meetingsQueues[meetingIdFromMessageCoreHeader].add({\n            pattern,\n            channel,\n            eventName,\n            parsedMessage,\n          });\n        } else {\n          // If we reach this line, this means that there is no existing queue for this redis \"backend\" message\n          // which means that the meeting is fully handled by another bbb-html5-backend.\n          // Logger.warn('Backend meeting queue had not been initialized', { eventName, meetingIdFromMessageCoreHeader })\n        }\n      }\n    }\n  }\n\n  destroyMeetingQueue(id) {\n    delete this.meetingsQueues[id];\n  }\n\n  on(...args) {\n    return this.emitter.on(...args);\n  }\n\n  publishVoiceMessage(channel, eventName, voiceConf, payload) {\n    const header = {\n      name: eventName,\n      voiceConf,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishSystemMessage(channel, eventName, payload) {\n    const header = {\n      name: eventName,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishMeetingMessage(channel, eventName, meetingId, payload) {\n    const header = {\n      name: eventName,\n      meetingId,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishUserMessage(channel, eventName, meetingId, userId, payload) {\n    const header = {\n      name: eventName,\n      meetingId,\n      userId,\n    };\n\n    if (!meetingId || !userId) {\n      Logger.warn(`Publishing ${eventName} with potentially missing data userId=${userId} meetingId=${meetingId}`);\n    }\n    const envelope = makeEnvelope(channel, eventName, header, payload, { meetingId, userId });\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n}\n\nconst RedisPubSubSingleton = new RedisPubSub();\n\nMeteor.startup(() => {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  RedisPubSubSingleton.updateConfig(REDIS_CONFIG);\n  RedisPubSubSingleton.init();\n});\n\nexport default RedisPubSubSingleton;\n","/* global __meteor_runtime_config__ */\nimport { Meteor } from 'meteor/meteor';\nimport fs from 'fs';\nimport YAML from 'yaml';\nimport _ from 'lodash';\n\nconst DEFAULT_SETTINGS_FILE_PATH = process.env.BBB_HTML5_SETTINGS || 'assets/app/config/settings.yml';\nconst LOCAL_SETTINGS_FILE_PATH = process.env.BBB_HTML5_LOCAL_SETTINGS || '/etc/bigbluebutton/bbb-html5.yml';\n\n\ntry {\n  if (fs.existsSync(DEFAULT_SETTINGS_FILE_PATH)) {\n    const SETTINGS = YAML.parse(fs.readFileSync(DEFAULT_SETTINGS_FILE_PATH, 'utf-8'));\n\n    if (fs.existsSync(LOCAL_SETTINGS_FILE_PATH)) {\n      console.log('Local configuration found! Merging with default configuration...');\n      const LOCAL_CONFIG = YAML.parse(fs.readFileSync(LOCAL_SETTINGS_FILE_PATH, 'utf-8'));\n      _.merge(SETTINGS, LOCAL_CONFIG);\n    } else console.log('Local Configuration not found! Loading default configuration...');\n\n    Meteor.settings = SETTINGS;\n    Meteor.settings.public.app.instanceId = ''; // no longer use instanceId in URLs. Likely permanent change\n    // Meteor.settings.public.app.instanceId = `/${INSTANCE_ID}`;\n\n    __meteor_runtime_config__.PUBLIC_SETTINGS = SETTINGS.public;\n  } else {\n    throw new Error('File doesn\\'t exists');\n  }\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.error('Error on load configuration file.', error);\n}\n","// Used in Flash and HTML to show a legitimate break in the line\nconst BREAK_LINE = '<br/>';\n\n// Soft return in HTML to signify a broken line without\n// displaying the escaped '<br/>' line break text\nconst CARRIAGE_RETURN = '\\r';\n\n// Handle this the same as carriage return, in case text copied has this\nconst NEW_LINE = '\\n';\n\nexport { BREAK_LINE, CARRIAGE_RETURN, NEW_LINE };\n","export const XLS = 'application/vnd.ms-excel';\nexport const XLSX = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\nexport const DOC = 'application/msword';\nexport const DOCX = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\nexport const PPT = 'application/vnd.ms-powerpoint';\nexport const PPTX = 'application/vnd.openxmlformats-officedocument.presentationml.presentation';\nexport const ODT = 'application/vnd.oasis.opendocument.text';\nexport const RTF = 'application/rtf';\nexport const TXT = 'text/plain';\nexport const ODS = 'application/vnd.oasis.opendocument.spreadsheet';\nexport const ODP = 'application/vnd.oasis.opendocument.presentation';\nexport const PDF = 'application/pdf';\nexport const JPEG = 'image/jpeg';\nexport const PNG = 'image/png';\nexport const SVG = 'image/svg+xml';\n\nexport const UPLOAD_SUPORTED = [\n  XLS,\n  XLSX,\n  DOC,\n  DOCX,\n  PPT,\n  PPTX,\n  ODT,\n  RTF,\n  TXT,\n  ODS,\n  ODP,\n  PDF,\n  JPEG,\n  PNG,\n];\n","//\n// Regular Expression for URL validation\n//\n// Author: Diego Perini\n// Updated: 2010/12/05\n// License: MIT\n//\n// Copyright (c) 2010-2013 Diego Perini (http://www.iport.it)\n//\n// Permission is hereby granted, free of charge, to any person\n// obtaining a copy of this software and associated documentation\n// files (the \"Software\"), to deal in the Software without\n// restriction, including without limitation the rights to use,\n// copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the\n// Software is furnished to do so, subject to the following\n// conditions:\n//\n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n// OTHER DEALINGS IN THE SOFTWARE.\n//\n// the regular expression composed & commented\n// could be easily tweaked for RFC compliance,\n// it was expressly modified to fit & satisfy\n// these test for an URL shortener:\n//\n//   http://mathiasbynens.be/demo/url-regex\n//\n// Notes on possible differences from a standard/generic validation:\n//\n// - utf-8 char class take in consideration the full Unicode range\n// - TLDs have been made mandatory so single names like \"localhost\" fails\n// - protocols have been restricted to ftp, http and https only as requested\n//\n// Changes:\n//\n// - IP address dotted notation validation, range: 1.0.0.0 - 223.255.255.255\n//   first and last IP address of each class is considered invalid\n//   (since they are broadcast/network addresses)\n//\n// - Added exclusion of private, reserved and/or local networks ranges\n//\n// - Made starting path slash optional (http://example.com?foo=bar)\n//\n// - Allow a dot (.) at the end of hostnames (http://example.com.)\n//\n// Compressed one-line versions:\n//\n// Javascript version (merge into one line)\n//\n// /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})\n// (?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})\n// (?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}\n// (?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)\n// (?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)\n// (?::\\d{2,5})?(?:[/?#]\\S*)?$/i\n//\n// PHP version (merge into one line)\n//\n// _^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)\n// (?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])\n// (?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5]))\n// {2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)\n// *[a-z\\x{00a1}-\\x{ffff}0-9]+)(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)*[a-z\\x{00a1}-\\x{ffff}0-9]+)\n// *(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$_iuS\n//\n\nexport default new RegExp(\n\n  // protocol identifier\n  '(?:(?:https?|ftp)://)' +\n\n  // user:pass authentication\n  '(?:\\\\S+(?::\\\\S*)?@)?' +\n  '(?:' +\n\n    // IP address exclusion\n    // private & local networks\n    '(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})' +\n    '(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})' +\n    '(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})' +\n\n    // IP address dotted notation octets\n    // excludes loopback network 0.0.0.0\n    // excludes reserved space >= 224.0.0.0\n    // excludes network & broacast addresses\n    // (first & last IP address of each class)\n    '(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])' +\n    '(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}' +\n    '(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))' +\n  '|' +\n\n    // host name\n    '(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)' +\n\n    // domain name\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*' +\n\n    // TLD identifier\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))' +\n\n    // TLD may end with dot\n    '\\\\.?' +\n  ')' +\n\n  // port number\n  '(?::\\\\d{2,5})?' +\n\n  // resource path\n  '(?:[/?#]\\\\S*)?', 'img',\n);\n","import '/imports/startup/server';\n\n// 2x\nimport '/imports/api/meetings/server';\nimport '/imports/api/users/server';\nimport '/imports/api/annotations/server';\nimport '/imports/api/cursor/server';\nimport '/imports/api/polls/server';\nimport '/imports/api/captions/server';\nimport '/imports/api/presentations/server';\nimport '/imports/api/presentation-pods/server';\nimport '/imports/api/presentation-upload-token/server';\nimport '/imports/api/slides/server';\nimport '/imports/api/breakouts/server';\nimport '/imports/api/group-chat/server';\nimport '/imports/api/group-chat-msg/server';\nimport '/imports/api/screenshare/server';\nimport '/imports/api/users-settings/server';\nimport '/imports/api/voice-users/server';\nimport '/imports/api/whiteboard-multi-user/server';\nimport '/imports/api/video-streams/server';\nimport '/imports/api/users-infos/server';\nimport '/imports/api/users-persistent-data/server';\nimport '/imports/api/connection-status/server';\nimport '/imports/api/note/server';\nimport '/imports/api/external-videos/server';\nimport '/imports/api/guest-users/server';\nimport '/imports/api/local-settings/server';\nimport '/imports/api/voice-call-states/server';\nimport '/imports/api/auth-token-validation/server';\n\n// Commons\nimport '/imports/api/log-client/server';\nimport '/imports/api/common/server/helpers';\nimport '/imports/startup/server/logger';\n\n// Needed for Atmosphere package RocketChat/meteor-streamer\n// It is out of date and was written when Meteor contained lodash\n// package. However, we now import lodash as an npm package\n// in order to control versions, update flexibly, etc..\n// Setting the global._ to utilize the npm lodash package is an interim fix\n// and its introduction was inspired by\n// https://github.com/RocketChat/meteor-streamer/issues/40#issuecomment-497627893\nimport _ from 'lodash';\n\nglobal._ = _;\n"]}