{"version":3,"sources":["meteor://ğŸ’»app/imports/api/annotations/server/handlers/whiteboardAnnotations.js","meteor://ğŸ’»app/imports/api/annotations/server/handlers/whiteboardCleared.js","meteor://ğŸ’»app/imports/api/annotations/server/handlers/whiteboardSend.js","meteor://ğŸ’»app/imports/api/annotations/server/handlers/whiteboardUndo.js","meteor://ğŸ’»app/imports/api/annotations/server/methods/clearWhiteboard.js","meteor://ğŸ’»app/imports/api/annotations/server/methods/sendAnnotation.js","meteor://ğŸ’»app/imports/api/annotations/server/methods/sendAnnotationHelper.js","meteor://ğŸ’»app/imports/api/annotations/server/methods/sendBulkAnnotations.js","meteor://ğŸ’»app/imports/api/annotations/server/methods/undoAnnotation.js","meteor://ğŸ’»app/imports/api/annotations/server/modifiers/addAnnotation.js","meteor://ğŸ’»app/imports/api/annotations/server/modifiers/clearAnnotations.js","meteor://ğŸ’»app/imports/api/annotations/server/modifiers/removeAnnotation.js","meteor://ğŸ’»app/imports/api/annotations/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/annotations/server/index.js","meteor://ğŸ’»app/imports/api/annotations/server/methods.js","meteor://ğŸ’»app/imports/api/annotations/server/publishers.js","meteor://ğŸ’»app/imports/api/annotations/server/streamer.js","meteor://ğŸ’»app/imports/api/annotations/addAnnotation.js","meteor://ğŸ’»app/imports/api/annotations/index.js","meteor://ğŸ’»app/imports/api/auth-token-validation/server/modifiers/clearAuthTokenValidation.js","meteor://ğŸ’»app/imports/api/auth-token-validation/server/modifiers/upsertValidationState.js","meteor://ğŸ’»app/imports/api/auth-token-validation/server/index.js","meteor://ğŸ’»app/imports/api/auth-token-validation/server/publishers.js","meteor://ğŸ’»app/imports/api/auth-token-validation/index.js","meteor://ğŸ’»app/imports/api/breakouts/server/handlers/breakoutClosed.js","meteor://ğŸ’»app/imports/api/breakouts/server/handlers/breakoutJoinURL.js","meteor://ğŸ’»app/imports/api/breakouts/server/handlers/breakoutStarted.js","meteor://ğŸ’»app/imports/api/breakouts/server/handlers/joinedUsersChanged.js","meteor://ğŸ’»app/imports/api/breakouts/server/handlers/updateTimeRemaining.js","meteor://ğŸ’»app/imports/api/breakouts/server/methods/createBreakout.js","meteor://ğŸ’»app/imports/api/breakouts/server/methods/endAllBreakouts.js","meteor://ğŸ’»app/imports/api/breakouts/server/methods/requestJoinURL.js","meteor://ğŸ’»app/imports/api/breakouts/server/modifiers/clearBreakouts.js","meteor://ğŸ’»app/imports/api/breakouts/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/breakouts/server/index.js","meteor://ğŸ’»app/imports/api/breakouts/server/methods.js","meteor://ğŸ’»app/imports/api/breakouts/server/publishers.js","meteor://ğŸ’»app/imports/api/breakouts/index.js","meteor://ğŸ’»app/imports/api/captions/server/handlers/padCreate.js","meteor://ğŸ’»app/imports/api/captions/server/handlers/padUpdate.js","meteor://ğŸ’»app/imports/api/captions/server/methods/addCaptionsPads.js","meteor://ğŸ’»app/imports/api/captions/server/methods/addPad.js","meteor://ğŸ’»app/imports/api/captions/server/methods/appendText.js","meteor://ğŸ’»app/imports/api/captions/server/methods/createCaptions.js","meteor://ğŸ’»app/imports/api/captions/server/methods/editCaptions.js","meteor://ğŸ’»app/imports/api/captions/server/methods/fetchReadOnlyPadId.js","meteor://ğŸ’»app/imports/api/captions/server/methods/takeOwnership.js","meteor://ğŸ’»app/imports/api/captions/server/methods/updateOwner.js","meteor://ğŸ’»app/imports/api/captions/server/modifiers/addCaption.js","meteor://ğŸ’»app/imports/api/captions/server/modifiers/clearCaptions.js","meteor://ğŸ’»app/imports/api/captions/server/modifiers/updateOwnerId.js","meteor://ğŸ’»app/imports/api/captions/server/modifiers/updatePad.js","meteor://ğŸ’»app/imports/api/captions/server/modifiers/updateReadOnlyPadId.js","meteor://ğŸ’»app/imports/api/captions/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/captions/server/helpers.js","meteor://ğŸ’»app/imports/api/captions/server/index.js","meteor://ğŸ’»app/imports/api/captions/server/methods.js","meteor://ğŸ’»app/imports/api/captions/server/publishers.js","meteor://ğŸ’»app/imports/api/captions/index.js","meteor://ğŸ’»app/imports/api/connection-status/server/methods/addConnectionStatus.js","meteor://ğŸ’»app/imports/api/connection-status/server/methods/voidConnection.js","meteor://ğŸ’»app/imports/api/connection-status/server/modifiers/clearConnectionStatus.js","meteor://ğŸ’»app/imports/api/connection-status/server/modifiers/updateConnectionStatus.js","meteor://ğŸ’»app/imports/api/connection-status/server/index.js","meteor://ğŸ’»app/imports/api/connection-status/server/methods.js","meteor://ğŸ’»app/imports/api/connection-status/server/publishers.js","meteor://ğŸ’»app/imports/api/connection-status/index.js","meteor://ğŸ’»app/imports/api/cursor/server/handlers/cursorUpdate.js","meteor://ğŸ’»app/imports/api/cursor/server/methods/publishCursorUpdate.js","meteor://ğŸ’»app/imports/api/cursor/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/cursor/server/index.js","meteor://ğŸ’»app/imports/api/cursor/server/methods.js","meteor://ğŸ’»app/imports/api/cursor/server/streamer.js","meteor://ğŸ’»app/imports/api/external-videos/server/handlers/startExternalVideo.js","meteor://ğŸ’»app/imports/api/external-videos/server/handlers/stopExternalVideo.js","meteor://ğŸ’»app/imports/api/external-videos/server/handlers/updateExternalVideo.js","meteor://ğŸ’»app/imports/api/external-videos/server/methods/emitExternalVideoEvent.js","meteor://ğŸ’»app/imports/api/external-videos/server/methods/startWatchingExternalVideo.js","meteor://ğŸ’»app/imports/api/external-videos/server/methods/stopWatchingExternalVideo.js","meteor://ğŸ’»app/imports/api/external-videos/server/methods/stopWatchingExternalVideoSystemCall.js","meteor://ğŸ’»app/imports/api/external-videos/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/external-videos/server/index.js","meteor://ğŸ’»app/imports/api/external-videos/server/methods.js","meteor://ğŸ’»app/imports/api/external-videos/server/streamer.js","meteor://ğŸ’»app/imports/api/group-chat/server/handlers/groupChatCreated.js","meteor://ğŸ’»app/imports/api/group-chat/server/handlers/groupChatDestroyed.js","meteor://ğŸ’»app/imports/api/group-chat/server/handlers/groupChats.js","meteor://ğŸ’»app/imports/api/group-chat/server/methods/createGroupChat.js","meteor://ğŸ’»app/imports/api/group-chat/server/methods/destroyGroupChat.js","meteor://ğŸ’»app/imports/api/group-chat/server/modifiers/addGroupChat.js","meteor://ğŸ’»app/imports/api/group-chat/server/modifiers/clearGroupChat.js","meteor://ğŸ’»app/imports/api/group-chat/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/group-chat/server/index.js","meteor://ğŸ’»app/imports/api/group-chat/server/methods.js","meteor://ğŸ’»app/imports/api/group-chat/server/publishers.js","meteor://ğŸ’»app/imports/api/group-chat/index.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/handlers/clearPublicGroupChat.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/handlers/groupChatMsgBroadcast.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/handlers/syncGroupsChat.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/handlers/userTyping.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/methods/chatMessageBeforeJoinCounter.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/methods/clearPublicChatHistory.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/methods/fetchMessagePerPage.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/methods/sendGroupChatMsg.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/methods/startUserTyping.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/methods/stopUserTyping.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/modifiers/addBulkGroupChatMsgs.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/modifiers/addGroupChatMsg.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/modifiers/addSystemMsg.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/modifiers/clearGroupChatMsg.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/modifiers/startTyping.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/modifiers/stopTyping.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/modifiers/syncMeetingChatMsgs.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/index.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/methods.js","meteor://ğŸ’»app/imports/api/group-chat-msg/server/publishers.js","meteor://ğŸ’»app/imports/api/group-chat-msg/index.js","meteor://ğŸ’»app/imports/api/guest-users/server/handlers/guestApproved.js","meteor://ğŸ’»app/imports/api/guest-users/server/handlers/guestWaitingLeft.js","meteor://ğŸ’»app/imports/api/guest-users/server/handlers/guestsWaitingForApproval.js","meteor://ğŸ’»app/imports/api/guest-users/server/methods/allowPendingUsers.js","meteor://ğŸ’»app/imports/api/guest-users/server/methods/changeGuestPolicy.js","meteor://ğŸ’»app/imports/api/guest-users/server/methods/setGuestLobbyMessage.js","meteor://ğŸ’»app/imports/api/guest-users/server/modifiers/clearGuestUsers.js","meteor://ğŸ’»app/imports/api/guest-users/server/modifiers/removeGuest.js","meteor://ğŸ’»app/imports/api/guest-users/server/modifiers/setGuestStatus.js","meteor://ğŸ’»app/imports/api/guest-users/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/guest-users/server/index.js","meteor://ğŸ’»app/imports/api/guest-users/server/methods.js","meteor://ğŸ’»app/imports/api/guest-users/server/publishers.js","meteor://ğŸ’»app/imports/api/guest-users/index.js","meteor://ğŸ’»app/imports/api/local-settings/server/methods/userChangedLocalSettings.js","meteor://ğŸ’»app/imports/api/local-settings/server/modifiers/clearLocalSettings.js","meteor://ğŸ’»app/imports/api/local-settings/server/modifiers/setChangedLocalSettings.js","meteor://ğŸ’»app/imports/api/local-settings/server/index.js","meteor://ğŸ’»app/imports/api/local-settings/server/methods.js","meteor://ğŸ’»app/imports/api/local-settings/server/publishers.js","meteor://ğŸ’»app/imports/api/local-settings/index.js","meteor://ğŸ’»app/imports/api/log-client/server/methods/logClient.js","meteor://ğŸ’»app/imports/api/log-client/server/index.js","meteor://ğŸ’»app/imports/api/log-client/server/methods.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/getAllMeetings.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/guestLobbyMessageChanged.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/guestPolicyChanged.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/meetingCreation.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/meetingDestruction.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/meetingEnd.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/meetingLockChange.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/recordingStatusChange.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/recordingTimerChange.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/selectRandomViewer.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/timeRemainingUpdate.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/userLockChange.js","meteor://ğŸ’»app/imports/api/meetings/server/handlers/webcamOnlyModerator.js","meteor://ğŸ’»app/imports/api/meetings/server/methods/clearRandomlySelectedUser.js","meteor://ğŸ’»app/imports/api/meetings/server/methods/endMeeting.js","meteor://ğŸ’»app/imports/api/meetings/server/methods/toggleLockSettings.js","meteor://ğŸ’»app/imports/api/meetings/server/methods/toggleRecording.js","meteor://ğŸ’»app/imports/api/meetings/server/methods/toggleWebcamsOnlyForModerator.js","meteor://ğŸ’»app/imports/api/meetings/server/methods/transferUser.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/addMeeting.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/changeLockSettings.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/changeUserLock.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/clearMeetingTimeRemaining.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/clearRecordMeeting.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/meetingHasEnded.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/setGuestLobbyMessage.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/setGuestPolicy.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/setPublishedPoll.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/updateRandomViewer.js","meteor://ğŸ’»app/imports/api/meetings/server/modifiers/webcamOnlyModerator.js","meteor://ğŸ’»app/imports/api/meetings/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/meetings/server/index.js","meteor://ğŸ’»app/imports/api/meetings/server/methods.js","meteor://ğŸ’»app/imports/api/meetings/server/publishers.js","meteor://ğŸ’»app/imports/api/meetings/index.js","meteor://ğŸ’»app/imports/api/network-information/server/methods/userInstabilityDetected.js","meteor://ğŸ’»app/imports/api/network-information/server/modifiers/clearNetworkInformation.js","meteor://ğŸ’»app/imports/api/network-information/server/index.js","meteor://ğŸ’»app/imports/api/network-information/server/methods.js","meteor://ğŸ’»app/imports/api/network-information/server/publisher.js","meteor://ğŸ’»app/imports/api/network-information/index.js","meteor://ğŸ’»app/imports/api/note/server/handlers/padUpdate.js","meteor://ğŸ’»app/imports/api/note/server/methods/addPad.js","meteor://ğŸ’»app/imports/api/note/server/methods/createNote.js","meteor://ğŸ’»app/imports/api/note/server/modifiers/addNote.js","meteor://ğŸ’»app/imports/api/note/server/modifiers/clearNote.js","meteor://ğŸ’»app/imports/api/note/server/modifiers/updateNote.js","meteor://ğŸ’»app/imports/api/note/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/note/server/helpers.js","meteor://ğŸ’»app/imports/api/note/server/index.js","meteor://ğŸ’»app/imports/api/note/server/publishers.js","meteor://ğŸ’»app/imports/api/note/index.js","meteor://ğŸ’»app/imports/api/polls/server/handlers/pollPublished.js","meteor://ğŸ’»app/imports/api/polls/server/handlers/pollStarted.js","meteor://ğŸ’»app/imports/api/polls/server/handlers/pollStopped.js","meteor://ğŸ’»app/imports/api/polls/server/handlers/sendPollChatMsg.js","meteor://ğŸ’»app/imports/api/polls/server/handlers/userResponded.js","meteor://ğŸ’»app/imports/api/polls/server/handlers/userTypedResponse.js","meteor://ğŸ’»app/imports/api/polls/server/handlers/userVoted.js","meteor://ğŸ’»app/imports/api/polls/server/methods/publishPoll.js","meteor://ğŸ’»app/imports/api/polls/server/methods/publishTypedVote.js","meteor://ğŸ’»app/imports/api/polls/server/methods/publishVote.js","meteor://ğŸ’»app/imports/api/polls/server/methods/startPoll.js","meteor://ğŸ’»app/imports/api/polls/server/methods/stopPoll.js","meteor://ğŸ’»app/imports/api/polls/server/modifiers/addPoll.js","meteor://ğŸ’»app/imports/api/polls/server/modifiers/clearPolls.js","meteor://ğŸ’»app/imports/api/polls/server/modifiers/removePoll.js","meteor://ğŸ’»app/imports/api/polls/server/modifiers/updateVotes.js","meteor://ğŸ’»app/imports/api/polls/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/polls/server/index.js","meteor://ğŸ’»app/imports/api/polls/server/methods.js","meteor://ğŸ’»app/imports/api/polls/server/publishers.js","meteor://ğŸ’»app/imports/api/polls/index.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/handlers/createNewPresentationPod.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/handlers/removePresentationPod.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/handlers/setPresenterInPod.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/handlers/syncGetPresentationPods.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/modifiers/addPresentationPod.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/modifiers/clearPresentationPods.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/modifiers/removePresentationPod.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/modifiers/setPresenterInPod.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/index.js","meteor://ğŸ’»app/imports/api/presentation-pods/server/publishers.js","meteor://ğŸ’»app/imports/api/presentation-pods/index.js","meteor://ğŸ’»app/imports/api/presentation-upload-token/server/handlers/presentationUploadTokenFail.js","meteor://ğŸ’»app/imports/api/presentation-upload-token/server/handlers/presentationUploadTokenPass.js","meteor://ğŸ’»app/imports/api/presentation-upload-token/server/methods/requestPresentationUploadToken.js","meteor://ğŸ’»app/imports/api/presentation-upload-token/server/methods/setUsedToken.js","meteor://ğŸ’»app/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken.js","meteor://ğŸ’»app/imports/api/presentation-upload-token/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/presentation-upload-token/server/index.js","meteor://ğŸ’»app/imports/api/presentation-upload-token/server/methods.js","meteor://ğŸ’»app/imports/api/presentation-upload-token/server/publishers.js","meteor://ğŸ’»app/imports/api/presentation-upload-token/index.js","meteor://ğŸ’»app/imports/api/presentations/server/handlers/presentationAdded.js","meteor://ğŸ’»app/imports/api/presentations/server/handlers/presentationConversionUpdate.js","meteor://ğŸ’»app/imports/api/presentations/server/handlers/presentationCurrentSet.js","meteor://ğŸ’»app/imports/api/presentations/server/handlers/presentationDownloadableSet.js","meteor://ğŸ’»app/imports/api/presentations/server/handlers/presentationRemove.js","meteor://ğŸ’»app/imports/api/presentations/server/methods/removePresentation.js","meteor://ğŸ’»app/imports/api/presentations/server/methods/setPresentation.js","meteor://ğŸ’»app/imports/api/presentations/server/methods/setPresentationDownloadable.js","meteor://ğŸ’»app/imports/api/presentations/server/modifiers/addPresentation.js","meteor://ğŸ’»app/imports/api/presentations/server/modifiers/clearPresentations.js","meteor://ğŸ’»app/imports/api/presentations/server/modifiers/removePresentation.js","meteor://ğŸ’»app/imports/api/presentations/server/modifiers/setCurrentPresentation.js","meteor://ğŸ’»app/imports/api/presentations/server/modifiers/setPresentationDownloadable.js","meteor://ğŸ’»app/imports/api/presentations/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/presentations/server/index.js","meteor://ğŸ’»app/imports/api/presentations/server/methods.js","meteor://ğŸ’»app/imports/api/presentations/server/publishers.js","meteor://ğŸ’»app/imports/api/presentations/index.js","meteor://ğŸ’»app/imports/api/screenshare/server/handlers/screenshareStarted.js","meteor://ğŸ’»app/imports/api/screenshare/server/handlers/screenshareStopped.js","meteor://ğŸ’»app/imports/api/screenshare/server/modifiers/addScreenshare.js","meteor://ğŸ’»app/imports/api/screenshare/server/modifiers/clearScreenshare.js","meteor://ğŸ’»app/imports/api/screenshare/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/screenshare/server/index.js","meteor://ğŸ’»app/imports/api/screenshare/server/methods.js","meteor://ğŸ’»app/imports/api/screenshare/server/publishers.js","meteor://ğŸ’»app/imports/api/screenshare/index.js","meteor://ğŸ’»app/imports/api/slides/server/handlers/slideChange.js","meteor://ğŸ’»app/imports/api/slides/server/handlers/slideResize.js","meteor://ğŸ’»app/imports/api/slides/server/methods/switchSlide.js","meteor://ğŸ’»app/imports/api/slides/server/methods/zoomSlide.js","meteor://ğŸ’»app/imports/api/slides/server/modifiers/addSlide.js","meteor://ğŸ’»app/imports/api/slides/server/modifiers/addSlidePositions.js","meteor://ğŸ’»app/imports/api/slides/server/modifiers/changeCurrentSlide.js","meteor://ğŸ’»app/imports/api/slides/server/modifiers/clearSlides.js","meteor://ğŸ’»app/imports/api/slides/server/modifiers/clearSlidesPresentation.js","meteor://ğŸ’»app/imports/api/slides/server/modifiers/resizeSlide.js","meteor://ğŸ’»app/imports/api/slides/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/slides/server/helpers.js","meteor://ğŸ’»app/imports/api/slides/server/index.js","meteor://ğŸ’»app/imports/api/slides/server/methods.js","meteor://ğŸ’»app/imports/api/slides/server/publishers.js","meteor://ğŸ’»app/imports/api/slides/index.js","meteor://ğŸ’»app/imports/api/users/server/handlers/changeRole.js","meteor://ğŸ’»app/imports/api/users/server/handlers/emojiStatus.js","meteor://ğŸ’»app/imports/api/users/server/handlers/presenterAssigned.js","meteor://ğŸ’»app/imports/api/users/server/handlers/removeUser.js","meteor://ğŸ’»app/imports/api/users/server/handlers/userEjected.js","meteor://ğŸ’»app/imports/api/users/server/handlers/userInactivityInspect.js","meteor://ğŸ’»app/imports/api/users/server/handlers/userJoin.js","meteor://ğŸ’»app/imports/api/users/server/handlers/userJoined.js","meteor://ğŸ’»app/imports/api/users/server/handlers/validateAuthToken.js","meteor://ğŸ’»app/imports/api/users/server/methods/assignPresenter.js","meteor://ğŸ’»app/imports/api/users/server/methods/changeRole.js","meteor://ğŸ’»app/imports/api/users/server/methods/removeUser.js","meteor://ğŸ’»app/imports/api/users/server/methods/setEmojiStatus.js","meteor://ğŸ’»app/imports/api/users/server/methods/setMobileUser.js","meteor://ğŸ’»app/imports/api/users/server/methods/setRandomUser.js","meteor://ğŸ’»app/imports/api/users/server/methods/setUserEffectiveConnectionType.js","meteor://ğŸ’»app/imports/api/users/server/methods/toggleUserLock.js","meteor://ğŸ’»app/imports/api/users/server/methods/userActivitySign.js","meteor://ğŸ’»app/imports/api/users/server/methods/userLeaving.js","meteor://ğŸ’»app/imports/api/users/server/methods/userLeftMeeting.js","meteor://ğŸ’»app/imports/api/users/server/methods/validateAuthToken.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/addDialInUser.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/addUser.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/changePresenter.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/changeRole.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/clearUsers.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/createDummyUser.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/removeUser.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/setMobile.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/setUserEffectiveConnectionType.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/userEjected.js","meteor://ğŸ’»app/imports/api/users/server/modifiers/userInactivityInspect.js","meteor://ğŸ’»app/imports/api/users/server/store/pendingAuthentications.js","meteor://ğŸ’»app/imports/api/users/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/users/server/index.js","meteor://ğŸ’»app/imports/api/users/server/methods.js","meteor://ğŸ’»app/imports/api/users/server/publishers.js","meteor://ğŸ’»app/imports/api/users/index.js","meteor://ğŸ’»app/imports/api/users-infos/server/handlers/userInformation.js","meteor://ğŸ’»app/imports/api/users-infos/server/methods/removeUserInformation.js","meteor://ğŸ’»app/imports/api/users-infos/server/methods/requestUserInformation.js","meteor://ğŸ’»app/imports/api/users-infos/server/modifiers/addUserInfo.js","meteor://ğŸ’»app/imports/api/users-infos/server/modifiers/clearUserInfo.js","meteor://ğŸ’»app/imports/api/users-infos/server/modifiers/clearUserInfoForRequester.js","meteor://ğŸ’»app/imports/api/users-infos/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/users-infos/server/index.js","meteor://ğŸ’»app/imports/api/users-infos/server/methods.js","meteor://ğŸ’»app/imports/api/users-infos/server/publishers.js","meteor://ğŸ’»app/imports/api/users-infos/index.js","meteor://ğŸ’»app/imports/api/users-persistent-data/server/modifiers/addUserPersistentData.js","meteor://ğŸ’»app/imports/api/users-persistent-data/server/modifiers/clearUsersPersistentData.js","meteor://ğŸ’»app/imports/api/users-persistent-data/server/modifiers/setloggedOutStatus.js","meteor://ğŸ’»app/imports/api/users-persistent-data/server/modifiers/updateRole.js","meteor://ğŸ’»app/imports/api/users-persistent-data/server/index.js","meteor://ğŸ’»app/imports/api/users-persistent-data/server/publishers.js","meteor://ğŸ’»app/imports/api/users-persistent-data/index.js","meteor://ğŸ’»app/imports/api/users-settings/server/methods/addUserSettings.js","meteor://ğŸ’»app/imports/api/users-settings/server/modifiers/addUserSetting.js","meteor://ğŸ’»app/imports/api/users-settings/server/modifiers/clearUsersSettings.js","meteor://ğŸ’»app/imports/api/users-settings/server/index.js","meteor://ğŸ’»app/imports/api/users-settings/server/methods.js","meteor://ğŸ’»app/imports/api/users-settings/server/publishers.js","meteor://ğŸ’»app/imports/api/users-settings/index.js","meteor://ğŸ’»app/imports/api/video-streams/server/handlers/floorChanged.js","meteor://ğŸ’»app/imports/api/video-streams/server/handlers/userSharedHtml5Webcam.js","meteor://ğŸ’»app/imports/api/video-streams/server/handlers/userUnsharedHtml5Webcam.js","meteor://ğŸ’»app/imports/api/video-streams/server/methods/userShareWebcam.js","meteor://ğŸ’»app/imports/api/video-streams/server/methods/userUnshareWebcam.js","meteor://ğŸ’»app/imports/api/video-streams/server/modifiers/clearVideoStreams.js","meteor://ğŸ’»app/imports/api/video-streams/server/modifiers/floorChanged.js","meteor://ğŸ’»app/imports/api/video-streams/server/modifiers/sharedWebcam.js","meteor://ğŸ’»app/imports/api/video-streams/server/modifiers/unsharedWebcam.js","meteor://ğŸ’»app/imports/api/video-streams/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/video-streams/server/helpers.js","meteor://ğŸ’»app/imports/api/video-streams/server/index.js","meteor://ğŸ’»app/imports/api/video-streams/server/methods.js","meteor://ğŸ’»app/imports/api/video-streams/server/publisher.js","meteor://ğŸ’»app/imports/api/video-streams/index.js","meteor://ğŸ’»app/imports/api/voice-call-states/server/handlers/voiceCallStateEvent.js","meteor://ğŸ’»app/imports/api/voice-call-states/server/modifiers/clearVoiceCallStates.js","meteor://ğŸ’»app/imports/api/voice-call-states/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/voice-call-states/server/index.js","meteor://ğŸ’»app/imports/api/voice-call-states/server/publishers.js","meteor://ğŸ’»app/imports/api/voice-call-states/index.js","meteor://ğŸ’»app/imports/api/voice-users/server/handlers/floorChanged.js","meteor://ğŸ’»app/imports/api/voice-users/server/handlers/getVoiceUsers.js","meteor://ğŸ’»app/imports/api/voice-users/server/handlers/joinVoiceUser.js","meteor://ğŸ’»app/imports/api/voice-users/server/handlers/leftVoiceUser.js","meteor://ğŸ’»app/imports/api/voice-users/server/handlers/meetingMuted.js","meteor://ğŸ’»app/imports/api/voice-users/server/handlers/mutedVoiceUser.js","meteor://ğŸ’»app/imports/api/voice-users/server/handlers/talkingVoiceUser.js","meteor://ğŸ’»app/imports/api/voice-users/server/handlers/voiceUsers.js","meteor://ğŸ’»app/imports/api/voice-users/server/methods/ejectUserFromVoice.js","meteor://ğŸ’»app/imports/api/voice-users/server/methods/muteAllExceptPresenterToggle.js","meteor://ğŸ’»app/imports/api/voice-users/server/methods/muteAllToggle.js","meteor://ğŸ’»app/imports/api/voice-users/server/methods/muteToggle.js","meteor://ğŸ’»app/imports/api/voice-users/server/modifiers/addVoiceUser.js","meteor://ğŸ’»app/imports/api/voice-users/server/modifiers/changeMuteMeeting.js","meteor://ğŸ’»app/imports/api/voice-users/server/modifiers/clearVoiceUsers.js","meteor://ğŸ’»app/imports/api/voice-users/server/modifiers/removeVoiceUser.js","meteor://ğŸ’»app/imports/api/voice-users/server/modifiers/updateVoiceUser.js","meteor://ğŸ’»app/imports/api/voice-users/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/voice-users/server/index.js","meteor://ğŸ’»app/imports/api/voice-users/server/methods.js","meteor://ğŸ’»app/imports/api/voice-users/server/publishers.js","meteor://ğŸ’»app/imports/api/voice-users/index.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/handlers/modifyWhiteboardAccess.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/methods/addGlobalAccess.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/methods/addIndividualAccess.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/methods/removeGlobalAccess.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/methods/removeIndividualAccess.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/modifiers/clearWhiteboardMultiUser.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/modifiers/modifyWhiteboardAccess.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/eventHandlers.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/helpers.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/index.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/methods.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/server/publishers.js","meteor://ğŸ’»app/imports/api/whiteboard-multi-user/index.js","meteor://ğŸ’»app/imports/api/common/server/etherpad.js","meteor://ğŸ’»app/imports/api/common/server/helpers.js","meteor://ğŸ’»app/imports/startup/server/ClientConnections.js","meteor://ğŸ’»app/imports/startup/server/etherpad.js","meteor://ğŸ’»app/imports/startup/server/index.js","meteor://ğŸ’»app/imports/startup/server/logger.js","meteor://ğŸ’»app/imports/startup/server/metrics.js","meteor://ğŸ’»app/imports/startup/server/minBrowserVersion.js","meteor://ğŸ’»app/imports/startup/server/redis.js","meteor://ğŸ’»app/imports/startup/server/settings.js","meteor://ğŸ’»app/imports/utils/lineEndings.js","meteor://ğŸ’»app/imports/utils/mimeTypes.js","meteor://ğŸ’»app/imports/utils/regex-weburl.js","meteor://ğŸ’»app/server/main.js"],"names":["module","export","default","handleWhiteboardAnnotations","_","link","v","check","modifyWhiteboardAccess","clearAnnotations","addAnnotation","meetingId","header","body","Object","userId","String","annotations","whiteboardId","multiUser","Array","each","annotation","wbId","handleWhiteboardCleared","AnnotationsStreamer","fullClear","Boolean","emit","handleWhiteboardSend","Metrics","queueMetrics","Meteor","settings","private","redis","metrics","annotationsQueueProcessInterval","ANNOTATION_PROCESS_INTERVAL","public","whiteboard","annotationsQueue","annotationsRecieverIsRunning","process","keys","length","forEach","setAnnotationQueueLength","setTimeout","hasOwnProperty","push","handleWhiteboardUndo","removeAnnotation","shapeId","annotationId","clearWhiteboard","RedisPubSub","extractCredentials","REDIS_CONFIG","CHANNEL","channels","toAkkaApps","EVENT_NAME","requesterUserId","payload","publishUserMessage","sendAnnotation","sendAnnotationHelper","annotationType","id","status","annotationInfo","x","Number","y","fontColor","calcedFontSize","textBoxWidth","text","textBoxHeight","fontSize","dataPoints","type","position","color","thickness","points","dimensions","Match","Maybe","drawEndOnly","sendBulkAnnotations","err","undoAnnotation","Logger","Annotations","addAnnotationQuery","query","insertedId","upsert","selector","modifier","info","error","numberAffected","remove","processForHTML5ServerOnly","on","methods","AuthTokenValidation","ValidationStates","tokenValidation","findOne","connectionId","connection","validationStatus","VALIDATED","warn","find","debug","publish","boundAnnotations","bind","removeAnnotationsStreamer","addAnnotationsStreamer","get","StreamerCentral","instances","streamer","Streamer","retransmit","allowRead","includes","allowWrite","ANNOTATION_TYPE_TEXT","ANNOTATION_TYPE_PENCIL","handleCommonAnnotation","$set","$setOnInsert","$inc","version","handleTextUpdate","replace","handlePencilUpdate","DRAW_START","DRAW_UPDATE","DRAW_END","baseSelector","baseModifier","$push","$each","Mongo","Collection","isServer","_ensureIndex","exportDefault","clearAuthTokenValidation","ClientConnections","num","removeMeeting","upsertValidationState","reason","updatedAt","Date","getTime","JSON","stringify","authTokenValidation","boundAuthTokenValidation","freeze","NOT_VALIDATED","VALIDATING","INVALID","handleBreakoutClosed","clearBreakouts","breakoutId","handleBreakoutJoinURL","Breakouts","redirectToHtml5JoinURL","users","insertedTime","handleBreakoutRoomStarted","flat","DEFAULT_TIME_REMAINING","parentMeetingId","breakout","assign","joinedUsers","timeRemaining","joinedUsersChanged","parentId","usersMapped","map","user","name","update","handleUpdateTimeRemaining","options","multi","createBreakoutRoom","rooms","durationInMinutes","record","BREAKOUT_LIM","app","breakouts","breakoutRoomLimit","MIN_BREAKOUT_ROOMS","MAX_BREAKOUT_ROOMS","eventName","endAllBreakouts","requestJoinURL","userIdToInvite","handleBreakoutStarted","Users","ROLE_MODERATOR","role_moderator","role","User","fields","presenterSelector","$or","freeJoin","boundBreakouts","handlePadCreate","fetchReadOnlyPadId","pad","handlePadUpdate","getDataFromChangeset","updatePad","revs","changeset","data","addCaptionsPads","padIds","addPad","Captions","padId","readOnlyId","appendText","axios","generatePadId","appendTextURL","locale","method","url","responseType","then","response","catch","createCaptions","isEnabled","getLocalesURL","withInstaceId","addCaption","instanceId","locales","editCaptions","getIndex","ownerId","index","startIndex","localeCode","endIndex","getReadOnlyIdURL","getDataFromResponse","updateReadOnlyPadId","readOnlyPadId","takeOwnership","updateOwnerId","CAPTIONS_TOKEN","$regex","verbose","clearCaptions","updateOwner","processForCaptionsPadOnly","hashSHA1","ETHERPAD","etherpad","CAPTIONS_CONFIG","captions","BASENAME","basename","APP","INSTANCE_ID","LOCALES_URL","host","env","PORT","localesUrl","TOKEN","apikey","isCaptionsPad","splitPadId","split","splitChangeset","shift","join","enabled","fn","message","args","requestedBy","boundCaptions","addConnectionStatus","updateConnectionStatus","STATS","stats","logConnectionStatus","value","jitter","loss","rtt","log","voidConnection","clearConnectionStatus","ConnectionStatus","level","timestamp","connectionStatus","boundNote","handleCursorUpdate","CursorStreamer","streamerLog","serverLog","CURSOR_PROCCESS_INTERVAL","cursorQueue","proccess","throttle","cursors","publishCursorUpdate","removeCursorStreamer","addCursorStreamer","handleStartExternalVideo","Meetings","externalVideoUrl","presenter","handleStopExternalVideo","_objectSpread","handleUpdateExternalVideo","ExternalVideoStreamer","emitExternalVideoEvent","playerStatus","rate","time","state","startWatchingExternalVideo","stopWatchingExternalVideo","stopWatchingExternalVideoSystemCall","meeting","removeExternalVideoStreamer","addExternalVideoStreamer","allowRecentMessages","streamName","allowEmit","handleGroupChatCreated","addGroupChat","handleGroupChatDestroyed","handleGroupChats","chats","chat","createGroupChat","CHAT_ACCESS_PRIVATE","receiver","correlationId","now","msg","access","destroyGroupChat","GroupChat","chatId","createdBy","chatDocument","u","participants","safe","clearGroupChat","clearGroupChatMsg","groupChat","CHAT_CONFIG","PUBLIC_CHAT_TYPE","type_public","$all","boundGroupChat","CHAT_ACCESS_PUBLIC","CHAT_ACCESS","PUBLIC","PRIVATE","clearPublicChatHistory","handleGroupChatMsgBroadcast","addGroupChatMsg","addBulkGroupChatMsgs","bufferChatInsertsMs","msgBuffer","bulkFn","handleSyncGroupChat","syncMeetingChatMsgs","msgs","handleUserTyping","startTyping","chatMessageBeforeJoinCounter","GroupChatMsg","groupChats","fetch","chatIdWithCounter","msgCount","$lt","authTokenValidatedTime","count","filter","PUBLIC_GROUP_CHAT_ID","public_group_id","fetchMessagePerPage","ITENS_PER_PAGE","itemsPerPage","page","messages","sort","skip","limit","sendGroupChatMsg","RegexWebUrl","HTML_SAFE_MAP","parseMessage","parsedMessage","trim","c","startUserTyping","stopUserTyping","UsersTyping","stopTyping","userTyping","_objectWithoutProperties","mappedMsgs","sender","restMsg","_id","ObjectID","_str","el","insertedCount","rawCollection","insertMany","BREAK_LINE","msgDocument","insert","addSystemMsg","PUBLIC_CHAT_SYSTEM_ID","system_userid","CHAT_CLEAR_MESSAGE","system_messages_keys","chat_clear","SYSTEM_CHAT_TYPE","type_system","clearMsg","$eq","TYPING_TIMEOUT","isTypingTo","typingUser","sendMsgInitiated","stillTyping","bulkOperations","initializeOrderedBulkOp","msgToSync","updateOne","execute","handleClearPublicGroupChat","handleSyncGroupChatMsg","groupChatMsg","chatsIds","$gte","$in","usersTyping","pubishUsersTyping","boundUsersTyping","handleGuestApproved","setGuestStatus","approvedBy","guests","guest","handleGuestWaitingLeft","removeGuest","handleGuestsWaitingForApproval","stringHash","GuestUsers","COLOR_LIST","intId","approved","denied","loginTime","registeredOn","allowPendingUsers","mappedGuests","changeGuestPolicy","policyRule","setBy","policy","setGuestLobbyMessage","clearGuestUsers","cb","GUEST_STATUS_ALLOW","GUEST_STATUS_DENY","guestUsers","boundSlides","userChangedLocalSettings","LocalSettings","setChangedLocalSettings","userLocalSettings","isEqual","clearLocalSettings","numChanged","localSettings","boundLocalSettings","logDescription","logCode","extraInfo","userInfo","logContents","logClient","handleGetAllMeetings","handleMeetingCreation","handleGuestLobbyMessageChanged","handleGuestPolicyChanged","setGuestPolicy","addMeeting","props","durationInSecods","durationProps","duration","handleMeetingDestruction","BBB_HTML5_ROLE","destroyMeetingQueue","handleMeetingEnd","meetingHasEnded","meetingType","meetingEnded","meetingEndedBy","handleLockSettingsInMeeting","changeLockSettings","handleRecordingStatusChange","RecordMeetings","recording","handleRecordingTimerChange","randomlySelectedUser","updateRandomViewer","userIds","choice","handleTimeRemainingUpdate","MeetingTimeRemaining","timeLeftInSec","changeUserLock","handleChangeWebcamOnlyModerator","changeWebcamOnlyModerator","clearRandomlySelectedUser","endMeeting","toggleLockSettings","lockSettingsProps","disableCam","disableMic","disablePrivateChat","disablePublicChat","disableNote","hideUserList","lockedLayout","lockOnJoin","lockOnJoinConfigurable","disablePrivChat","disablePubChat","toggleRecording","meetingRecorded","allowedToRecord","recordObject","allowStartStopRecording","toggleWebcamsOnlyForModerator","webcamsOnlyForModerator","transferUser","fromMeetingId","toMeetingId","SanitizeHTML","initPads","meetingProp","breakoutProps","sequence","breakoutRooms","privateChatEnabled","extId","isBreakout","usersProp","guestPolicy","authenticatedGuest","maxUsers","allowModsToUnmuteUsers","createdTime","createdDate","meetingExpireIfNoUserJoinedInMinutes","meetingExpireWhenLastUserLeftInMinutes","userInactivityInspectTimerInMinutes","userInactivityThresholdInMinutes","userActivitySignResponseDelayInMinutes","welcomeProp","welcomeMsg","modOnlyMessage","welcomeMsgTemplate","recordProp","ObjectIncluding","autoStartRecording","password","viewerPass","moderatorPass","voiceProp","voiceConf","dialNumber","telVoice","muteOnStart","screenshareProps","red5ScreenshareIp","red5ScreenshareApp","screenshareConf","metadataProp","systemProps","html5InstanceId","restProps","newMeeting","sanitizeTextInChat","original","allowedTags","allowedAttributes","a","img","allowedSchemes","sanitizedWelcomeText","insertBlankTarget","s","i","substr","linkWithoutTarget","RegExp","test","lastIndex","publishedPoll","guestLobbyMessage","locked","lockedBy","clearMeetingTimeRemaining","clearUsers","clearUsersSettings","clearSlides","clearPolls","clearPresentationPods","clearVoiceUsers","clearUserInfo","clearScreenshare","clearNote","clearNetworkInformation","clearRecordMeeting","clearVoiceCallStates","clearVideoStreams","clearUsersPersistentData","clearWhiteboardMultiUser","setPublishedPoll","isPublished","updateRandomUser","requesterId","userList","intervals","Math","floor","random","previousMeeting","handleMeetingLocksChange","handleUserLockChange","handleSelectRandomViewer","meetings","boundMeetings","recordMeetings","recordPublish","boundRecordMeetings","meetingTimeRemaining","timeRemainingPublish","boundtimeRemaining","userInstabilityDetected","NetworkInformation","networkInformation","boundNetworkInformation","updateNote","createNote","createPadURL","addNote","noteId","createURL","responseOuter","readOnlyURL","readOnlyNoteId","Note","processForNotePadOnly","NOTE_CONFIG","note","key","innerData","isNotePad","search","pollPublished","pollId","pollStarted","addPoll","poll","pollType","question","pollStopped","removePoll","sendPollChatMsg","Polls","CHAT_POLL_RESULTS_MESSAGE","chat_poll_result","MAX_POLL_RESULT_BARS","answers","numRespondents","pollData","caseInsensitiveReducer","acc","item","findIndex","ans","toLowerCase","numVotes","tempVotes","responded","resultString","reduce","numResponded","pct","round","pctBars","repeat","pctFotmatted","isNaN","userResponded","answerId","$pull","responses","userTypedResponse","answer","questionId","userVoted","updateVotes","numResponders","publishPoll","publishTypedVote","pollAnswer","activePoll","existingAnsId","publishVote","pollAnswerId","allowedToVote","startPoll","stopPoll","userSelector","$ne","clientType","requester","handlePollStarted","handlePollStopped","handlePollPublished","handleSendSystemChatForPublishedPoll","handleUserVoted","handleUserResponded","handleUserTypedResponse","currentPoll","publishCurrentPoll","boundPolls","polls","handleCreateNewPresentationPod","addPresentationPod","currentPresenterId","podId","pod","handleRemovePresentationPod","removePresentationPod","handleSetPresenterInPod","setPresenterInPod","nextPresenterId","handleSyncGetPresentationPods","PresentationPods","pods","presentationPodIds","presentationPodsToRemove","$nin","p","currentPresenter","presentations","addPresentation","undefined","presentation","clearPresentations","clearPresentationUploadToken","presentationPods","boundPresentationPods","handlePresentationUploadTokenFail","PresentationUploadToken","filename","failed","authzToken","handlePresentationUploadTokenPass","used","requestPresentationUploadToken","setUsedToken","presentationUploadToken","boundPresentationUploadToken","handlePresentationAdded","handlePresentationConversionUpdate","Presentations","OFFICE_DOC_CONVERSION_FAILED_KEY","OFFICE_DOC_CONVERSION_INVALID_KEY","SUPPORTED_DOCUMENT_KEY","UNSUPPORTED_DOCUMENT_KEY","PAGE_COUNT_FAILED_KEY","PAGE_COUNT_EXCEEDED_KEY","PDF_HAS_BIG_PAGE_KEY","GENERATED_SLIDE_KEY","presentationId","messageKey","presName","presentationName","statusModifier","pagesCompleted","numberOfPages","handlePresentationCurrentSet","setCurrentPresentation","handlePresentationDownloadableSet","setPresentationDownloadable","downloadable","handlePresentationRemove","removePresentation","setPresentation","HTTP","addSlide","getSlideText","content","addSlides","slides","slide","txtUri","current","pages","thumbUri","swfUri","svgUri","xOffset","yOffset","widthRatio","heightRatio","clearSlidesPresentation","oldCurrent","callback","newCurrent","oldPresentation","newPresentation","boundPresentations","handleScreenshareStarted","addScreenshare","handleScreenshareStopped","Screenshare","screenshare","boundScreenshare","handleSlideChange","changeCurrentSlide","pageId","handleSlideResize","resizeSlide","switchSlide","Slides","slideNumber","Presentation","Error","Slide","zoomSlide","probe","SVG","PNG","calculateSlideData","addSlidePositions","loadSlidesFromHttpAlways","requestWhiteboardHistory","slideId","USER_ID","SUPPORTED_TYPES","fetchImageSizes","imageUri","result","mime","width","height","restSlide","pngUri","imageSizeUri","slideData","slidePosition","SlidePositions","viewBoxWidth","viewBoxHeight","oldSlide","newSlide","numberAffectedSlidePositions","whiteboardIds","row","SlidePosition","calculatedData","slidePositions","publishPositions","boundSlidePositions","handleChangeRole","changeRole","changedBy","handleEmojiStatus","emoji","emojiTime","handlePresenterAssigned","changePresenter","setPresenterInPodReqMsg","credentials","presenterId","assignedBy","prevPresenter","setPresenterPayload","defaultPodSelector","currentDefaultPodPresenter","oldPresenter","handleRemoveUser","removeUser","handleEjectedUser","userEjected","reasonCode","handleUserInactivityInspect","userInactivityInspect","responseDelay","Integer","userJoin","authToken","handleUserJoined","addUser","handleValidateAuthToken","pendingAuthenticationsStore","createDummyUser","clearOtherSessions","sessionUserId","serverSessions","server","sessions","close","valid","waitForApproval","authTokenValidatedOn","pendingAuths","take","pendingAuth","methodInvocationObject","e","sessionId","setUserId","add","validated","inactivityCheck","currentConnectionId","assignPresenter","newPresenterId","newPresenterName","banUser","ejectedBy","setEmojiStatus","setMobileUser","setMobile","setRandomUser","setUserEffectiveConnectionType","setEffectiveConnectionType","effectiveConnectionType","toggleUserLock","lock","userActivitySign","userLeaving","auth","loggedOut","removeClientConnection","userLeftMeeting","validateAuthToken","requesterToken","externalId","addDialInUser","voiceUser","USER_CONFIG","ROLE_VIEWER","role_viewer","callerName","voiceOnlyUser","authed","waitingForAcceptance","guestStatus","avatar","VoiceUsers","addUserPsersistentData","addVoiceUser","userData","sanitizedName","escape","Meeting","userInfos","sortName","mobile","isBreakoutUser","voiceUserId","callerNum","muted","talking","callingWith","listenOnly","joined","updateRole","doc","VideoStreams","setloggedOutStatus","clearUserInfoForRequester","clearAllSessions","userToRemove","DELAY_USER_REMOVAL_TIMEOUT_MS","wrapAsync","ejectedReason","ejected","PendingAuthentitcations","constructor","store","generateKey","matches","handleUserEjected","currentUser","$exists","publishCurrentUser","boundUsers","handleUserInformation","addUserInfo","removeUserInformation","UserInfos","getUserInformation","externalUserId","toThirdParty","clearUsersInfo","clearUsersInfoForRequester","requestUserInformation","boundUserInfos","addUserPersistentData","UsersPersistentData","token","usersPersistentData","publishUsersPersistentData","addUserSettings","addUserSetting","logger","oldParameters","askForFeedbackOnLogout","autoJoin","autoShareWebcam","autoSwapLayout","clientTitle","customStyle","customStyleUrl","displayBrandingArea","enableScreensharing","enableVideo","forceListenOnly","hidePresentation","listenOnlyMode","multiUserPenOnly","multiUserTools","outsideToggleRecording","outsideToggleSelfVoice","presenterTools","shortcuts","skipCheck","oldParametersKeys","currentParameters","valueParser","val","parsedValue","parse","parameters","settingKey","normalizedKey","matchingNewKey","settingsAdded","entries","setting","UserSettings","Any","userSettings","mainRoomUserSettings","boundUserSettings","handleFloorChanged","floorChanged","lastFloorTime","handleUserSharedHtml5Webcam","sharedWebcam","isValidStream","stream","handleUserUnsharedHtml5Webcam","unsharedWebcam","userShareWebcam","userUnshareWebcam","getDeviceId","getUserName","BASE_FLOOR_TIME","deviceId","vu","FLASH_STREAM_REGEX","splitStream","videoStreams","boundVideoStreams","handleVoiceCallStateEvent","VoiceCallState","clientSession","callState","VoiceCallStates","voiceCallStates","boundVoiceCallStates","handleFloorChange","updateVoiceUser","handleGetVoiceUsers","removeVoiceUser","usersIds","m","voiceUsersIdsToUpdate","indexOf","voiceUsersToRemove","handleJoinVoiceUser","handleVoiceUpdate","isDialInUser","meetingID","handleMeetingMuted","changeMuteMeeting","handleVoiceUsers","voiceUsers","voice","ejectUserFromVoice","muteAllExceptPresenterToggle","toggleMeetingMuted","mutedBy","mute","muteAllToggle","muteToggle","uId","toggle","userToMute","_muted","spoke","clearVoiceUser","clearSpokeTimeout","spokeTimeoutHandles","TALKING_TIMEOUT","startTime","endTime","timeoutHandle","spokeDelay","handleLeftVoiceUser","handleTalkingVoiceUser","handleMutedVoiceUser","toggleVoice","muteAllUsers","muteAllExceptPresenter","onCloseConnection","bindEnvironment","_session","socket","debounce","boundVoiceUser","handleModifyWhiteboardAccess","addGlobalAccess","getUsers","addIndividualAccess","getMultiUser","removeGlobalAccess","removeIndividualAccess","WhiteboardMultiUser","handleGetWhiteboardAccess","isArray","whiteboardMultiUser","boundMultiUser","sha1","BASE_URL","port","HASH_SIZE","encodeURIComponent","checkTokenURL","str","toString","substring","checkServer","Promise","resolve","reject","MSG_DIRECT_TYPE","NODE_USER","clearTimeout","l","envelope","routing","msgType","shouldSkip","credentialsArray","syncInterval","syncUsersWithConnectionManager","connections","Map","setInterval","print","syncConnections","syncConnectionsWithServer","exists","createMeetingConnections","sessionConnections","has","onClose","set","getConnectionsForClient","mapConnectionsObj","k","meetingConnections","filteredConnections","delete","activeConnections","from","onlineUsers","onlineUsersId","usersQuery","userWithoutConnectionIds","removedUsersWithoutConnection","ClientConnectionsSingleton","isPadMessage","getInstanceIdFromPadMessage","INSTANCE_ID_REGEX","core","isPadCreate","isPadUpdate","match","parseInt","eventEmitter","redisPubSub","WebAppInternals","Langmap","fs","lookupUserAgent","lookup","Redis","setMinBrowserVersions","guestWaitHtml","isDevelopment","meteorRoot","realpathSync","cwd","applicationRoot","AVAILABLE_LOCALES","readdirSync","FALLBACK_LOCALES","Assets","getText","exit","startup","APP_CONFIG","CDN_URL","cdn","customHeartbeat","newHeartbeat","heartbeat","currentTime","ws","lastSentFrameTimestamp","session","_meteorSession","supportsHeartbeats","ping","hto_ref","sentAt","heartbeatTimeout","newSend","send","meteorHeartbeat","_seenPacket","_heartbeatTimeoutHandle","_clearHeartbeatTimeoutTimer","readyState","Buffer","_driver","write","console","values","recv","bbbFixApplied","__proto__","BrowserPolicy","disallowEval","allowInlineScripts","allowInlineStyles","allowImageDataUrl","allowFontDataUrl","allowOriginForAll","setBundledJsCssPrefix","fontRegExp","WebApp","rawConnectHandlers","use","req","res","next","_parsedUrl","pathname","setHeader","generateLocaleOptions","tempAggregateLocales","file","localeName","nativeName","reverse","self","avaibleLocalesNamesJSON","connectHandlers","html5clientStatus","writeHead","end","fallback","defaultSettings","application","fallbackLocale","override","overrideLocale","browserLocale","init","localeFile","usableLocales","normalizedLocale","toUpperCase","normDefault","regionDefault","regionDefaultLocale","userName","reqUserName","comment","rating","feedback","userAgent","headers","emitter","createLogger","format","transports","LOG_CONFIG","combine","colorize","splat","simple","Console","prettyPrint","humanReadableUnhandledException","handleExceptions","path","metricsDumpIntervalMs","metricsFolderPath","removeMeetingOnEnd","addEvent","messageLength","currentlyInQueue","wasInQueue","payloadSize","processEvent","size","processingStartTimestamp","currentProcessingTimestamp","processTime","min","max","last","total","avg","processingTime","annotationQueueLength","startDumpFile","fileDate","fullYear","getFullYear","month","getMonth","padStart","day","getDate","hour","getHours","minutes","getMinutes","seconds","getSeconds","folderName","fileName","folderPath","fullFilePath","existsSync","mkdirSync","writeFileSync","metricsSingleton","setMinimumBrowserVersions","minBrowserVersions","versions","elem","Infinity","browser","EventEmitter2","NO_MEETING_ID","makeEnvelope","channel","getInstanceIdFromMessage","instanceIdFromMessage","MeetingMessageQueue","asyncMessages","redisDebugEnabled","queue","PowerQueue","handleTask","taskHandler","isAsync","beginHandleTimestamp","called","callNext","queueId","dataLength","queueLength","onError","stack","analytics","includeChat","emitAsync","handlePublishError","config","didSendRequestEvent","REDIS_HOST","redisConf","customRedisChannel","pub","createClient","sub","meetingsQueues","async","handleSubscribe","handleMessage","channelsToSubscribe","subscribeTo","psubscribe","updateConfig","publishSystemMessage","pattern","ignored","ignoredMessages","date","toISOString","meetingIdFromMessageCoreHeader","meetingIdFromMessageMeetingProp","meetingIdForMeetingEnded","publishVoiceMessage","publishMeetingMessage","RedisPubSubSingleton","YAML","DEFAULT_SETTINGS_FILE_PATH","BBB_HTML5_SETTINGS","LOCAL_SETTINGS_FILE_PATH","BBB_HTML5_LOCAL_SETTINGS","SETTINGS","readFileSync","LOCAL_CONFIG","merge","__meteor_runtime_config__","PUBLIC_SETTINGS","CARRIAGE_RETURN","NEW_LINE","XLS","XLSX","DOC","DOCX","PPT","PPTX","ODT","RTF","TXT","ODS","ODP","PDF","JPEG","UPLOAD_SUPORTED","global"],"mappings":"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","file":"/app.js","sourcesContent":["import _ from 'lodash';\nimport { check } from 'meteor/check';\nimport modifyWhiteboardAccess from '/imports/api/whiteboard-multi-user/server/modifiers/modifyWhiteboardAccess';\nimport clearAnnotations from '../modifiers/clearAnnotations';\nimport addAnnotation from '../modifiers/addAnnotation';\n\nexport default function handleWhiteboardAnnotations({ header, body }, meetingId) {\n  check(header, Object);\n  if (header.userId !== 'nodeJSapp') { return false; }\n\n  check(meetingId, String);\n  check(body, Object);\n\n  const { annotations, whiteboardId, multiUser } = body;\n\n  check(annotations, Array);\n  check(whiteboardId, String);\n  check(multiUser, Array);\n\n  clearAnnotations(meetingId, whiteboardId);\n\n  _.each(annotations, (annotation) => {\n    const { wbId, userId } = annotation;\n    addAnnotation(meetingId, wbId, userId, annotation);\n  });\n\n  modifyWhiteboardAccess(meetingId, whiteboardId, multiUser);\n}\n","import { check } from 'meteor/check';\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\n\nimport clearAnnotations from '../modifiers/clearAnnotations';\n\nexport default function handleWhiteboardCleared({ body }, meetingId) {\n  check(body, {\n    userId: String,\n    whiteboardId: String,\n    fullClear: Boolean,\n  });\n\n  const { whiteboardId, fullClear, userId } = body;\n\n  if (fullClear) {\n    AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId });\n    return clearAnnotations(meetingId, whiteboardId);\n  }\n\n  AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId, userId });\n  return clearAnnotations(meetingId, whiteboardId, userId);\n}\n","import { check } from 'meteor/check';\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\nimport addAnnotation from '../modifiers/addAnnotation';\nimport Metrics from '/imports/startup/server/metrics';\n\nconst { queueMetrics } = Meteor.settings.private.redis.metrics;\n\nconst {\n  annotationsQueueProcessInterval: ANNOTATION_PROCESS_INTERVAL,\n} = Meteor.settings.public.whiteboard;\n\nlet annotationsQueue = {};\nlet annotationsRecieverIsRunning = false;\n\nconst process = () => {\n  if (!Object.keys(annotationsQueue).length) {\n    annotationsRecieverIsRunning = false;\n    return;\n  }\n  annotationsRecieverIsRunning = true;\n  Object.keys(annotationsQueue).forEach((meetingId) => {\n    AnnotationsStreamer(meetingId).emit('added', { meetingId, annotations: annotationsQueue[meetingId] });\n    if (queueMetrics) {\n      Metrics.setAnnotationQueueLength(meetingId, 0);\n    }\n  });\n  annotationsQueue = {};\n\n  Meteor.setTimeout(process, ANNOTATION_PROCESS_INTERVAL);\n};\n\nexport default function handleWhiteboardSend({ header, body }, meetingId) {\n  const userId = header.userId;\n  const annotation = body.annotation;\n\n  check(userId, String);\n  check(annotation, Object);\n\n  const whiteboardId = annotation.wbId;\n  check(whiteboardId, String);\n\n  if (!annotationsQueue.hasOwnProperty(meetingId)) {\n    annotationsQueue[meetingId] = [];\n  }\n\n  annotationsQueue[meetingId].push({ meetingId, whiteboardId, userId, annotation });\n  if (queueMetrics) {\n    Metrics.setAnnotationQueueLength(meetingId, annotationsQueue[meetingId].length);\n  }\n  if (!annotationsRecieverIsRunning) process();\n\n  return addAnnotation(meetingId, whiteboardId, userId, annotation);\n}\n","import { check } from 'meteor/check';\n\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\nimport removeAnnotation from '../modifiers/removeAnnotation';\n\nexport default function handleWhiteboardUndo({ body }, meetingId) {\n  const whiteboardId = body.whiteboardId;\n  const shapeId = body.annotationId;\n\n  check(whiteboardId, String);\n  check(shapeId, String);\n\n  AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId, shapeId });\n  return removeAnnotation(meetingId, whiteboardId, shapeId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function clearWhiteboard(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ClearWhiteboardPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(whiteboardId, String);\n\n  const payload = {\n    whiteboardId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport sendAnnotationHelper from './sendAnnotationHelper';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function sendAnnotation(annotation) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  sendAnnotationHelper(annotation, meetingId, requesterUserId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function sendAnnotationHelper(annotation, meetingId, requesterUserId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendWhiteboardAnnotationPubMsg';\n\n  const whiteboardId = annotation.wbId;\n\n  check(annotation, Object);\n  check(whiteboardId, String);\n\n  if (annotation.annotationType === 'text') {\n    check(annotation, {\n      id: String,\n      status: String,\n      annotationType: String,\n      annotationInfo: {\n        x: Number,\n        y: Number,\n        fontColor: Number,\n        calcedFontSize: Number,\n        textBoxWidth: Number,\n        text: String,\n        textBoxHeight: Number,\n        id: String,\n        whiteboardId: String,\n        status: String,\n        fontSize: Number,\n        dataPoints: String,\n        type: String,\n      },\n      wbId: String,\n      userId: String,\n      position: Number,\n    });\n  } else {\n    check(annotation, {\n      id: String,\n      status: String,\n      annotationType: String,\n      annotationInfo: {\n        color: Number,\n        thickness: Number,\n        points: Array,\n        id: String,\n        whiteboardId: String,\n        status: String,\n        type: String,\n        dimensions: Match.Maybe([Number]),\n      },\n      wbId: String,\n      userId: String,\n      position: Number,\n    });\n  }\n\n  const payload = {\n    annotation,\n    drawEndOnly: true,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { extractCredentials } from '/imports/api/common/server/helpers';\nimport sendAnnotationHelper from './sendAnnotationHelper';\nimport { check } from 'meteor/check';\n\nexport default function sendBulkAnnotations(payload) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  try {\n    check(meetingId, String);\n    check(requesterUserId, String);\n  } catch (err) {\n    return false;\n  }\n\n  payload.forEach(annotation => sendAnnotationHelper(annotation, meetingId, requesterUserId));\n  return true;\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function undoAnnotation(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UndoWhiteboardPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(whiteboardId, String);\n\n  const payload = {\n    whiteboardId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Annotations from '/imports/api/annotations';\nimport addAnnotationQuery from '/imports/api/annotations/addAnnotation';\n\nexport default function addAnnotation(meetingId, whiteboardId, userId, annotation) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(annotation, Object);\n\n  const query = addAnnotationQuery(meetingId, whiteboardId, userId, annotation);\n\n  try {\n    const { insertedId } = Annotations.upsert(query.selector, query.modifier);\n\n    if (insertedId) {\n      Logger.info(`Added annotation id=${annotation.id} whiteboard=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding annotation to collection: ${err}`);\n  }\n}\n","import Annotations from '/imports/api/annotations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearAnnotations(meetingId, whiteboardId, userId) {\n  const selector = {};\n\n  if (meetingId) {\n    selector.meetingId = meetingId;\n  }\n\n  if (whiteboardId) {\n    selector.whiteboardId = whiteboardId;\n  }\n\n  if (userId) {\n    selector.userId = userId;\n  }\n\n  try {\n    const numberAffected = Annotations.remove(selector);\n\n    if (numberAffected) {\n      if (userId) {\n        Logger.info(`Cleared Annotations for userId=${userId} where whiteboard=${whiteboardId}`);\n        return;\n      }\n\n      if (whiteboardId) {\n        Logger.info(`Cleared Annotations for whiteboard=${whiteboardId}`);\n        return;\n      }\n\n      if (meetingId) {\n        Logger.info(`Cleared Annotations (${meetingId})`);\n        return;\n      }\n\n      Logger.info('Cleared Annotations (all)');\n    }\n  } catch (err) {\n    Logger.error(`Removing Annotations from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Annotations from '/imports/api/annotations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeAnnotation(meetingId, whiteboardId, shapeId) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(shapeId, String);\n\n  const selector = {\n    meetingId,\n    whiteboardId,\n    id: shapeId,\n  };\n\n  try {\n    const numberAffected = Annotations.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed annotation id=${shapeId} whiteboard=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing annotation from collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleWhiteboardCleared from './handlers/whiteboardCleared';\nimport handleWhiteboardUndo from './handlers/whiteboardUndo';\nimport handleWhiteboardSend from './handlers/whiteboardSend';\nimport handleWhiteboardAnnotations from './handlers/whiteboardAnnotations';\n\nRedisPubSub.on('ClearWhiteboardEvtMsg', handleWhiteboardCleared);\nRedisPubSub.on('UndoWhiteboardEvtMsg', handleWhiteboardUndo);\nRedisPubSub.on('SendWhiteboardAnnotationEvtMsg', handleWhiteboardSend);\nRedisPubSub.on('GetWhiteboardAnnotationsRespMsg', processForHTML5ServerOnly(handleWhiteboardAnnotations));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport undoAnnotation from './methods/undoAnnotation';\nimport clearWhiteboard from './methods/clearWhiteboard';\nimport sendAnnotation from './methods/sendAnnotation';\nimport sendBulkAnnotations from './methods/sendBulkAnnotations';\n\nMeteor.methods({\n  undoAnnotation,\n  clearWhiteboard,\n  sendAnnotation,\n  sendBulkAnnotations,\n});\n","import Annotations from '/imports/api/annotations';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction annotations() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Annotations was requested by unauth connection ${this.connection.id}`);\n    return Annotations.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Annotations', { meetingId, userId });\n\n  return Annotations.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundAnnotations = annotations.bind(this);\n  return boundAnnotations(...args);\n}\n\nMeteor.publish('annotations', publish);\n","import Logger from '/imports/startup/server/logger';\n\nexport function removeAnnotationsStreamer(meetingId) {\n  Logger.info(`Removing Annotations streamer object for meeting ${meetingId}`);\n  delete Meteor.StreamerCentral.instances[`annotations-${meetingId}`];\n}\n\nexport function addAnnotationsStreamer(meetingId) {\n  const streamer = new Meteor.Streamer(`annotations-${meetingId}`, { retransmit: false });\n\n  streamer.allowRead(function allowRead() {\n    if (!this.userId) return false;\n\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.allowWrite(function allowWrite() {\n    return false;\n  });\n}\n\nexport default function get(meetingId) {\n  return Meteor.StreamerCentral.instances[`annotations-${meetingId}`];\n}\n","import { check } from 'meteor/check';\n\nconst ANNOTATION_TYPE_TEXT = 'text';\nconst ANNOTATION_TYPE_PENCIL = 'pencil';\n\n// line, triangle, ellipse, rectangle\nfunction handleCommonAnnotation(meetingId, whiteboardId, userId, annotation) {\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const selector = {\n    meetingId,\n    id,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      whiteboardId,\n      meetingId,\n      id,\n      status,\n      annotationType,\n      annotationInfo,\n      wbId,\n    },\n    $setOnInsert: {\n      position,\n    },\n    $inc: { version: 1 },\n  };\n\n  return { selector, modifier };\n}\n\nfunction handleTextUpdate(meetingId, whiteboardId, userId, annotation) {\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const selector = {\n    meetingId,\n    id,\n    userId,\n  };\n\n  annotationInfo.text = annotationInfo.text.replace(/[\\r]/g, '\\n');\n\n  const modifier = {\n    $set: {\n      whiteboardId,\n      meetingId,\n      id,\n      status,\n      annotationType,\n      annotationInfo,\n      wbId,\n    },\n    $setOnInsert: {\n      position,\n    },\n    $inc: { version: 1 },\n  };\n\n  return { selector, modifier };\n}\n\nfunction handlePencilUpdate(meetingId, whiteboardId, userId, annotation) {\n  const DRAW_START = 'DRAW_START';\n  const DRAW_UPDATE = 'DRAW_UPDATE';\n  const DRAW_END = 'DRAW_END';\n\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const baseSelector = {\n    meetingId,\n    id,\n    userId,\n    whiteboardId,\n  };\n\n  let baseModifier;\n  switch (status) {\n    case DRAW_START:\n      // on start we split the points\n\n      // create the 'pencil_base'\n      // TODO: find and removed unused props (chunks, version, etc)\n      baseModifier = {\n        $set: {\n          id,\n          userId,\n          meetingId,\n          whiteboardId,\n          position,\n          status,\n          annotationType,\n          annotationInfo,\n          wbId,\n          version: 1,\n        },\n      };\n      break;\n    case DRAW_UPDATE:\n      baseModifier = {\n        $push: {\n          'annotationInfo.points': { $each: annotationInfo.points },\n        },\n        $set: {\n          status,\n        },\n        $inc: { version: 1 },\n      };\n      break;\n    case DRAW_END:\n      // Updating the main pencil object with the final info\n      baseModifier = {\n        $set: {\n          whiteboardId,\n          meetingId,\n          id,\n          status,\n          annotationType,\n          annotationInfo,\n          wbId,\n          position,\n        },\n        $inc: { version: 1 },\n      };\n      break;\n    default:\n      break;\n  }\n\n  return { selector: baseSelector, modifier: baseModifier };\n}\n\nexport default function addAnnotation(meetingId, whiteboardId, userId, annotation) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(annotation, Object);\n\n  switch (annotation.annotationType) {\n    case ANNOTATION_TYPE_TEXT:\n      return handleTextUpdate(meetingId, whiteboardId, userId, annotation);\n    case ANNOTATION_TYPE_PENCIL:\n      return handlePencilUpdate(meetingId, whiteboardId, userId, annotation);\n    default:\n      return handleCommonAnnotation(meetingId, whiteboardId, userId, annotation);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\n\nconst Annotations = new Mongo.Collection('annotations');\n\nif (Meteor.isServer) {\n  // types of queries for the annotations  (Total):\n  // 1. meetingId, id, userId               ( 8 )\n  // 2. meetingId, id, userId, whiteboardId ( 1 )\n  // 3. meetingId                           ( 1 )\n  // 4. meetingId, whiteboardId             ( 1 )\n  // 5. meetingId, whiteboardId, id         ( 1 )\n  // 6. meetingId, whiteboardId, userId     ( 1 )\n  // These 2 indexes seem to cover all of the cases\n\n  Annotations._ensureIndex({ id: 1 });\n  Annotations._ensureIndex({ meetingId: 1, whiteboardId: 1, userId: 1 });\n}\n\nexport default Annotations;\n","import AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Logger from '/imports/startup/server/logger';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nexport default function clearAuthTokenValidation(meetingId) {\n  return AuthTokenValidation.remove({ meetingId }, (err, num) => {\n    if (err) {\n      Logger.info(`Error when removing auth-token-validation for meeting=${meetingId}`);\n    }\n\n    ClientConnections.removeMeeting(meetingId);\n    Logger.info(`Cleared AuthTokenValidation (${meetingId})`);\n  });\n}\n","import Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\n\nexport default function upsertValidationState(meetingId, userId, validationStatus, connectionId, reason = null) {\n  const selector = {\n    meetingId, userId, connectionId,\n  };\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      connectionId,\n      validationStatus,\n      updatedAt: new Date().getTime(),\n      reason,\n    },\n  };\n\n  try {\n    const { numberAffected } = AuthTokenValidation.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Upserted ${JSON.stringify(selector)} ${validationStatus} in AuthTokenValidation`);\n    }\n  } catch (err) {\n    Logger.error(`Could not upsert to collection AuthTokenValidation: ${err}`);\n  }\n}\n","import './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Logger from '/imports/startup/server/logger';\n\nfunction authTokenValidation({ meetingId, userId }) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  Logger.debug(`Publishing auth-token-validation for ${meetingId} ${userId}`);\n\n  return AuthTokenValidation.find(selector);\n}\n\nfunction publish(...args) {\n  const boundAuthTokenValidation = authTokenValidation.bind(this);\n  return boundAuthTokenValidation(...args);\n}\n\nMeteor.publish('auth-token-validation', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst AuthTokenValidation = new Mongo.Collection('auth-token-validation');\n\nif (Meteor.isServer) {\n  AuthTokenValidation._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport const ValidationStates = Object.freeze({\n  NOT_VALIDATED: 1,\n  VALIDATING: 2,\n  VALIDATED: 3,\n  INVALID: 4,\n});\n\nexport default AuthTokenValidation;\n","import { check } from 'meteor/check';\nimport clearBreakouts from '../modifiers/clearBreakouts';\n\nexport default function handleBreakoutClosed({ body }) {\n  const { breakoutId } = body;\n  check(breakoutId, String);\n\n  return clearBreakouts(breakoutId);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function handleBreakoutJoinURL({ body }) {\n  const {\n    redirectToHtml5JoinURL,\n    userId,\n    breakoutId,\n  } = body;\n\n  check(redirectToHtml5JoinURL, String);\n\n  const selector = {\n    breakoutId,\n  };\n\n  const modifier = {\n    $push: {\n      users: {\n        userId,\n        redirectToHtml5JoinURL,\n        insertedTime: new Date().getTime(),\n      },\n    },\n  };\n\n  try {\n    const { insertedId, numberAffected } = Breakouts.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added breakout id=${breakoutId}`);\n    } else if (numberAffected) {\n      Logger.info(`Upserted breakout id=${breakoutId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding breakout to collection: ${err}`);\n  }\n}\n","import Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\n\nexport default function handleBreakoutRoomStarted({ body }, meetingId) {\n  // 0 seconds default breakout time, forces use of real expiration time\n  const DEFAULT_TIME_REMAINING = 0;\n\n  const {\n    parentMeetingId,\n    breakout,\n  } = body;\n\n  const { breakoutId } = breakout;\n\n  check(meetingId, String);\n\n  const selector = {\n    breakoutId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      {\n        users: [],\n        joinedUsers: [],\n      },\n      { timeRemaining: DEFAULT_TIME_REMAINING },\n      { parentMeetingId },\n      flat(breakout),\n    ),\n  };\n\n  try {\n    const { numberAffected } = Breakouts.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info('Updated timeRemaining and externalMeetingId '\n        + `for breakout id=${breakoutId}`);\n    }\n  } catch (err) {\n    Logger.error(`updating breakout: ${err}`);\n  }\n}\n","import Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function joinedUsersChanged({ body }) {\n  check(body, Object);\n\n  const {\n    parentId,\n    breakoutId,\n    users,\n  } = body;\n\n  check(parentId, String);\n  check(breakoutId, String);\n  check(users, Array);\n\n  const selector = {\n    parentMeetingId: parentId,\n    breakoutId,\n  };\n\n  const usersMapped = users.map(user => ({ userId: user.id, name: user.name }));\n  const modifier = {\n    $set: {\n      joinedUsers: usersMapped,\n    },\n  };\n\n  try {\n    const numberAffected = Breakouts.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated joined users in breakout id=${breakoutId}`);\n    }\n  } catch (err) {\n    Logger.error(`updating joined users in breakout: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function handleUpdateTimeRemaining({ body }, meetingId) {\n  const {\n    timeRemaining,\n  } = body;\n\n  check(meetingId, String);\n  check(timeRemaining, Number);\n\n  const selector = {\n    parentMeetingId: meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      timeRemaining,\n    },\n  };\n\n  const options = {\n    multi: true,\n  };\n\n  try {\n    const numberAffected = Breakouts.update(selector, modifier, options);\n\n    if (numberAffected) {\n      Logger.info(`Updated breakout time remaining for breakouts where parentMeetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating breakouts: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function createBreakoutRoom(rooms, durationInMinutes, record = false) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const BREAKOUT_LIM = Meteor.settings.public.app.breakouts.breakoutRoomLimit;\n  const MIN_BREAKOUT_ROOMS = 2;\n  const MAX_BREAKOUT_ROOMS = BREAKOUT_LIM > MIN_BREAKOUT_ROOMS ? BREAKOUT_LIM : MIN_BREAKOUT_ROOMS;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const eventName = 'CreateBreakoutRoomsCmdMsg';\n  if (rooms.length > MAX_BREAKOUT_ROOMS) {\n    Logger.info(`Attempt to create breakout rooms with invalid number of rooms in meeting id=${meetingId}`);\n    return;\n  }\n  const payload = {\n    record,\n    durationInMinutes,\n    rooms,\n    meetingId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function endAllBreakouts() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const eventName = 'EndAllBreakoutRoomsMsg';\n  return RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, null);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function requestJoinURL({ breakoutId, userId: userIdToInvite }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const userId = userIdToInvite || requesterUserId;\n  const eventName = 'RequestBreakoutJoinURLReqMsg';\n\n  return RedisPubSub.publishUserMessage(\n    CHANNEL, eventName, meetingId, requesterUserId,\n    {\n      meetingId,\n      breakoutId,\n      userId,\n    },\n  );\n}\n","import Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function clearBreakouts(breakoutId) {\n  if (breakoutId) {\n    const selector = {\n      breakoutId,\n    };\n\n    try {\n      const numberAffected = Breakouts.remove(selector);\n\n      if (numberAffected) {\n        Logger.info(`Cleared Breakouts (${breakoutId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Breakouts (${breakoutId})`);\n    }\n  } else {\n    try {\n      const numberAffected = Breakouts.remove({});\n      if (numberAffected) {\n        Logger.info('Cleared Breakouts (all)');\n      }\n    } catch (err) {\n      Logger.error('Error on clearing Breakouts (all)');\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleBreakoutJoinURL from './handlers/breakoutJoinURL';\nimport handleBreakoutStarted from './handlers/breakoutStarted';\nimport handleUpdateTimeRemaining from './handlers/updateTimeRemaining';\nimport handleBreakoutClosed from './handlers/breakoutClosed';\nimport joinedUsersChanged from './handlers/joinedUsersChanged';\n\nRedisPubSub.on('BreakoutRoomStartedEvtMsg', handleBreakoutStarted);\nRedisPubSub.on('BreakoutRoomJoinURLEvtMsg', handleBreakoutJoinURL);\nRedisPubSub.on('RequestBreakoutJoinURLRespMsg', handleBreakoutJoinURL);\nRedisPubSub.on('BreakoutRoomsTimeRemainingUpdateEvtMsg', handleUpdateTimeRemaining);\nRedisPubSub.on('BreakoutRoomEndedEvtMsg', handleBreakoutClosed);\nRedisPubSub.on('UpdateBreakoutUsersEvtMsg', joinedUsersChanged);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport createBreakoutRoom from '/imports/api/breakouts/server/methods/createBreakout';\nimport requestJoinURL from './methods/requestJoinURL';\nimport endAllBreakouts from './methods/endAllBreakouts';\n\nMeteor.methods({\n  requestJoinURL,\n  createBreakoutRoom,\n  endAllBreakouts,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Breakouts from '/imports/api/breakouts';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction breakouts(role) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Breakouts was requested by unauth connection ${this.connection.id}`);\n    return Breakouts.find({ meetingId: '' });\n  }\n  const { meetingId, userId } = tokenValidation;\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  Logger.debug('Publishing Breakouts', { meetingId, userId });\n\n  if (!!User && User.role === ROLE_MODERATOR) {\n    const presenterSelector = {\n      $or: [\n        { parentMeetingId: meetingId },\n        { breakoutId: meetingId },\n      ],\n    };\n\n    return Breakouts.find(presenterSelector);\n  }\n\n  const selector = {\n    $or: [\n      {\n        parentMeetingId: meetingId,\n        freeJoin: true,\n      },\n      {\n        parentMeetingId: meetingId,\n        'users.userId': userId,\n      },\n      {\n        breakoutId: meetingId,\n      },\n    ],\n  };\n\n  return Breakouts.find(selector);\n}\n\nfunction publish(...args) {\n  const boundBreakouts = breakouts.bind(this);\n  return boundBreakouts(...args);\n}\n\nMeteor.publish('breakouts', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Breakouts = new Mongo.Collection('breakouts');\n\nif (Meteor.isServer) {\n  // types of queries for the breakouts:\n  // 1. breakoutId ( handleJoinUrl, roomStarted, clearBreakouts )\n  // 2. parentMeetingId ( updateTimeRemaining )\n\n  Breakouts._ensureIndex({ breakoutId: 1 });\n  Breakouts._ensureIndex({ parentMeetingId: 1 });\n}\n\nexport default Breakouts;\n","import { check } from 'meteor/check';\nimport fetchReadOnlyPadId from '/imports/api/captions/server/methods/fetchReadOnlyPadId';\n\nexport default function handlePadCreate({ body }) {\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  fetchReadOnlyPadId(id);\n}\n","import { check } from 'meteor/check';\nimport { getDataFromChangeset } from '/imports/api/captions/server/helpers';\nimport updatePad from '/imports/api/captions/server/modifiers/updatePad';\n\nexport default function handlePadUpdate({ body }) {\n  const { pad, revs, changeset } = body;\n  const { id } = pad;\n\n  check(id, String);\n  check(changeset, String);\n  check(revs, Number);\n\n  const data = getDataFromChangeset(changeset);\n\n  if (data !== '') {\n    updatePad(id, data, revs);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function addCaptionsPads(meetingId, padIds) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'AddCaptionsPadsSysMsg';\n\n  check(meetingId, String);\n  check(padIds, [String]);\n\n  const payload = {\n    padIds,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, 'nodeJSapp', payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function addPad(padId, readOnlyId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'AddPadSysMsg';\n\n  check(padId, String);\n  check(readOnlyId, String);\n\n  const pad = Captions.findOne({ padId });\n\n  if (!pad) {\n    Logger.error(`Could not find closed captions pad ${padId}`);\n    return;\n  }\n\n  const { meetingId } = pad;\n\n  check(meetingId, String);\n\n  const payload = {\n    padId,\n    readOnlyId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, 'nodeJSapp', payload);\n}\n","import axios from 'axios';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { generatePadId } from '/imports/api/captions/server/helpers';\nimport { appendTextURL } from '/imports/api/common/server/etherpad';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function appendText(text, locale) {\n  const { meetingId } = extractCredentials(this.userId);\n  check(meetingId, String);\n  check(text, String);\n  check(locale, String);\n\n  const padId = generatePadId(meetingId, locale);\n\n  axios({\n    method: 'get',\n    url: appendTextURL(padId, text),\n    responseType: 'json',\n  }).then((response) => {\n    const { status } = response;\n    if (status !== 200) {\n      Logger.error(`Could not append captions for padId=${padId}`);\n      return;\n    }\n  }).catch(error => Logger.error(`Could not append captions for padId=${padId}: ${error}`));\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  generatePadId,\n  isEnabled,\n  getLocalesURL,\n} from '/imports/api/captions/server/helpers';\nimport { withInstaceId } from '/imports/api/common/server/etherpad';\nimport addCaption from '/imports/api/captions/server/modifiers/addCaption';\nimport addCaptionsPads from '/imports/api/captions/server/methods/addCaptionsPads';\nimport axios from 'axios';\n\nexport default function createCaptions(meetingId, instanceId) {\n  // Avoid captions creation if this feature is disabled\n  if (!isEnabled()) {\n    Logger.warn(`Closed captions are disabled`);\n    return;\n  }\n\n  check(meetingId, String);\n  check(instanceId, Number);\n\n  axios({\n    method: 'get',\n    url: getLocalesURL(),\n    responseType: 'json',\n  }).then((response) => {\n    const { status } = response;\n    if (status !== 200) {\n      Logger.error(`Could not get locales info for ${meetingId} ${status}`);\n      return;\n    }\n    const padIds = [];\n    const locales = response.data;\n    locales.forEach((locale) => {\n      const padId = withInstaceId(instanceId, generatePadId(meetingId, locale.locale));\n      addCaption(meetingId, padId, locale);\n      padIds.push(padId);\n    });\n    addCaptionsPads(meetingId, padIds);\n  }).catch(error => Logger.error(`Could not create captions for ${meetingId}: ${error}`));\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nconst getIndex = (data, length) => length - data.length;\n\nexport default function editCaptions(padId, data) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EditCaptionHistoryPubMsg';\n\n  check(padId, String);\n  check(data, String);\n\n  const pad = Captions.findOne({ padId });\n\n  if (!pad) {\n    Logger.error(`Editing captions history: ${padId}`);\n    return;\n  }\n\n  const {\n    meetingId,\n    ownerId,\n    locale,\n    length,\n  } = pad;\n\n  check(meetingId, String);\n  check(ownerId, String);\n  check(locale, { locale: String, name: String });\n  check(length, Number);\n\n  const index = getIndex(data, length);\n\n  const payload = {\n    startIndex: index,\n    localeCode: locale.locale,\n    locale: locale.name,\n    endIndex: index,\n    text: data,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, ownerId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { getReadOnlyIdURL } from '/imports/api/common/server/etherpad';\nimport { getDataFromResponse } from '/imports/api/note/server/helpers';\nimport updateReadOnlyPadId from '/imports/api/captions/server/modifiers/updateReadOnlyPadId';\nimport axios from 'axios';\n\nexport default function fetchReadOnlyPadId(padId) {\n  check(padId, String);\n\n  axios({\n    method: 'get',\n    url: getReadOnlyIdURL(padId),\n    responseType: 'json',\n  }).then((response) => {\n    const { status } = response;\n    if (status !== 200) {\n      Logger.error(`Could not get closed captions readOnlyID for ${padId} ${status}`);\n      return;\n    }\n    const readOnlyPadId = getDataFromResponse(response.data, 'readOnlyID');\n    if (readOnlyPadId) {\n      updateReadOnlyPadId(padId, readOnlyPadId);\n    } else {\n      Logger.error(`Could not get pad readOnlyID for ${padId}`);\n    }\n  }).catch(error => Logger.error(`Could not get pad readOnlyID for ${padId}: ${error}`));\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport updateOwnerId from '/imports/api/captions/server/modifiers/updateOwnerId';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { CAPTIONS_TOKEN } from '/imports/api/captions/server/helpers';\n\nexport default function takeOwnership(locale) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(locale, String);\n\n  const pad = Captions.findOne({ meetingId, padId: { $regex: `${CAPTIONS_TOKEN}${locale}$` } });\n\n  if (pad) {\n    updateOwnerId(meetingId, requesterUserId, pad.padId);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function editCaptions(meetingId, userId, padId) { // TODO\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateCaptionOwnerPubMsg';\n\n  check(meetingId, String);\n  check(userId, String);\n  check(padId, String);\n\n  const pad = Captions.findOne({ meetingId, padId });\n\n  if (!pad) {\n    Logger.error(`Editing captions owner: ${padId}`);\n    return;\n  }\n\n  const { locale } = pad;\n\n  check(locale, { locale: String, name: String });\n\n  const payload = {\n    ownerId: userId,\n    locale: locale.name,\n    localeCode: locale.locale,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addCaption(meetingId, padId, locale) {\n  check(meetingId, String);\n  check(padId, String);\n  check(locale, {\n    locale: String,\n    name: String,\n  });\n\n  const selector = {\n    meetingId,\n    padId,\n  };\n\n  const modifier = {\n    meetingId,\n    padId,\n    locale,\n    ownerId: '',\n    readOnlyPadId: '',\n    data: '',\n    revs: 0,\n    length: 0,\n  };\n\n  try {\n    const { insertedId, numberAffected } = Captions.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.verbose('Captions: added locale', { locale: locale.locale, meetingId });\n    } else if (numberAffected) {\n      Logger.verbose('Captions: upserted locale', { locale: locale.locale, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Adding caption to collection: ${err}`);\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearCaptions(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Captions.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Captions (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing captions (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Captions.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Captions (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing captions (all). ${err}`);\n    }\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport updateOwner from '/imports/api/captions/server/methods/updateOwner';\nimport { check } from 'meteor/check';\n\nexport default function updateOwnerId(meetingId, userId, padId) {\n  check(meetingId, String);\n  check(userId, String);\n  check(padId, String);\n\n  const selector = {\n    meetingId,\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      ownerId: userId,\n    },\n  };\n\n  try {\n    const numberAffected = Captions.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      updateOwner(meetingId, userId, padId);\n      Logger.verbose('Captions: updated caption', { padId, ownerId: userId });\n    }\n  } catch (err) {\n    Logger.error('Captions: error while updating pad', { err });\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport editCaptions from '/imports/api/captions/server/methods/editCaptions';\nimport { check } from 'meteor/check';\n\nexport default function updatePad(padId, data, revs) {\n  check(padId, String);\n  check(data, String);\n  check(revs, Number);\n\n  const selector = {\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      data,\n      revs,\n    },\n    $inc: {\n      length: data.length,\n    },\n  };\n\n  try {\n    const numberAffected = Captions.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      editCaptions(padId, data, revs);\n      Logger.verbose('Captions: updated pad', { padId, revs });\n    }\n  } catch (err) {\n    Logger.error(`Updating captions pad: ${err}`);\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport addPad from '/imports/api/captions/server/methods/addPad';\n\nexport default function updateReadOnlyPadId(padId, readOnlyPadId) {\n  check(padId, String);\n  check(readOnlyPadId, String);\n\n  const selector = {\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      readOnlyPadId,\n    },\n  };\n\n  try {\n    const numberAffected = Captions.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      addPad(padId, readOnlyPadId);\n      Logger.verbose('Captions: added readOnlyPadId', { padId, readOnlyPadId });\n    }\n  } catch (err) {\n    Logger.error('Captions: error when adding readOnlyPadId', { err });\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForCaptionsPadOnly } from '/imports/api/captions/server/helpers';\nimport handlePadCreate from './handlers/padCreate';\nimport handlePadUpdate from './handlers/padUpdate';\n\nRedisPubSub.on('PadCreateSysMsg', processForCaptionsPadOnly(handlePadCreate));\nRedisPubSub.on('PadUpdateSysMsg', processForCaptionsPadOnly(handlePadUpdate));\n","import { Meteor } from 'meteor/meteor';\nimport { hashSHA1 } from '/imports/api/common/server/etherpad';\nimport { check } from 'meteor/check';\n\nconst ETHERPAD = Meteor.settings.private.etherpad;\nconst CAPTIONS_CONFIG = Meteor.settings.public.captions;\nconst BASENAME = Meteor.settings.public.app.basename;\nconst APP = Meteor.settings.private.app;\nconst INSTANCE_ID = Meteor.settings.public.app.instanceId;\nconst LOCALES_URL = `http://${APP.host}:${process.env.PORT}${BASENAME}${INSTANCE_ID}${APP.localesUrl}`;\nconst CAPTIONS_TOKEN = '_cc_';\nconst TOKEN = '$';\n\n// Captions padId should look like: {prefix}_cc_{locale}\nconst generatePadId = (meetingId, locale) => `${hashSHA1(meetingId + locale + ETHERPAD.apikey)}${CAPTIONS_TOKEN}${locale}`;\n\nconst isCaptionsPad = (padId) => {\n  const splitPadId = padId.split(CAPTIONS_TOKEN);\n  return splitPadId.length === 2;\n};\n\nconst getDataFromChangeset = (changeset) => {\n  const splitChangeset = changeset.split(TOKEN);\n  if (splitChangeset.length > 1) {\n    splitChangeset.shift();\n    return splitChangeset.join(TOKEN);\n  }\n  return '';\n};\n\nconst isEnabled = () => CAPTIONS_CONFIG.enabled;\n\nconst getLocalesURL = () => LOCALES_URL;\n\nconst processForCaptionsPadOnly = fn => (message, ...args) => {\n  const { body } = message;\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  if (isCaptionsPad(id)) return fn(message, ...args);\n  return () => { };\n};\n\nexport {\n  CAPTIONS_TOKEN,\n  generatePadId,\n  processForCaptionsPadOnly,\n  isEnabled,\n  getLocalesURL,\n  getDataFromChangeset,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport takeOwnership from '/imports/api/captions/server/methods/takeOwnership';\nimport appendText from '/imports/api/captions/server/methods/appendText';\n\nMeteor.methods({\n  takeOwnership,\n  appendText,\n});\n","import Captions from '/imports/api/captions';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction captions() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Captions was requested by unauth connection ${this.connection.id}`);\n    return Captions.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug('Publishing Captions', { meetingId, requestedBy: userId });\n\n  return Captions.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundCaptions = captions.bind(this);\n  return boundCaptions(...args);\n}\n\nMeteor.publish('captions', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Captions = new Mongo.Collection('captions');\n\nif (Meteor.isServer) {\n  Captions._ensureIndex({ meetingId: 1, padId: 1 });\n}\n\nexport default Captions;\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport updateConnectionStatus from '/imports/api/connection-status/server/modifiers/updateConnectionStatus';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst STATS = Meteor.settings.public.stats;\n\nconst logConnectionStatus = (meetingId, userId, status, type, value) => {\n  switch (status) {\n    case 'normal':\n      Logger.info(`Connection status updated: meetingId=${meetingId} userId=${userId} status=${status} type=${type}`);\n      break;\n    case 'warning':\n      // Skip\n      break;\n    case 'danger':\n    case 'critical':\n      switch (type) {\n        case 'audio':\n          const {\n            jitter,\n            loss,\n          } = value;\n          Logger.info(`Connection status updated: meetingId=${meetingId} userId=${userId} status=${status} type=${type} jitter=${jitter} loss=${loss}`);\n          break;\n        case 'socket':\n          const { rtt } = value;\n          Logger.info(`Connection status updated: meetingId=${meetingId} userId=${userId} status=${status} type=${type} rtt=${rtt}`);\n          break;\n        default:\n      }\n      break;\n    default:\n  }\n};\n\nexport default function addConnectionStatus(status, type, value) {\n  check(status, String);\n  check(type, String);\n  check(value, Object);\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  if (STATS.log) logConnectionStatus(meetingId, requesterUserId, status, type, value);\n\n  // Avoid storing recoveries\n  if (status !== 'normal') {\n    updateConnectionStatus(meetingId, requesterUserId, status);\n  }\n}\n","// Round-trip time helper\nexport default function voidConnection() {\n  return 0;\n}\n","import ConnectionStatus from '/imports/api/connection-status';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearConnectionStatus(meetingId) {\n  const selector = {};\n\n  if (meetingId) {\n    selector.meetingId = meetingId;\n  }\n\n  try {\n    const numberAffected = ConnectionStatus.remove(selector);\n\n    if (numberAffected) {\n      if (meetingId) {\n        Logger.info(`Removed ConnectionStatus (${meetingId})`);\n      } else {\n        Logger.info('Removed ConnectionStatus (all)');\n      }\n    } else {\n      Logger.warn('Removing ConnectionStatus nonaffected');\n    }\n  } catch (err) {\n    Logger.error(`Removing ConnectionStatus: ${err}`);\n  }\n}\n","import ConnectionStatus from '/imports/api/connection-status';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateConnectionStatus(meetingId, userId, level) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const timestamp = new Date().getTime();\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    meetingId,\n    userId,\n    level,\n    timestamp,\n  };\n\n  try {\n    const { numberAffected } = ConnectionStatus.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Updated connection status meetingId=${meetingId} userId=${userId} level=${level}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating connection status meetingId=${meetingId} userId=${userId}: ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addConnectionStatus from './methods/addConnectionStatus';\nimport voidConnection from './methods/voidConnection';\n\nMeteor.methods({\n  addConnectionStatus,\n  voidConnection,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport ConnectionStatus from '/imports/api/connection-status';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction connectionStatus() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing ConnectionStatus was requested by unauth connection ${this.connection.id}`);\n    return ConnectionStatus.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  check(meetingId, String);\n  check(userId, String);\n\n  Logger.info(`Publishing connection status for ${meetingId} ${userId}`);\n\n  return ConnectionStatus.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundNote = connectionStatus.bind(this);\n  return boundNote(...args);\n}\n\nMeteor.publish('connection-status', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst ConnectionStatus = new Mongo.Collection('connection-status');\n\nif (Meteor.isServer) {\n  ConnectionStatus._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default ConnectionStatus;\n","import { check } from 'meteor/check';\nimport CursorStreamer from '/imports/api/cursor/server/streamer';\nimport Logger from '/imports/startup/server/logger';\nimport _ from 'lodash';\n\nconst { streamerLog } = Meteor.settings.private.serverLog;\n\nconst CURSOR_PROCCESS_INTERVAL = 30;\n\nconst cursorQueue = {};\n\nconst proccess = _.throttle(() => {\n  try {\n    Object.keys(cursorQueue).forEach((meetingId) => {\n      try {\n        const cursors = [];\n        for (let userId in cursorQueue[meetingId]){\n          cursorQueue[meetingId][userId].userId = userId;\n          cursors.push(cursorQueue[meetingId][userId]);\n        }\n        delete cursorQueue[meetingId];\n        CursorStreamer(meetingId).emit('message', { meetingId, cursors });\n      } catch (error) {\n        Logger.error(`Error while trying to send cursor streamer data for meeting ${meetingId}. ${error}`);\n      }\n    });\n  } catch (error) {\n    Logger.error(`Error while processing cursor queue. ${error}`);\n  }\n}, CURSOR_PROCCESS_INTERVAL);\n\nexport default function handleCursorUpdate({ header, body }, meetingId) {\n  const { userId } = header;\n  check(body, Object);\n\n  check(meetingId, String);\n  check(userId, String);\n\n  if (!cursorQueue[meetingId]) {\n    cursorQueue[meetingId] = {};\n  }\n\n  // overwrite since we dont care about the other positions\n  cursorQueue[meetingId][userId] = body;\n\n  proccess();\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\n\nexport default function publishCursorUpdate(meetingId, requesterUserId, payload) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendCursorPositionPubMsg';\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleCursorUpdate from './handlers/cursorUpdate';\n\nRedisPubSub.on('SendCursorPositionEvtMsg', handleCursorUpdate);\n","import './eventHandlers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport publishCursorUpdate from './methods/publishCursorUpdate';\n\nMeteor.methods({\n  publishCursorUpdate,\n});\n","import Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport publishCursorUpdate from './methods/publishCursorUpdate';\n\nconst { streamerLog } = Meteor.settings.private.serverLog;\n\nexport function removeCursorStreamer(meetingId) {\n  Logger.info(`Removing Cursor streamer object for meeting ${meetingId}`);\n  delete Meteor.StreamerCentral.instances[`cursor-${meetingId}`];\n}\n\nexport function addCursorStreamer(meetingId) {\n  const streamer = new Meteor.Streamer(`cursor-${meetingId}`, { retransmit: false });\n  if (streamerLog) {\n    Logger.debug('Cursor streamer created', { meetingId });\n  }\n\n  streamer.allowRead(function allowRead() {\n    if (streamerLog) {\n      Logger.debug('Cursor streamer called allowRead', { userId: this.userId, meetingId });\n    }\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.allowWrite(function allowWrite() {\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.on('publish', function (message) {\n    const { requesterUserId } = extractCredentials(this.userId);\n    publishCursorUpdate(meetingId, requesterUserId, message);\n  });\n}\n\nexport default function get(meetingId) {\n  return Meteor.StreamerCentral.instances[`cursor-${meetingId}`];\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Meetings from '/imports/api/meetings';\n\nexport default function handleStartExternalVideo({ header, body }, meetingId) {\n  const { userId } = header;\n  check(body, Object);\n  check(meetingId, String);\n  check(userId, String);\n\n  const externalVideoUrl = body.externalVideoUrl;\n  const user = Users.findOne({ meetingId: meetingId, userId: userId })\n\n  if (user && user.presenter) {\n    try {\n      Meetings.update({ meetingId }, { $set: { externalVideoUrl } });\n      Logger.info(`User id=${userId} sharing an external video: ${externalVideoUrl} for meeting ${meetingId}`);\n    } catch (err) {\n      Logger.error(`Error on setting shared external video start in Meetings collection: ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\n\nexport default function handleStopExternalVideo({ header, body }, meetingId) {\n  const { userId } = header;\n  check(body, Object);\n  check(meetingId, String);\n  check(userId, String);\n\n  try {\n    Logger.info(`External video stop sharing was initiated by:[${userId}] for meeting ${meetingId}`);\n    Meetings.update({ meetingId }, { $set: { externalVideoUrl: null } });\n  } catch (err) {\n    Logger.error(`Error on setting shared external video stop in Meetings collection: ${err}`);\n  }\n\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport ExternalVideoStreamer from '/imports/api/external-videos/server/streamer';\n\nexport default function handleUpdateExternalVideo({ header, body }, meetingId) {\n  const { userId } = header;\n  check(body, Object);\n  check(meetingId, String);\n  check(userId, String);\n\n  const user = Users.findOne({ meetingId: meetingId, userId: userId })\n\n  if (user && user.presenter) {\n    try {\n      Logger.info(`UpdateExternalVideoEvtMsg received for user ${userId} and meeting ${meetingId} event:${body.status}`);\n      ExternalVideoStreamer(meetingId).emit(body.status, { ...body, meetingId: meetingId, userId: userId });\n    } catch (err) {\n      Logger.error(`Error on setting shared external video update in Meetings collection: ${err}`);\n    }\n\n  }\n\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function emitExternalVideoEvent(options) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateExternalVideoPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const { status, playerStatus } = options;\n\n  const user = Users.findOne({ meetingId, userId: requesterUserId });\n\n  if (user && user.presenter) {\n    check(status, String);\n    check(playerStatus, {\n      rate: Match.Maybe(Number),\n      time: Match.Maybe(Number),\n      state: Match.Maybe(Boolean),\n    });\n\n    const rate = playerStatus.rate || 0;\n    const time = playerStatus.time || 0;\n    const state = playerStatus.state || 0;\n    const payload = {\n      status, rate, time, state,\n    };\n\n    Logger.debug(`User id=${requesterUserId} sending ${EVENT_NAME} event:${state} for meeting ${meetingId}`);\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startWatchingExternalVideo(options) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StartExternalVideoPubMsg';\n\n  const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n  const { externalVideoUrl } = options;\n\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(externalVideoUrl, String);\n\n    const user = Users.findOne({ meetingId, userId }, { presenter: 1 });\n\n    if (user && user.presenter) {\n      check(externalVideoUrl, String);\n      const payload = { externalVideoUrl };\n      Logger.debug(`User id=${userId} sending ${EVENT_NAME} url:${externalVideoUrl} for meeting ${meetingId}`);\n      return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n    }\n    Logger.error(`Only presenters are allowed to start external video for a meeting. meeting=${meetingId} userId=${userId}`);\n  } catch (error) {\n    Logger.error(`Error on sharing an external video: ${externalVideoUrl} ${error}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport stopWatchingExternalVideoSystemCall from '/imports/api/external-videos/server/methods/stopWatchingExternalVideoSystemCall';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function stopWatchingExternalVideo() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  try {\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const user = Users.findOne({ meetingId, userId: requesterUserId });\n\n    if (user && user.presenter) {\n      // proceed and publish the event\n      stopWatchingExternalVideoSystemCall({ meetingId, requesterUserId });\n    }\n  } catch (error) {\n    Logger.error(`Error on stop sharing an external video for meeting=${meetingId} ${error}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nexport default function stopWatchingExternalVideoSystemCall({ meetingId, requesterUserId }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StopExternalVideoPubMsg';\n\n  try {\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    // check if there is ongoing video shared\n    const meeting = Meetings.findOne({ meetingId });\n    if (!meeting || meeting.externalVideoUrl === null) return;\n\n    Logger.info('ExternalVideo::stopWatchingExternalVideo was triggered ', { meetingId, requesterUserId });\n\n    const payload = { };\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (error) {\n    Logger.error(`Error on stop sharing an external video for meeting=${meetingId} ${error}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleStartExternalVideo from './handlers/startExternalVideo';\nimport handleStopExternalVideo from './handlers/stopExternalVideo';\nimport handleUpdateExternalVideo from './handlers/updateExternalVideo';\n\nRedisPubSub.on('StartExternalVideoEvtMsg', handleStartExternalVideo);\nRedisPubSub.on('StopExternalVideoEvtMsg', handleStopExternalVideo);\nRedisPubSub.on('UpdateExternalVideoEvtMsg', handleUpdateExternalVideo);\n","import './methods';\nimport './eventHandlers';\n","import { Meteor } from 'meteor/meteor';\nimport startWatchingExternalVideo from './methods/startWatchingExternalVideo';\nimport stopWatchingExternalVideo from './methods/stopWatchingExternalVideo';\nimport emitExternalVideoEvent from './methods/emitExternalVideoEvent';\n\nMeteor.methods({\n  startWatchingExternalVideo,\n  stopWatchingExternalVideo,\n  emitExternalVideoEvent,\n});\n","import { Meteor } from 'meteor/meteor';\r\nimport Logger from '/imports/startup/server/logger';\r\n\r\nconst allowRecentMessages = (eventName, message) => {\r\n\r\n  const {\r\n    userId,\r\n    meetingId,\r\n    time,\r\n    rate,\r\n    state,\r\n  } = message;\r\n\r\n  Logger.debug(`ExternalVideo Streamer auth allowed userId: ${userId}, meetingId: ${meetingId}, event: ${eventName}, time: ${time} rate: ${rate}, state: ${state}`);\r\n  return true;\r\n};\r\n\r\nexport function removeExternalVideoStreamer(meetingId) {\r\n  const streamName = `external-videos-${meetingId}`;\r\n\r\n  if (Meteor.StreamerCentral.instances[streamName]) {\r\n    Logger.info(`Destroying External Video streamer object for ${streamName}`);\r\n    delete Meteor.StreamerCentral.instances[streamName];\r\n  }\r\n}\r\n\r\nexport function addExternalVideoStreamer(meetingId) {\r\n\r\n  const streamName = `external-videos-${meetingId}`;\r\n  if (!Meteor.StreamerCentral.instances[streamName]) {\r\n\r\n    const streamer = new Meteor.Streamer(streamName);\r\n    streamer.allowRead('all');\r\n    streamer.allowWrite('none');\r\n    streamer.allowEmit(allowRecentMessages);\r\n    Logger.info(`Created External Video streamer for ${streamName}`);\r\n  } else {\r\n    Logger.debug(`External Video streamer is already created for ${streamName}`);\r\n  }\r\n}\r\n\r\nexport default function get(meetingId) {\r\n  const streamName = `external-videos-${meetingId}`;\r\n  return Meteor.StreamerCentral.instances[streamName];\r\n}\r\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChatCreated({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  addGroupChat(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChatDestroyed({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  addGroupChat(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChats({ body }, meetingId) {\n  const { chats } = body;\n\n  check(meetingId, String);\n  check(chats, Array);\n\n  chats.forEach(chat => addGroupChat(meetingId, chat));\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { CHAT_ACCESS_PRIVATE } from '/imports/api/group-chat';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function createGroupChat(receiver) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'CreateGroupChatReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(receiver, Object);\n\n  const payload = {\n    correlationId: `${requesterUserId}-${Date.now()}`,\n    msg: [],\n    users: [receiver.userId],\n    access: CHAT_ACCESS_PRIVATE,\n    name: receiver.name,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function destroyGroupChat() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const eventName = 'DestroyGroupChatReqMsg';\n\n  const payload = {\n    // TODO: Implement this together with #4988\n    // chats: Array[String],\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, payload);\n}\n","import flat from 'flat';\nimport { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport GroupChat from '/imports/api/group-chat';\n\nexport default function addGroupChat(meetingId, chat) {\n  check(meetingId, String);\n  check(chat, {\n    id: Match.Maybe(String),\n    chatId: Match.Maybe(String),\n    correlationId: Match.Maybe(String),\n    name: String,\n    access: String,\n    createdBy: Object,\n    users: Array,\n    msg: Match.Maybe(Array),\n  });\n\n  const chatDocument = {\n    meetingId,\n    chatId: chat.chatId || chat.id,\n    name: chat.name,\n    access: chat.access,\n    users: chat.users.map(u => u.id),\n    participants: chat.users,\n    createdBy: chat.createdBy.id,\n  };\n\n  const selector = {\n    chatId: chatDocument.chatId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: flat(chatDocument, { safe: true }),\n  };\n\n  try {\n    const { insertedId } = GroupChat.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added group-chat name=${chat.name} meetingId=${meetingId}`);\n    } else {\n      Logger.info(`Upserted group-chat name=${chat.name} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding group-chat to collection: ${err}`);\n  }\n}\n","import GroupChat from '/imports/api/group-chat';\nimport Logger from '/imports/startup/server/logger';\nimport clearGroupChatMsg from '/imports/api/group-chat-msg/server/modifiers/clearGroupChatMsg';\n\nexport default function clearGroupChat(meetingId) {\n  try {\n    clearGroupChatMsg(meetingId);\n    const numberAffected = GroupChat.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared GroupChat (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing GroupChat (${meetingId}). ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleGroupChats from './handlers/groupChats';\nimport handleGroupChatCreated from './handlers/groupChatCreated';\nimport handleGroupChatDestroyed from './handlers/groupChatDestroyed';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nRedisPubSub.on('GetGroupChatsRespMsg', processForHTML5ServerOnly(handleGroupChats));\nRedisPubSub.on('GroupChatCreatedEvtMsg', handleGroupChatCreated);\nRedisPubSub.on('GroupChatDestroyedEvtMsg', handleGroupChatDestroyed);\nRedisPubSub.on('SyncGetGroupChatsRespMsg', handleGroupChats);\n","import '/imports/api/group-chat-msg/server';\nimport './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport createGroupChat from './methods/createGroupChat';\nimport destroyGroupChat from './methods/destroyGroupChat';\n\nMeteor.methods({\n  createGroupChat,\n  destroyGroupChat,\n});\n","import GroupChat from '/imports/api/group-chat';\nimport { Meteor } from 'meteor/meteor';\n\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction groupChat() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GroupChat was requested by unauth connection ${this.connection.id}`);\n    return GroupChat.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_CHAT_TYPE = CHAT_CONFIG.type_public;\n\n  Logger.debug('Publishing group-chat', { meetingId, userId });\n\n  return GroupChat.find({\n    $or: [\n      { meetingId, access: PUBLIC_CHAT_TYPE },\n      { meetingId, users: { $all: [userId] } },\n    ],\n\n  });\n}\n\nfunction publish(...args) {\n  const boundGroupChat = groupChat.bind(this);\n  return boundGroupChat(...args);\n}\n\nMeteor.publish('group-chat', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst GroupChat = new Mongo.Collection('group-chat');\n\nif (Meteor.isServer) {\n  GroupChat._ensureIndex({\n    meetingId: 1, chatId: 1, access: 1, users: 1,\n  });\n}\n\nexport default GroupChat;\n\nconst CHAT_ACCESS = {\n  PUBLIC: 'PUBLIC_ACCESS',\n  PRIVATE: 'PRIVATE_ACCESS',\n};\n\nexport const CHAT_ACCESS_PUBLIC = CHAT_ACCESS.PUBLIC;\nexport const CHAT_ACCESS_PRIVATE = CHAT_ACCESS.PRIVATE;\n","import { check } from 'meteor/check';\nimport clearGroupChatMsg from '../modifiers/clearGroupChatMsg';\n\nexport default function clearPublicChatHistory({ header, body }) {\n  const { meetingId } = header;\n  const { chatId } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n\n  return clearGroupChatMsg(meetingId, chatId);\n}\n","import { check } from 'meteor/check';\nimport _ from 'lodash';\nimport addGroupChatMsg from '../modifiers/addGroupChatMsg';\nimport addBulkGroupChatMsgs from '../modifiers/addBulkGroupChatMsgs';\n\nconst { bufferChatInsertsMs } = Meteor.settings.public.chat;\n\nconst msgBuffer = [];\n\nconst bulkFn = _.throttle(addBulkGroupChatMsgs, bufferChatInsertsMs);\n\nexport default function handleGroupChatMsgBroadcast({ body }, meetingId) {\n  const { chatId, msg } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, Object);\n\n  if (bufferChatInsertsMs) {\n    msgBuffer.push({ meetingId, chatId, msg });\n    bulkFn(msgBuffer);\n  } else {\n    addGroupChatMsg(meetingId, chatId, msg);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport syncMeetingChatMsgs from '../modifiers/syncMeetingChatMsgs';\n\nexport default function handleSyncGroupChat({ body }, meetingId) {\n  const { chatId, msgs } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msgs, Match.Maybe(Array));\n\n  syncMeetingChatMsgs(meetingId, chatId, msgs);\n}\n","import { check } from 'meteor/check';\nimport startTyping from '../modifiers/startTyping';\n\nexport default function handleUserTyping({ body }, meetingId) {\n  const { chatId, userId } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(chatId, String);\n\n  startTyping(meetingId, userId, chatId);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport GroupChat from '/imports/api/group-chat';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst CHAT_CONFIG = Meteor.settings.public.chat;\nconst PUBLIC_CHAT_TYPE = CHAT_CONFIG.type_public;\n\nexport default function chatMessageBeforeJoinCounter() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const groupChats = GroupChat.find({\n    $or: [\n      { meetingId, access: PUBLIC_CHAT_TYPE },\n      { meetingId, users: { $all: [requesterUserId] } },\n    ],\n  }).fetch();\n\n  const User = Users.findOne({ userId: requesterUserId, meetingId });\n\n  const chatIdWithCounter = groupChats.map((groupChat) => {\n    const msgCount = GroupChatMsg.find({\n      meetingId,\n      chatId: groupChat.chatId,\n      timestamp: { $lt: User.authTokenValidatedTime },\n    }).count();\n    return {\n      chatId: groupChat.chatId,\n      count: msgCount,\n    };\n  }).filter((chat) => chat.count);\n  return chatIdWithCounter;\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function clearPublicChatHistory() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ClearPublicChatHistoryPubMsg';\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const payload = {\n    chatId: PUBLIC_GROUP_CHAT_ID,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nconst CHAT_CONFIG = Meteor.settings.public.chat;\nconst ITENS_PER_PAGE = CHAT_CONFIG.itemsPerPage;\n\nexport default function fetchMessagePerPage(chatId, page) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const User = Users.findOne({ userId: requesterUserId, meetingId });\n\n  const messages = GroupChatMsg.find({ chatId, meetingId, timestamp: { $lt: User.authTokenValidatedTime } },\n    {\n      sort: { timestamp: 1 },\n      skip: page > 0 ? ((page - 1) * ITENS_PER_PAGE) : 0,\n      limit: ITENS_PER_PAGE,\n    })\n    .fetch();\n  return messages;\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport RegexWebUrl from '/imports/utils/regex-weburl';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst HTML_SAFE_MAP = {\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n};\n\nconst parseMessage = (message) => {\n  let parsedMessage = message || '';\n  parsedMessage = parsedMessage.trim();\n\n  // Replace <br/> with \\n\\r\n  parsedMessage = parsedMessage.replace(/<br\\s*[\\\\/]?>/gi, '\\n\\r');\n\n  // Sanitize. See: http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\n  parsedMessage = parsedMessage.replace(/[<>'\"]/g, c => HTML_SAFE_MAP[c]);\n\n  // Replace flash links to flash valid ones\n  parsedMessage = parsedMessage.replace(RegexWebUrl, \"<a href='event:$&'><u>$&</u></a>\");\n\n  return parsedMessage;\n};\n\nexport default function sendGroupChatMsg(chatId, message) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendGroupChatMessageMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(message, Object);\n\n  const parsedMessage = parseMessage(message.message);\n\n  message.message = parsedMessage;\n\n  const payload = {\n    msg: message,\n    chatId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startUserTyping(chatId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserTypingPubMsg';\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(chatId, String);\n\n  const payload = {\n    chatId: chatId || PUBLIC_GROUP_CHAT_ID,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { UsersTyping } from '/imports/api/group-chat-msg';\nimport stopTyping from '../modifiers/stopTyping';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function stopUserTyping() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const userTyping = UsersTyping.findOne({\n    meetingId,\n    userId: requesterUserId,\n  });\n\n  if (userTyping && meetingId && requesterUserId) {\n    stopTyping(meetingId, requesterUserId, true);\n  }\n}\n","import { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport { parseMessage } from './addGroupChatMsg';\n\nexport default async function addBulkGroupChatMsgs(msgs) {\n  if (!msgs.length) return;\n\n  const mappedMsgs = msgs\n    .map(({ chatId, meetingId, msg }) => {\n      const {\n        sender,\n        color,\n        ...restMsg\n      } = msg;\n\n      return {\n        _id: new Mongo.ObjectID()._str,\n        ...restMsg,\n        meetingId,\n        chatId,\n        message: parseMessage(msg.message),\n        sender: sender.id,\n      };\n    })\n    .map(el => flat(el, { safe: true }));\n\n  try {\n    const { insertedCount } = await GroupChatMsg.rawCollection().insertMany(mappedMsgs);\n    msgs.length = 0;\n\n    if (insertedCount) {\n      Logger.info(`Inserted ${insertedCount} messages`);\n    }\n  } catch (err) {\n    Logger.error(`Error on bulk insert. ${err}`);\n  }\n}\n","import flat from 'flat';\nimport { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport { BREAK_LINE } from '/imports/utils/lineEndings';\n\nexport function parseMessage(message) {\n  let parsedMessage = message || '';\n\n  // Replace \\r and \\n to <br/>\n  parsedMessage = parsedMessage.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, `$1${BREAK_LINE}$2`);\n\n  // Replace flash links to html valid ones\n  parsedMessage = parsedMessage.split('<a href=\\'event:').join('<a target=\"_blank\" href=\\'');\n  parsedMessage = parsedMessage.split('<a href=\"event:').join('<a target=\"_blank\" href=\"');\n\n  return parsedMessage;\n}\n\nexport default function addGroupChatMsg(meetingId, chatId, msg) {\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, {\n    id: Match.Maybe(String),\n    timestamp: Number,\n    sender: Object,\n    color: String,\n    message: String,\n    correlationId: Match.Maybe(String),\n  });\n\n  const {\n    color,\n    sender,\n    ...restMsg\n  } = msg;\n\n  const msgDocument = {\n    ...restMsg,\n    sender: sender.id,\n    meetingId,\n    chatId,\n    message: parseMessage(msg.message),\n  };\n\n  try {\n    const insertedId = GroupChatMsg.insert(msgDocument);\n\n    if (insertedId) {\n      Logger.info(`Added group-chat-msg msgId=${msg.id} chatId=${chatId} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on adding group-chat-msg to collection: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport { BREAK_LINE } from '/imports/utils/lineEndings';\n\nexport function parseMessage(message) {\n  let parsedMessage = message || '';\n\n  // Replace \\r and \\n to <br/>\n  parsedMessage = parsedMessage.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, `$1${BREAK_LINE}$2`);\n\n  // Replace flash links to html valid ones\n  parsedMessage = parsedMessage.split('<a href=\\'event:').join('<a target=\"_blank\" href=\\'');\n  parsedMessage = parsedMessage.split('<a href=\"event:').join('<a target=\"_blank\" href=\"');\n\n  return parsedMessage;\n}\n\nexport default function addSystemMsg(meetingId, chatId, msg) {\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, {\n    id: Match.Maybe(String),\n    timestamp: Number,\n    sender: Object,\n    message: String,\n    correlationId: Match.Maybe(String),\n  });\n  const msgDocument = {\n    ...msg,\n    sender: msg.sender.id,\n    meetingId,\n    chatId,\n    message: parseMessage(msg.message),\n  };\n\n  try {\n    const insertedId = GroupChatMsg.insert(msgDocument);\n\n    if (insertedId) {\n      Logger.info(`Added system-msg msgId=${msg.id} chatId=${chatId} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on adding system-msg to collection: ${err}`);\n  }\n}\n","import { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport addGroupChatMsg from '/imports/api/group-chat-msg/server/modifiers/addGroupChatMsg';\n\nexport default function clearGroupChatMsg(meetingId, chatId) {\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_CHAT_SYSTEM_ID = CHAT_CONFIG.system_userid;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const CHAT_CLEAR_MESSAGE = CHAT_CONFIG.system_messages_keys.chat_clear;\n  const SYSTEM_CHAT_TYPE = CHAT_CONFIG.type_system;\n\n  if (chatId) {\n    try {\n      const numberAffected = GroupChatMsg.remove({ meetingId, chatId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GroupChatMsg (${meetingId}, ${chatId})`);\n        const clearMsg = {\n          id: `${SYSTEM_CHAT_TYPE}-${CHAT_CLEAR_MESSAGE}`,\n          color: '0',\n          timestamp: Date.now(),\n          correlationId: `${PUBLIC_CHAT_SYSTEM_ID}-${Date.now()}`,\n          sender: {\n            id: PUBLIC_CHAT_SYSTEM_ID,\n            name: '',\n          },\n          message: CHAT_CLEAR_MESSAGE,\n        };\n        addGroupChatMsg(meetingId, PUBLIC_GROUP_CHAT_ID, clearMsg);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChat (${meetingId}, ${chatId}). ${err}`);\n    }\n    return true;\n  }\n\n  if (meetingId) {\n    try {\n      const numberAffected = GroupChatMsg.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GroupChatMsg (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChatMsg (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = GroupChatMsg.remove({ chatId: { $eq: PUBLIC_GROUP_CHAT_ID } });\n\n      if (numberAffected) {\n        Logger.info('Cleared GroupChatMsg (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChatMsg (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { UsersTyping } from '/imports/api/group-chat-msg';\nimport stopTyping from './stopTyping';\n\nconst TYPING_TIMEOUT = 5000;\n\nexport default function startTyping(meetingId, userId, chatId) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = Users.findOne(selector, { fields: { name: 1, role: 1 } });\n\n  const modifier = {\n    meetingId,\n    userId,\n    name: user.name,\n    isTypingTo: chatId,\n    role: user.role,\n    time: (new Date()),\n  };\n\n  const typingUser = UsersTyping.findOne(selector, {\n    fields: {\n      time: 1,\n    },\n  });\n\n  if (typingUser) {\n    if (modifier.time - typingUser.time <= TYPING_TIMEOUT - 100) return;\n  }\n\n  try {\n    const { numberAffected } = UsersTyping.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Typing indicator update', { userId, chatId });\n      Meteor.setTimeout(() => {\n        stopTyping(meetingId, userId);\n      }, TYPING_TIMEOUT);\n    }\n  } catch (err) {\n    Logger.error(`Typing indicator update error: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { UsersTyping } from '/imports/api/group-chat-msg';\n\nexport default function stopTyping(meetingId, userId, sendMsgInitiated = false) {\n  check(meetingId, String);\n  check(userId, String);\n  check(sendMsgInitiated, Boolean);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = UsersTyping.findOne(selector);\n  const stillTyping = !sendMsgInitiated && user && (new Date()) - user.time < 3000;\n  if (stillTyping) return;\n\n  try {\n    const numberAffected = UsersTyping.remove(selector);\n\n    if (numberAffected) {\n      Logger.debug('Stopped typing indicator', { userId });\n    }\n  } catch (err) {\n    Logger.error(`Stop user=${userId} typing indicator error: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport flat from 'flat';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport { parseMessage } from './addGroupChatMsg';\n\nexport default function syncMeetingChatMsgs(meetingId, chatId, msgs) {\n  if (!msgs.length) return;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msgs, Match.Maybe(Array));\n\n  try {\n    const bulkOperations = GroupChatMsg.rawCollection().initializeOrderedBulkOp();\n\n    msgs\n      .forEach((msg) => {\n        const {\n          sender,\n          color,\n          ...restMsg\n        } = msg;\n\n        const msgToSync = {\n          ...restMsg,\n          meetingId,\n          chatId,\n          message: parseMessage(msg.message),\n          sender: sender.id,\n        };\n\n        const modifier = flat(msgToSync, { safe: true });\n\n        bulkOperations\n          .find({ chatId, meetingId, id: msg.id })\n          .upsert()\n          .updateOne({\n            $setOnInsert: { _id: new Mongo.ObjectID()._str },\n            $set: { ...modifier },\n          });\n      });\n\n    bulkOperations.execute();\n\n    Logger.info('Chat messages synchronized', { chatId, meetingId });\n  } catch (err) {\n    Logger.error(`Error on sync chat messages: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleGroupChatMsgBroadcast from './handlers/groupChatMsgBroadcast';\nimport handleClearPublicGroupChat from './handlers/clearPublicGroupChat';\nimport handleUserTyping from './handlers/userTyping';\nimport handleSyncGroupChatMsg from './handlers/syncGroupsChat';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nRedisPubSub.on('GetGroupChatMsgsRespMsg', processForHTML5ServerOnly(handleSyncGroupChatMsg));\nRedisPubSub.on('GroupChatMessageBroadcastEvtMsg', handleGroupChatMsgBroadcast);\nRedisPubSub.on('ClearPublicChatHistoryEvtMsg', handleClearPublicGroupChat);\nRedisPubSub.on('SyncGetGroupChatMsgsRespMsg', handleSyncGroupChatMsg);\nRedisPubSub.on('UserTypingEvtMsg', handleUserTyping);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport sendGroupChatMsg from './methods/sendGroupChatMsg';\nimport clearPublicChatHistory from './methods/clearPublicChatHistory';\nimport startUserTyping from './methods/startUserTyping';\nimport stopUserTyping from './methods/stopUserTyping';\nimport chatMessageBeforeJoinCounter from './methods/chatMessageBeforeJoinCounter';\nimport fetchMessagePerPage from './methods/fetchMessagePerPage';\n\nMeteor.methods({\n  fetchMessagePerPage,\n  chatMessageBeforeJoinCounter,\n  sendGroupChatMsg,\n  clearPublicChatHistory,\n  startUserTyping,\n  stopUserTyping,\n});\n","import { GroupChatMsg, UsersTyping } from '/imports/api/group-chat-msg';\nimport Users from '/imports/api/users';\nimport { Meteor } from 'meteor/meteor';\n\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction groupChatMsg(chatsIds) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GroupChatMsg was requested by unauth connection ${this.connection.id}`);\n    return GroupChatMsg.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  Logger.debug('Publishing group-chat-msg', { meetingId, userId });\n\n  const User = Users.findOne({ userId });\n  const selector = {\n    timestamp: { $gte: User.authTokenValidatedTime },\n    $or: [\n      { meetingId, chatId: { $eq: PUBLIC_GROUP_CHAT_ID } },\n      { chatId: { $in: chatsIds } },\n    ],\n  };\n  return GroupChatMsg.find(selector);\n}\n\nfunction publish(...args) {\n  const boundGroupChat = groupChatMsg.bind(this);\n  return boundGroupChat(...args);\n}\n\nMeteor.publish('group-chat-msg', publish);\n\nfunction usersTyping() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing users-typing was requested by unauth connection ${this.connection.id}`);\n    return UsersTyping.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing users-typing', { meetingId, userId });\n\n  return UsersTyping.find({ meetingId });\n}\n\nfunction pubishUsersTyping(...args) {\n  const boundUsersTyping = usersTyping.bind(this);\n  return boundUsersTyping(...args);\n}\n\nMeteor.publish('users-typing', pubishUsersTyping);\n","import { Meteor } from 'meteor/meteor';\n\nconst GroupChatMsg = new Mongo.Collection('group-chat-msg');\nconst UsersTyping = new Mongo.Collection('users-typing');\n\nif (Meteor.isServer) {\n  GroupChatMsg._ensureIndex({ meetingId: 1, chatId: 1 });\n  UsersTyping._ensureIndex({ meetingId: 1, isTypingTo: 1 });\n}\n\nexport { GroupChatMsg, UsersTyping };\n","import { check } from 'meteor/check';\nimport setGuestStatus from '../modifiers/setGuestStatus';\n\nexport default function handleGuestApproved({ body }, meetingId) {\n  const { approvedBy, guests } = body;\n  check(meetingId, String);\n  check(approvedBy, String);\n  check(guests, Array);\n\n  return guests.forEach(guest => setGuestStatus(meetingId, guest.guest, guest.status, approvedBy));\n}\n","import { check } from 'meteor/check';\nimport removeGuest from '../modifiers/removeGuest';\n\nexport default function handleGuestWaitingLeft({ body }, meetingId) {\n  const { userId } = body;\n  check(meetingId, String);\n  check(userId, String);\n\n  return removeGuest(meetingId, userId);\n}\n","import stringHash from 'string-hash';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport GuestUsers from '/imports/api/guest-users/';\n\nconst COLOR_LIST = [\n  '#7b1fa2', '#6a1b9a', '#4a148c', '#5e35b1', '#512da8', '#4527a0',\n  '#311b92', '#3949ab', '#303f9f', '#283593', '#1a237e', '#1976d2', '#1565c0',\n  '#0d47a1', '#0277bd', '#01579b',\n];\n\nexport default function handleGuestsWaitingForApproval({ body }, meetingId) {\n  const { guests } = body;\n  check(guests, Array);\n  check(meetingId, String);\n\n  return guests.map((guest) => {\n    try {\n      const { insertedId, numberAffected } = GuestUsers.upsert({\n        meetingId,\n        intId: guest.intId,\n      }, {\n        approved: false,\n        denied: false,\n        ...guest,\n        meetingId,\n        loginTime: guest.registeredOn,\n        color: COLOR_LIST[stringHash(guest.intId) % COLOR_LIST.length],\n      });\n\n      if (insertedId) {\n        Logger.info(`Added guest user meeting=${meetingId}`);\n      } else if (numberAffected) {\n        Logger.info(`Upserted guest user meeting=${meetingId}`);\n      }\n    } catch (err) {\n      Logger.error(`Adding guest user to collection: ${err}`);\n    }\n  });\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'GuestsWaitingApprovedMsg';\n\nexport default function allowPendingUsers(guests, status) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(guests, Array);\n  const mappedGuests = guests.map(guest => ({ status, guest: guest.intId }));\n\n  const payload = {\n    approvedBy: requesterUserId,\n    guests: mappedGuests,\n  };\n\n  Logger.info(`User=${requesterUserId} ${status} guests ${JSON.stringify(mappedGuests)}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'SetGuestPolicyCmdMsg';\n\nexport default function changeGuestPolicy(policyRule) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(policyRule, String);\n\n  const payload = {\n    setBy: requesterUserId,\n    policy: policyRule,\n  };\n\n  Logger.info(`User=${requesterUserId} change guest policy to ${policyRule}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'SetGuestLobbyMessageCmdMsg';\n\nexport default function setGuestLobbyMessage(message) {\n  check(message, String);\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const payload = { message };\n\n  Logger.info(`User=${requesterUserId} set guest lobby message to ${message}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearGuestUsers(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = GuestUsers.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GuestUsers in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing GuestUsers in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = GuestUsers.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared GuestUsers in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GuestUsers in all meetings. ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeGuest(meetingId, intId) {\n  check(meetingId, String);\n  check(intId, String);\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing guest user from collection: ${err}`);\n    }\n\n    return Logger.info(`Removed guest user id=${intId} meetingId=${meetingId}`);\n  };\n\n  return GuestUsers.remove(selector, cb);\n}\n","import { check } from 'meteor/check';\nimport GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nconst GUEST_STATUS_ALLOW = 'ALLOW';\nconst GUEST_STATUS_DENY = 'DENY';\nexport default function setGuestStatus(meetingId, intId, status, approvedBy = null) {\n  check(meetingId, String);\n  check(intId, String);\n  check(status, String);\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      approved: status === GUEST_STATUS_ALLOW,\n      denied: status === GUEST_STATUS_DENY,\n      approvedBy,\n    },\n  };\n\n  try {\n    const numberAffected = GuestUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated status=${status} user=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating status=${status} user=${intId}: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleGuestApproved from './handlers/guestApproved';\nimport handleGuestsWaitingForApproval from './handlers/guestsWaitingForApproval';\nimport handleGuestWaitingLeft from './handlers/guestWaitingLeft';\n\nRedisPubSub.on('GuestWaitingLeftEvtMsg', handleGuestWaitingLeft);\nRedisPubSub.on('GuestsWaitingForApprovalEvtMsg', processForHTML5ServerOnly(handleGuestsWaitingForApproval));\nRedisPubSub.on('GuestsWaitingApprovedEvtMsg', processForHTML5ServerOnly(handleGuestApproved));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport allowPendingUsers from '/imports/api/guest-users/server/methods/allowPendingUsers';\nimport changeGuestPolicy from '/imports/api/guest-users/server/methods/changeGuestPolicy';\nimport setGuestLobbyMessage from '/imports/api/guest-users/server/methods/setGuestLobbyMessage';\n\nMeteor.methods({\n  allowPendingUsers,\n  changeGuestPolicy,\n  setGuestLobbyMessage,\n});\n","import GuestUsers from '/imports/api/guest-users/';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction guestUsers() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GuestUsers was requested by unauth connection ${this.connection.id}`);\n    return GuestUsers.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing GuestUsers for ${meetingId} ${userId}`);\n\n  return GuestUsers.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundSlides = guestUsers.bind(this);\n  return boundSlides(...args);\n}\n\nMeteor.publish('guestUser', publish);\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\n\nconst GuestUsers = new Mongo.Collection('guestUsers');\n\nexport default GuestUsers;\n","import _ from 'lodash';\nimport { check } from 'meteor/check';\nimport LocalSettings from '/imports/api/local-settings';\nimport setChangedLocalSettings from '../modifiers/setChangedLocalSettings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userChangedLocalSettings(settings) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  if (!meetingId || !requesterUserId) return;\n\n  check(settings, Object);\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const userLocalSettings = LocalSettings\n    .findOne({ meetingId, userId: requesterUserId },\n      {\n        fields: { settings: 1 },\n      });\n\n  if (!userLocalSettings || !_.isEqual(userLocalSettings.settings, settings)) {\n    setChangedLocalSettings(meetingId, requesterUserId, settings);\n  }\n}\n","import LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearLocalSettings(meetingId) {\n  try {\n    const numberAffected = LocalSettings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared Local Settings (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing Local Settings (${meetingId}). ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setChangedLocalSettings(meetingId, userId, settings) {\n  check(meetingId, String);\n  check(userId, String);\n  check(settings, Object);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      settings,\n    },\n  };\n\n  try {\n    const { numChanged } = LocalSettings.upsert(selector, modifier);\n\n    if (numChanged) {\n      Logger.info(`Updated settings for user ${userId} on meeting ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on update settings. ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport userChangedLocalSettings from './methods/userChangedLocalSettings';\n\nMeteor.methods({\n  userChangedLocalSettings,\n});\n","import { Meteor } from 'meteor/meteor';\nimport LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction localSettings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing LocalSettings was requested by unauth connection ${this.connection.id}`);\n    return LocalSettings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing local settings', { userId });\n\n  return LocalSettings.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundLocalSettings = localSettings.bind(this);\n  return boundLocalSettings(...args);\n}\n\nMeteor.publish('local-settings', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst LocalSettings = new Mongo.Collection('local-settings');\n\nif (Meteor.isServer) {\n  LocalSettings._ensureIndex({\n    meetingId: 1, userId: 1,\n  });\n}\n\nexport default LocalSettings;\n","import Logger from '/imports/startup/server/logger';\n\nexport default function (type, logDescription, logCode = 'was_not_provided', extraInfo = {}, userInfo = {}) {\n  const connectionId = this.connection.id;\n  const logContents = {\n    logCode,\n    logDescription,\n    connectionId,\n    extraInfo,\n    userInfo,\n  };\n\n  // If I don't pass message, logs will start with `undefined`\n  Logger.log({ message: JSON.stringify(logContents), level: type });\n}\n","import './methods';\n","import { Meteor } from 'meteor/meteor';\nimport logClient from './methods/logClient';\n\nMeteor.methods({ logClient });\n","import handleMeetingCreation from './meetingCreation';\n\nexport default function handleGetAllMeetings({ body }) {\n  return handleMeetingCreation({ body });\n}\n","import setGuestLobbyMessage from '../modifiers/setGuestLobbyMessage';\nimport { check } from 'meteor/check';\n\nexport default function handleGuestLobbyMessageChanged({ body }, meetingId) {\n  const { message } = body;\n\n  check(meetingId, String);\n  check(message, String);\n\n  return setGuestLobbyMessage(meetingId, message);\n}\n","import setGuestPolicy from '../modifiers/setGuestPolicy';\nimport { check } from 'meteor/check';\n\nexport default function handleGuestPolicyChanged({ body }, meetingId) {\n  const { policy } = body;\n\n  check(meetingId, String);\n  check(policy, String);\n\n\n  return setGuestPolicy(meetingId, policy);\n}\n","import { check } from 'meteor/check';\nimport addMeeting from '../modifiers/addMeeting';\n\nexport default function handleMeetingCreation({ body }) {\n  const meeting = body.props;\n  const durationInSecods = (meeting.durationProps.duration * 60);\n  meeting.durationProps.timeRemaining = durationInSecods;\n  check(meeting, Object);\n\n  return addMeeting(meeting);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\n\nimport { removeAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { removeCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport { removeExternalVideoStreamer } from '/imports/api/external-videos/server/streamer';\n\nexport default function handleMeetingDestruction({ body }) {\n  check(body, Object);\n  const { meetingId } = body;\n  check(meetingId, String);\n\n  if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n    removeAnnotationsStreamer(meetingId);\n    removeCursorStreamer(meetingId);\n    removeExternalVideoStreamer(meetingId);\n  }\n\n  return RedisPubSub.destroyMeetingQueue(meetingId);\n}\n","import { check } from 'meteor/check';\nimport meetingHasEnded from '../modifiers/meetingHasEnded';\nimport Meetings from '/imports/api/meetings';\nimport Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleMeetingEnd({ header, body }) {\n  check(body, Object);\n  const { meetingId } = body;\n  check(meetingId, String);\n\n  check(header, Object);\n  const { userId } = header;\n  check(userId, String);\n\n  const cb = (err, num, meetingType) => {\n    if (err) {\n      Logger.error(`${meetingType} ending error: ${err}`);\n      return;\n    }\n    if (num) {\n      Meteor.setTimeout(() => { meetingHasEnded(meetingId); }, 10000);\n    }\n  };\n\n  Meetings.update({ meetingId },\n    { $set: { meetingEnded: true, meetingEndedBy: userId } },\n    (err, num) => { cb(err, num, 'Meeting'); });\n\n  Breakouts.update({ parentMeetingId: meetingId },\n    { $set: { meetingEnded: true } },\n    (err, num) => { cb(err, num, 'Breakout'); });\n}\n","import changeLockSettings from '../modifiers/changeLockSettings';\n\nexport default function handleLockSettingsInMeeting({ body }, meetingId) {\n  changeLockSettings(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleRecordingStatusChange({ body }, meetingId) {\n  const { recording } = body;\n  check(recording, Boolean);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: { recording },\n  };\n\n  try {\n    const { numberAffected } = RecordMeetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting record status id=${meetingId} recording=${recording}`);\n    }\n  } catch (err) {\n    Logger.error(`Changing record status: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleRecordingTimerChange({ body }, meetingId) {\n  const { time } = body;\n\n  check(meetingId, String);\n\n  check(body, {\n    time: Number,\n  });\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: { time },\n  };\n\n  try {\n    RecordMeetings.upsert(selector, modifier);\n  } catch (err) {\n    Logger.error(`Changing recording time: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport updateRandomViewer from '../modifiers/updateRandomViewer';\n\nexport default function randomlySelectedUser({ header, body }) {\n  const { userIds, choice, requestedBy } = body;\n  const { meetingId } = header;\n\n  check(meetingId, String);\n  check(requestedBy, String);\n  check(userIds, Array);\n  check(choice, Number);\n\n  updateRandomViewer(meetingId, userIds, choice, requestedBy);\n}\n","import { check } from 'meteor/check';\nimport { MeetingTimeRemaining } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleTimeRemainingUpdate({ body }, meetingId) {\n  check(meetingId, String);\n\n  check(body, {\n    timeLeftInSec: Number,\n  });\n  const { timeLeftInSec } = body;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      timeRemaining: timeLeftInSec,\n    },\n  };\n\n  try {\n    MeetingTimeRemaining.upsert(selector, modifier);\n  } catch (err) {\n    Logger.error(`Changing recording time: ${err}`);\n  }\n}\n","import changeUserLock from '../modifiers/changeUserLock';\n\nexport default function handleLockSettingsInMeeting({ body }, meetingId) {\n  changeUserLock(meetingId, body);\n}\n","import changeWebcamOnlyModerator from '../modifiers/webcamOnlyModerator';\n\nexport default function handleChangeWebcamOnlyModerator({ body }, meetingId) {\n  changeWebcamOnlyModerator(meetingId, body);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function clearRandomlySelectedUser() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      randomlySelectedUser: [],\n    },\n  };\n\n  try {\n    const { insertedId } = Meetings.update(selector, modifier);\n    if (insertedId) {\n      Logger.info(`Cleared randomly selected user from meeting=${meetingId} by id=${requesterUserId}`);\n    }\n  } catch (err) {\n    Logger.error(`Clearing randomly selected user : ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function endMeeting() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'LogoutAndEndMeetingCmdMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const payload = {\n    userId: requesterUserId,\n  };\n  Logger.warn(`Meeting '${meetingId}' is destroyed by '${requesterUserId}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function toggleLockSettings(lockSettingsProps) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeLockSettingsInMeetingCmdMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(lockSettingsProps, {\n    disableCam: Boolean,\n    disableMic: Boolean,\n    disablePrivateChat: Boolean,\n    disablePublicChat: Boolean,\n    disableNote: Boolean,\n    hideUserList: Boolean,\n    lockedLayout: Boolean,\n    lockOnJoin: Boolean,\n    lockOnJoinConfigurable: Boolean,\n    setBy: Match.Maybe(String),\n  });\n\n  const {\n    disableCam,\n    disableMic,\n    disablePrivateChat: disablePrivChat,\n    disablePublicChat: disablePubChat,\n    disableNote,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n  } = lockSettingsProps;\n\n  const payload = {\n    disableCam,\n    disableMic,\n    disablePrivChat,\n    disablePubChat,\n    disableNote,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n    setBy: requesterUserId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function toggleRecording() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const EVENT_NAME = 'SetRecordingStatusCmdMsg';\n\n  let meetingRecorded;\n  let allowedToRecord;\n\n  const recordObject = RecordMeetings.findOne({ meetingId });\n\n  if (recordObject != null) {\n    const {\n      allowStartStopRecording,\n      recording,\n      record,\n    } = recordObject;\n\n    meetingRecorded = recording;\n    allowedToRecord = record && allowStartStopRecording; // TODO-- remove some day\n  }\n\n  const payload = {\n    recording: !meetingRecorded,\n    setBy: requesterUserId,\n  };\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n  };\n  const user = Users.findOne(selector);\n\n  if (allowedToRecord && !!user && user.role === ROLE_MODERATOR) {\n    Logger.info(`Setting the record parameter to ${!meetingRecorded} for ${meetingId} by ${requesterUserId}`);\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  }\n  return null;\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '../../../common/server/helpers';\n\nexport default function toggleWebcamsOnlyForModerator(webcamsOnlyForModerator) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateWebcamsOnlyForModeratorCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(webcamsOnlyForModerator, Boolean);\n\n  const payload = {\n    webcamsOnlyForModerator,\n    setBy: requesterUserId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function transferUser(fromMeetingId, toMeetingId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'TransferUserToMeetingRequestMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const payload = {\n    fromMeetingId,\n    toMeetingId,\n    userId: requesterUserId,\n  };\n\n  Logger.verbose('User was transferred from one meting to another', { requesterUserId, fromMeetingId, toMeetingId });\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import flat from 'flat';\nimport {\n  check,\n  Match,\n} from 'meteor/check';\nimport SanitizeHTML from 'sanitize-html';\nimport Meetings, { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { initPads } from '/imports/api/common/server/etherpad';\nimport { addAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { addCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport { addExternalVideoStreamer } from '/imports/api/external-videos/server/streamer';\n\nexport default function addMeeting(meeting) {\n  const meetingId = meeting.meetingProp.intId;\n\n  check(meetingId, String);\n  check(meeting, {\n    breakoutProps: {\n      sequence: Number,\n      freeJoin: Boolean,\n      breakoutRooms: Array,\n      parentId: String,\n      enabled: Boolean,\n      record: Boolean,\n      privateChatEnabled: Boolean,\n    },\n    meetingProp: {\n      intId: String,\n      extId: String,\n      isBreakout: Boolean,\n      name: String,\n    },\n    usersProp: {\n      webcamsOnlyForModerator: Boolean,\n      guestPolicy: String,\n      authenticatedGuest: Boolean,\n      maxUsers: Number,\n      allowModsToUnmuteUsers: Boolean,\n    },\n    durationProps: {\n      createdTime: Number,\n      duration: Number,\n      createdDate: String,\n      meetingExpireIfNoUserJoinedInMinutes: Number,\n      meetingExpireWhenLastUserLeftInMinutes: Number,\n      userInactivityInspectTimerInMinutes: Number,\n      userInactivityThresholdInMinutes: Number,\n      userActivitySignResponseDelayInMinutes: Number,\n      timeRemaining: Number,\n    },\n    welcomeProp: {\n      welcomeMsg: String,\n      modOnlyMessage: String,\n      welcomeMsgTemplate: String,\n    },\n    recordProp: Match.ObjectIncluding({\n      allowStartStopRecording: Boolean,\n      autoStartRecording: Boolean,\n      record: Boolean,\n    }),\n    password: {\n      viewerPass: String,\n      moderatorPass: String,\n    },\n    voiceProp: {\n      voiceConf: String,\n      dialNumber: String,\n      telVoice: String,\n      muteOnStart: Boolean,\n    },\n    screenshareProps: {\n      red5ScreenshareIp: String,\n      red5ScreenshareApp: String,\n      screenshareConf: String,\n    },\n    metadataProp: Object,\n    lockSettingsProps: {\n      disableCam: Boolean,\n      disableMic: Boolean,\n      disablePrivateChat: Boolean,\n      disablePublicChat: Boolean,\n      disableNote: Boolean,\n      hideUserList: Boolean,\n      lockOnJoin: Boolean,\n      lockOnJoinConfigurable: Boolean,\n      lockedLayout: Boolean,\n    },\n    systemProps: {\n      html5InstanceId: Number,\n    },\n  });\n\n  const {\n    recordProp,\n    ...restProps\n  } = meeting;\n\n  const newMeeting = restProps;\n\n  const selector = {\n    meetingId,\n  };\n\n  newMeeting.lockSettingsProps = Object.assign(meeting.lockSettingsProps, { setBy: 'temp' });\n\n  const meetingEnded = false;\n\n  let { welcomeMsg } = newMeeting.welcomeProp;\n\n  const sanitizeTextInChat = original => SanitizeHTML(original, {\n    allowedTags: ['a', 'b', 'br', 'i', 'img', 'li', 'small', 'span', 'strong', 'u', 'ul'],\n    allowedAttributes: {\n      a: ['href', 'name', 'target'],\n      img: ['src', 'width', 'height'],\n    },\n    allowedSchemes: ['https'],\n  });\n\n  const sanitizedWelcomeText = sanitizeTextInChat(welcomeMsg);\n  welcomeMsg = sanitizedWelcomeText.replace(\n    'href=\"event:',\n    'href=\"',\n  );\n\n  const insertBlankTarget = (s, i) => `${s.substr(0, i)} target=\"_blank\"${s.substr(i)}`;\n  const linkWithoutTarget = new RegExp('<a href=\"(.*?)\">', 'g');\n  linkWithoutTarget.test(welcomeMsg);\n\n  if (linkWithoutTarget.lastIndex > 0) {\n    welcomeMsg = insertBlankTarget(\n      welcomeMsg,\n      linkWithoutTarget.lastIndex - 1,\n    );\n  }\n\n  newMeeting.welcomeProp.welcomeMsg = welcomeMsg;\n\n  // note: as of July 2020 `modOnlyMessage` is not published to the client side.\n  // We are sanitizing this data simply to prevent future potential usage\n  // At the moment `modOnlyMessage` is obtained from client side as a response to Enter API\n  newMeeting.welcomeProp.modOnlyMessage = sanitizeTextInChat(newMeeting.welcomeProp.modOnlyMessage);\n\n  const modifier = {\n    $set: Object.assign({\n      meetingId,\n      meetingEnded,\n      publishedPoll: false,\n      guestLobbyMessage: '',\n      randomlySelectedUser: [],\n    }, flat(newMeeting, {\n      safe: true,\n    })),\n  };\n\n  if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n    addAnnotationsStreamer(meetingId);\n    addCursorStreamer(meetingId);\n    addExternalVideoStreamer(meetingId);\n\n    // we don't want to fully process the create meeting message in frontend since it can lead to duplication of meetings in mongo.\n    if (process.env.BBB_HTML5_ROLE === 'frontend') {\n      return;\n    }\n  }\n\n  try {\n    const { insertedId, numberAffected } = RecordMeetings.upsert(selector, { meetingId, ...recordProp });\n\n    if (insertedId) {\n      Logger.info(`Added record prop id=${meetingId}`);\n    } else if (numberAffected) {\n      Logger.info(`Upserted record prop id=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding record prop to collection: ${err}`);\n  }\n\n  try {\n    const { insertedId, numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added meeting id=${meetingId}`);\n\n      const { html5InstanceId } = meeting.systemProps;\n      initPads(meetingId, html5InstanceId);\n    } else if (numberAffected) {\n      Logger.info(`Upserted meeting id=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding meeting to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\n\nexport default function changeLockSettings(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    disableCam: Boolean,\n    disableMic: Boolean,\n    disablePrivChat: Boolean,\n    disablePubChat: Boolean,\n    disableNote: Boolean,\n    hideUserList: Boolean,\n    lockedLayout: Boolean,\n    lockOnJoin: Boolean,\n    lockOnJoinConfigurable: Boolean,\n    setBy: Match.Maybe(String),\n  });\n\n  const {\n    disableCam,\n    disableMic,\n    disablePrivChat,\n    disablePubChat,\n    disableNote,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n    setBy,\n  } = payload;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      lockSettingsProps: {\n        disableCam,\n        disableMic,\n        disablePrivateChat: disablePrivChat,\n        disablePublicChat: disablePubChat,\n        disableNote,\n        hideUserList,\n        lockedLayout,\n        lockOnJoin,\n        lockOnJoinConfigurable,\n        setBy,\n      },\n    },\n  };\n\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting={${meetingId}} updated lock settings`);\n    } else {\n      Logger.info(`meeting={${meetingId}} lock settings were not updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changing meeting={${meetingId}} lock settings: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { check } from 'meteor/check';\n\nexport default function changeUserLock(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    userId: String,\n    locked: Boolean,\n    lockedBy: String,\n  });\n\n  const { userId, locked, lockedBy } = payload;\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      locked,\n    },\n  };\n\n  try {\n    const { numberAffected } = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`User's userId=${userId} lock status was changed to: ${locked} by user userId=${lockedBy}`);\n    } else {\n      Logger.info(`User's userId=${userId} lock status wasn't updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changing user lock setting: ${err}`);\n  }\n}\n","import { MeetingTimeRemaining } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearMeetingTimeRemaining(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = MeetingTimeRemaining.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared MeetingTimeRemaining in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing MeetingTimeRemaining in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = MeetingTimeRemaining.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared MeetingTimeRemaining in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing MeetingTimeRemaining in all meetings. ${err}`);\n    }\n  }\n}\n","import { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function meetingHasEnded(meetingId) {\n  try {\n    const numberAffected = RecordMeetings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared record prop from meeting with id ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing record prop from meeting with id ${meetingId}. ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nimport { removeAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { removeCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport { removeExternalVideoStreamer } from '/imports/api/external-videos/server/streamer';\n\nimport clearUsers from '/imports/api/users/server/modifiers/clearUsers';\nimport clearUsersSettings from '/imports/api/users-settings/server/modifiers/clearUsersSettings';\nimport clearGroupChat from '/imports/api/group-chat/server/modifiers/clearGroupChat';\nimport clearGuestUsers from '/imports/api/guest-users/server/modifiers/clearGuestUsers';\nimport clearBreakouts from '/imports/api/breakouts/server/modifiers/clearBreakouts';\nimport clearAnnotations from '/imports/api/annotations/server/modifiers/clearAnnotations';\nimport clearSlides from '/imports/api/slides/server/modifiers/clearSlides';\nimport clearPolls from '/imports/api/polls/server/modifiers/clearPolls';\nimport clearCaptions from '/imports/api/captions/server/modifiers/clearCaptions';\nimport clearPresentationPods from '/imports/api/presentation-pods/server/modifiers/clearPresentationPods';\nimport clearVoiceUsers from '/imports/api/voice-users/server/modifiers/clearVoiceUsers';\nimport clearUserInfo from '/imports/api/users-infos/server/modifiers/clearUserInfo';\nimport clearConnectionStatus from '/imports/api/connection-status/server/modifiers/clearConnectionStatus';\nimport clearScreenshare from '/imports/api/screenshare/server/modifiers/clearScreenshare';\nimport clearNote from '/imports/api/note/server/modifiers/clearNote';\nimport clearNetworkInformation from '/imports/api/network-information/server/modifiers/clearNetworkInformation';\nimport clearMeetingTimeRemaining from '/imports/api/meetings/server/modifiers/clearMeetingTimeRemaining';\nimport clearLocalSettings from '/imports/api/local-settings/server/modifiers/clearLocalSettings';\nimport clearRecordMeeting from './clearRecordMeeting';\nimport clearVoiceCallStates from '/imports/api/voice-call-states/server/modifiers/clearVoiceCallStates';\nimport clearVideoStreams from '/imports/api/video-streams/server/modifiers/clearVideoStreams';\nimport clearAuthTokenValidation from '/imports/api/auth-token-validation/server/modifiers/clearAuthTokenValidation';\nimport clearUsersPersistentData from '/imports/api/users-persistent-data/server/modifiers/clearUsersPersistentData';\n\nimport clearWhiteboardMultiUser from '/imports/api/whiteboard-multi-user/server/modifiers/clearWhiteboardMultiUser';\nimport Metrics from '/imports/startup/server/metrics';\n\nexport default function meetingHasEnded(meetingId) {\n  if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n    removeAnnotationsStreamer(meetingId);\n    removeCursorStreamer(meetingId);\n    removeExternalVideoStreamer(meetingId);\n  }\n\n  return Meetings.remove({ meetingId }, () => {\n    clearCaptions(meetingId);\n    clearGroupChat(meetingId);\n    clearGuestUsers(meetingId);\n    clearPresentationPods(meetingId);\n    clearBreakouts(meetingId);\n    clearPolls(meetingId);\n    clearAnnotations(meetingId);\n    clearSlides(meetingId);\n    clearUsers(meetingId);\n    clearUsersSettings(meetingId);\n    clearVoiceUsers(meetingId);\n    clearUserInfo(meetingId);\n    clearConnectionStatus(meetingId);\n    clearNote(meetingId);\n    clearNetworkInformation(meetingId);\n    clearLocalSettings(meetingId);\n    clearMeetingTimeRemaining(meetingId);\n    clearRecordMeeting(meetingId);\n    clearVoiceCallStates(meetingId);\n    clearVideoStreams(meetingId);\n    clearAuthTokenValidation(meetingId);\n    clearWhiteboardMultiUser(meetingId);\n    clearScreenshare(meetingId);\n    clearUsersPersistentData(meetingId);\n    Metrics.removeMeeting(meetingId);\n\n    Logger.info(`Cleared Meetings with id ${meetingId}`);\n  });\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setGuestLobbyMessage(meetingId, guestLobbyMessage) {\n  check(meetingId, String);\n  check(guestLobbyMessage, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      guestLobbyMessage,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Set guest lobby message meetingId=${meetingId} guestLobbyMessage=${guestLobbyMessage}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting guest lobby message: ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setGuestPolicy(meetingId, guestPolicy) {\n  check(meetingId, String);\n  check(guestPolicy, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'usersProp.guestPolicy': guestPolicy,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Set guest policy meetingId=${meetingId} guestPolicy=${guestPolicy}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting guest policy: ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setPublishedPoll(meetingId, isPublished) {\n  check(meetingId, String);\n  check(isPublished, Boolean);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      publishedPoll: isPublished,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set publishedPoll=${isPublished} in meeitingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting publishedPoll=${isPublished} for meetingId=${meetingId}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateRandomUser(meetingId, userIds, choice, requesterId) {\n  check(meetingId, String);\n  check(userIds, Array);\n  check(choice, Number);\n  check(requesterId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const userList = [];\n  if (choice < 0) { // no viewer\n    userList.push([requesterId,0]);\n  } else if (userIds.length == 1) {\n    userList.push([userIds[0],0]);\n  } else {\n    const intervals = [0, 200, 450, 750, 1100, 1500];\n    while (intervals.length > 0) {\n      const userId = userIds[Math.floor(Math.random() * userIds.length )];\n      if (userList.length != 0 && userList[userList.length-1][0] == userId) {// prevent same viewer from being selected sequentially\n        continue;\n      }\n      userList.push([userId, intervals.shift()]);\n    }\n    userList[userList.length-1][0] = userIds[choice]; // last one should be chosen in akka-app\n  }\n\n  if (userIds.length == 2) {\n    // I don't like this.. When the userList is same as previous one, we need to change it a bit to make sure that clients does not skip the change in MongoDB\n    const previousMeeting = Meetings.findOne(selector, { fields: {randomlySelectedUser:1}});\n    if (previousMeeting.randomlySelectedUser.length != 0 && userList[0][0] == previousMeeting.randomlySelectedUser[0][0]) {\n      userList[0][0] = userList[1][0];\n    }\n  }\n\n  const modifier = {\n    $set: {\n      randomlySelectedUser: userList,\n    },\n  };\n\n  try {\n    const { insertedId } = Meetings.upsert(selector, modifier);\n    if (insertedId) {\n      Logger.info(`Set randomly selected userId and interval = ${userList} by requesterId=${requesterId} in meeitingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting randomly selected userId and interval = ${userList} by requesterId=${requesterId} in meetingId=${meetingId}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\n\nexport default function changeWebcamOnlyModerator(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    webcamsOnlyForModerator: Boolean,\n    setBy: String,\n  });\n  const { webcamsOnlyForModerator } = payload;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'usersProp.webcamsOnlyForModerator': webcamsOnlyForModerator,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting={${meetingId}} updated webcam Only for Moderator`);\n    } else {\n      Logger.info(`meeting={${meetingId}} webcam Only for Moderator were not updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changwing meeting={${meetingId}} webcam Only for Moderator: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleMeetingCreation from './handlers/meetingCreation';\nimport handleGetAllMeetings from './handlers/getAllMeetings';\nimport handleMeetingEnd from './handlers/meetingEnd';\nimport handleMeetingDestruction from './handlers/meetingDestruction';\nimport handleMeetingLocksChange from './handlers/meetingLockChange';\nimport handleGuestPolicyChanged from './handlers/guestPolicyChanged';\nimport handleGuestLobbyMessageChanged from './handlers/guestLobbyMessageChanged';\nimport handleUserLockChange from './handlers/userLockChange';\nimport handleRecordingStatusChange from './handlers/recordingStatusChange';\nimport handleRecordingTimerChange from './handlers/recordingTimerChange';\nimport handleTimeRemainingUpdate from './handlers/timeRemainingUpdate';\nimport handleChangeWebcamOnlyModerator from './handlers/webcamOnlyModerator';\nimport handleSelectRandomViewer from './handlers/selectRandomViewer';\n\nRedisPubSub.on('MeetingCreatedEvtMsg', handleMeetingCreation);\nRedisPubSub.on('SyncGetMeetingInfoRespMsg', handleGetAllMeetings);\nRedisPubSub.on('MeetingEndingEvtMsg', handleMeetingEnd);\nRedisPubSub.on('MeetingDestroyedEvtMsg', handleMeetingDestruction);\nRedisPubSub.on('LockSettingsInMeetingChangedEvtMsg', handleMeetingLocksChange);\nRedisPubSub.on('UserLockedInMeetingEvtMsg', handleUserLockChange);\nRedisPubSub.on('RecordingStatusChangedEvtMsg', handleRecordingStatusChange);\nRedisPubSub.on('UpdateRecordingTimerEvtMsg', handleRecordingTimerChange);\nRedisPubSub.on('WebcamsOnlyForModeratorChangedEvtMsg', handleChangeWebcamOnlyModerator);\nRedisPubSub.on('GetLockSettingsRespMsg', handleMeetingLocksChange);\nRedisPubSub.on('GuestPolicyChangedEvtMsg', handleGuestPolicyChanged);\nRedisPubSub.on('GuestLobbyMessageChangedEvtMsg', handleGuestLobbyMessageChanged);\nRedisPubSub.on('MeetingTimeRemainingUpdateEvtMsg', handleTimeRemainingUpdate);\nRedisPubSub.on('SelectRandomViewerRespMsg', handleSelectRandomViewer);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport endMeeting from './methods/endMeeting';\nimport toggleRecording from './methods/toggleRecording';\nimport transferUser from './methods/transferUser';\nimport toggleLockSettings from './methods/toggleLockSettings';\nimport toggleWebcamsOnlyForModerator from './methods/toggleWebcamsOnlyForModerator';\nimport clearRandomlySelectedUser from './methods/clearRandomlySelectedUser';\n\nMeteor.methods({\n  endMeeting,\n  toggleRecording,\n  toggleLockSettings,\n  transferUser,\n  toggleWebcamsOnlyForModerator,\n  clearRandomlySelectedUser,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Meetings, { RecordMeetings, MeetingTimeRemaining } from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction meetings(role) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Meetings was requested by unauth connection ${this.connection.id}`);\n    return Meetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing meeting', { meetingId, userId });\n\n  const selector = {\n    $or: [\n      { meetingId },\n    ],\n  };\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    selector.$or.push({\n      'meetingProp.isBreakout': true,\n      'breakoutProps.parentId': meetingId,\n    });\n  }\n\n  const options = {\n    fields: {\n      password: false,\n      'welcomeProp.modOnlyMessage': false,\n    },\n  };\n\n  return Meetings.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundMeetings = meetings.bind(this);\n  return boundMeetings(...args);\n}\n\nMeteor.publish('meetings', publish);\n\nfunction recordMeetings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing RecordMeetings was requested by unauth connection ${this.connection.id}`);\n    return RecordMeetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing RecordMeetings for ${meetingId} ${userId}`);\n\n  return RecordMeetings.find({ meetingId });\n}\nfunction recordPublish(...args) {\n  const boundRecordMeetings = recordMeetings.bind(this);\n  return boundRecordMeetings(...args);\n}\n\nMeteor.publish('record-meetings', recordPublish);\n\nfunction meetingTimeRemaining() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing MeetingTimeRemaining was requested by unauth connection ${this.connection.id}`);\n    return MeetingTimeRemaining.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug(`Publishing MeetingTimeRemaining for ${meetingId} ${userId}`);\n\n  return MeetingTimeRemaining.find({ meetingId });\n}\nfunction timeRemainingPublish(...args) {\n  const boundtimeRemaining = meetingTimeRemaining.bind(this);\n  return boundtimeRemaining(...args);\n}\n\nMeteor.publish('meeting-time-remaining', timeRemainingPublish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Meetings = new Mongo.Collection('meetings');\nconst RecordMeetings = new Mongo.Collection('record-meetings');\nconst MeetingTimeRemaining = new Mongo.Collection('meeting-time-remaining');\n\nif (Meteor.isServer) {\n  // types of queries for the meetings:\n  // 1. meetingId\n\n  Meetings._ensureIndex({ meetingId: 1 });\n  RecordMeetings._ensureIndex({ meetingId: 1 });\n  MeetingTimeRemaining._ensureIndex({ meetingId: 1 });\n}\n\nexport {\n  RecordMeetings,\n  MeetingTimeRemaining,\n};\nexport default Meetings;\n","import { check } from 'meteor/check';\nimport NetworkInformation from '/imports/api/network-information';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userInstabilityDetected(sender) {\n  const { meetingId, requesterUserId: receiver } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(receiver, String);\n  check(sender, String);\n\n  const payload = {\n    time: new Date().getTime(),\n    meetingId,\n    receiver,\n    sender,\n  };\n\n  Logger.debug('Receiver reported a network instability', { receiver, meetingId });\n\n  return NetworkInformation.insert(payload);\n}\n","import NetworkInformation from '/imports/api/network-information';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearNetworkInformation(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = NetworkInformation.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Network Information (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Network Information (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = NetworkInformation.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Network Information (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Network Information (all). ${err}`);\n    }\n  }\n}\n","import './methods';\nimport './publisher';\n","import { Meteor } from 'meteor/meteor';\nimport userInstabilityDetected from './methods/userInstabilityDetected';\n\nMeteor.methods({\n  userInstabilityDetected,\n});\n","import { Meteor } from 'meteor/meteor';\nimport NetworkInformation from '/imports/api/network-information';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\n\nfunction networkInformation() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing NetworkInformation was requested by unauth connection ${this.connection.id}`);\n    return NetworkInformation.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing NetworkInformation for ${meetingId} ${userId}`);\n  return NetworkInformation.find({\n    meetingId,\n  });\n}\n\nfunction publish(...args) {\n  const boundNetworkInformation = networkInformation.bind(this);\n\n  return boundNetworkInformation(...args);\n}\n\nMeteor.publish('network-information', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst NetworkInformation = new Mongo.Collection('network-information');\n\nif (Meteor.isServer) {\n  NetworkInformation._ensureIndex({ meetingId: 1 });\n}\n\nexport default NetworkInformation;\n","import { check } from 'meteor/check';\nimport updateNote from '/imports/api/note/server/modifiers/updateNote';\n\nexport default function handlePadUpdate({ body }) {\n  const { pad, revs } = body;\n  const { id } = pad;\n\n  check(id, String);\n  check(revs, Number);\n\n  updateNote(id, revs);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function addPad(meetingId, padId, readOnlyId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'AddPadSysMsg';\n\n  check(meetingId, String);\n  check(padId, String);\n  check(readOnlyId, String);\n\n  const payload = {\n    padId,\n    readOnlyId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, 'nodeJSapp', payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  createPadURL,\n  getReadOnlyIdURL,\n  withInstaceId,\n} from '/imports/api/common/server/etherpad';\nimport {\n  generatePadId,\n  isEnabled,\n  getDataFromResponse,\n} from '/imports/api/note/server/helpers';\nimport addNote from '/imports/api/note/server/modifiers/addNote';\nimport axios from 'axios';\n\nexport default function createNote(meetingId, instanceId) {\n  // Avoid note creation if this feature is disabled\n  if (!isEnabled()) {\n    Logger.warn(`Shared notes are disabled`);\n    return;\n  }\n\n  check(meetingId, String);\n  check(instanceId, Number);\n\n  const noteId = withInstaceId(instanceId, generatePadId(meetingId));\n\n  const createURL = createPadURL(noteId);\n\n  axios({\n    method: 'get',\n    url: createURL,\n    responseType: 'json',\n  }).then((responseOuter) => {\n    const { status } = responseOuter;\n    if (status !== 200) {\n      Logger.error(`Could not get note info for ${meetingId} ${status}`);\n      return;\n    }\n    const readOnlyURL = getReadOnlyIdURL(noteId);\n    axios({\n      method: 'get',\n      url: readOnlyURL,\n      responseType: 'json',\n    }).then((response) => {\n      const readOnlyNoteId = getDataFromResponse(response.data, 'readOnlyID');\n      if (readOnlyNoteId) {\n        addNote(meetingId, noteId, readOnlyNoteId);\n      } else {\n        Logger.error(`Could not get note readOnlyID for ${meetingId}`);\n      }\n    }).catch(error => Logger.error(`Could not get note readOnlyID for ${meetingId}: ${error}`));\n  }).catch(error => Logger.error(`Could not create note for ${meetingId}: ${error}`));\n}\n","import { check } from 'meteor/check';\nimport Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\nimport addPad from '/imports/api/note/server/methods/addPad';\n\nexport default function addNote(meetingId, noteId, readOnlyNoteId) {\n  check(meetingId, String);\n  check(noteId, String);\n  check(readOnlyNoteId, String);\n\n  const selector = {\n    meetingId,\n    noteId,\n  };\n\n  const modifier = {\n    meetingId,\n    noteId,\n    readOnlyNoteId,\n    revs: 0,\n  };\n\n  try {\n    const { insertedId } = Note.upsert(selector, modifier);\n\n    if (insertedId) {\n      addPad(meetingId, noteId, readOnlyNoteId);\n      Logger.info(`Added note id=${noteId} readOnlyId=${readOnlyNoteId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted note id=${noteId} readOnlyId=${readOnlyNoteId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding note to the collection: ${err}`);\n  }\n}\n","import Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearNote(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Note.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Note (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Note (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Note.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Note (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Note (all). ${err}`);\n    }\n  }\n}\n","import Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateNote(noteId, revs) {\n  check(noteId, String);\n  check(revs, Number);\n\n  const selector = {\n    noteId,\n  };\n\n  const modifier = {\n    $set: {\n      revs,\n    },\n  };\n\n  try {\n    const numberAffected = Note.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      Logger.verbose('Notes: update note pad', { pad: noteId, revs });\n    }\n  } catch (err) {\n    Logger.error('Notes: error when updating note pad', { err });\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForNotePadOnly } from '/imports/api/note/server/helpers';\nimport handlePadUpdate from './handlers/padUpdate';\n\nRedisPubSub.on('PadUpdateSysMsg', processForNotePadOnly(handlePadUpdate));\n","import { Meteor } from 'meteor/meteor';\nimport { hashSHA1 } from '/imports/api/common/server/etherpad';\n\nconst ETHERPAD = Meteor.settings.private.etherpad;\nconst NOTE_CONFIG = Meteor.settings.public.note;\nconst TOKEN = '_';\n\nconst isEnabled = () => NOTE_CONFIG.enabled;\n\nconst getDataFromResponse = (data, key) => {\n  if (data) {\n    const innerData = data.data;\n    if (innerData && innerData[key]) {\n      return innerData[key];\n    }\n  }\n  return null;\n};\n\nconst isNotePad = padId => padId.search(TOKEN);\n\nconst processForNotePadOnly = fn => (message, ...args) => {\n  const { body } = message;\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  if (isNotePad(id)) return fn(message, ...args);\n  return () => { };\n};\n\nconst generatePadId = meetingId => hashSHA1(meetingId + ETHERPAD.apikey);\n\nexport {\n  generatePadId,\n  isEnabled,\n  getDataFromResponse,\n  processForNotePadOnly,\n};\n","import './publishers';\nimport './eventHandlers';\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Note from '/imports/api/note';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction note() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Note was requested by unauth connection ${this.connection.id}`);\n    return Note.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.info(`Publishing Note for ${meetingId} ${userId}`);\n\n  return Note.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundNote = note.bind(this);\n  return boundNote(...args);\n}\n\nMeteor.publish('note', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Note = new Mongo.Collection('note');\n\nif (Meteor.isServer) {\n  Note._ensureIndex({ meetingId: 1, noteId: 1 });\n}\n\nexport default Note;\n","import { check } from 'meteor/check';\nimport setPublishedPoll from '../../../meetings/server/modifiers/setPublishedPoll';\n\nexport default function pollPublished({ body }, meetingId) {\n  const { pollId } = body;\n\n  check(meetingId, String);\n  check(pollId, String);\n\n  setPublishedPoll(meetingId, true);\n}\n","import { check } from 'meteor/check';\nimport addPoll from '../modifiers/addPoll';\nimport setPublishedPoll from '../../../meetings/server/modifiers/setPublishedPoll';\n\nexport default function pollStarted({ body }, meetingId) {\n  const {\n    userId, poll, pollType, question,\n  } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(poll, Object);\n  check(pollType, String);\n  check(question, String);\n\n  setPublishedPoll(meetingId, false);\n\n  return addPoll(meetingId, userId, poll, pollType, question);\n}\n","import { check } from 'meteor/check';\nimport removePoll from '../modifiers/removePoll';\nimport clearPolls from '../modifiers/clearPolls';\n\nexport default function pollStopped({ body }, meetingId) {\n  const { poll } = body;\n\n  check(meetingId, String);\n\n  if (poll) {\n    const { pollId } = poll;\n\n    check(pollId, String);\n\n    return removePoll(meetingId, pollId);\n  }\n\n  return clearPolls(meetingId);\n}\n","import addSystemMsg from '../../../group-chat-msg/server/modifiers/addSystemMsg';\nimport Polls from '/imports/api/polls';\nimport removePoll from '../modifiers/removePoll';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function sendPollChatMsg({ body }, meetingId) {\n  const { poll } = body;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const PUBLIC_CHAT_SYSTEM_ID = CHAT_CONFIG.system_userid;\n  const CHAT_POLL_RESULTS_MESSAGE = CHAT_CONFIG.system_messages_keys.chat_poll_result;\n  const SYSTEM_CHAT_TYPE = CHAT_CONFIG.type_system;\n  const MAX_POLL_RESULT_BARS = 20;\n\n  const { answers, numRespondents } = poll;\n\n  const pollData = Polls.findOne({ meetingId });\n\n  if (!pollData) {\n    Logger.error(`Attempted to send chat message of inexisting poll for meetingId: ${meetingId}`);\n    return false;\n  }\n  \n  const caseInsensitiveReducer = (acc, item) => {\n    const index = acc.findIndex(ans => ans.key.toLowerCase() === item.key.toLowerCase());\n    if(index !== -1) {\n      if(acc[index].numVotes >= item.numVotes) acc[index].numVotes += item.numVotes;\n      else {\n        const tempVotes = acc[index].numVotes;\n        acc[index] = item;\n        acc[index].numVotes += tempVotes;\n      }\n    } else {\n      acc.push(item);\n    }\n    return acc;\n  };\n\n  let responded = 0;\n  let resultString = `bbb-published-poll-\\n${pollData.question.split('<br/>').join('<br#>').split('\\n').join('<br#>')}\\n`;\n\n  answers.map((item) => {\n    responded += item.numVotes;\n    return item;\n  }).reduce(caseInsensitiveReducer, []).map((item) => {\n    item.key = item.key.split('<br/>').join('<br#>');\n    const numResponded = responded === numRespondents ? numRespondents : responded;\n    const pct = Math.round(item.numVotes / numResponded * 100);\n    const pctBars = \"|\".repeat(pct * MAX_POLL_RESULT_BARS / 100);\n    const pctFotmatted = `${Number.isNaN(pct) ? 0 : pct}%`;\n    resultString += `${item.key}: ${item.numVotes || 0} |${pctBars} ${pctFotmatted}\\n`;\n  });\n\n  const payload = {\n    id: `${SYSTEM_CHAT_TYPE}-${CHAT_POLL_RESULTS_MESSAGE}`,\n    timestamp: Date.now(),\n    correlationId: `${PUBLIC_CHAT_SYSTEM_ID}-${Date.now()}`,\n    sender: {\n      id: PUBLIC_CHAT_SYSTEM_ID,\n      name: '',\n    },\n    message: resultString,\n  };\n\n  removePoll(meetingId, pollData.id);\n  return addSystemMsg(meetingId, PUBLIC_GROUP_CHAT_ID, payload);\n}\n","import { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userResponded({ body }) {\n  const { pollId, userId, answerId } = body;\n\n  check(pollId, String);\n  check(userId, String);\n  check(answerId, Number);\n\n  const selector = {\n    id: pollId,\n  };\n\n  const modifier = {\n    $pull: {\n      users: userId,\n    },\n    $push: {\n      responses: { userId, answerId },\n    },\n  };\n\n  try {\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updating Poll response (userId: ${userId}, response: ${answerId}, pollId: ${pollId})`);\n    }\n  } catch (err) {\n    Logger.error(`Updating Poll responses: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nexport default function userTypedResponse({ header, body }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RespondToPollReqMsg';\n\n  const { pollId, userId, answer } = body;\n  const { meetingId } = header;\n\n  check(pollId, String);\n  check(meetingId, String);\n  check(userId, String);\n  check(answer, String);\n\n  const poll = Polls.findOne({ meetingId, id: pollId });\n\n  let answerId = 0;\n  poll.answers.forEach((a) => {\n    const { id, key } = a;\n    if (key === answer) answerId = id;\n  });\n\n  const payload = {\n    requesterId: userId,\n    pollId,\n    questionId: 0,\n    answerId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\nimport updateVotes from '../modifiers/updateVotes';\n\nexport default function userVoted({ body }, meetingId) {\n  const { poll } = body;\n\n  check(meetingId, String);\n  check(poll, {\n    id: String,\n    answers: [\n      {\n        id: Number,\n        key: String,\n        numVotes: Number,\n      },\n    ],\n    numRespondents: Number,\n    numResponders: Number,\n  });\n\n  return updateVotes(poll, meetingId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function publishPoll() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ShowPollResultReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const poll = Polls.findOne({ meetingId }); // TODO--send pollid from client\n  if (!poll) {\n    Logger.error(`Attempted to publish inexisting poll for meetingId: ${meetingId}`);\n    return false;\n  }\n\n  return RedisPubSub.publishUserMessage(\n    CHANNEL,\n    EVENT_NAME,\n    meetingId,\n    requesterUserId,\n    ({ requesterId: requesterUserId, pollId: poll.id }),\n  );\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function publishTypedVote(id, pollAnswer) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  let EVENT_NAME = 'RespondToTypedPollReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(pollAnswer, String);\n  check(id, String);\n\n  const activePoll = Polls.findOne({ meetingId, id }, {\n    fields: {\n      answers: 1,\n    },\n  });\n\n  let existingAnsId = null;\n  activePoll.answers.forEach((a) => {\n    if (a.key === pollAnswer) existingAnsId = a.id;\n  });\n\n  if (existingAnsId !== null) {\n    check(existingAnsId, Number);\n    EVENT_NAME = 'RespondToPollReqMsg';\n\n    return RedisPubSub.publishUserMessage(\n      CHANNEL,\n      EVENT_NAME,\n      meetingId,\n      requesterUserId,\n      {\n        requesterId: requesterUserId,\n        pollId: id,\n        questionId: 0,\n        answerId: existingAnsId,\n      },\n    );\n  }\n\n  const payload = {\n    requesterId: requesterUserId,\n    pollId: id,\n    questionId: 0,\n    answer: pollAnswer,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function publishVote(pollId, pollAnswerId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RespondToPollReqMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(pollAnswerId, Number);\n  check(pollId, String);\n\n  const allowedToVote = Polls.findOne({ id: pollId, users: { $in: [requesterUserId] } }, {\n    fields: {\n      users: 1,\n    },\n  });\n\n  if (!allowedToVote) {\n    Logger.info(`Poll User={${requesterUserId}} has already voted in PollId={${pollId}}`);\n    return null;\n  }\n\n  const selector = {\n    users: requesterUserId,\n    meetingId,\n    'answers.id': pollAnswerId,\n  };\n\n  const payload = {\n    requesterId: requesterUserId,\n    pollId,\n    questionId: 0,\n    answerId: pollAnswerId,\n  };\n\n  /*\n   We keep an array of people who were in the meeting at the time the poll\n   was started. The poll is published to them only.\n   Once they vote - their ID is removed and they cannot see the poll anymore\n  */\n  const modifier = {\n    $pull: {\n      users: requesterUserId,\n    },\n  };\n\n  try {\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Removed responded user=${requesterUserId} from poll (meetingId: ${meetingId}, pollId: ${pollId}!)`);\n\n      RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n    }\n  } catch (err) {\n    Logger.error(`Removing responded user from Polls collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startPoll(pollType, pollId, question, answers) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  let EVENT_NAME = 'StartPollReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(pollId, String);\n  check(pollType, String);\n\n  const payload = {\n    requesterId: requesterUserId,\n    pollId: `${pollId}/${new Date().getTime()}`,\n    pollType,\n    question,\n  };\n\n  if (pollType === 'custom') {\n    EVENT_NAME = 'StartCustomPollReqMsg';\n    check(answers, Array);\n    payload.answers = answers;\n  }\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function stopPoll() {\n  const { meetingId, requesterUserId: requesterId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterId, String);\n\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StopPollReqMsg';\n\n  return RedisPubSub.publishUserMessage(\n    CHANNEL,\n    EVENT_NAME,\n    meetingId,\n    requesterId,\n    ({ requesterId }),\n  );\n}\n","import Users from '/imports/api/users';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport { check } from 'meteor/check';\n\nexport default function addPoll(meetingId, requesterId, poll, pollType, question = '') {\n  check(requesterId, String);\n  check(meetingId, String);\n  check(poll, {\n    id: String,\n    answers: [\n      {\n        id: Number,\n        key: String,\n      },\n    ],\n  });\n\n  const userSelector = {\n    meetingId,\n    userId: { $ne: requesterId },\n    clientType: { $ne: 'dial-in-user' },\n  };\n\n  const userIds = Users.find(userSelector, { fields: { userId: 1 } })\n    .fetch()\n    .map(user => user.userId);\n\n  const selector = {\n    meetingId,\n    requester: requesterId,\n    id: poll.id,\n  };\n\n  const modifier = Object.assign(\n    { meetingId },\n    { requester: requesterId },\n    { users: userIds },\n    { question, pollType },\n    flat(poll, { safe: true }),\n  );\n\n\n  try {\n    const { insertedId } = Polls.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added Poll id=${poll.id}`);\n    } else {\n      Logger.info(`Upserted Poll id=${poll.id}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding Poll to collection: ${poll.id}`);\n  }\n}\n","import Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPolls(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Polls.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Polls (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Polls (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Polls.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Polls (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Polls (all). ${err}`);\n    }\n  }\n}\n","import Polls from '/imports/api/polls';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removePoll(meetingId, id) {\n  check(meetingId, String);\n  check(id, String);\n\n  const selector = {\n    meetingId,\n    id,\n  };\n\n  try {\n    const numberAffected = Polls.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed Poll id=${id}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing Poll from collection: ${err}`);\n  }\n}\n","import Polls from '/imports/api/polls';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\n\nexport default function updateVotes(poll, meetingId) {\n  check(meetingId, String);\n  check(poll, Object);\n\n  const {\n    id,\n    answers,\n    numResponders,\n    numRespondents,\n  } = poll;\n\n  check(id, String);\n  check(answers, Array);\n\n  check(numResponders, Number);\n  check(numRespondents, Number);\n\n  const selector = {\n    meetingId,\n    id,\n  };\n\n  const modifier = {\n    $set: flat(poll, { safe: true }),\n  };\n\n  try {\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updating Polls collection (meetingId: ${meetingId}, pollId: ${id}!)`);\n    }\n  } catch (err) {\n    Logger.error(`Updating Polls collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handlePollStarted from './handlers/pollStarted';\nimport handlePollStopped from './handlers/pollStopped';\nimport handlePollPublished from './handlers/pollPublished';\nimport handleSendSystemChatForPublishedPoll from './handlers/sendPollChatMsg';\nimport handleUserVoted from './handlers/userVoted';\nimport handleUserResponded from './handlers/userResponded';\nimport handleUserTypedResponse from './handlers/userTypedResponse';\n\nRedisPubSub.on('PollShowResultEvtMsg', handlePollPublished);\nRedisPubSub.on('PollShowResultEvtMsg', handleSendSystemChatForPublishedPoll);\nRedisPubSub.on('PollStartedEvtMsg', handlePollStarted);\nRedisPubSub.on('PollStoppedEvtMsg', handlePollStopped);\nRedisPubSub.on('PollUpdatedEvtMsg', handleUserVoted);\nRedisPubSub.on('UserRespondedToPollRespMsg', handleUserResponded);\nRedisPubSub.on('UserRespondedToTypedPollRespMsg', handleUserTypedResponse);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport publishTypedVote from './methods/publishTypedVote';\nimport publishVote from './methods/publishVote';\nimport publishPoll from './methods/publishPoll';\nimport startPoll from './methods/startPoll';\nimport stopPoll from './methods/stopPoll';\n\nMeteor.methods({\n  publishVote,\n  publishTypedVote,\n  publishPoll,\n  startPoll,\n  stopPoll,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Polls from '/imports/api/polls';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction currentPoll() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Polls was requested by unauth connection ${this.connection.id}`);\n    return Polls.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Polls', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n  };\n\n  return Polls.find(selector);\n}\n\nfunction publishCurrentPoll(...args) {\n  const boundPolls = currentPoll.bind(this);\n  return boundPolls(...args);\n}\n\nMeteor.publish('current-poll', publishCurrentPoll);\n\n\nfunction polls() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Polls was requested by unauth connection ${this.connection.id}`);\n    return Polls.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing polls', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n    users: userId,\n  };\n\n  return Polls.find(selector);\n}\n\nfunction publish(...args) {\n  const boundPolls = polls.bind(this);\n  return boundPolls(...args);\n}\n\nMeteor.publish('polls', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Polls = new Mongo.Collection('polls');\n\nif (Meteor.isServer) {\n  // We can have just one active poll per meeting\n  // makes no sense to index it by anything other than meetingId\n\n  Polls._ensureIndex({ meetingId: 1 });\n}\n\nexport default Polls;\n","import { check } from 'meteor/check';\nimport addPresentationPod from '../modifiers/addPresentationPod';\n\nexport default function handleCreateNewPresentationPod({ body }, meetingId) {\n  check(body, {\n    currentPresenterId: String,\n    podId: String,\n  });\n  check(meetingId, String);\n\n  const { currentPresenterId, podId } = body;\n\n  const pod = {\n    currentPresenterId,\n    podId,\n  };\n\n  addPresentationPod(meetingId, pod);\n}\n","import { check } from 'meteor/check';\nimport removePresentationPod from '../modifiers/removePresentationPod';\n\nexport default function handleRemovePresentationPod({ body }, meetingId) {\n  check(body, Object);\n  check(meetingId, String);\n\n  const { podId } = body;\n\n  check(podId, String);\n\n  removePresentationPod(meetingId, podId);\n}\n","import { check } from 'meteor/check';\nimport setPresenterInPod from '../modifiers/setPresenterInPod';\n\nexport default function handleSetPresenterInPod({ body }, meetingId) {\n  check(body, Object);\n\n  const { podId, nextPresenterId } = body;\n\n  check(podId, String);\n  check(nextPresenterId, String);\n\n  setPresenterInPod(meetingId, podId, nextPresenterId);\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport removePresentationPod from '../modifiers/removePresentationPod';\nimport addPresentationPod from '../modifiers/addPresentationPod';\n\nexport default function handleSyncGetPresentationPods({ body }, meetingId) {\n  check(body, Object);\n  check(meetingId, String);\n\n  const { pods } = body;\n  check(pods, Array);\n\n  const presentationPodIds = pods.map(pod => pod.id);\n\n  const presentationPodsToRemove = PresentationPods.find({\n    meetingId,\n    podId: { $nin: presentationPodIds },\n  }, { fields: { podId: 1 } }).fetch();\n\n  presentationPodsToRemove.forEach(p => removePresentationPod(meetingId, p.podId));\n\n  pods.forEach((pod) => {\n    // 'podId' and 'currentPresenterId' for some reason called 'id' and 'currentPresenter'\n    // in this message\n    const {\n      id: podId,\n      currentPresenter: currentPresenterId,\n      presentations,\n    } = pod;\n    addPresentationPod(meetingId, { podId, currentPresenterId }, presentations);\n  });\n}\n","import { Match, check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport addPresentation from '/imports/api/presentations/server/modifiers/addPresentation';\n\n// 'presentations' is passed down here when we receive a Sync message\n// and it's not used when we just create a new presentation pod\nexport default function addPresentationPod(meetingId, pod, presentations = undefined) {\n  check(meetingId, String);\n  check(presentations, Match.Maybe(Array));\n  check(pod, {\n    currentPresenterId: String,\n    podId: String,\n  });\n\n  const { currentPresenterId, podId } = pod;\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const modifier = {\n    meetingId,\n    podId,\n    currentPresenterId,\n  };\n\n  try {\n    const { insertedId } = PresentationPods.upsert(selector, modifier);\n\n    // if it's a Sync message - continue adding the attached presentations\n    if (presentations) {\n      presentations.forEach(presentation => addPresentation(meetingId, podId, presentation));\n    }\n\n    if (insertedId) {\n      Logger.info(`Added presentation pod id=${podId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted presentation pod id=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding presentation pod to the collection: ${err}`);\n  }\n}\n","import PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport clearPresentations from '/imports/api/presentations/server/modifiers/clearPresentations';\nimport clearPresentationUploadToken from '/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken';\n\nexport default function clearPresentationPods(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = PresentationPods.remove({ meetingId });\n\n      if (numberAffected) {\n        clearPresentations(meetingId);\n        clearPresentationUploadToken(meetingId);\n        Logger.info(`Cleared Presentations Pods (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Presentations Pods (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = PresentationPods.remove({});\n\n      if (numberAffected) {\n        clearPresentations();\n        clearPresentationUploadToken();\n        Logger.info('Cleared Presentations Pods (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Presentations Pods (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport clearPresentations from '/imports/api/presentations/server/modifiers/clearPresentations';\nimport clearPresentationUploadToken from '/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken';\n\nexport default function removePresentationPod(meetingId, podId) {\n  check(meetingId, String);\n  check(podId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  try {\n    const numberAffected = PresentationPods.remove(selector);\n\n    if (numberAffected && podId) {\n      Logger.info(`Removed presentation pod id=${podId} meeting=${meetingId}`);\n      clearPresentations(meetingId, podId);\n      clearPresentationUploadToken(meetingId, podId);\n    }\n  } catch (err) {\n    Logger.error(`Error on removing presentation pod from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresenterInPod(meetingId, podId, nextPresenterId) {\n  check(meetingId, String);\n  check(podId, String);\n  check(nextPresenterId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const modifier = {\n    $set: {\n      currentPresenterId: nextPresenterId,\n    },\n  };\n\n  try {\n    const { numberAffected } = PresentationPods.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set a new presenter in pod id=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting a presenter in pod: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleCreateNewPresentationPod from './handlers/createNewPresentationPod';\nimport handleRemovePresentationPod from './handlers/removePresentationPod';\nimport handleSyncGetPresentationPods from './handlers/syncGetPresentationPods';\nimport handleSetPresenterInPod from './handlers/setPresenterInPod';\n\nRedisPubSub.on('CreateNewPresentationPodEvtMsg', handleCreateNewPresentationPod);\nRedisPubSub.on('RemovePresentationPodEvtMsg', handleRemovePresentationPod);\nRedisPubSub.on('SetPresenterInPodRespMsg', handleSetPresenterInPod);\nRedisPubSub.on('SyncGetPresentationPodsRespMsg', handleSyncGetPresentationPods);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentationPods() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing PresentationPods was requested by unauth connection ${this.connection.id}`);\n    return PresentationPods.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug('Publishing presentation-pods', { meetingId, userId });\n\n  return PresentationPods.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundPresentationPods = presentationPods.bind(this);\n  return boundPresentationPods(...args);\n}\n\nMeteor.publish('presentation-pods', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst PresentationPods = new Mongo.Collection('presentation-pods');\n\nif (Meteor.isServer) {\n  // types of queries for the presentation pods:\n  // 1. meetingId, podId  ( 4 )\n\n  PresentationPods._ensureIndex({ meetingId: 1, podId: 1 });\n}\n\nexport default PresentationPods;\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\n\nexport default function handlePresentationUploadTokenFail({ body, header }, meetingId) {\n  check(body, Object);\n\n  const { userId } = header;\n  const { podId, filename } = body;\n\n  check(userId, String);\n  check(podId, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    podId,\n    filename,\n  };\n\n  try {\n    const { numberAffected } = PresentationUploadToken.upsert(selector, { failed: true, authzToken: null });\n\n    if (numberAffected) {\n      Logger.info(`Removing presentationToken filename=${filename} podId=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing presentationToken from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\n\nexport default function handlePresentationUploadTokenPass({ body, header }, meetingId) {\n  check(body, Object);\n\n  const { userId } = header;\n  const { podId, authzToken, filename } = body;\n\n  check(userId, String);\n  check(podId, String);\n  check(authzToken, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n  };\n\n  const modifier = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n    authzToken,\n    failed: false,\n    used: false,\n  };\n\n  try {\n    const { insertedId } = PresentationUploadToken.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Inserting presentationToken filename=${filename} podId=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Inserting presentationToken from collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function requestPresentationUploadToken(podId, filename) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'PresentationUploadTokenReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(podId, String);\n  check(filename, String);\n\n  const payload = {\n    podId,\n    filename,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function setUsedToken(authzToken) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const payload = {\n    $set: {\n      used: true,\n    },\n  };\n\n  try {\n    const numberAffected = PresentationUploadToken.update({\n      meetingId,\n      userId: requesterUserId,\n      authzToken,\n    }, payload);\n\n    if (numberAffected) {\n      Logger.info(`Token: ${authzToken} has been set as used in meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Unable to set token as used : ${err}`);\n  }\n}\n","import PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPresentationUploadToken(meetingId, podId) {\n  if (meetingId && podId) {\n    try {\n      const numberAffected = PresentationUploadToken.remove({ meetingId, podId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations Upload Token (${meetingId}, ${podId})`);\n        return true;\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (${meetingId}, ${podId}). ${err}`);\n      return false;\n    }\n  }\n\n  if (meetingId) {\n    try {\n      const numberAffected = PresentationUploadToken.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations Upload Token (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      // clearing presentations for the whole server\n      const numberAffected = PresentationUploadToken.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Presentations Upload Token (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (all). ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nimport handlePresentationUploadTokenPass from './handlers/presentationUploadTokenPass';\nimport handlePresentationUploadTokenFail from './handlers/presentationUploadTokenFail';\n\nRedisPubSub.on('PresentationUploadTokenPassRespMsg', processForHTML5ServerOnly(handlePresentationUploadTokenPass));\nRedisPubSub.on('PresentationUploadTokenFailRespMsg', processForHTML5ServerOnly(handlePresentationUploadTokenFail));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport requestPresentationUploadToken from './methods/requestPresentationUploadToken';\nimport setUsedToken from './methods/setUsedToken';\n\nMeteor.methods({\n  requestPresentationUploadToken,\n  setUsedToken,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentationUploadToken(podId, filename) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing PresentationUploadToken was requested by unauth connection ${this.connection.id}`);\n    return PresentationUploadToken.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  check(podId, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n  };\n\n  Logger.debug('Publishing PresentationUploadToken', { meetingId, userId });\n\n  return PresentationUploadToken.find(selector);\n}\n\nfunction publish(...args) {\n  const boundPresentationUploadToken = presentationUploadToken.bind(this);\n  return boundPresentationUploadToken(...args);\n}\n\nMeteor.publish('presentation-upload-token', publish);\n","const PresentationUploadToken = new Mongo.Collection('presentation-upload-token');\n\nexport default PresentationUploadToken;\n","import { check } from 'meteor/check';\nimport addPresentation from '../modifiers/addPresentation';\n\nexport default function handlePresentationAdded({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentation, podId } = body;\n\n  check(meetingId, String);\n  check(podId, String);\n  check(presentation, Object);\n\n  return addPresentation(meetingId, podId, presentation);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Presentations from '/imports/api/presentations';\n\n// const OFFICE_DOC_CONVERSION_SUCCESS_KEY = 'OFFICE_DOC_CONVERSION_SUCCESS';\nconst OFFICE_DOC_CONVERSION_FAILED_KEY = 'OFFICE_DOC_CONVERSION_FAILED';\nconst OFFICE_DOC_CONVERSION_INVALID_KEY = 'OFFICE_DOC_CONVERSION_INVALID';\nconst SUPPORTED_DOCUMENT_KEY = 'SUPPORTED_DOCUMENT';\nconst UNSUPPORTED_DOCUMENT_KEY = 'UNSUPPORTED_DOCUMENT';\nconst PAGE_COUNT_FAILED_KEY = 'PAGE_COUNT_FAILED';\nconst PAGE_COUNT_EXCEEDED_KEY = 'PAGE_COUNT_EXCEEDED';\nconst PDF_HAS_BIG_PAGE_KEY = 'PDF_HAS_BIG_PAGE';\nconst GENERATED_SLIDE_KEY = 'GENERATED_SLIDE';\n// const GENERATING_THUMBNAIL_KEY = 'GENERATING_THUMBNAIL';\n// const GENERATED_THUMBNAIL_KEY = 'GENERATED_THUMBNAIL';\n// const GENERATING_TEXTFILES_KEY = 'GENERATING_TEXTFILES';\n// const GENERATED_TEXTFILES_KEY = 'GENERATED_TEXTFILES';\n// const GENERATING_SVGIMAGES_KEY = 'GENERATING_SVGIMAGES';\n// const GENERATED_SVGIMAGES_KEY = 'GENERATED_SVGIMAGES';\n// const CONVERSION_COMPLETED_KEY = 'CONVERSION_COMPLETED';\n\nexport default function handlePresentationConversionUpdate({ body }, meetingId) {\n  check(body, Object);\n\n  const {\n    presentationId, podId, messageKey: status, presName: presentationName,\n  } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(status, String);\n\n  const statusModifier = {\n    'conversion.status': status,\n    'conversion.error': false,\n    'conversion.done': false,\n  };\n\n  switch (status) {\n    case SUPPORTED_DOCUMENT_KEY:\n      statusModifier.id = presentationId;\n      statusModifier.name = presentationName;\n      break;\n\n    case UNSUPPORTED_DOCUMENT_KEY:\n    case OFFICE_DOC_CONVERSION_FAILED_KEY:\n    case OFFICE_DOC_CONVERSION_INVALID_KEY:\n    case PAGE_COUNT_FAILED_KEY:\n    case PAGE_COUNT_EXCEEDED_KEY:\n    case PDF_HAS_BIG_PAGE_KEY:\n      statusModifier.id = presentationId;\n      statusModifier.name = presentationName;\n      statusModifier['conversion.error'] = true;\n      break;\n\n    case GENERATED_SLIDE_KEY:\n      statusModifier['conversion.pagesCompleted'] = body.pagesCompleted;\n      statusModifier['conversion.numPages'] = body.numberOfPages;\n      break;\n\n    default:\n      break;\n  }\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  const modifier = {\n    $set: Object.assign({ meetingId, podId }, statusModifier),\n  };\n\n  try {\n    const { insertedId } = Presentations.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Updated presentation conversion status=${status} id=${presentationId} meeting=${meetingId}`);\n    } else {\n      Logger.debug('Upserted presentation conversion', { status, presentationId, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Updating conversion status presentation to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport setCurrentPresentation from '../modifiers/setCurrentPresentation';\n\nexport default function handlePresentationCurrentSet({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentationId, podId } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  return setCurrentPresentation(meetingId, podId, presentationId);\n}\n","import { check } from 'meteor/check';\nimport setPresentationDownloadable from '../modifiers/setPresentationDownloadable';\n\nexport default function handlePresentationDownloadableSet({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentationId, podId, downloadable } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(downloadable, Boolean);\n\n  return setPresentationDownloadable(meetingId, podId, presentationId, downloadable);\n}\n","import { check } from 'meteor/check';\n\nimport removePresentation from '../modifiers/removePresentation';\n\nexport default function handlePresentationRemove({ body }, meetingId) {\n  const { podId, presentationId } = body;\n\n  check(meetingId, String);\n  check(podId, String);\n  check(presentationId, String);\n\n  return removePresentation(meetingId, podId, presentationId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function removePresentation(presentationId, podId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RemovePresentationPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const payload = {\n    presentationId,\n    podId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setPresentation(presentationId, podId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetCurrentPresentationPubMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const payload = {\n    presentationId,\n    podId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setPresentationDownloadable(presentationId, downloadable) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetPresentationDownloadablePubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(downloadable, Boolean);\n  check(presentationId, String);\n\n  const payload = {\n    presentationId,\n    podId: 'DEFAULT_PRESENTATION_POD',\n    downloadable,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { HTTP } from 'meteor/http';\nimport { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport addSlide from '/imports/api/slides/server/modifiers/addSlide';\nimport setCurrentPresentation from './setCurrentPresentation';\n\nconst getSlideText = async (url) => {\n  let content = '';\n  try {\n    content = await HTTP.get(url).content;\n  } catch (error) {\n    Logger.error(`No file found. ${error}`);\n  }\n  return content;\n};\n\nconst addSlides = (meetingId, podId, presentationId, slides) => {\n  slides.forEach(async (slide) => {\n    const content = await getSlideText(slide.txtUri);\n\n    Object.assign(slide, { content });\n\n    addSlide(meetingId, podId, presentationId, slide);\n  });\n};\n\nexport default function addPresentation(meetingId, podId, presentation) {\n  check(meetingId, String);\n  check(podId, String);\n  check(presentation, {\n    id: String,\n    name: String,\n    current: Boolean,\n    pages: [\n      {\n        id: String,\n        num: Number,\n        thumbUri: String,\n        swfUri: String,\n        txtUri: String,\n        svgUri: String,\n        current: Boolean,\n        xOffset: Number,\n        yOffset: Number,\n        widthRatio: Number,\n        heightRatio: Number,\n      },\n    ],\n    downloadable: Boolean,\n  });\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentation.id,\n  };\n\n  const modifier = {\n    $set: Object.assign({\n      meetingId,\n      podId,\n      'conversion.done': true,\n      'conversion.error': false,\n    }, flat(presentation, { safe: true })),\n  };\n\n  try {\n    const { insertedId } = Presentations.upsert(selector, modifier);\n\n    addSlides(meetingId, podId, presentation.id, presentation.pages);\n\n    if (insertedId) {\n      if (presentation.current) {\n        setCurrentPresentation(meetingId, podId, presentation.id);\n        Logger.info(`Added presentation id=${presentation.id} meeting=${meetingId}`);\n      } else {\n        Logger.info(`Upserted presentation id=${presentation.id} meeting=${meetingId}`);\n      }\n    }\n  } catch (err) {\n    Logger.error(`Adding presentation to collection: ${err}`);\n  }\n}\n","import Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPresentations(meetingId, podId) {\n  // clearing presentations for 1 pod\n  if (meetingId && podId) {\n    try {\n      const numberAffected = Presentations.remove({ meetingId, podId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations (${meetingId}, ${podId})`);\n        return true;\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (${meetingId}, ${podId}). ${err}`);\n      return false;\n    }\n  }\n\n  // clearing presentations for the whole meeting\n  if (meetingId) {\n    try {\n      const numberAffected = Presentations.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Presentations.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Presentations (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nimport clearSlidesPresentation from '/imports/api/slides/server/modifiers/clearSlidesPresentation';\n\nexport default function removePresentation(meetingId, podId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  try {\n    const numberAffected = Presentations.remove(selector);\n\n    if (numberAffected) {\n      clearSlidesPresentation(meetingId, presentationId);\n      Logger.info(`Removed presentation id=${presentationId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing presentation from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setCurrentPresentation(meetingId, podId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const oldCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      current: true,\n    },\n    modifier: {\n      $set: { current: false },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Unsetting the current presentation: ${err}`);\n        return;\n      }\n\n      Logger.info('Unsetted as current presentation');\n    },\n  };\n\n  const newCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      id: presentationId,\n    },\n    modifier: {\n      $set: { current: true },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Setting as current presentation id=${presentationId}: ${err}`);\n        return;\n      }\n\n      Logger.info(`Setted as current presentation id=${presentationId}`);\n    },\n  };\n\n  const oldPresentation = Presentations.findOne(oldCurrent.selector);\n  const newPresentation = Presentations.findOne(newCurrent.selector);\n\n  // Prevent bug with presentation being unset, same happens in the slide\n  // See: https://github.com/bigbluebutton/bigbluebutton/pull/4431\n  if (oldPresentation && newPresentation && (oldPresentation._id === newPresentation._id)) {\n    return;\n  }\n\n  if (newPresentation) {\n    Presentations.update(newPresentation._id, newCurrent.modifier, newCurrent.callback);\n  }\n\n  if (oldPresentation) {\n    Presentations.update(oldPresentation._id, oldCurrent.modifier, oldCurrent.callback);\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresentationDownloadable(meetingId, podId,\n  presentationId, downloadable) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(downloadable, Boolean);\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  const modifier = {\n    $set: {\n      downloadable,\n    },\n  };\n\n  try {\n    const { numberAffected } = Presentations.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set downloadable status on presentation {${presentationId} in meeting {${meetingId}}`);\n    }\n  } catch (err) {\n    Logger.error(`Could not set downloadable on pres {${presentationId} in meeting {${meetingId}} ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handlePresentationAdded from './handlers/presentationAdded';\nimport handlePresentationRemove from './handlers/presentationRemove';\nimport handlePresentationCurrentSet from './handlers/presentationCurrentSet';\nimport handlePresentationConversionUpdate from './handlers/presentationConversionUpdate';\nimport handlePresentationDownloadableSet from './handlers/presentationDownloadableSet';\n\nRedisPubSub.on('PdfConversionInvalidErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationPageGeneratedEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationPageCountErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationConversionUpdateEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationConversionCompletedEvtMsg', handlePresentationAdded);\nRedisPubSub.on('RemovePresentationEvtMsg', handlePresentationRemove);\nRedisPubSub.on('SetCurrentPresentationEvtMsg', handlePresentationCurrentSet);\nRedisPubSub.on('SetPresentationDownloadableEvtMsg', handlePresentationDownloadableSet);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport removePresentation from './methods/removePresentation';\nimport setPresentation from './methods/setPresentation';\nimport setPresentationDownloadable from './methods/setPresentationDownloadable';\n\nMeteor.methods({\n  removePresentation,\n  setPresentation,\n  setPresentationDownloadable,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentations() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Presentation was requested by unauth connection ${this.connection.id}`);\n    return Presentations.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Presentations', { meetingId, userId });\n\n  return Presentations.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundPresentations = presentations.bind(this);\n  return boundPresentations(...args);\n}\n\nMeteor.publish('presentations', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Presentations = new Mongo.Collection('presentations');\n\nif (Meteor.isServer) {\n  // types of queries for the presentations:\n  // 1. meetingId, podId, id        ( 3 )\n  // 2. meetingId, id               ( 1 )\n  // 3. meetingId, id, current      ( 2 )\n  // 4. meetingId                   ( 1 )\n\n  Presentations._ensureIndex({ meetingId: 1, podId: 1, id: 1 });\n}\n\nexport default Presentations;\n","import { check } from 'meteor/check';\nimport Meetings from '/imports/api/meetings';\nimport addScreenshare from '../modifiers/addScreenshare';\nimport Logger from '/imports/startup/server/logger';\nimport stopWatchingExternalVideoSystemCall from '/imports/api/external-videos/server/methods/stopWatchingExternalVideoSystemCall';\n\nexport default function handleScreenshareStarted({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  const meeting = Meetings.findOne({ meetingId });\n  if (meeting && meeting.externalVideoUrl) {\n    Logger.info(`ScreenshareStarted: There is external video being shared. Stopping it due to presenter change, ${meeting.externalVideoUrl}`);\n    stopWatchingExternalVideoSystemCall({ meetingId, requesterUserId: 'system-screenshare-starting' });\n  }\n  return addScreenshare(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport clearScreenshare from '../modifiers/clearScreenshare';\n\nexport default function handleScreenshareStopped({ body }, meetingId) {\n  const { screenshareConf } = body;\n\n  check(meetingId, String);\n  check(screenshareConf, String);\n\n  return clearScreenshare(meetingId, screenshareConf);\n}\n","import { check } from 'meteor/check';\nimport flat from 'flat';\nimport Logger from '/imports/startup/server/logger';\nimport Screenshare from '/imports/api/screenshare';\n\nexport default function addScreenshare(meetingId, body) {\n  check(meetingId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      screenshare: flat(body),\n    },\n  };\n\n  try {\n    const { numberAffected } = Screenshare.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Upserted screenshare id=${body.screenshareConf}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding screenshare to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Screenshare from '/imports/api/screenshare';\n\nexport default function clearScreenshare(meetingId, screenshareConf) {\n  try {\n    let numberAffected;\n\n    if (meetingId && screenshareConf) {\n      numberAffected = Screenshare.remove({ meetingId, 'screenshare.screenshareConf': screenshareConf });\n    } else if (meetingId) {\n      numberAffected = Screenshare.remove({ meetingId });\n    } else {\n      numberAffected = Screenshare.remove({});\n    }\n\n    if (numberAffected) {\n      Logger.info(`removed screenshare meetingId=${meetingId} id=${screenshareConf}`);\n    }\n  } catch (err) {\n    Logger.error(`removing screenshare to collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleScreenshareStarted from './handlers/screenshareStarted';\nimport handleScreenshareStopped from './handlers/screenshareStopped';\n\nRedisPubSub.on('ScreenshareRtmpBroadcastStartedEvtMsg', handleScreenshareStarted);\nRedisPubSub.on('ScreenshareRtmpBroadcastStoppedEvtMsg', handleScreenshareStopped);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\n\nMeteor.methods({\n});\n","import Screenshare from '/imports/api/screenshare';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction screenshare() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Screenshare was requested by unauth connection ${this.connection.id}`);\n    return Screenshare.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Screenshare', { meetingId, userId });\n\n  return Screenshare.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundScreenshare = screenshare.bind(this);\n  return boundScreenshare(...args);\n}\n\nMeteor.publish('screenshare', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Screenshare = new Mongo.Collection('screenshare');\n\nif (Meteor.isServer) {\n  // types of queries for the screenshare:\n  // 1. meetingId\n\n  Screenshare._ensureIndex({ meetingId: 1 });\n}\n\nexport default Screenshare;\n","import { check } from 'meteor/check';\nimport changeCurrentSlide from '../modifiers/changeCurrentSlide';\n\nexport default function handleSlideChange({ body }, meetingId) {\n  const { pageId, presentationId, podId } = body;\n\n  check(pageId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  return changeCurrentSlide(meetingId, podId, presentationId, pageId);\n}\n","import { check } from 'meteor/check';\nimport resizeSlide from '../modifiers/resizeSlide';\n\nexport default function handleSlideResize({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  return resizeSlide(meetingId, body);\n}\n","import Presentations from '/imports/api/presentations';\nimport { Slides } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function switchSlide(slideNumber, podId) { // TODO-- send presentationId and SlideId\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetCurrentPagePubMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(slideNumber, Number);\n\n  const selector = {\n    meetingId,\n    podId,\n    current: true,\n  };\n\n  const Presentation = Presentations.findOne(selector);\n\n  if (!Presentation) {\n    throw new Meteor.Error('presentation-not-found', 'You need a presentation to be able to switch slides');\n  }\n\n  const Slide = Slides.findOne({\n    meetingId,\n    podId,\n    presentationId: Presentation.id,\n    num: slideNumber,\n  });\n\n  if (!Slide) {\n    throw new Meteor.Error('slide-not-found', `Slide number ${slideNumber} not found in the current presentation`);\n  }\n\n  const payload = {\n    podId,\n    presentationId: Presentation.id,\n    pageId: Slide.id,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import Presentations from '/imports/api/presentations';\nimport { Slides } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function zoomSlide(slideNumber, podId, widthRatio, heightRatio, x, y) { // TODO-- send presentationId and SlideId\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ResizeAndMovePagePubMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    current: true,\n  };\n  const Presentation = Presentations.findOne(selector);\n\n  if (!Presentation) {\n    throw new Meteor.Error('presentation-not-found', 'You need a presentation to be able to switch slides');\n  }\n\n  const Slide = Slides.findOne({\n    meetingId,\n    podId,\n    presentationId: Presentation.id,\n    num: slideNumber,\n  });\n\n  if (!Slide) {\n    throw new Meteor.Error('slide-not-found', `Slide number ${slideNumber} not found in the current presentation`);\n  }\n\n  const payload = {\n    podId,\n    presentationId: Presentation.id,\n    pageId: Slide.id,\n    xOffset: x,\n    yOffset: y,\n    widthRatio,\n    heightRatio,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import probe from 'probe-image-size';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { Slides } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { SVG, PNG } from '/imports/utils/mimeTypes';\nimport calculateSlideData from '/imports/api/slides/server/helpers';\nimport addSlidePositions from './addSlidePositions';\n\nconst loadSlidesFromHttpAlways = Meteor.settings.private.app.loadSlidesFromHttpAlways || false;\n\nconst requestWhiteboardHistory = (meetingId, slideId) => {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'GetWhiteboardAnnotationsReqMsg';\n  const USER_ID = 'nodeJSapp';\n\n  const payload = {\n    whiteboardId: slideId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, USER_ID, payload);\n};\n\nconst SUPPORTED_TYPES = [SVG, PNG];\n\nconst fetchImageSizes = imageUri => probe(imageUri)\n  .then((result) => {\n    if (!SUPPORTED_TYPES.includes(result.mime)) {\n      throw new Meteor.Error('invalid-image-type', `received ${result.mime} expecting ${SUPPORTED_TYPES.join()}`);\n    }\n\n    return {\n      width: result.width,\n      height: result.height,\n    };\n  })\n  .catch((reason) => {\n    Logger.error(`Error parsing image size. ${reason}. uri=${imageUri}`);\n    return reason;\n  });\n\nexport default function addSlide(meetingId, podId, presentationId, slide) {\n  check(podId, String);\n  check(presentationId, String);\n\n  check(slide, {\n    id: String,\n    num: Number,\n    thumbUri: String,\n    swfUri: String,\n    txtUri: String,\n    svgUri: String,\n    current: Boolean,\n    xOffset: Number,\n    yOffset: Number,\n    widthRatio: Number,\n    heightRatio: Number,\n    content: String,\n  });\n\n  const {\n    id: slideId,\n    xOffset,\n    yOffset,\n    widthRatio,\n    heightRatio,\n    ...restSlide\n  } = slide;\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: slideId,\n  };\n\n  const imageUri = slide.svgUri || slide.pngUri;\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId },\n      { podId },\n      { presentationId },\n      { id: slideId },\n      { imageUri },\n      flat(restSlide),\n      { safe: true },\n    ),\n  };\n\n  const imageSizeUri = (loadSlidesFromHttpAlways ? imageUri.replace(/^https/i, 'http') : imageUri);\n\n  return fetchImageSizes(imageSizeUri)\n    .then(({ width, height }) => {\n      // there is a rare case when for a very long not-active meeting the presentation\n      // files just disappear and width/height can't be retrieved\n      if (width && height) {\n        // pre-calculating the width, height, and vieBox coordinates / dimensions\n        // to unload the client-side\n        const slideData = {\n          width,\n          height,\n          xOffset,\n          yOffset,\n          widthRatio,\n          heightRatio,\n        };\n        const slidePosition = calculateSlideData(slideData);\n\n        addSlidePositions(meetingId, podId, presentationId, slideId, slidePosition);\n      }\n\n      try {\n        const { insertedId, numberAffected } = Slides.upsert(selector, modifier);\n\n        requestWhiteboardHistory(meetingId, slideId);\n\n        if (insertedId) {\n          Logger.info(`Added slide id=${slideId} pod=${podId} presentation=${presentationId}`);\n        } else if (numberAffected) {\n          Logger.info(`Upserted slide id=${slideId} pod=${podId} presentation=${presentationId}`);\n        }\n      } catch (err) {\n        Logger.error(`Error on adding slide to collection: ${err}`);\n      }\n    })\n    .catch(reason => Logger.error(`Error parsing image size. ${reason}. slide=${slideId} uri=${imageUri}`));\n}\n","import { SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\n\nexport default function addSlidePositions(\n  meetingId,\n  podId,\n  presentationId,\n  slideId,\n  slidePosition,\n) {\n  check(meetingId, String);\n  check(podId, String);\n  check(presentationId, String);\n  check(slideId, String);\n\n  check(slidePosition, {\n    width: Number,\n    height: Number,\n    x: Number,\n    y: Number,\n    viewBoxWidth: Number,\n    viewBoxHeight: Number,\n  });\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: slideId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId },\n      { podId },\n      { presentationId },\n      { id: slideId },\n      flat(slidePosition),\n      { safe: true },\n    ),\n  };\n\n  try {\n    const { insertedId } = SlidePositions.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added slide position id=${slideId} pod=${podId} presentation=${presentationId}`);\n    } else {\n      Logger.info(`Upserted slide position id=${slideId} pod=${podId} presentation=${presentationId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding slide position to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { Slides } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function changeCurrentSlide(meetingId, podId, presentationId, slideId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(slideId, String);\n  check(podId, String);\n\n  const oldCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      presentationId,\n      current: true,\n    },\n    modifier: {\n      $set: { current: false },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Unsetting the current slide: ${err}`);\n        return;\n      }\n\n      Logger.info('Unsetted the current slide');\n    },\n  };\n\n  const newCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      presentationId,\n      id: slideId,\n    },\n    modifier: {\n      $set: { current: true },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Setting as current slide id=${slideId}: ${err}`);\n        return;\n      }\n\n      Logger.info(`Setted as current slide id=${slideId}`);\n    },\n  };\n\n  const oldSlide = Slides.findOne(oldCurrent.selector);\n  const newSlide = Slides.findOne(newCurrent.selector);\n\n  // if the oldCurrent and newCurrent have the same ids\n  if (oldSlide && newSlide && (oldSlide._id === newSlide._id)) {\n    return;\n  }\n\n  if (newSlide) {\n    Slides.update(newSlide._id, newCurrent.modifier, newCurrent.callback);\n  }\n\n  if (oldSlide) {\n    Slides.update(oldSlide._id, oldCurrent.modifier, oldCurrent.callback);\n  }\n}\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearSlides(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffectedSlidePositions = SlidePositions.remove({ meetingId });\n\n      const numberAffected = Slides.remove({ meetingId });\n\n      if (numberAffectedSlidePositions) {\n        Logger.info(`Cleared SlidePositions (${meetingId})`);\n      }\n\n      if (numberAffected) {\n        Logger.info(`Cleared Slides (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Slides (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffectedSlidePositions = SlidePositions.remove({ meetingId });\n\n      const numberAffected = Slides.remove({ meetingId });\n\n      if (numberAffectedSlidePositions) {\n        Logger.info(`Cleared SlidePositions (${meetingId})`);\n      }\n\n      if (numberAffected) {\n        Logger.info('Cleared Slides (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Slides (all). ${err}`);\n    }\n  }\n}\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport clearAnnotations from '/imports/api/annotations/server/modifiers/clearAnnotations';\n\nexport default function clearSlidesPresentation(meetingId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n\n  const selector = {\n    meetingId,\n    presentationId,\n  };\n\n  const whiteboardIds = Slides.find(selector, { fields: { id: 1 } }).map(row => row.id);\n\n  try {\n    SlidePositions.remove(selector);\n\n    const numberAffected = Slides.remove(selector);\n\n    if (numberAffected) {\n      whiteboardIds.forEach(whiteboardId => clearAnnotations(meetingId, whiteboardId));\n\n      Logger.info(`Removed Slides where presentationId=${presentationId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing Slides from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport calculateSlideData from '/imports/api/slides/server/helpers';\n\nexport default function resizeSlide(meetingId, slide) {\n  check(meetingId, String);\n\n  const {\n    podId,\n    presentationId,\n    pageId,\n    widthRatio,\n    heightRatio,\n    xOffset,\n    yOffset,\n  } = slide;\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: pageId,\n  };\n\n  // fetching the current slide data\n  // and pre-calculating the width, height, and vieBox coordinates / sizes\n  // to reduce the client-side load\n  const SlidePosition = SlidePositions.findOne(selector);\n\n  if (SlidePosition) {\n    const {\n      width,\n      height,\n    } = SlidePosition;\n\n    const slideData = {\n      width,\n      height,\n      xOffset,\n      yOffset,\n      widthRatio,\n      heightRatio,\n    };\n    const calculatedData = calculateSlideData(slideData);\n\n    const modifier = {\n      $set: calculatedData,\n    };\n\n    try {\n      const numberAffected = SlidePositions.update(selector, modifier);\n\n      if (numberAffected) {\n        Logger.debug(`Resized slide positions id=${pageId}`);\n      } else {\n        Logger.info(`No slide positions found with id=${pageId}`);\n      }\n    } catch (err) {\n      Logger.error(`Resizing slide positions id=${pageId}: ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleSlideResize from './handlers/slideResize';\nimport handleSlideChange from './handlers/slideChange';\n\nRedisPubSub.on('ResizeAndMovePageEvtMsg', handleSlideResize);\nRedisPubSub.on('SetCurrentPageEvtMsg', handleSlideChange);\n","\nconst calculateSlideData = (slideData) => {\n  const {\n    width, height, xOffset, yOffset, widthRatio, heightRatio,\n  } = slideData;\n\n  // calculating viewBox and offsets for the current presentation\n  return {\n    width,\n    height,\n    x: ((-xOffset * 2) * width) / 100,\n    y: ((-yOffset * 2) * height) / 100,\n    viewBoxWidth: (width * widthRatio) / 100,\n    viewBoxHeight: (height * heightRatio) / 100,\n  };\n};\n\nexport default calculateSlideData;\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport switchSlide from './methods/switchSlide';\nimport zoomSlide from './methods/zoomSlide';\n\nMeteor.methods({\n  switchSlide,\n  zoomSlide,\n});\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction slides() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Slides was requested by unauth connection ${this.connection.id}`);\n    return Slides.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Slides', { meetingId, userId });\n\n  return Slides.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundSlides = slides.bind(this);\n  return boundSlides(...args);\n}\n\nMeteor.publish('slides', publish);\n\nfunction slidePositions() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing SlidePositions was requested by unauth connection ${this.connection.id}`);\n    return SlidePositions.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing SlidePositions', { meetingId, userId });\n\n  return SlidePositions.find({ meetingId });\n}\n\nfunction publishPositions(...args) {\n  const boundSlidePositions = slidePositions.bind(this);\n  return boundSlidePositions(...args);\n}\n\nMeteor.publish('slide-positions', publishPositions);\n","import { Meteor } from 'meteor/meteor';\n\nconst Slides = new Mongo.Collection('slides');\nconst SlidePositions = new Mongo.Collection('slide-positions');\n\nif (Meteor.isServer) {\n  // types of queries for the slides:\n\n  // 1. meetingId                                  ( 1 )\n  // 2. meetingId, podId                           ( 1 )\n  // 3. meetingId, presentationId                  ( 1 )\n  // 3. meetingId, presentationId, num             ( 1 )\n  // 4. meetingId, podId, presentationId, id       ( 3 ) - incl. resizeSlide, which can be intense\n  // 5. meetingId, podId, presentationId, current  ( 1 )\n\n  Slides._ensureIndex({\n    meetingId: 1, podId: 1, presentationId: 1, id: 1,\n  });\n\n  SlidePositions._ensureIndex({\n    meetingId: 1, podId: 1, presentationId: 1, id: 1,\n  });\n}\n\nexport { Slides, SlidePositions };\n","import { check } from 'meteor/check';\nimport changeRole from '/imports/api/users/server/modifiers/changeRole';\n\nexport default function handleChangeRole(payload, meetingId) {\n  check(payload.body, Object);\n  check(meetingId, String);\n\n  const { userId, role, changedBy } = payload.body;\n\n  changeRole(role, userId, meetingId, changedBy);\n}\n","import Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport Users from '/imports/api/users';\n\nexport default function handleEmojiStatus({ body }, meetingId) {\n  const { userId, emoji } = body;\n\n  check(userId, String);\n  check(emoji, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      emojiTime: (new Date()).getTime(),\n      emoji,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Assigned user emoji status ${emoji} id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Assigning user emoji status: ${err}`);\n  }\n}\n","import Users from '/imports/api/users';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport changePresenter from '/imports/api/users/server/modifiers/changePresenter';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nfunction setPresenterInPodReqMsg(credentials) { // TODO-- switch to meetingId, etc\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetPresenterInPodReqMsg';\n\n  const { meetingId, requesterUserId, presenterId } = credentials;\n\n  const payload = {\n    podId: 'DEFAULT_PRESENTATION_POD',\n    nextPresenterId: presenterId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n\nexport default function handlePresenterAssigned({ body }, meetingId) {\n  const { presenterId, assignedBy } = body;\n\n  changePresenter(true, presenterId, meetingId, assignedBy);\n\n  const selector = {\n    meetingId,\n    userId: { $ne: presenterId },\n    presenter: true,\n  };\n\n  const prevPresenter = Users.findOne(selector);\n\n  // no previous presenters\n  // The below code is responsible for set Meeting presenter to be default pod presenter as well.\n  // It's been handled here because right now akka-apps don't handle all cases scenarios.\n  if (!prevPresenter) {\n    const setPresenterPayload = {\n      meetingId,\n      requesterUserId: assignedBy,\n      presenterId,\n    };\n\n    const defaultPodSelector = {\n      meetingId,\n      podId: 'DEFAULT_PRESENTATION_POD',\n    };\n    const currentDefaultPodPresenter = PresentationPods.findOne(defaultPodSelector);\n    const { currentPresenterId } = currentDefaultPodPresenter;\n\n    if (currentPresenterId === '') {\n      return setPresenterInPodReqMsg(setPresenterPayload);\n    }\n\n    const oldPresenter = Users.findOne({ meetingId, userId: currentPresenterId });\n\n    if (oldPresenter?.userId !== currentPresenterId) {\n      return setPresenterInPodReqMsg(setPresenterPayload);\n    }\n\n    return true;\n  }\n\n  changePresenter(false, prevPresenter.userId, meetingId, assignedBy);\n}\n","import { check } from 'meteor/check';\n\nimport removeUser from '../modifiers/removeUser';\n\nexport default function handleRemoveUser({ body }, meetingId) {\n  const { intId } = body;\n\n  check(meetingId, String);\n  check(intId, String);\n\n  return removeUser(meetingId, intId);\n}\n","import userEjected from '../modifiers/userEjected';\n\nexport default function handleEjectedUser({ header, body }) {\n  const { meetingId, userId } = header;\n  const { reasonCode } = body;\n\n  userEjected(meetingId, userId, reasonCode);\n}\n","import { check } from 'meteor/check';\nimport userInactivityInspect from '../modifiers/userInactivityInspect';\n\nexport default function handleUserInactivityInspect({ header, body }, meetingId) {\n  const { userId } = header;\n  const { responseDelay } = body;\n\n  check(userId, String);\n  check(responseDelay, Match.Integer);\n  check(meetingId, String);\n\n\n  userInactivityInspect(userId, responseDelay);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userJoin(meetingId, userId, authToken) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserJoinMeetingReqMsg';\n\n  check(authToken, String);\n\n  const payload = {\n    userId,\n    authToken,\n    clientType: 'HTML5',\n  };\n\n  Logger.info(`User='${userId}' is joining meeting='${meetingId}' authToken='${authToken}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\n\nimport addUser from '../modifiers/addUser';\n\nexport default function handleUserJoined({ body }, meetingId) {\n  const user = body;\n\n  check(user, Object);\n\n  addUser(meetingId, user);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport userJoin from './userJoin';\nimport pendingAuthenticationsStore from '../store/pendingAuthentications';\nimport createDummyUser from '../modifiers/createDummyUser';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nimport upsertValidationState from '/imports/api/auth-token-validation/server/modifiers/upsertValidationState';\nimport { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst clearOtherSessions = (sessionUserId, current = false) => {\n  const serverSessions = Meteor.server.sessions;\n  Object.keys(serverSessions)\n    .filter(i => serverSessions[i].userId === sessionUserId)\n    .filter(i => i !== current)\n    .forEach(i => serverSessions[i].close());\n};\n\nexport default function handleValidateAuthToken({ body }, meetingId) {\n  const {\n    userId,\n    valid,\n    authToken,\n    waitForApproval,\n    registeredOn,\n    authTokenValidatedOn,\n    reasonCode,\n  } = body;\n\n  check(userId, String);\n  check(authToken, String);\n  check(valid, Boolean);\n  check(waitForApproval, Boolean);\n  check(registeredOn, Number);\n  check(authTokenValidatedOn, Number);\n  check(reasonCode, String);\n\n  const pendingAuths = pendingAuthenticationsStore.take(meetingId, userId, authToken);\n\n  Logger.info(`PendingAuths length [${pendingAuths.length}]`);\n  if (pendingAuths.length === 0) return;\n\n  if (!valid) {\n    pendingAuths.forEach(\n      (pendingAuth) => {\n        try {\n          const { methodInvocationObject } = pendingAuth;\n          const connectionId = methodInvocationObject.connection.id;\n\n          upsertValidationState(meetingId, userId, ValidationStates.INVALID, connectionId, reasonCode);\n\n          // Schedule socket disconnection for this user, giving some time for client receiving the reason of disconnection\n          Meteor.setTimeout(() => {\n            methodInvocationObject.connection.close();\n          }, 2000);\n\n          Logger.info(`Closed connection ${connectionId} due to invalid auth token.`);\n        } catch (e) {\n          Logger.error(`Error closing socket for meetingId '${meetingId}', userId '${userId}', authToken ${authToken}`);\n        }\n      },\n    );\n\n    return;\n  }\n\n  if (valid) {\n    // Define user ID on connections\n    pendingAuths.forEach(\n      (pendingAuth) => {\n        const { methodInvocationObject } = pendingAuth;\n\n        /* Logic migrated from validateAuthToken method ( postponed to only run in case of success response ) - Begin */\n        const sessionId = `${meetingId}--${userId}`;\n\n        methodInvocationObject.setUserId(sessionId);\n\n        const User = Users.findOne({\n          meetingId,\n          userId,\n        });\n\n        if (!User) {\n          createDummyUser(meetingId, userId, authToken);\n        }\n\n        ClientConnections.add(sessionId, methodInvocationObject.connection);\n        upsertValidationState(meetingId, userId, ValidationStates.VALIDATED, methodInvocationObject.connection.id);\n\n        /* End of logic migrated from validateAuthToken */\n      },\n    );\n  }\n\n  const selector = {\n    meetingId,\n    userId,\n    clientType: 'HTML5',\n  };\n\n  const User = Users.findOne(selector);\n\n  // If we dont find the user on our collection is a flash user and we can skip\n  if (!User) return;\n\n  // Publish user join message\n  if (valid && !waitForApproval) {\n    Logger.info('User=', User);\n    userJoin(meetingId, userId, User.authToken);\n  }\n\n  const modifier = {\n    $set: {\n      validated: valid,\n      approved: !waitForApproval,\n      loginTime: registeredOn,\n      authTokenValidatedTime: authTokenValidatedOn,\n      inactivityCheck: false,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      if (valid) {\n        const sessionUserId = `${meetingId}-${userId}`;\n        const currentConnectionId = User.connectionId ? User.connectionId : false;\n        clearOtherSessions(sessionUserId, currentConnectionId);\n      }\n\n      Logger.info(`Validated auth token as ${valid} user=${userId} meeting=${meetingId}`);\n    } else {\n      Logger.info('No auth to validate');\n    }\n  } catch (err) {\n    Logger.error(`Validating auth token: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function assignPresenter(userId) { // TODO-- send username from client side\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'AssignPresenterReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(userId, String);\n\n  const User = Users.findOne({\n    meetingId,\n    userId,\n  });\n\n  if (!User) {\n    throw new Meteor.Error('user-not-found', 'You need a valid user to be able to set presenter');\n  }\n\n  const payload = {\n    newPresenterId: userId,\n    newPresenterName: User.name,\n    assignedBy: requesterUserId,\n    requesterId: requesterUserId,\n  };\n\n  Logger.verbose('User set as presenter', { userId, meetingId, setBy: requesterUserId });\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function changeRole(userId, role) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeUserRoleCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(userId, String);\n  check(role, String);\n\n  const payload = {\n    userId,\n    role,\n    changedBy: requesterUserId,\n  };\n\n  Logger.verbose('Changed user role', {\n    userId, role, changedBy: requesterUserId, meetingId,\n  });\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function removeUser(userId, banUser) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EjectUserFromMeetingCmdMsg';\n\n  const { meetingId, requesterUserId: ejectedBy } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(ejectedBy, String);\n  check(userId, String);\n\n  const payload = {\n    userId,\n    ejectedBy,\n    banUser,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, ejectedBy, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setEmojiStatus(userId, status) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeUserEmojiCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(userId, String);\n\n  const payload = {\n    emoji: status,\n    userId,\n  };\n\n  Logger.verbose('User emoji status updated', {\n    userId, status, requesterUserId, meetingId,\n  });\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport setMobile from '../modifiers/setMobile';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setMobileUser() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  Logger.verbose(`Mobile user ${requesterUserId} from meeting ${meetingId}`);\n\n  setMobile(meetingId, requesterUserId);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function setRandomUser() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SelectRandomViewerReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const payload = {\n    requestedBy: requesterUserId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport setEffectiveConnectionType from '../modifiers/setUserEffectiveConnectionType';\n\nexport default function setUserEffectiveConnectionType(effectiveConnectionType) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeUserEffectiveConnectionMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(effectiveConnectionType, String);\n\n  const payload = {\n    meetingId,\n    userId: requesterUserId,\n    effectiveConnectionType,\n  };\n\n  setEffectiveConnectionType(meetingId, requesterUserId, effectiveConnectionType);\n\n  Logger.verbose('Updated user effective connection', { requesterUserId, effectiveConnectionType });\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function toggleUserLock(userId, lock) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'LockUserInMeetingCmdMsg';\n\n  const { meetingId, requesterUserId: lockedBy } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(lockedBy, String);\n  check(userId, String);\n  check(lock, Boolean);\n\n  const payload = {\n    lockedBy,\n    userId,\n    lock,\n  };\n\n  Logger.verbose('Updated lock status for user', {\n    meetingId, userId, lock, lockedBy,\n  });\n\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, lockedBy, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport Users from '/imports/api/users';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function userActivitySign() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserActivitySignCmdMsg';\n  const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(userId, String);\n\n  const payload = {\n    userId,\n  };\n\n  const selector = {\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      inactivityCheck: false,\n    },\n  };\n\n  Users.update(selector, modifier); // TODO-- we should move this to a modifier\n\n  Logger.info(`User ${userId} sent a activity sign for meeting ${meetingId}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Users from '/imports/api/users';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nexport default function userLeaving(meetingId, userId, connectionId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserLeaveReqMsg';\n\n  check(userId, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = Users.findOne(selector);\n\n  if (!user) {\n    Logger.info(`Skipping userLeaving. Could not find ${userId} in ${meetingId}`);\n    return;\n  }\n\n  const auth = AuthTokenValidation.findOne({\n    meetingId,\n    userId,\n  }, { sort: { updatedAt: -1 } });\n\n  // If the current user connection is not the same that triggered the leave we skip\n  if (auth?.connectionId !== connectionId) {\n    Logger.info(`Skipping userLeaving. User connectionId=${user.connectionId} is different from requester connectionId=${connectionId}`);\n    return false;\n  }\n\n  const payload = {\n    userId,\n    sessionId: meetingId,\n    loggedOut: user.loggedOut,\n  };\n\n  ClientConnections.removeClientConnection(`${meetingId}--${userId}`, connectionId);\n\n  Logger.info(`User '${userId}' is leaving meeting '${meetingId}'`);\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\nimport { check } from 'meteor/check';\n\nexport default function userLeftMeeting() { // TODO-- spread the code to method/modifier/handler\n  // so we don't update the db in a method\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n  };\n\n  try {\n    const numberAffected = Users.update(selector, { $set: { loggedOut: true } });\n\n    if (numberAffected) {\n      Logger.info(`user left id=${requesterUserId} meeting=${meetingId}`);\n      ClientConnections.removeClientConnection(this.userId, this.connection.id);\n    }\n  } catch (err) {\n    Logger.error(`Error on user left: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport upsertValidationState from '/imports/api/auth-token-validation/server/modifiers/upsertValidationState';\nimport { ValidationStates } from '/imports/api/auth-token-validation';\nimport pendingAuthenticationsStore from '../store/pendingAuthentications';\n\nexport default function validateAuthToken(meetingId, requesterUserId, requesterToken, externalId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ValidateAuthTokenReqMsg';\n\n  Logger.debug('ValidateAuthToken method called', { meetingId, requesterUserId, requesterToken, externalId });\n\n  if (!meetingId) return false;\n\n  // Store reference of methodInvocationObject ( to postpone the connection userId definition )\n  pendingAuthenticationsStore.add(meetingId, requesterUserId, requesterToken, this);\n  upsertValidationState(meetingId, requesterUserId, ValidationStates.VALIDATING, this.connection.id);\n\n  const payload = {\n    userId: requesterUserId,\n    authToken: requesterToken,\n  };\n\n  Logger.info(`User '${requesterUserId}' is trying to validate auth token for meeting '${meetingId}' from connection '${this.connection.id}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport addUser from '/imports/api/users/server/modifiers/addUser';\n\n\nexport default function addDialInUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, Object);\n\n  const USER_CONFIG = Meteor.settings.public.user;\n  const ROLE_VIEWER = USER_CONFIG.role_viewer;\n\n  const { intId, callerName } = voiceUser;\n\n  const voiceOnlyUser = {\n    intId,\n    extId: intId, // TODO\n    name: callerName,\n    role: ROLE_VIEWER.toLowerCase(),\n    guest: false,\n    authed: true,\n    waitingForAcceptance: false,\n    guestStatus: 'ALLOW',\n    emoji: 'none',\n    presenter: false,\n    locked: false, // TODO\n    avatar: '',\n    clientType: 'dial-in-user',\n  };\n\n  return addUser(meetingId, voiceOnlyUser);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Meetings from '/imports/api/meetings';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport _ from 'lodash';\nimport SanitizeHTML from 'sanitize-html';\nimport addUserPsersistentData from '/imports/api/users-persistent-data/server/modifiers/addUserPersistentData';\nimport stringHash from 'string-hash';\nimport flat from 'flat';\n\nimport addVoiceUser from '/imports/api/voice-users/server/modifiers/addVoiceUser';\n\nconst COLOR_LIST = [\n  '#7b1fa2', '#6a1b9a', '#4a148c', '#5e35b1', '#512da8', '#4527a0',\n  '#311b92', '#3949ab', '#303f9f', '#283593', '#1a237e', '#1976d2', '#1565c0',\n  '#0d47a1', '#0277bd', '#01579b',\n];\n\nexport default function addUser(meetingId, userData) {\n  const user = userData;\n  const sanitizedName = SanitizeHTML(userData.name, {\n    allowedTags: [],\n    allowedAttributes: {},\n  });\n  // if user typed only tags\n  user.name = sanitizedName.length === 0\n    ? _.escape(userData.name)\n    : sanitizedName;\n\n  check(meetingId, String);\n\n  check(user, {\n    intId: String,\n    extId: String,\n    name: String,\n    role: String,\n    guest: Boolean,\n    authed: Boolean,\n    waitingForAcceptance: Match.Maybe(Boolean),\n    guestStatus: String,\n    emoji: String,\n    presenter: Boolean,\n    locked: Boolean,\n    avatar: String,\n    clientType: String,\n  });\n\n  const userId = user.intId;\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n  const Meeting = Meetings.findOne({ meetingId });\n\n  /* While the akka-apps dont generate a color we just pick one\n    from a list based on the userId */\n  const color = COLOR_LIST[stringHash(user.intId) % COLOR_LIST.length];\n\n  const userInfos = Object.assign(\n    {\n      meetingId,\n      sortName: user.name.trim().toLowerCase(),\n      color,\n      mobile: false,\n      breakoutProps: {\n        isBreakoutUser: Meeting.meetingProp.isBreakout,\n        parentId: Meeting.breakoutProps.parentId,\n      },\n      effectiveConnectionType: null,\n      inactivityCheck: false,\n      responseDelay: 0,\n      loggedOut: false,\n    },\n    flat(user),\n  );\n\n  const modifier = {\n    $set: userInfos,\n  };\n  addUserPsersistentData(userInfos);\n  // Only add an empty VoiceUser if there isn't one already and if the user coming in isn't a\n  // dial-in user. We want to avoid overwriting good data\n  if (user.clientType !== 'dial-in-user' && !VoiceUsers.findOne({ meetingId, intId: userId })) {\n    addVoiceUser(meetingId, {\n      voiceUserId: '',\n      intId: userId,\n      callerName: user.name,\n      callerNum: '',\n      muted: false,\n      talking: false,\n      callingWith: '',\n      listenOnly: false,\n      voiceConf: '',\n      joined: false,\n    });\n  }\n\n  try {\n    const { insertedId } = Users.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added user id=${userId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted user id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding user to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Meetings from '/imports/api/meetings';\nimport stopWatchingExternalVideoSystemCall from '/imports/api/external-videos/server/methods/stopWatchingExternalVideoSystemCall';\n\nexport default function changePresenter(presenter, userId, meetingId, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      presenter,\n    },\n  };\n\n  try {\n    const meeting = Meetings.findOne({ meetingId });\n    if (meeting && meeting.externalVideoUrl) {\n      Logger.info(`ChangePresenter:There is external video being shared. Stopping it due to presenter change, ${meeting.externalVideoUrl}`);\n      stopWatchingExternalVideoSystemCall({ meetingId, requesterUserId: 'system-presenter-changed' });\n    }\n\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed presenter=${presenter} id=${userId} meeting=${meetingId}`\n        + `${changedBy ? ` changedBy=${changedBy}` : ''}`);\n    }\n  } catch (err) {\n    Logger.error(`Changed user role: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport updateRole from '/imports/api/users-persistent-data/server/modifiers/updateRole';\nimport Users from '/imports/api/users';\n\nexport default function changeRole(role, userId, meetingId, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      role,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      updateRole(userId, meetingId, role);\n      Logger.info(`Changed user role=${role} id=${userId} meeting=${meetingId}`\n        + `${changedBy ? ` changedBy=${changedBy}` : ''}`);\n    }\n  } catch (err) {\n    Logger.error(`Changed user role: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users/index';\n\nexport default function clearUsers(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Users.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Users (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error clearing Users (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Users.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Users (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error clearing Users (all). ${err}`);\n    }\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function createDummyUser(meetingId, userId, authToken) {\n  check(meetingId, String);\n  check(userId, String);\n  check(authToken, String);\n\n  const User = Users.findOne({ meetingId, userId });\n  if (User) {\n    throw new Meteor.Error('existing-user', 'Tried to create a dummy user for an existing user');\n  }\n\n  const doc = {\n    meetingId,\n    userId,\n    authToken,\n    clientType: 'HTML5',\n    validated: null,\n  };\n\n  try {\n    const insertedId = Users.insert(doc);\n\n    if (insertedId) {\n      Logger.info(`Created dummy user id=${userId} token=${authToken} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Creating dummy user to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport VideoStreams from '/imports/api/video-streams';\nimport Logger from '/imports/startup/server/logger';\nimport setloggedOutStatus from '/imports/api/users-persistent-data/server/modifiers/setloggedOutStatus';\nimport stopWatchingExternalVideoSystemCall from '/imports/api/external-videos/server/methods/stopWatchingExternalVideoSystemCall';\nimport clearUserInfoForRequester from '/imports/api/users-infos/server/modifiers/clearUserInfoForRequester';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nconst clearAllSessions = (sessionUserId) => {\n  const serverSessions = Meteor.server.sessions;\n  Object.keys(serverSessions)\n    .filter((i) => serverSessions[i].userId === sessionUserId)\n    .forEach((i) => serverSessions[i].close());\n};\n\nexport default function removeUser(meetingId, userId) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const userToRemove = Users.findOne({ userId, meetingId });\n\n  if (userToRemove) {\n    const { presenter } = userToRemove;\n    if (presenter) {\n      stopWatchingExternalVideoSystemCall({ meetingId, requesterUserId: 'system-presenter-was-removed' });\n    }\n  }\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  try {\n    setloggedOutStatus(userId, meetingId, true);\n    VideoStreams.remove({ meetingId, userId });\n    const sessionUserId = `${meetingId}-${userId}`;\n\n    ClientConnections.removeClientConnection(`${meetingId}--${userId}`);\n\n    clearAllSessions(sessionUserId);\n\n    clearUserInfoForRequester(meetingId, userId);\n\n    /*\n    Timeout added to reduce the probability that \"userRemove\" happens too close to \"ejectUser\",\n    redirecting user to the wrong component.\n    This is a workaround and should be removed as soon as a better fix is made\n    see: https://github.com/bigbluebutton/bigbluebutton/pull/12057\n    */\n    const DELAY_USER_REMOVAL_TIMEOUT_MS = 1000;\n\n    Meteor.wrapAsync((callback) => {\n      Meteor.setTimeout(() => {\n        Users.remove(selector);\n        callback();\n      }, DELAY_USER_REMOVAL_TIMEOUT_MS);\n    })();\n\n    Logger.info(`Removed user id=${userId} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Removing user from Users collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport Users from '/imports/api/users';\n\nexport default function setMobile(meetingId, userId) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      mobile: true,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Assigned mobile user id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Assigning mobile user: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setUserEffectiveConnectionType(meetingId, userId, effectiveConnectionType) {\n  check(meetingId, String);\n  check(userId, String);\n  check(effectiveConnectionType, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    effectiveConnectionType: { $ne: effectiveConnectionType },\n  };\n\n  const modifier = {\n    $set: {\n      effectiveConnectionType,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated user ${userId} effective connection to ${effectiveConnectionType} in meeting ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating user ${userId}: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport clearUserInfoForRequester from '/imports/api/users-infos/server/modifiers/clearUserInfoForRequester';\n\nexport default function userEjected(meetingId, userId, ejectedReason) {\n  check(meetingId, String);\n  check(userId, String);\n  check(ejectedReason, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      ejected: true,\n      ejectedReason,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      clearUserInfoForRequester(meetingId, userId);\n      Logger.info(`Ejected user id=${userId} meeting=${meetingId} reason=${ejectedReason}`);\n    }\n  } catch (err) {\n    Logger.error(`Ejecting user from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function userInactivityInspect(userId, responseDelay) {\n  check(userId, String);\n  check(responseDelay, Match.Integer);\n\n  const selector = {\n    userId,\n    inactivityCheck: false,\n  };\n\n  const modifier = {\n    $set: {\n      inactivityCheck: true,\n      responseDelay,\n    },\n  };\n\n  try {\n    const { numberAffected } = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated user ${userId} with inactivity inspect`);\n    }\n  } catch (err) {\n    Logger.error(`Inactivity check for user ${userId}: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\n\nclass PendingAuthentitcations {\n  constructor() {\n    Logger.debug('PendingAuthentitcations :: constructor');\n    this.store = [];\n  }\n\n  generateKey(meetingId, userId, authToken) {\n    // Protect against separator injection\n    meetingId = meetingId.replace(/ /g, '');\n    userId = userId.replace(/ /g, '');\n    authToken = authToken.replace(/ /g, '');\n\n    // Space separated key\n    return `${meetingId} ${userId} ${authToken}`;\n  }\n\n  add(meetingId, userId, authToken, methodInvocationObject) {\n    Logger.debug('PendingAuthentitcations :: add', { meetingId, userId, authToken });\n    this.store.push({\n      key: this.generateKey(meetingId, userId, authToken),\n      meetingId,\n      userId,\n      authToken,\n      methodInvocationObject,\n    });\n  }\n\n  take(meetingId, userId, authToken) {\n    const key = this.generateKey(meetingId, userId, authToken);\n    Logger.debug('PendingAuthentitcations :: take', {\n      key, meetingId, userId, authToken,\n    });\n\n    // find matches\n    const matches = this.store.filter(e => e.key === key);\n\n    // remove matches (if any)\n    if (matches.length) {\n      this.store = this.store.filter(e => e.key !== key);\n    }\n\n    // return matches\n    return matches;\n  }\n}\nexport default new PendingAuthentitcations();\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleRemoveUser from './handlers/removeUser';\nimport handleUserJoined from './handlers/userJoined';\nimport handleValidateAuthToken from './handlers/validateAuthToken';\nimport handlePresenterAssigned from './handlers/presenterAssigned';\nimport handleEmojiStatus from './handlers/emojiStatus';\nimport handleUserEjected from './handlers/userEjected';\nimport handleChangeRole from './handlers/changeRole';\nimport handleUserInactivityInspect from './handlers/userInactivityInspect';\n\nRedisPubSub.on('PresenterAssignedEvtMsg', handlePresenterAssigned);\nRedisPubSub.on('UserJoinedMeetingEvtMsg', handleUserJoined);\nRedisPubSub.on('UserLeftMeetingEvtMsg', handleRemoveUser);\nRedisPubSub.on('ValidateAuthTokenRespMsg', handleValidateAuthToken);\nRedisPubSub.on('UserEmojiChangedEvtMsg', handleEmojiStatus);\nRedisPubSub.on('UserEjectedFromMeetingEvtMsg', handleUserEjected);\nRedisPubSub.on('UserRoleChangedEvtMsg', handleChangeRole);\nRedisPubSub.on('UserInactivityInspectMsg', handleUserInactivityInspect);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport validateAuthToken from './methods/validateAuthToken';\nimport setEmojiStatus from './methods/setEmojiStatus';\nimport setMobileUser from './methods/setMobileUser';\nimport assignPresenter from './methods/assignPresenter';\nimport changeRole from './methods/changeRole';\nimport removeUser from './methods/removeUser';\nimport toggleUserLock from './methods/toggleUserLock';\nimport setUserEffectiveConnectionType from './methods/setUserEffectiveConnectionType';\nimport userActivitySign from './methods/userActivitySign';\nimport userLeftMeeting from './methods/userLeftMeeting';\nimport setRandomUser from './methods/setRandomUser';\n\nMeteor.methods({\n  setEmojiStatus,\n  setMobileUser,\n  assignPresenter,\n  changeRole,\n  removeUser,\n  validateAuthToken,\n  toggleUserLock,\n  setUserEffectiveConnectionType,\n  userActivitySign,\n  userLeftMeeting,\n  setRandomUser,\n});\n","import Users from '/imports/api/users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction currentUser() {\n  if (!this.userId) {\n    return Users.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n    intId: { $exists: true },\n  };\n\n  const options = {\n    fields: {\n      user: false,\n      authToken: false, // Not asking for authToken from client side but also not exposing it\n    },\n  };\n\n  return Users.find(selector, options);\n}\n\nfunction publishCurrentUser(...args) {\n  const boundUsers = currentUser.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('current-user', publishCurrentUser);\n\nfunction users(role) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Users was requested by unauth connection ${this.connection.id}`);\n    return Users.find({ meetingId: '' });\n  }\n\n  if (!this.userId) {\n    return Users.find({ meetingId: '' });\n  }\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing Users for ${meetingId} ${userId}`);\n\n  const selector = {\n    $or: [\n      { meetingId },\n    ],\n    intId: { $exists: true },\n  };\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    selector.$or.push({\n      'breakoutProps.isBreakoutUser': true,\n      'breakoutProps.parentId': meetingId,\n    });\n  }\n\n  const options = {\n    fields: {\n      authToken: false,\n    },\n  };\n\n  Logger.debug('Publishing Users', { meetingId, userId });\n\n  return Users.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundUsers = users.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('users', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Users = new Mongo.Collection('users');\n\nif (Meteor.isServer) {\n  // types of queries for the users:\n  // 1. meetingId\n  // 2. meetingId, userId\n\n  Users._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default Users;\n","import { check } from 'meteor/check';\nimport addUserInfo from '../modifiers/addUserInfo';\n\nexport default function handleUserInformation({ header, body }) {\n  check(body, Object);\n  check(header, Object);\n\n  const { userInfo } = body;\n  const { userId, meetingId } = header;\n\n  check(userInfo, Array);\n  check(userId, String);\n  check(meetingId, String);\n\n  return addUserInfo(userInfo, userId, meetingId);\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function removeUserInformation() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n    requesterUserId,\n  };\n\n  try {\n    const numberAffected = UserInfos.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed user information: requester id=${requesterUserId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing user information from collection: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function getUserInformation(externalUserId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toThirdParty;\n  const EVENT_NAME = 'LookUpUserReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(externalUserId, String);\n\n  const payload = {\n    externalUserId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserInfo(userInfo, requesterUserId, meetingId) {\n  const info = {\n    meetingId,\n    requesterUserId,\n    userInfo,\n  };\n\n  try {\n    const numberAffected = UserInfos.insert(info);\n\n    if (numberAffected) {\n      Logger.info(`Added user information: requester id=${requesterUserId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding user information to collection: ${err}`);\n  }\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersInfo(meetingId) {\n  try {\n    const numberAffected = UserInfos.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Infos (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing User Infos (${meetingId}). ${err}`);\n  }\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersInfoForRequester(meetingId, requesterUserId) {\n  try {\n    const numberAffected = UserInfos.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Infos requested by user=${requesterUserId}`);\n    }\n  } catch (err) {\n    Logger.info(`Error on clearing User Infos requested by user=${requesterUserId}. ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleUserInformation from './handlers/userInformation';\n\nRedisPubSub.on('LookUpUserRespMsg', handleUserInformation);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport requestUserInformation from './methods/requestUserInformation';\nimport removeUserInformation from './methods/removeUserInformation';\n\nMeteor.methods({\n  requestUserInformation,\n  removeUserInformation,\n});\n","import { Meteor } from 'meteor/meteor';\nimport UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction userInfos() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing UserInfos was requested by unauth connection ${this.connection.id}`);\n    return UserInfos.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId: requesterUserId } = tokenValidation;\n\n  Logger.debug('Publishing UserInfos requested', { meetingId, requesterUserId });\n\n  return UserInfos.find({ meetingId, requesterUserId });\n}\n\nfunction publish(...args) {\n  const boundUserInfos = userInfos.bind(this);\n  return boundUserInfos(...args);\n}\n\nMeteor.publish('users-infos', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst UserInfos = new Mongo.Collection('users-infos');\n\nif (Meteor.isServer) {\n  UserInfos._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default UserInfos;\n","import { check } from 'meteor/check';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserPersistentData(user) {\n  check(user, {\n    meetingId: String,\n    sortName: String,\n    color: String,\n    mobile: Boolean,\n    breakoutProps: Object,\n    inactivityCheck: Boolean,\n    responseDelay: Number,\n    loggedOut: Boolean,\n    intId: String,\n    extId: String,\n    name: String,\n    role: String,\n    guest: Boolean,\n    authed: Boolean,\n    waitingForAcceptance: Match.Maybe(Boolean),\n    guestStatus: String,\n    emoji: String,\n    presenter: Boolean,\n    locked: Boolean,\n    avatar: String,\n    clientType: String,\n    effectiveConnectionType: null,\n  });\n\n\n  const {\n    intId,\n    extId,\n    meetingId,\n    name,\n    role,\n    token,\n    avatar,\n    guest,\n    color,\n  } = user;\n\n  const userData = {\n    userId: intId,\n    extId,\n    meetingId,\n    name,\n    role,\n    token,\n    avatar,\n    guest,\n    color,\n    loggedOut: false,\n  };\n\n  const selector = {\n    userId: intId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: userData,\n  };\n\n  try {\n    const { insertedId } = UsersPersistentData.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added user id=${intId} to user persistent Data: meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted user id=${intId} to user persistent Data: meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding note to the collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport UsersPersistentData from '/imports/api/users-persistent-data/index';\n\nexport default function clearUsersPersistentData(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = UsersPersistentData.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared users persistent data (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error clearing users persistent data (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = UsersPersistentData.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared users persistent data (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error clearing users persistent data (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setloggedOutStatus(userId, meetingId, status = true) {\n  check(userId, String);\n  check(meetingId, String);\n  check(status, Boolean);\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      loggedOut: status,\n    },\n  };\n\n  try {\n    UsersPersistentData.update(selector, modifier);\n  } catch (err) {\n    Logger.error(`Setting users persistent data's logged out status to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function updateRole(userId, meetingId, role) {\n  check(userId, String);\n  check(meetingId, String);\n  check(role, String);\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      role,\n    },\n  };\n\n  try {\n    UsersPersistentData.update(selector, modifier);\n  } catch (err) {\n    Logger.error(`Updating users persistent data's role to the collection: ${err}`);\n  }\n}\n","import './publishers';\n","import UsersPersistentData from '/imports/api/users-persistent-data';\nimport { Meteor } from 'meteor/meteor';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nfunction usersPersistentData() {\n  if (!this.userId) {\n    return UsersPersistentData.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  return UsersPersistentData.find(selector);\n}\n\nfunction publishUsersPersistentData(...args) {\n  const boundUsers = usersPersistentData.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('users-persistent-data', publishUsersPersistentData);\n","import { Meteor } from 'meteor/meteor';\n\nconst UsersPersistentData = new Mongo.Collection('users-persistent-data');\n\nif (Meteor.isServer) {\n  UsersPersistentData._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default UsersPersistentData;\n","import { check } from 'meteor/check';\nimport addUserSetting from '/imports/api/users-settings/server/modifiers/addUserSetting';\nimport logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst oldParameters = {\n  askForFeedbackOnLogout: 'bbb_ask_for_feedback_on_logout',\n  autoJoin: 'bbb_auto_join_audio',\n  autoShareWebcam: 'bbb_auto_share_webcam',\n  autoSwapLayout: 'bbb_auto_swap_layout',\n  clientTitle: 'bbb_client_title',\n  customStyle: 'bbb_custom_style',\n  customStyleUrl: 'bbb_custom_style_url',\n  displayBrandingArea: 'bbb_display_branding_area',\n  enableScreensharing: 'bbb_enable_screen_sharing',\n  enableVideo: 'bbb_enable_video',\n  forceListenOnly: 'bbb_force_listen_only',\n  hidePresentation: 'bbb_hide_presentation',\n  listenOnlyMode: 'bbb_listen_only_mode',\n  multiUserPenOnly: 'bbb_multi_user_pen_only',\n  multiUserTools: 'bbb_multi_user_tools',\n  outsideToggleRecording: 'bbb_outside_toggle_recording',\n  outsideToggleSelfVoice: 'bbb_outside_toggle_self_voice',\n  presenterTools: 'bbb_presenter_tools',\n  shortcuts: 'bbb_shortcuts',\n  skipCheck: 'bbb_skip_check_audio',\n};\n\nconst oldParametersKeys = Object.keys(oldParameters);\n\nconst currentParameters = [\n  // APP\n  'bbb_ask_for_feedback_on_logout',\n  'bbb_override_default_locale',\n  'bbb_auto_join_audio',\n  'bbb_client_title',\n  'bbb_force_listen_only',\n  'bbb_listen_only_mode',\n  'bbb_skip_check_audio',\n  'bbb_skip_check_audio_on_first_join',\n  // BRANDING\n  'bbb_display_branding_area',\n  // SHORTCUTS\n  'bbb_shortcuts',\n  // KURENTO\n  'bbb_auto_share_webcam',\n  'bbb_preferred_camera_profile',\n  'bbb_enable_screen_sharing',\n  'bbb_enable_video',\n  'bbb_record_video',\n  'bbb_skip_video_preview',\n  'bbb_skip_video_preview_on_first_join',\n  'bbb_mirror_own_webcam',\n  // PRESENTATION\n  'bbb_force_restore_presentation_on_new_events',\n  // WHITEBOARD\n  'bbb_multi_user_pen_only',\n  'bbb_presenter_tools',\n  'bbb_multi_user_tools',\n  // SKINNING/THEMMING\n  'bbb_custom_style',\n  'bbb_custom_style_url',\n  // LAYOUT\n  'bbb_auto_swap_layout',\n  'bbb_hide_presentation',\n  'bbb_show_participants_on_login',\n  'bbb_show_public_chat_on_login',\n  // OUTSIDE COMMANDS\n  'bbb_outside_toggle_self_voice',\n  'bbb_outside_toggle_recording',\n];\n\nfunction valueParser(val) {\n  try {\n    const parsedValue = JSON.parse(val.toLowerCase().trim());\n    return parsedValue;\n  } catch (error) {\n    logger.warn(`addUserSettings:Parameter ${val} could not be parsed (was not json)`);\n    return val;\n  }\n}\n\nexport default function addUserSettings(settings) {\n  check(settings, [Object]);\n\n  const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(userId, String);\n\n  let parameters = {};\n\n  settings.forEach((el) => {\n    const settingKey = Object.keys(el).shift();\n    const normalizedKey = settingKey.trim();\n\n    if (currentParameters.includes(normalizedKey)) {\n      if (!Object.keys(parameters).includes(normalizedKey)) {\n        parameters = {\n          [normalizedKey]: valueParser(el[settingKey]),\n          ...parameters,\n        };\n      } else {\n        parameters[normalizedKey] = el[settingKey];\n      }\n      return;\n    }\n\n    if (oldParametersKeys.includes(normalizedKey)) {\n      const matchingNewKey = oldParameters[normalizedKey];\n      if (!Object.keys(parameters).includes(matchingNewKey)) {\n        parameters = {\n          [matchingNewKey]: valueParser(el[settingKey]),\n          ...parameters,\n        };\n      }\n      return;\n    }\n\n    logger.warn(`Parameter ${normalizedKey} not handled`);\n  });\n\n  const settingsAdded = [];\n  Object.entries(parameters).forEach((el) => {\n    const setting = el[0];\n    const value = el[1];\n    settingsAdded.push(addUserSetting(meetingId, userId, setting, value));\n  });\n\n  return settingsAdded;\n}\n","import { check } from 'meteor/check';\nimport UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserSetting(meetingId, userId, setting, value) {\n  check(meetingId, String);\n  check(userId, String);\n  check(setting, String);\n  check(value, Match.Any);\n\n  const selector = {\n    meetingId,\n    userId,\n    setting,\n  };\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      setting,\n      value,\n    },\n  };\n\n  try {\n    const { numberAffected } = UserSettings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose('Upserted user setting', { meetingId, userId, setting });\n    }\n  } catch (err) {\n    Logger.error(`Adding user setting to collection: ${err}`);\n  }\n}\n","import UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersSettings(meetingId) {\n  try {\n    const numberAffected = UserSettings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Settings (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing User Settings (${meetingId}). ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addUserSettings from './methods/addUserSettings';\n\nMeteor.methods({\n  addUserSettings,\n});\n","import { Meteor } from 'meteor/meteor';\nimport UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport User from '/imports/api/users';\n\nfunction userSettings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing UserSettings was requested by unauth connection ${this.connection.id}`);\n    return UserSettings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const currentUser = User.findOne({ userId });\n\n  if (currentUser && currentUser.breakoutProps.isBreakoutUser) {\n    const { parentId } = currentUser.breakoutProps;\n\n    const [externalId] = currentUser.extId.split('-');\n\n    const mainRoomUserSettings = UserSettings.find({ meetingId: parentId, userId: externalId });\n\n    mainRoomUserSettings.map(({ setting, value }) => ({\n      meetingId,\n      setting,\n      userId,\n      value,\n    })).forEach((doc) => {\n      const selector = {\n        meetingId,\n        setting: doc.setting,\n      };\n\n      UserSettings.upsert(selector, doc);\n    });\n\n    Logger.debug('Publishing UserSettings', { meetingId, userId });\n\n    return UserSettings.find({ meetingId, userId });\n  }\n\n  Logger.debug('Publishing UserSettings', { meetingId, userId });\n\n  return UserSettings.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundUserSettings = userSettings.bind(this);\n  return boundUserSettings(...args);\n}\n\nMeteor.publish('users-settings', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst UserSettings = new Mongo.Collection('users-settings');\n\nif (Meteor.isServer) {\n  UserSettings._ensureIndex({\n    meetingId: 1, userId: 1,\n  });\n}\n\nexport default UserSettings;\n","import { check } from 'meteor/check';\nimport floorChanged from '../modifiers/floorChanged';\n\nexport default function handleFloorChanged({ header, body }, meetingId) {\n  const { intId, floor, lastFloorTime } = body;\n  check(meetingId, String);\n  check(intId, String);\n  check(floor, Boolean);\n  check(lastFloorTime, String);\n\n  return floorChanged(meetingId, intId, floor, lastFloorTime);\n}\n","import { check } from 'meteor/check';\nimport sharedWebcam from '../modifiers/sharedWebcam';\nimport { isValidStream } from '/imports/api/video-streams/server/helpers';\n\nexport default function handleUserSharedHtml5Webcam({ header, body }, meetingId) {\n  const { userId, stream } = body;\n\n  check(header, Object);\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  if (!isValidStream(stream)) return false;\n\n  return sharedWebcam(meetingId, userId, stream);\n}\n","import { check } from 'meteor/check';\nimport unsharedWebcam from '../modifiers/unsharedWebcam';\nimport { isValidStream } from '/imports/api/video-streams/server/helpers';\n\nexport default function handleUserUnsharedHtml5Webcam({ header, body }, meetingId) {\n  const { userId, stream } = body;\n\n  check(header, Object);\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  if (!isValidStream(stream)) return false;\n\n  return unsharedWebcam(meetingId, userId, stream);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userShareWebcam(stream) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserBroadcastCamStartMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(stream, String);\n\n  Logger.info(`user sharing webcam: ${meetingId} ${requesterUserId}`);\n\n\n  // const actionName = 'joinVideo';\n  /* TODO throw an error if user has no permission to share webcam\n  if (!isAllowedTo(actionName, credentials)) {\n    throw new Meteor.Error('not-allowed', `You are not allowed to share webcam`);\n  } */\n\n  const payload = {\n    stream,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userUnshareWebcam(stream) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserBroadcastCamStopMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(stream, String);\n\n  Logger.info(`user unsharing webcam: ${meetingId} ${requesterUserId}`);\n\n  // const actionName = 'joinVideo';\n  /* TODO throw an error if user has no permission to share webcam\n  if (!isAllowedTo(actionName, credentials)) {\n    throw new Meteor.Error('not-allowed', `You are not allowed to share webcam`);\n  } */\n\n  const payload = {\n    stream,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\n\nexport default function clearVideoStreams(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VideoStreams.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VideoStreams in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VideoStreams (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VideoStreams.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VideoStreams in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VideoStreams (all). ${err}`);\n    }\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\n\nexport default function floorChanged(meetingId, userId, floor, lastFloorTime) {\n  check(meetingId, String);\n  check(userId, String);\n  check(floor, Boolean);\n  check(lastFloorTime, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  }\n\n  const modifier = {\n    $set: {\n      floor,\n      lastFloorTime: floor ? lastFloorTime : undefined,\n    },\n  };\n\n  try {\n    const numberAffected = VideoStreams.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated user streams floor times userId=${userId} floor=${floor} lastFloorTime=${lastFloorTime}`);\n    }\n  } catch (error) {\n    return Logger.error(`Error updating stream floor status: ${error}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\nimport {\n  getDeviceId,\n  getUserName,\n} from '/imports/api/video-streams/server/helpers';\nimport VoiceUsers from '/imports/api/voice-users/';\n\nconst BASE_FLOOR_TIME = \"0\";\n\nexport default function sharedWebcam(meetingId, userId, stream) {\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  const deviceId = getDeviceId(stream);\n  const name = getUserName(userId);\n  const vu = VoiceUsers.findOne(\n    { meetingId, intId: userId },\n    { fields: { floor: 1, lastFloorTime: 1 }}\n  ) || {};\n  const floor = vu.floor || false;\n  const lastFloorTime = vu.lastFloorTime || BASE_FLOOR_TIME;\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  const modifier = {\n    $set: {\n      stream,\n      name,\n      lastFloorTime,\n      floor,\n    },\n  };\n\n  try {\n    const { insertedId } = VideoStreams.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Updated stream=${stream} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error setting stream: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\nimport { getDeviceId } from '/imports/api/video-streams/server/helpers';\n\nexport default function unsharedWebcam(meetingId, userId, stream) {\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  const deviceId = getDeviceId(stream);\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  try {\n    VideoStreams.remove(selector);\n\n    Logger.info(`Removed stream=${stream} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Error removing stream: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleUserSharedHtml5Webcam from './handlers/userSharedHtml5Webcam';\nimport handleUserUnsharedHtml5Webcam from './handlers/userUnsharedHtml5Webcam';\nimport handleFloorChanged from './handlers/floorChanged';\n\nRedisPubSub.on('UserBroadcastCamStartedEvtMsg', handleUserSharedHtml5Webcam);\nRedisPubSub.on('UserBroadcastCamStoppedEvtMsg', handleUserUnsharedHtml5Webcam);\nRedisPubSub.on('AudioFloorChangedEvtMsg', handleFloorChanged);\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nconst FLASH_STREAM_REGEX = /^([A-z0-9]+)-([A-z0-9]+)-([A-z0-9]+)(-recorded)?$/;\nconst TOKEN = '_';\n\nconst isValidStream = stream => !FLASH_STREAM_REGEX.test(stream);\nconst getDeviceId = (stream) => {\n  const splitStream = stream.split(TOKEN);\n  if (splitStream.length === 3) return splitStream[2];\n  Logger.warn(`Could not get deviceId from stream=${stream}`);\n  return stream;\n};\n\nconst getUserName = (userId) => {\n  const user = Users.findOne(\n    { userId },\n    { fields: { name: 1 } },\n  );\n  if (user) return user.name;\n  return userId;\n};\n\nexport {\n  isValidStream,\n  getDeviceId,\n  getUserName,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publisher';\n","import { Meteor } from 'meteor/meteor';\nimport userShareWebcam from './methods/userShareWebcam';\nimport userUnshareWebcam from './methods/userUnshareWebcam';\n\nMeteor.methods({\n  userShareWebcam,\n  userUnshareWebcam,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction videoStreams() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VideoStreams was requested by unauth connection ${this.connection.id}`);\n    return VideoStreams.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing VideoStreams', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n  };\n\n  return VideoStreams.find(selector);\n}\n\nfunction publish(...args) {\n  const boundVideoStreams = videoStreams.bind(this);\n  return boundVideoStreams(...args);\n}\n\nMeteor.publish('video-streams', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VideoStreams = new Mongo.Collection('video-streams');\n\nif (Meteor.isServer) {\n  // types of queries for the video users:\n  // 2. meetingId\n\n  VideoStreams._ensureIndex({ meetingId: 1 });\n}\n\nexport default VideoStreams;\n","import { check } from 'meteor/check';\nimport VoiceCallState from '/imports/api/voice-call-states';\nimport Logger from '/imports/startup/server/logger';\n\n// \"CALL_STARTED\", \"IN_ECHO_TEST\", \"IN_CONFERENCE\", \"CALL_ENDED\"\n\nexport default function handleVoiceCallStateEvent({ body }, meetingId) {\n  const {\n    voiceConf,\n    clientSession,\n    userId,\n    callerName,\n    callState,\n  } = body;\n\n  check(meetingId, String);\n  check(voiceConf, String);\n  check(clientSession, String);\n  check(userId, String);\n  check(callerName, String);\n  check(callState, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    clientSession,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      voiceConf,\n      clientSession,\n      callState,\n    },\n  };\n\n  try {\n    const { numberAffected } = VoiceCallState.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Update voice call', {\n        state: userId, meetingId, clientSession, callState,\n      });\n    }\n  } catch (err) {\n    Logger.error(`Update voice call state=${userId}: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VoiceCallStates from '/imports/api/voice-call-states';\n\nexport default function clearVoiceCallStates(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VoiceCallStates.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VoiceCallStates in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing VoiceCallStates in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VoiceCallStates.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VoiceCallStates in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceCallStates in all meetings. ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleVoiceCallStateEvent from './handlers/voiceCallStateEvent';\n\nRedisPubSub.on('VoiceCallStateEvtMsg', handleVoiceCallStateEvent);\n","import './eventHandlers';\nimport './publishers';\n","import VoiceCallStates from '/imports/api/voice-call-states';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction voiceCallStates() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VoiceCallStates was requested by unauth connection ${this.connection.id}`);\n    return VoiceCallStates.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Voice Call States', { meetingId, userId });\n\n  return VoiceCallStates.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundVoiceCallStates = voiceCallStates.bind(this);\n  return boundVoiceCallStates(...args);\n}\n\nMeteor.publish('voice-call-states', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VoiceCallStates = new Mongo.Collection('voiceCallStates');\n\nif (Meteor.isServer) {\n  // types of queries for the voice users:\n  // 1. intId\n  // 2. meetingId, intId\n\n  VoiceCallStates._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default VoiceCallStates;\n","import { check } from 'meteor/check';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleFloorChange({ header, body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport Meetings from '/imports/api/meetings';\nimport addVoiceUser from '../modifiers/addVoiceUser';\nimport removeVoiceUser from '../modifiers/removeVoiceUser';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleGetVoiceUsers({ body }, meetingId) {\n  const { users } = body;\n\n  check(meetingId, String);\n  check(users, Array);\n\n  const meeting = Meetings.findOne({ meetingId }, { fields: { 'voiceProp.voiceConf': 1 } });\n  const usersIds = users.map(m => m.intId);\n\n  const voiceUsersIdsToUpdate = VoiceUsers.find({\n    meetingId,\n    intId: { $in: usersIds },\n  }, { fields: { intId: 1 } }).fetch().map(m => m.intId);\n\n  users.forEach((user) => {\n    if (voiceUsersIdsToUpdate.indexOf(user.intId) >= 0) {\n      // user already exist, then update\n      updateVoiceUser(meetingId, {\n        intId: user.intId,\n        voiceUserId: user.voiceUserId,\n        talking: user.talking,\n        muted: user.muted,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    } else {\n      // user doesn't exist yet, then add it\n      addVoiceUser(meetingId, {\n        voiceUserId: user.voiceUserId,\n        intId: user.intId,\n        callerName: user.callerName,\n        callerNum: user.callerNum,\n        muted: user.muted,\n        talking: user.talking,\n        callingWith: user.callingWith,\n        listenOnly: user.listenOnly,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    }\n  });\n\n  // removing extra users already existing in Mongo\n  const voiceUsersToRemove = VoiceUsers.find({\n    meetingId,\n    intId: { $nin: usersIds },\n  }).fetch();\n  voiceUsersToRemove.forEach(user => removeVoiceUser(meetingId, {\n    voiceConf: meeting.voiceProp.voiceConf,\n    voiceUserId: user.voiceUserId,\n    intId: user.intId,\n  }));\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport addDialInUser from '/imports/api/users/server/modifiers/addDialInUser';\nimport addVoiceUser from '../modifiers/addVoiceUser';\n\n\nexport default function handleJoinVoiceUser({ body }, meetingId) {\n  const voiceUser = body;\n  voiceUser.joined = true;\n\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    intId: String,\n    voiceUserId: String,\n    callerName: String,\n    callerNum: String,\n    muted: Boolean,\n    talking: Boolean,\n    callingWith: String,\n    listenOnly: Boolean,\n    joined: Boolean,\n  });\n\n  const {\n    intId,\n  } = voiceUser;\n\n  const User = Users.findOne({\n    meetingId,\n    intId,\n  });\n\n  if (!User) {\n    /* voice-only user - called into the conference */\n    addDialInUser(meetingId, voiceUser);\n  }\n\n  return addVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\n\nimport removeVoiceUser from '/imports/api/voice-users/server/modifiers/removeVoiceUser';\nimport removeUser from '/imports/api/users/server/modifiers/removeUser';\nimport Users from '/imports/api/users';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    intId: String,\n    voiceUserId: String,\n  });\n\n  const {\n    intId,\n    voiceUserId,\n  } = voiceUser;\n\n  const isDialInUser = (userId, meetingID) => !!Users.findOne({ meetingId: meetingID, userId, clientType: 'dial-in-user' });\n\n  // if the user is dial-in, leaving voice also means leaving userlist\n  if (isDialInUser(voiceUserId, meetingId)) removeUser(meetingId, intId);\n\n  return removeVoiceUser(meetingId, voiceUser);\n}\n","import changeMuteMeeting from '../modifiers/changeMuteMeeting';\n\nexport default function handleMeetingMuted({ body }, meetingId) {\n  changeMuteMeeting(meetingId, body);\n}\n","import { check } from 'meteor/check';\n\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  // If a person is muted we have to force them to not talking\n  if (voiceUser.muted) {\n    voiceUser.talking = false;\n  }\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\n\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import VoiceUsers from '/imports/api/voice-users/';\nimport Meetings from '/imports/api/meetings';\nimport addDialInUser from '/imports/api/users/server/modifiers/addDialInUser';\nimport removeVoiceUser from '../modifiers/removeVoiceUser';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\nimport addVoiceUser from '../modifiers/addVoiceUser';\n\n\nexport default function handleVoiceUsers({ header, body }) {\n  const { voiceUsers } = body;\n  const { meetingId } = header;\n\n  const meeting = Meetings.findOne({ meetingId }, { fields: { 'voiceProp.voiceConf': 1 } });\n  const usersIds = voiceUsers.map(m => m.intId);\n\n  const voiceUsersIdsToUpdate = VoiceUsers.find({\n    meetingId,\n    intId: { $in: usersIds },\n  }, { fields: { intId: 1 } }).fetch().map(m => m.intId);\n\n  voiceUsers.forEach((voice) => {\n    if (voiceUsersIdsToUpdate.indexOf(voice.intId) >= 0) {\n      // user already exist, then update\n      updateVoiceUser(meetingId, {\n        intId: voice.intId,\n        voiceUserId: voice.voiceUserId,\n        talking: voice.talking,\n        muted: voice.muted,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    } else {\n      // user doesn't exist yet, then add it\n      addVoiceUser(meetingId, {\n        voiceUserId: voice.voiceUserId,\n        intId: voice.intId,\n        callerName: voice.callerName,\n        callerNum: voice.callerNum,\n        muted: voice.muted,\n        talking: voice.talking,\n        callingWith: voice.callingWith,\n        listenOnly: voice.listenOnly,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n\n      addDialInUser(meetingId, voice);\n    }\n  });\n\n  // removing extra users already existing in Mongo\n  const voiceUsersToRemove = VoiceUsers.find({\n    meetingId,\n    intId: { $nin: usersIds },\n  }, { fields: { voiceUserId: 1, intId: 1 } }).fetch();\n  voiceUsersToRemove.forEach(user => removeVoiceUser(meetingId, {\n    voiceConf: meeting.voiceProp.voiceConf,\n    voiceUserId: user.voiceUserId,\n    intId: user.intId,\n  }));\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function ejectUserFromVoice(userId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EjectUserFromVoiceCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  check(userId, String);\n\n  const payload = {\n    userId,\n    ejectedBy: requesterUserId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function muteAllExceptPresenterToggle() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'MuteAllExceptPresentersCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const meeting = Meetings.findOne({ meetingId });\n  const toggleMeetingMuted = !meeting.voiceProp.muteOnStart;\n\n  const payload = {\n    mutedBy: requesterUserId,\n    mute: toggleMeetingMuted,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function muteAllToggle() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'MuteMeetingCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const meeting = Meetings.findOne({ meetingId });\n  const toggleMeetingMuted = !meeting.voiceProp.muteOnStart;\n\n  const payload = {\n    mutedBy: requesterUserId,\n    mute: toggleMeetingMuted,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Users from '/imports/api/users';\nimport VoiceUsers from '/imports/api/voice-users';\nimport Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function muteToggle(uId, toggle) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'MuteUserCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const userToMute = uId || requesterUserId;\n\n  const requester = Users.findOne({\n    meetingId,\n    userId: requesterUserId,\n  });\n\n  const voiceUser = VoiceUsers.findOne({\n    intId: userToMute,\n    meetingId,\n  });\n\n  if (!requester || !voiceUser) return;\n\n  const { listenOnly, muted } = voiceUser;\n  if (listenOnly) return;\n\n  // if allowModsToUnmuteUsers is false, users will be kicked out for attempting to unmute others\n  if (requesterUserId !== userToMute && muted) {\n    const meeting = Meetings.findOne({ meetingId },\n      { fields: { 'usersProp.allowModsToUnmuteUsers': 1 } });\n    if (meeting.usersProp && !meeting.usersProp.allowModsToUnmuteUsers) {\n      Logger.warn(`Attempted unmuting by another user meetingId:${meetingId} requester: ${requesterUserId} userId: ${userToMute}`);\n      return;\n    }\n  }\n\n  let _muted;\n\n  if ((toggle === undefined) || (toggle === null)) {\n    _muted = !muted;\n  } else {\n    _muted = !!toggle;\n  }\n\n  const payload = {\n    userId: userToMute,\n    mutedBy: requesterUserId,\n    mute: _muted,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport Users from '/imports/api/users';\nimport flat from 'flat';\n\nexport default function addVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceUserId: String,\n    intId: String,\n    callerName: String,\n    callerNum: String,\n    muted: Boolean,\n    talking: Boolean,\n    callingWith: String,\n    listenOnly: Boolean,\n    voiceConf: String,\n    joined: Boolean, // This is a HTML5 only param.\n  });\n\n  const { intId, talking } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId, spoke: talking },\n      flat(voiceUser),\n    ),\n  };\n\n  const user = Users.findOne({ meetingId, userId: intId }, {\n    fields: {\n      color: 1,\n    },\n  });\n\n  if (user) modifier.$set.color = user.color;\n\n  try {\n    const { numberAffected } = VoiceUsers.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Add voice user=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Add voice user=${intId}: ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function changeMuteMeeting(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    muted: Boolean,\n    mutedBy: String,\n  });\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'voiceProp.muteOnStart': payload.muted,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting mute status meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Changing meeting mute status meeting={${meetingId}} ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\n\nexport default function clearVoiceUser(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VoiceUsers.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VoiceUsers in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceUsers in ${meetingId}. ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VoiceUsers.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VoiceUsers in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceUsers. ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport { clearSpokeTimeout } from '/imports/api/common/server/helpers';\n\nexport default function removeVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    voiceUserId: String,\n    intId: String,\n  });\n\n  const { intId } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      muted: false,\n      talking: false,\n      listenOnly: false,\n      joined: false,\n      spoke: false,\n    },\n  };\n\n  try {\n    clearSpokeTimeout(meetingId, intId);\n    const numberAffected = VoiceUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Remove voiceUser=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Remove voiceUser=${intId}: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport flat from 'flat';\nimport { spokeTimeoutHandles, clearSpokeTimeout } from '/imports/api/common/server/helpers';\n\nconst TALKING_TIMEOUT = 6000;\n\nexport default function updateVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    intId: String,\n    voiceUserId: String,\n    talking: Match.Maybe(Boolean),\n    muted: Match.Maybe(Boolean),\n    voiceConf: String,\n    joined: Match.Maybe(Boolean),\n    floor: Match.Maybe(Boolean),\n    lastFloorTime: Match.Maybe(String),\n  });\n\n  const { intId } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      flat(voiceUser),\n    ),\n  };\n\n  if (voiceUser.talking) {\n    const user = VoiceUsers.findOne({ meetingId, intId }, {\n      fields: {\n        startTime: 1,\n      },\n    });\n\n    if (user && !user.startTime) modifier.$set.startTime = Date.now();\n    modifier.$set.spoke = true;\n    modifier.$set.endTime = null;\n    clearSpokeTimeout(meetingId, intId);\n  }\n\n  if (!voiceUser.talking) {\n    const timeoutHandle = Meteor.setTimeout(() => {\n      const user = VoiceUsers.findOne({ meetingId, intId }, {\n        fields: {\n          endTime: 1,\n          talking: 1,\n        },\n      });\n\n      if (user) {\n        const { endTime, talking } = user;\n        const spokeDelay = ((Date.now() - endTime) < TALKING_TIMEOUT);\n        if (talking || spokeDelay) return;\n        modifier.$set.spoke = false;\n        modifier.$set.startTime = null;\n        try {\n          const numberAffected = VoiceUsers.update(selector, modifier);\n\n          if (numberAffected) {\n            Logger.debug('Update voiceUser', { voiceUser: intId, meetingId });\n          }\n        } catch (err) {\n          Logger.error(`Update voiceUser=${intId}: ${err}`);\n        }\n      }\n    }, TALKING_TIMEOUT);\n\n    spokeTimeoutHandles[`${meetingId}-${intId}`] = timeoutHandle;\n    modifier.$set.endTime = Date.now();\n  }\n\n  try {\n    const numberAffected = VoiceUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Update voiceUser', { voiceUser: intId, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Update voiceUser=${intId}: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleJoinVoiceUser from './handlers/joinVoiceUser';\nimport handleLeftVoiceUser from './handlers/leftVoiceUser';\nimport handleTalkingVoiceUser from './handlers/talkingVoiceUser';\nimport handleMutedVoiceUser from './handlers/mutedVoiceUser';\nimport handleGetVoiceUsers from './handlers/getVoiceUsers';\nimport handleVoiceUsers from './handlers/voiceUsers';\nimport handleMeetingMuted from './handlers/meetingMuted';\nimport handleFloorChange from './handlers/floorChanged';\n\nRedisPubSub.on('UserLeftVoiceConfToClientEvtMsg', handleLeftVoiceUser);\nRedisPubSub.on('UserJoinedVoiceConfToClientEvtMsg', handleJoinVoiceUser);\nRedisPubSub.on('UserTalkingVoiceEvtMsg', handleTalkingVoiceUser);\nRedisPubSub.on('UserMutedVoiceEvtMsg', handleMutedVoiceUser);\nRedisPubSub.on('GetVoiceUsersMeetingRespMsg', processForHTML5ServerOnly(handleGetVoiceUsers));\nRedisPubSub.on('SyncGetVoiceUsersRespMsg', handleVoiceUsers);\nRedisPubSub.on('MeetingMutedEvtMsg', handleMeetingMuted);\nRedisPubSub.on('AudioFloorChangedEvtMsg', handleFloorChange);\n","import './eventHandlers';\nimport './publishers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport muteToggle from './methods/muteToggle';\nimport muteAllToggle from './methods/muteAllToggle';\nimport muteAllExceptPresenterToggle from './methods/muteAllExceptPresenterToggle';\nimport ejectUserFromVoice from './methods/ejectUserFromVoice';\n\nMeteor.methods({\n  toggleVoice: muteToggle,\n  muteAllUsers: muteAllToggle,\n  muteAllExceptPresenter: muteAllExceptPresenterToggle,\n  ejectUserFromVoice,\n});\n","import VoiceUsers from '/imports/api/voice-users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport ejectUserFromVoice from './methods/ejectUserFromVoice';\n\nfunction voiceUser() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VoiceUsers was requested by unauth connection ${this.connection.id}`);\n    return VoiceUsers.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId: requesterUserId } = tokenValidation;\n\n  const onCloseConnection = Meteor.bindEnvironment(() => {\n    try {\n      // I used user because voiceUser is the function's name\n      const User = VoiceUsers.findOne({ meetingId, requesterUserId });\n      if (User) {\n        ejectUserFromVoice(requesterUserId);\n      }\n    } catch (e) {\n      Logger.error(`Exception while executing ejectUserFromVoice for ${requesterUserId}: ${e}`);\n    }\n  });\n\n  Logger.debug('Publishing Voice User', { meetingId, requesterUserId });\n\n  this._session.socket.on('close', _.debounce(onCloseConnection, 100));\n  return VoiceUsers.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundVoiceUser = voiceUser.bind(this);\n  return boundVoiceUser(...args);\n}\n\nMeteor.publish('voiceUsers', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VoiceUsers = new Mongo.Collection('voiceUsers');\n\nif (Meteor.isServer) {\n  // types of queries for the voice users:\n  // 1. intId\n  // 2. meetingId, intId\n\n  VoiceUsers._ensureIndex({ intId: 1 });\n  VoiceUsers._ensureIndex({ meetingId: 1, intId: 1 });\n}\n\nexport default VoiceUsers;\n","import { check } from 'meteor/check';\nimport modifyWhiteboardAccess from '../modifiers/modifyWhiteboardAccess';\n\nexport default function handleModifyWhiteboardAccess({ body }, meetingId) {\n  const { multiUser, whiteboardId } = body;\n\n  check(multiUser, Array);\n  check(whiteboardId, String);\n  check(meetingId, String);\n\n  return modifyWhiteboardAccess(meetingId, whiteboardId, multiUser);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { getUsers } from '/imports/api/whiteboard-multi-user/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function addGlobalAccess(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n  check(whiteboardId, String);\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const multiUser = getUsers(meetingId);\n\n  const payload = {\n    multiUser,\n    whiteboardId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { getMultiUser } from '/imports/api/whiteboard-multi-user/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function addIndividualAccess(whiteboardId, userId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n  check(whiteboardId, String);\n  check(userId, String);\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const multiUser = getMultiUser(meetingId, whiteboardId);\n\n  if (!multiUser.includes(userId)) {\n    multiUser.push(userId);\n\n    const payload = {\n      multiUser,\n      whiteboardId,\n    };\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function removeGlobalAccess(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n  check(whiteboardId, String);\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const payload = {\n    multiUser: [],\n    whiteboardId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { getMultiUser } from '/imports/api/whiteboard-multi-user/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function removeIndividualAccess(whiteboardId, userId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n  check(whiteboardId, String);\n  check(userId, String);\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const multiUser = getMultiUser(meetingId, whiteboardId);\n\n  if (multiUser.includes(userId)) {\n    const payload = {\n      multiUser: multiUser.filter(id => id !== userId),\n      whiteboardId,\n    };\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user';\n\nexport default function clearWhiteboardMultiUser(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = WhiteboardMultiUser.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared WhiteboardMultiUser (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error clearing WhiteboardMultiUser (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = WhiteboardMultiUser.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared WhiteboardMultiUser (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error clearing WhiteboardMultiUser (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\n\nexport default function modifyWhiteboardAccess(meetingId, whiteboardId, multiUser) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(multiUser, Array);\n\n  const selector = {\n    meetingId,\n    whiteboardId,\n  };\n\n  const modifier = {\n    meetingId,\n    whiteboardId,\n    multiUser,\n  };\n\n  try {\n    const { insertedId } = WhiteboardMultiUser.upsert(selector, modifier);\n    if (insertedId) {\n      Logger.info(`Added multiUser flag=${multiUser} meetingId=${meetingId} whiteboardId=${whiteboardId}`);\n    } else {\n      Logger.info(`Upserted multiUser flag=${multiUser} meetingId=${meetingId} whiteboardId=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error while adding an entry to Multi-User collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleGetWhiteboardAccess from './handlers/modifyWhiteboardAccess';\n\nRedisPubSub.on('GetWhiteboardAccessRespMsg', processForHTML5ServerOnly(handleGetWhiteboardAccess));\nRedisPubSub.on('SyncGetWhiteboardAccessRespMsg', handleGetWhiteboardAccess);\nRedisPubSub.on('ModifyWhiteboardAccessEvtMsg', handleGetWhiteboardAccess);\n","import Users from '/imports/api/users';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\n\nconst getMultiUser = (meetingId, whiteboardId) => {\n  const data = WhiteboardMultiUser.findOne(\n    {\n      meetingId,\n      whiteboardId,\n    }, { fields: { multiUser: 1 } },\n  );\n\n  if (!data || !data.multiUser || !Array.isArray(data.multiUser)) return [];\n\n  return data.multiUser;\n};\n\nconst getUsers = (meetingId) => {\n  const data = Users.find(\n    { meetingId },\n    { fields: { userId: 1 } },\n  ).fetch();\n\n  if (!data) return [];\n\n  return data.map(user => user.userId);\n};\n\nexport {\n  getMultiUser,\n  getUsers,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addGlobalAccess from './methods/addGlobalAccess';\nimport addIndividualAccess from './methods/addIndividualAccess';\nimport removeGlobalAccess from './methods/removeGlobalAccess';\nimport removeIndividualAccess from './methods/removeIndividualAccess';\n\nMeteor.methods({\n  addGlobalAccess,\n  addIndividualAccess,\n  removeGlobalAccess,\n  removeIndividualAccess,\n});\n","import WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction whiteboardMultiUser() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing WhiteboardMultiUser was requested by unauth connection ${this.connection.id}`);\n    return WhiteboardMultiUser.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing WhiteboardMultiUser', { meetingId, userId });\n\n  return WhiteboardMultiUser.find({ meetingId });\n}\n\n\nfunction publish(...args) {\n  const boundMultiUser = whiteboardMultiUser.bind(this);\n  return boundMultiUser(...args);\n}\n\nMeteor.publish('whiteboard-multi-user', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst WhiteboardMultiUser = new Mongo.Collection('whiteboard-multi-user');\n\nif (Meteor.isServer) {\n  // types of queries for the whiteboard-multi-user:\n  // 1. meetingId\n\n  WhiteboardMultiUser._ensureIndex({ meetingId: 1 });\n}\n\nexport default WhiteboardMultiUser;\n","import axios from 'axios';\nimport sha1 from 'crypto-js/sha1';\nimport Logger from '/imports/startup/server/logger';\nimport createNote from '/imports/api/note/server/methods/createNote';\nimport createCaptions from '/imports/api/captions/server/methods/createCaptions';\n\nconst ETHERPAD = Meteor.settings.private.etherpad;\nconst BASE_URL = `http://${ETHERPAD.host}:${ETHERPAD.port}/api/${ETHERPAD.version}`;\nconst HASH_SIZE = 36;\n\nconst createPadURL = padId => `${BASE_URL}/createPad?apikey=${ETHERPAD.apikey}&padID=${padId}`;\n\nconst getReadOnlyIdURL = padId => `${BASE_URL}/getReadOnlyID?apikey=${ETHERPAD.apikey}&padID=${padId}`;\n\nconst appendTextURL = (padId, text) => `${BASE_URL}/appendText?apikey=${ETHERPAD.apikey}&padID=${padId}&text=${encodeURIComponent(text)}`;\n\nconst checkTokenURL = () => `${BASE_URL}/checkToken?apikey=${ETHERPAD.apikey}`;\n\nconst hashSHA1 = (str) => sha1(str).toString().substring(0, HASH_SIZE);\n\nconst checkServer = () => {\n  return new Promise((resolve, reject) => {\n    axios({\n      method: 'get',\n      url: checkTokenURL(),\n      responseType: 'json',\n    }).then((response) => {\n      const { status } = response;\n      if (status !== 200) return reject();\n      const { message } = response.data;\n      if (message !== 'ok') return reject();\n      resolve();\n    }).catch(() => reject());\n  });\n};\n\nconst initPads = (meetingId, html5InstanceId) => {\n  checkServer().then(() => {\n    createNote(meetingId, html5InstanceId);\n    createCaptions(meetingId, html5InstanceId);\n  }).catch(() => Logger.error(`Pads' server unreachable`));\n};\n\nconst withInstaceId = (instanceId, id) => `[${instanceId}]${id}`;\n\nexport {\n  hashSHA1,\n  createPadURL,\n  getReadOnlyIdURL,\n  appendTextURL,\n  initPads,\n  withInstaceId,\n}\n","import Users from '/imports/api/users';\n\nconst MSG_DIRECT_TYPE = 'DIRECT';\nconst NODE_USER = 'nodeJSapp';\n\nexport const spokeTimeoutHandles = {};\nexport const clearSpokeTimeout = (meetingId, userId) => {\n  if (spokeTimeoutHandles[`${meetingId}-${userId}`]) {\n    Meteor.clearTimeout(spokeTimeoutHandles[`${meetingId}-${userId}`]);\n    delete spokeTimeoutHandles[`${meetingId}-${userId}`];\n  }\n};\n\nexport const indexOf = [].indexOf || function (item) {\n  for (let i = 0, l = this.length; i < l; i += 1) {\n    if (i in this && this[i] === item) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nexport const processForHTML5ServerOnly = fn => (message, ...args) => {\n  const { envelope } = message;\n  const { routing } = envelope;\n  const { msgType, meetingId, userId } = routing;\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const user = Users.findOne(selector);\n\n  const shouldSkip = user && msgType === MSG_DIRECT_TYPE && userId !== NODE_USER && user.clientType !== 'HTML5';\n  if (shouldSkip) return () => { };\n  return fn(message, ...args);\n};\n\nexport const extractCredentials = (credentials) => {\n  if (!credentials) return {};\n  const credentialsArray = credentials.split('--');\n  const meetingId = credentialsArray[0];\n  const requesterUserId = credentialsArray[1];\n  return { meetingId, requesterUserId };\n};\n","import Logger from './logger';\nimport userLeaving from '/imports/api/users/server/methods/userLeaving';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Users from '/imports/api/users';\nimport { check } from 'meteor/check';\n\nconst { enabled, syncInterval } = Meteor.settings.public.syncUsersWithConnectionManager;\n\nclass ClientConnections {\n  constructor() {\n    Logger.debug('Initializing client connections structure', { logCode: 'client_connections_init' });\n    this.connections = new Map();\n\n    setInterval(() => {\n      this.print();\n    }, 30000);\n\n    if (enabled) {\n      const syncConnections = Meteor.bindEnvironment(() => {\n        this.syncConnectionsWithServer();\n      });\n\n      setInterval(() => {\n        syncConnections();\n      }, syncInterval);\n    }\n  }\n\n  add(sessionId, connection) {\n    Logger.info('Client connections add called', { logCode: 'client_connections_add', extraInfo: { sessionId, connection } });\n    if (!sessionId || !connection) {\n      Logger.error(`Error on add new client connection. sessionId=${sessionId} connection=${connection.id}`,\n        { logCode: 'client_connections_add_error', extraInfo: { sessionId, connection } }\n      );\n\n      return;\n    }\n\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    check(meetingId, String);\n    check(userId, String);\n      \n    if (!meetingId) {\n      Logger.error('Error on add new client connection. sessionId=${sessionId} connection=${connection.id}',\n        { logCode: 'client_connections_add_error_meeting_id_null', extraInfo: { meetingId, userId } }\n      );\n      return false;\n    }\n\n    if (!this.exists(meetingId)) {\n      Logger.info(`Meeting not found in connections: meetingId=${meetingId}`);\n      this.createMeetingConnections(meetingId);\n    }\n\n    const sessionConnections = this.connections.get(meetingId);\n\n    if (sessionConnections.has(userId) && sessionConnections.get(userId).includes(connection.id)) {\n      Logger.info(`Connection already exists for user. userId=${userId} connectionId=${connection.id}`);\n\n      return false;\n    }\n\n    connection.onClose(Meteor.bindEnvironment(() => {\n      userLeaving(meetingId, userId, connection.id);\n    }));\n\n    Logger.info(`Adding new connection for sessionId=${sessionId} connection=${connection.id}`);\n\n    if (!sessionConnections.has(userId)) {\n      Logger.info(`Creating connections poll for ${userId}`);\n\n      sessionConnections.set(userId, []);\n      return sessionConnections.get(userId).push(connection.id);\n    } else {\n      return sessionConnections.get(userId).push(connection.id);\n    }\n  }\n\n  createMeetingConnections(meetingId) {\n    Logger.info(`Creating meeting in connections. meetingId=${meetingId}`);\n\n    if (!this.exists(meetingId))\n      return this.connections.set(meetingId, new Map());\n  }\n\n  exists(meetingId) {\n    return this.connections.has(meetingId);\n  }\n\n  getConnectionsForClient(sessionId) {\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    check(meetingId, String);\n    check(userId, String);\n  \n    return this.connections.get(meetingId)?.get(userId);\n  }\n\n  print() {\n    const mapConnectionsObj = {};\n    this.connections.forEach((value, key) => {\n      mapConnectionsObj[key] = {};\n\n      value.forEach((v, k) => {\n        mapConnectionsObj[key][k] = v;\n      });\n\n    });\n    Logger.info('Active connections', mapConnectionsObj);\n  }\n\n  removeClientConnection(sessionId, connectionId = null) {\n    Logger.info(`Removing connectionId for user. sessionId=${sessionId} connectionId=${connectionId}`);\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    check(meetingId, String);\n    check(userId, String);\n  \n    const meetingConnections = this.connections.get(meetingId);\n\n    if (meetingConnections?.has(userId)) {\n      const filteredConnections = meetingConnections.get(userId).filter(c => c !== connectionId);\n\n      return connectionId && filteredConnections.length ? meetingConnections.set(userId, filteredConnections) : meetingConnections.delete(userId);\n    }\n\n    return false;\n  }\n\n  removeMeeting(meetingId) {\n    Logger.debug(`Removing connections for meeting=${meetingId}`);\n    return this.connections.delete(meetingId);\n  }\n\n  syncConnectionsWithServer() {\n    Logger.info('Syncing ClientConnections with server');\n    const activeConnections = Array.from(Meteor.server.sessions.keys());\n\n    Logger.debug(`Found ${activeConnections.length} active connections in server`);\n\n    const onlineUsers = AuthTokenValidation\n      .find(\n        { connectionId: { $in: activeConnections } },\n        { fields: { meetingId: 1, userId: 1 } }\n      )\n      .fetch();\n\n    const onlineUsersId = onlineUsers.map(({ userId }) => userId);\n\n    const usersQuery = { userId: { $nin: onlineUsersId } };\n\n    const userWithoutConnectionIds = Users.find(usersQuery, { fields: { meetingId: 1, userId: 1 } }).fetch();\n\n    const removedUsersWithoutConnection = Users.remove(usersQuery);\n\n    if (removedUsersWithoutConnection) {\n      Logger.info(`Removed ${removedUsersWithoutConnection} users that are not connected`);\n      Logger.info(`Clearing connections`);\n      try {\n        userWithoutConnectionIds\n          .forEach(({ meetingId, userId }) => {\n            this.removeClientConnection(`${meetingId}--${userId}`);\n          });\n      } catch (err) {\n        Logger.error('Error on sync ClientConnections', err);\n      }\n    }\n  }\n\n}\n\nconst ClientConnectionsSingleton = new ClientConnections();\n\nexport default ClientConnectionsSingleton;\n","const INSTANCE_ID_REGEX = /\\d+/;\n\nconst isPadMessage = (message) => {\n const { name } = message.core.header;\n\n  const isPadCreate = name === 'PadCreateSysMsg';\n  const isPadUpdate = name === 'PadUpdateSysMsg';\n\n  return isPadCreate || isPadUpdate;\n};\n\nconst getInstanceIdFromPadMessage = (message) => {\n  let instanceId;\n  const { id } = message.core.body.pad;\n\n  // Pad id is composed by the instance id between brackets\n  const match = id.match(INSTANCE_ID_REGEX);\n  if (match) instanceId = parseInt(match[0]);\n\n  return instanceId;\n};\n\nexport {\n  isPadMessage,\n  getInstanceIdFromPadMessage,\n};\n","import { Meteor } from 'meteor/meteor';\nimport { WebAppInternals } from 'meteor/webapp';\nimport Langmap from 'langmap';\nimport fs from 'fs';\nimport Users from '/imports/api/users';\nimport './settings';\nimport { lookup as lookupUserAgent } from 'useragent';\nimport { check } from 'meteor/check';\nimport Logger from './logger';\nimport Redis from './redis';\n\nimport setMinBrowserVersions from './minBrowserVersion';\n\nlet guestWaitHtml = '';\n\nconst env = Meteor.isDevelopment ? 'development' : 'production';\n\nconst meteorRoot = fs.realpathSync(`${process.cwd()}/../`);\n\nconst applicationRoot = (env === 'development')\n  ? fs.realpathSync(`${meteorRoot}'/../../../../public/locales/`)\n  : fs.realpathSync(`${meteorRoot}/../programs/web.browser/app/locales/`);\n\nconst AVAILABLE_LOCALES = fs.readdirSync(`${applicationRoot}`);\nconst FALLBACK_LOCALES = JSON.parse(Assets.getText('config/fallbackLocales.json'));\n\nprocess.on('uncaughtException', (err) => {\n  Logger.error(`uncaughtException: ${err}`);\n  process.exit(1);\n});\n\nprocess.on('uncaughtException', (err) => {\n  Logger.error(`uncaughtException: ${err}`);\n  process.exit(1);\n});\n\nMeteor.startup(() => {\n  const APP_CONFIG = Meteor.settings.public.app;\n  const CDN_URL = APP_CONFIG.cdn;\n  const instanceId = parseInt(process.env.INSTANCE_ID, 10) || 1;\n\n  Logger.warn(`Started bbb-html5 process with instanceId=${instanceId}`);\n\n  const { customHeartbeat } = APP_CONFIG;\n\n  if (customHeartbeat) {\n    Logger.warn('Custom heartbeat functions are enabled');\n    // https://github.com/sockjs/sockjs-node/blob/1ef08901f045aae7b4df0f91ef598d7a11e82897/lib/transport/websocket.js#L74-L82\n    const newHeartbeat = function heartbeat() {\n      const currentTime = new Date().getTime();\n\n      // Skipping heartbeat, because websocket is sending data\n      if (currentTime - this.ws.lastSentFrameTimestamp < 10000) {\n        try {\n          Logger.info('Skipping heartbeat, because websocket is sending data', {\n            currentTime,\n            lastSentFrameTimestamp: this.ws.lastSentFrameTimestamp,\n            userId: this.session.connection._meteorSession.userId,\n          });\n          return;\n        } catch (err) {\n          Logger.error(`Skipping heartbeat error: ${err}`);\n        }\n      }\n\n      const supportsHeartbeats = this.ws.ping(null, () => clearTimeout(this.hto_ref));\n      if (supportsHeartbeats) {\n        this.hto_ref = setTimeout(() => {\n          try {\n            Logger.info('Heartbeat timeout', { userId: this.session.connection._meteorSession.userId, sentAt: currentTime, now: new Date().getTime() });\n          } catch (err) {\n            Logger.error(`Heartbeat timeout error: ${err}`);\n          }\n        }, Meteor.server.options.heartbeatTimeout);\n      } else {\n        Logger.error('Unexpected error supportsHeartbeats=false');\n      }\n    };\n\n    // https://github.com/davhani/hagty/blob/6a5c78e9ae5a5e4ade03e747fb4cc8ea2df4be0c/faye-websocket/lib/faye/websocket/api.js#L84-L88\n    const newSend = function send(data) {\n      try {\n        this.lastSentFrameTimestamp = new Date().getTime();\n\n        if (this.meteorHeartbeat) {\n          // Call https://github.com/meteor/meteor/blob/1e7e56eec8414093cd0c1c70750b894069fc972a/packages/ddp-common/heartbeat.js#L80-L88\n          this.meteorHeartbeat._seenPacket = true;\n          if (this.meteorHeartbeat._heartbeatTimeoutHandle) {\n            this.meteorHeartbeat._clearHeartbeatTimeoutTimer();\n          }\n        }\n\n        if (this.readyState > 1/* API.OPEN = 1 */) return false;\n        if (!(data instanceof Buffer)) data = String(data);\n        return this._driver.messages.write(data);\n      } catch (err) {\n        console.error('Error on send data', err);\n        return false;\n      }\n    };\n\n    Meteor.setInterval(() => {\n      for (const session of Meteor.server.sessions.values()) {\n        const { socket } = session;\n        const recv = socket._session.recv;\n\n        if (session.bbbFixApplied || !recv || !recv.ws) {\n          continue;\n        }\n\n        recv.ws.meteorHeartbeat = session.heartbeat;\n        recv.__proto__.heartbeat = newHeartbeat;\n        recv.ws.__proto__.send = newSend;\n        session.bbbFixApplied = true;\n      }\n    }, 5000);\n  }\n  if (CDN_URL.trim()) {\n    // Add CDN\n    BrowserPolicy.content.disallowEval();\n    BrowserPolicy.content.allowInlineScripts();\n    BrowserPolicy.content.allowInlineStyles();\n    BrowserPolicy.content.allowImageDataUrl(CDN_URL);\n    BrowserPolicy.content.allowFontDataUrl(CDN_URL);\n    BrowserPolicy.content.allowOriginForAll(CDN_URL);\n    WebAppInternals.setBundledJsCssPrefix(CDN_URL + APP_CONFIG.basename + Meteor.settings.public.app.instanceId);\n\n    const fontRegExp = /\\.(eot|ttf|otf|woff|woff2)$/;\n\n    WebApp.rawConnectHandlers.use('/', (req, res, next) => {\n      if (fontRegExp.test(req._parsedUrl.pathname)) {\n        res.setHeader('Access-Control-Allow-Origin', '*');\n        res.setHeader('Vary', 'Origin');\n        res.setHeader('Pragma', 'public');\n        res.setHeader('Cache-Control', '\"public\"');\n      }\n      return next();\n    });\n  }\n\n  setMinBrowserVersions();\n\n  Logger.warn(`SERVER STARTED.\n  ENV=${env}\n  nodejs version=${process.version}\n  BBB_HTML5_ROLE=${process.env.BBB_HTML5_ROLE}\n  INSTANCE_ID=${instanceId}\n  PORT=${process.env.PORT}\n  CDN=${CDN_URL}\\n`, APP_CONFIG);\n});\n\n\nconst generateLocaleOptions = () => {\n  try {\n    Logger.warn('Calculating aggregateLocales (heavy)');\n\n\n    // remove duplicated locales (always remove more generic if same name)\n    const tempAggregateLocales = AVAILABLE_LOCALES\n      .map(file => file.replace('.json', ''))\n      .map(file => file.replace('_', '-'))\n      .map((locale) => {\n        const localeName = (Langmap[locale] || {}).nativeName\n          || (FALLBACK_LOCALES[locale] || {}).nativeName\n          || locale;\n        return {\n          locale,\n          name: localeName,\n        };\n      }).reverse()\n      .filter((item, index, self) => index === self.findIndex(i => (\n        i.name === item.name\n      )))\n      .reverse();\n\n    Logger.warn(`Total locales: ${tempAggregateLocales.length}`, tempAggregateLocales);\n\n    return tempAggregateLocales;\n  } catch (e) {\n    Logger.error(`'Could not process locales error: ${e}`);\n    return [];\n  }\n};\n\nlet avaibleLocalesNamesJSON = JSON.stringify(generateLocaleOptions());\n\nWebApp.connectHandlers.use('/check', (req, res) => {\n  const payload = { html5clientStatus: 'running' };\n\n  res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(JSON.stringify(payload));\n});\n\nWebApp.connectHandlers.use('/locale', (req, res) => {\n  const APP_CONFIG = Meteor.settings.public.app;\n  const fallback = APP_CONFIG.defaultSettings.application.fallbackLocale;\n  const override = APP_CONFIG.defaultSettings.application.overrideLocale;\n  const browserLocale = override && req.query.init === 'true'\n    ? override.split(/[-_]/g) : req.query.locale.split(/[-_]/g);\n\n  let localeFile = fallback;\n\n  const usableLocales = AVAILABLE_LOCALES\n    .map(file => file.replace('.json', ''))\n    .reduce((locales, locale) => (locale.match(browserLocale[0])\n      ? [...locales, locale]\n      : locales), []);\n\n  let normalizedLocale;\n\n  if (browserLocale.length > 1) {\n    normalizedLocale = `${browserLocale[0]}_${browserLocale[1].toUpperCase()}`;\n\n    const normDefault = usableLocales.find(locale => normalizedLocale === locale);\n    if (normDefault) localeFile = normDefault;\n  }\n\n  const regionDefault = usableLocales.find(locale => browserLocale[0] === locale);\n\n  if (localeFile === fallback && regionDefault !== localeFile) {\n    localeFile = regionDefault;\n  }\n\n  res.setHeader('Content-Type', 'application/json');\n  res.end(JSON.stringify({\n    normalizedLocale: localeFile,\n    regionDefaultLocale: (regionDefault && regionDefault !== localeFile) ? regionDefault : '',\n  }));\n});\n\nWebApp.connectHandlers.use('/locale-list', (req, res) => {\n  if (!avaibleLocalesNamesJSON) {\n    avaibleLocalesNamesJSON = JSON.stringify(generateLocaleOptions());\n  }\n\n  res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(avaibleLocalesNamesJSON);\n});\n\nWebApp.connectHandlers.use('/feedback', (req, res) => {\n  req.on('data', Meteor.bindEnvironment((data) => {\n    const body = JSON.parse(data);\n    const {\n      meetingId,\n      userId,\n      authToken,\n      userName: reqUserName,\n      comment,\n      rating,\n    } = body;\n\n    check(meetingId, String);\n    check(userId, String);\n    check(authToken, String);\n    check(reqUserName, String);\n    check(comment, String);\n    check(rating, Number);\n\n    const user = Users.findOne({\n      meetingId,\n      userId,\n      authToken,\n    });\n\n    if (!user) {\n      Logger.warn('Couldn\\'t find user for feedback');\n    }\n\n    res.setHeader('Content-Type', 'application/json');\n    res.writeHead(200);\n    res.end(JSON.stringify({ status: 'ok' }));\n\n    body.userName = user ? user.name : `[unconfirmed] ${reqUserName}`;\n\n    const feedback = {\n      ...body,\n    };\n    Logger.info('FEEDBACK LOG:', feedback);\n  }));\n});\n\nWebApp.connectHandlers.use('/useragent', (req, res) => {\n  const userAgent = req.headers['user-agent'];\n  let response = 'No user agent found in header';\n  if (userAgent) {\n    response = lookupUserAgent(userAgent).toString();\n  }\n\n  Logger.info(`The requesting user agent is ${response}`);\n\n  // res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(response);\n});\n\nWebApp.connectHandlers.use('/guestWait', (req, res) => {\n  if (!guestWaitHtml) {\n    try {\n      guestWaitHtml = Assets.getText('static/guest-wait/guest-wait.html');\n    } catch (e) {\n      Logger.warn(`Could not process guest wait html file: ${e}`);\n    }\n  }\n\n  res.setHeader('Content-Type', 'text/html');\n  res.writeHead(200);\n  res.end(guestWaitHtml);\n});\n\n\nexport const eventEmitter = Redis.emitter;\n\nexport const redisPubSub = Redis;\n","import { Meteor } from 'meteor/meteor';\nimport { createLogger, format, transports } from 'winston';\n\nconst LOG_CONFIG = Meteor.settings.private.serverLog || {};\nconst { level } = LOG_CONFIG;\n\nconst Logger = createLogger({\n  level,\n  format: format.combine(\n    format.colorize({ level: true }),\n    format.splat(),\n    format.simple(),\n  ),\n  transports: [\n    // console logging\n    new transports.Console({\n      prettyPrint: false,\n      humanReadableUnhandledException: true,\n      colorize: true,\n      handleExceptions: true,\n      level,\n    }),\n  ],\n});\n\nexport default Logger;\n\nexport const logger = Logger;\n","/* eslint-disable no-prototype-builtins */\n\nimport fs from 'fs';\nimport path from 'path';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from './logger';\n\nconst {\n  metricsDumpIntervalMs,\n  metricsFolderPath,\n  removeMeetingOnEnd,\n} = Meteor.settings.private.redis.metrics;\n\nclass Metrics {\n  constructor() {\n    this.metrics = {};\n  }\n\n  addEvent(meetingId, eventName, messageLength) {\n    if (!this.metrics.hasOwnProperty(meetingId)) {\n      this.metrics[meetingId] = {\n        currentlyInQueue: {},\n        wasInQueue: {},\n      };\n    }\n\n    const { currentlyInQueue } = this.metrics[meetingId];\n\n    if (!currentlyInQueue.hasOwnProperty(eventName)) {\n      currentlyInQueue[eventName] = {\n        count: 1,\n        payloadSize: messageLength,\n      };\n    } else {\n      currentlyInQueue[eventName].count += 1;\n      currentlyInQueue[eventName].payloadSize += messageLength;\n    }\n  }\n\n  processEvent(meetingId, eventName, size, processingStartTimestamp) {\n    const currentProcessingTimestamp = Date.now();\n    const processTime = currentProcessingTimestamp - processingStartTimestamp;\n\n    if (!this.metrics[meetingId].wasInQueue.hasOwnProperty(eventName)) {\n      this.metrics[meetingId].wasInQueue[eventName] = {\n        count: 1,\n        payloadSize: {\n          min: size,\n          max: size,\n          last: size,\n          total: size,\n          avg: size,\n        },\n        processingTime: {\n          min: processTime,\n          max: processTime,\n          last: processTime,\n          total: processTime,\n          avg: processTime,\n        },\n      };\n      this.metrics[meetingId].currentlyInQueue[eventName].count -= 1;\n\n      if (!this.metrics[meetingId].currentlyInQueue[eventName].count) {\n        delete this.metrics[meetingId].currentlyInQueue[eventName];\n      }\n    } else {\n      const { currentlyInQueue, wasInQueue } = this.metrics[meetingId];\n\n      currentlyInQueue[eventName].count -= 1;\n\n      if (!currentlyInQueue[eventName].count) {\n        delete currentlyInQueue[eventName];\n      }\n\n      const { payloadSize, processingTime } = wasInQueue[eventName];\n\n      wasInQueue[eventName].count += 1;\n\n      payloadSize.last = size;\n      payloadSize.total += size;\n\n      if (payloadSize.min > size) payloadSize.min = size;\n      if (payloadSize.max < size) payloadSize.max = size;\n\n      payloadSize.avg = payloadSize.total / wasInQueue[eventName].count;\n\n      if (processingTime.min > processTime) processingTime.min = processTime;\n      if (processingTime.max < processTime) processingTime.max = processTime;\n\n      processingTime.last = processTime;\n      processingTime.total += processTime;\n      processingTime.avg = processingTime.total / wasInQueue[eventName].count;\n    }\n  }\n\n  setAnnotationQueueLength(meetingId, size) {\n    this.metrics[meetingId].annotationQueueLength = size;\n  }\n\n  startDumpFile() {\n    Meteor.setInterval(() => {\n      try {\n        const fileDate = new Date();\n        const fullYear = fileDate.getFullYear();\n        const month = (fileDate.getMonth() + 1).toString().padStart(2, '0');\n        const day = fileDate.getDate().toString().padStart(2, '0');\n        const hour = fileDate.getHours().toString().padStart(2, '0');\n        const minutes = fileDate.getMinutes().toString().padStart(2, '0');\n        const seconds = fileDate.getSeconds().toString().padStart(2, '0');\n\n        const folderName = `${fullYear}${month}${day}_${hour}`;\n        const fileName = `${folderName}${minutes}${seconds}_metrics.json`;\n\n        const folderPath = path.join(metricsFolderPath, folderName);\n        const fullFilePath = path.join(folderPath, fileName);\n\n        if (!fs.existsSync(folderPath)) {\n          Logger.debug(`Creating folder: ${folderPath}`);\n          fs.mkdirSync(folderPath);\n        }\n\n        fs.writeFileSync(fullFilePath, JSON.stringify(this.metrics));\n\n        Logger.info('Metric file successfully written');\n      } catch (err) {\n        Logger.error('Error on writing metrics to disk.', err);\n      }\n    }, metricsDumpIntervalMs);\n  }\n\n  removeMeeting(meetingId) {\n    if (removeMeetingOnEnd) {\n      Logger.info(`Removing meeting ${meetingId} from metrics`);\n      delete this.metrics[meetingId];\n    } else {\n      Logger.info(`Skipping remove of meeting ${meetingId} from metrics`);\n    }\n  }\n}\n\nconst metricsSingleton = new Metrics();\n\nexport default metricsSingleton;\n","import { Meteor } from 'meteor/meteor';\nimport { setMinimumBrowserVersions } from 'meteor/modern-browsers';\n\nconst setMinBrowserVersions = () => {\n  const { minBrowserVersions } = Meteor.settings.private;\n\n  const versions = {};\n\n  minBrowserVersions.forEach((elem) => {\n    let { version } = elem;\n    if (version === 'Infinity') version = Infinity;\n\n    versions[elem.browser] = version;\n  });\n\n  setMinimumBrowserVersions(versions, 'bbb-min');\n};\n\nexport default setMinBrowserVersions;\n","/* global PowerQueue */\nimport Redis from 'redis';\nimport { Meteor } from 'meteor/meteor';\nimport { EventEmitter2 } from 'eventemitter2';\nimport { check } from 'meteor/check';\nimport {\n  isPadMessage,\n  getInstanceIdFromPadMessage,\n} from './etherpad';\nimport Logger from './logger';\nimport Metrics from './metrics';\n\n// Fake meetingId used for messages that have no meetingId\nconst NO_MEETING_ID = '_';\n\nconst { queueMetrics } = Meteor.settings.private.redis.metrics;\n\nconst makeEnvelope = (channel, eventName, header, body, routing) => {\n  const envelope = {\n    envelope: {\n      name: eventName,\n      routing: routing || {\n        sender: 'html5-server',\n      },\n      timestamp: Date.now(),\n    },\n    core: {\n      header,\n      body,\n    },\n  };\n\n  return JSON.stringify(envelope);\n};\n\nconst getInstanceIdFromMessage = (parsedMessage) => {\n  // End meeting message does not seem to have systemProps\n  let instanceIdFromMessage = parsedMessage.core.body.props?.systemProps?.html5InstanceId;\n\n  // Pad messages does not have systemProps\n  if (!instanceIdFromMessage && isPadMessage(parsedMessage)) {\n    instanceIdFromMessage = getInstanceIdFromPadMessage(parsedMessage);\n  }\n\n  return instanceIdFromMessage;\n};\n\nclass MeetingMessageQueue {\n  constructor(eventEmitter, asyncMessages = [], redisDebugEnabled = false) {\n    this.asyncMessages = asyncMessages;\n    this.emitter = eventEmitter;\n    this.queue = new PowerQueue();\n    this.redisDebugEnabled = redisDebugEnabled;\n\n    this.handleTask = this.handleTask.bind(this);\n    this.queue.taskHandler = this.handleTask;\n  }\n\n  handleTask(data, next) {\n    const { channel } = data;\n    const { envelope } = data.parsedMessage;\n    const { header } = data.parsedMessage.core;\n    const { body } = data.parsedMessage.core;\n    const { meetingId } = header;\n    const eventName = header.name;\n    const isAsync = this.asyncMessages.includes(channel)\n      || this.asyncMessages.includes(eventName);\n\n    const beginHandleTimestamp = Date.now();\n    let called = false;\n\n    check(eventName, String);\n    check(body, Object);\n\n    const callNext = () => {\n      if (called) return;\n      if (this.redisDebugEnabled) {\n        Logger.debug(`Redis: ${eventName} completed ${isAsync ? 'async' : 'sync'}`);\n      }\n      called = true;\n\n      if (queueMetrics) {\n        const queueId = meetingId || NO_MEETING_ID;\n        const dataLength = JSON.stringify(data).length;\n\n        Metrics.processEvent(queueId, eventName, dataLength, beginHandleTimestamp);\n      }\n\n      const queueLength = this.queue.length();\n      if (queueLength > 100) {\n        Logger.warn(`Redis: MeetingMessageQueue for meetingId=${meetingId} has queue size=${queueLength} `);\n      }\n      next();\n    };\n\n    const onError = (reason) => {\n      Logger.error(`${eventName}: ${reason.stack ? reason.stack : reason}`);\n      callNext();\n    };\n\n    try {\n      if (this.redisDebugEnabled) {\n        if (!Meteor.settings.private.analytics.includeChat && eventName === 'GroupChatMessageBroadcastEvtMsg') {\n          return;\n        }\n        Logger.debug(`Redis: ${JSON.stringify(data.parsedMessage.core)} emitted`);\n      }\n\n      if (isAsync) {\n        callNext();\n      }\n\n      this.emitter\n        .emitAsync(eventName, { envelope, header, body }, meetingId)\n        .then(callNext)\n        .catch(onError);\n    } catch (reason) {\n      onError(reason);\n    }\n  }\n\n  add(...args) {\n    return this.queue.add(...args);\n  }\n}\n\nclass RedisPubSub {\n  static handlePublishError(err) {\n    if (err) {\n      Logger.error(err);\n    }\n  }\n\n  constructor(config = {}) {\n    this.config = config;\n\n    this.didSendRequestEvent = false;\n    const host = process.env.REDIS_HOST || Meteor.settings.private.redis.host;\n    const redisConf = Meteor.settings.private.redis;\n    this.instanceId = parseInt(process.env.INSTANCE_ID, 10) || 1; // 1 also handles running in dev mode\n    this.role = process.env.BBB_HTML5_ROLE;\n    this.customRedisChannel = `to-html5-redis-channel${this.instanceId}`;\n\n    const { password, port } = redisConf;\n\n    if (password) {\n      this.pub = Redis.createClient({ host, port, password });\n      this.sub = Redis.createClient({ host, port, password });\n      this.pub.auth(password);\n      this.sub.auth(password);\n    } else {\n      this.pub = Redis.createClient({ host, port });\n      this.sub = Redis.createClient({ host, port });\n    }\n\n    if (queueMetrics) {\n      Metrics.startDumpFile();\n    }\n\n    this.emitter = new EventEmitter2();\n    this.meetingsQueues = {};\n    // We create this _ meeting queue because we need to be able to handle system messages (no meetingId in core.header)\n    this.meetingsQueues[NO_MEETING_ID] = new MeetingMessageQueue(this.emitter, this.config.async, this.config.debug);\n\n    this.handleSubscribe = this.handleSubscribe.bind(this);\n    this.handleMessage = this.handleMessage.bind(this);\n  }\n\n  init() {\n    this.sub.on('psubscribe', Meteor.bindEnvironment(this.handleSubscribe));\n    this.sub.on('pmessage', Meteor.bindEnvironment(this.handleMessage));\n\n    const channelsToSubscribe = this.config.subscribeTo;\n\n    channelsToSubscribe.push(this.customRedisChannel);\n\n    switch (this.role) {\n      case 'frontend':\n        this.sub.psubscribe('from-akka-apps-frontend-redis-channel');\n        if (this.redisDebugEnabled) {\n          Logger.debug(`Redis: NodeJSPool:${this.instanceId} Role: frontend. Subscribed to 'from-akka-apps-frontend-redis-channel'`);\n        }\n        break;\n      case 'backend':\n        channelsToSubscribe.forEach((channel) => {\n          this.sub.psubscribe(channel);\n          if (this.redisDebugEnabled) {\n            Logger.debug(`Redis: NodeJSPool:${this.instanceId} Role: backend. Subscribed to '${channelsToSubscribe}'`);\n          }\n        });\n        break;\n      default:\n        this.sub.psubscribe('from-akka-apps-frontend-redis-channel');\n        channelsToSubscribe.forEach((channel) => {\n          this.sub.psubscribe(channel);\n          if (this.redisDebugEnabled) {\n            Logger.debug(`Redis: NodeJSPool:${this.instanceId} Role:${this.role} (likely only one nodejs running, doing both frontend and backend. Dev env? ). Subscribed to '${channelsToSubscribe}'`);\n          }\n        });\n\n        break;\n    }\n  }\n\n  updateConfig(config) {\n    this.config = Object.assign({}, this.config, config);\n    this.redisDebugEnabled = this.config.debug;\n  }\n\n\n  // TODO: Move this out of this class, maybe pass as a callback to init?\n  handleSubscribe() {\n    if (this.didSendRequestEvent || this.role === 'frontend') return;\n\n    // populate collections with pre-existing data\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'GetAllMeetingsReqMsg';\n\n    const body = {\n      requesterId: 'nodeJSapp',\n      html5InstanceId: this.instanceId,\n    };\n\n    this.publishSystemMessage(CHANNEL, EVENT_NAME, body);\n    this.didSendRequestEvent = true;\n  }\n\n  handleMessage(pattern, channel, message) {\n    const parsedMessage = JSON.parse(message);\n    const { ignored: ignoredMessages, async } = this.config;\n    const eventName = parsedMessage.core.header.name;\n\n    if (ignoredMessages.includes(channel)\n      || ignoredMessages.includes(eventName)) {\n      if (eventName === 'CheckAlivePongSysMsg') {\n        return;\n      }\n      if (this.redisDebugEnabled) {\n        Logger.debug(`Redis: ${eventName} skipped`);\n      }\n      return;\n    }\n\n    if (this.redisDebugEnabled) {\n      Logger.warn('Received event to handle', { date: new Date().toISOString(), eventName });\n    }\n\n    // System messages like Create / Destroy Meeting, etc do not have core.header.meetingId.\n    // Process them in MeetingQueue['_']  --- the NO_MEETING queueId\n    const meetingIdFromMessageCoreHeader = parsedMessage.core.header.meetingId || NO_MEETING_ID;\n\n    if (this.role === 'frontend') {\n      // receiving this message means we need to look at it. Frontends do not have instanceId.\n      if (meetingIdFromMessageCoreHeader === NO_MEETING_ID) { // if this is a system message\n        if (eventName === 'MeetingCreatedEvtMsg' || eventName === 'SyncGetMeetingInfoRespMsg') {\n          const meetingIdFromMessageMeetingProp = parsedMessage.core.body.props.meetingProp.intId;\n          this.meetingsQueues[meetingIdFromMessageMeetingProp] = new MeetingMessageQueue(this.emitter, async, this.redisDebugEnabled);\n          if (this.redisDebugEnabled) {\n            Logger.warn('Created frontend queue for meeting', { date: new Date().toISOString(), eventName, meetingIdFromMessageMeetingProp });\n          }\n        }\n      }\n\n      if (!this.meetingsQueues[meetingIdFromMessageCoreHeader]) {\n        Logger.warn(`Frontend meeting queue had not been initialized   ${message}`, { eventName, meetingIdFromMessageCoreHeader });\n        this.meetingsQueues[NO_MEETING_ID].add({\n          pattern,\n          channel,\n          eventName,\n          parsedMessage,\n        });\n      } else {\n        // process the event - whether it's a system message or not, the meetingIdFromMessageCoreHeader value is adjusted\n        this.meetingsQueues[meetingIdFromMessageCoreHeader].add({\n          pattern,\n          channel,\n          eventName,\n          parsedMessage,\n        });\n      }\n    } else { // backend\n      if (meetingIdFromMessageCoreHeader === NO_MEETING_ID) { // if this is a system message\n        const meetingIdFromMessageMeetingProp = parsedMessage.core.body.props?.meetingProp?.intId;\n        const instanceIdFromMessage = getInstanceIdFromMessage(parsedMessage);\n\n        if (this.instanceId === instanceIdFromMessage) {\n          // create queue or destroy queue\n          if (eventName === 'MeetingCreatedEvtMsg' || eventName === 'SyncGetMeetingInfoRespMsg') {\n            this.meetingsQueues[meetingIdFromMessageMeetingProp] = new MeetingMessageQueue(this.emitter, async, this.redisDebugEnabled);\n            if (this.redisDebugEnabled) {\n              Logger.warn('Created backend queue for meeting', { date: new Date().toISOString(), eventName, meetingIdFromMessageMeetingProp });\n            }\n          }\n          this.meetingsQueues[NO_MEETING_ID].add({\n            pattern,\n            channel,\n            eventName,\n            parsedMessage,\n          });\n        } else {\n          if (eventName === 'MeetingEndedEvtMsg' || eventName === 'MeetingDestroyedEvtMsg') {\n            // MeetingEndedEvtMsg does not follow the system message pattern for meetingId\n            // but we still need to process it on the backend which is processing the rest of the events\n            // for this meetingId (it does not contain instanceId either, so we cannot compare that)\n            const meetingIdForMeetingEnded = parsedMessage.core.body.meetingId;\n            if (!!this.meetingsQueues[meetingIdForMeetingEnded]) {\n              this.meetingsQueues[NO_MEETING_ID].add({\n                pattern,\n                channel,\n                eventName,\n                parsedMessage,\n              });\n            }\n          }\n          // ignore\n        }\n      } else {\n        // add to existing queue\n        if (!!this.meetingsQueues[meetingIdFromMessageCoreHeader]) {\n          // only handle message if we have a queue for the meeting. If we don't have a queue, it means it's for a different instanceId\n          this.meetingsQueues[meetingIdFromMessageCoreHeader].add({\n            pattern,\n            channel,\n            eventName,\n            parsedMessage,\n          });\n        } else {\n          // If we reach this line, this means that there is no existing queue for this redis \"backend\" message\n          // which means that the meeting is fully handled by another bbb-html5-backend.\n          // Logger.warn('Backend meeting queue had not been initialized', { eventName, meetingIdFromMessageCoreHeader })\n        }\n      }\n    }\n  }\n\n  destroyMeetingQueue(id) {\n    delete this.meetingsQueues[id];\n  }\n\n  on(...args) {\n    return this.emitter.on(...args);\n  }\n\n  publishVoiceMessage(channel, eventName, voiceConf, payload) {\n    const header = {\n      name: eventName,\n      voiceConf,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishSystemMessage(channel, eventName, payload) {\n    const header = {\n      name: eventName,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishMeetingMessage(channel, eventName, meetingId, payload) {\n    const header = {\n      name: eventName,\n      meetingId,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishUserMessage(channel, eventName, meetingId, userId, payload) {\n    const header = {\n      name: eventName,\n      meetingId,\n      userId,\n    };\n\n    if (!meetingId || !userId) {\n      Logger.warn(`Publishing ${eventName} with potentially missing data userId=${userId} meetingId=${meetingId}`);\n    }\n    const envelope = makeEnvelope(channel, eventName, header, payload, { meetingId, userId });\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n}\n\nconst RedisPubSubSingleton = new RedisPubSub();\n\nMeteor.startup(() => {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  RedisPubSubSingleton.updateConfig(REDIS_CONFIG);\n  RedisPubSubSingleton.init();\n});\n\nexport default RedisPubSubSingleton;\n","/* global __meteor_runtime_config__ */\nimport { Meteor } from 'meteor/meteor';\nimport fs from 'fs';\nimport YAML from 'yaml';\nimport _ from 'lodash';\n\nconst DEFAULT_SETTINGS_FILE_PATH = process.env.BBB_HTML5_SETTINGS || 'assets/app/config/settings.yml';\nconst LOCAL_SETTINGS_FILE_PATH = process.env.BBB_HTML5_LOCAL_SETTINGS || '/etc/bigbluebutton/bbb-html5.yml';\n\n\ntry {\n  if (fs.existsSync(DEFAULT_SETTINGS_FILE_PATH)) {\n    const SETTINGS = YAML.parse(fs.readFileSync(DEFAULT_SETTINGS_FILE_PATH, 'utf-8'));\n\n    if (fs.existsSync(LOCAL_SETTINGS_FILE_PATH)) {\n      console.log('Local configuration found! Merging with default configuration...');\n      const LOCAL_CONFIG = YAML.parse(fs.readFileSync(LOCAL_SETTINGS_FILE_PATH, 'utf-8'));\n      _.merge(SETTINGS, LOCAL_CONFIG);\n    } else console.log('Local Configuration not found! Loading default configuration...');\n\n    Meteor.settings = SETTINGS;\n    Meteor.settings.public.app.instanceId = ''; // no longer use instanceId in URLs. Likely permanent change\n    // Meteor.settings.public.app.instanceId = `/${INSTANCE_ID}`;\n\n    __meteor_runtime_config__.PUBLIC_SETTINGS = SETTINGS.public;\n  } else {\n    throw new Error('File doesn\\'t exists');\n  }\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.error('Error on load configuration file.', error);\n}\n","// Used in Flash and HTML to show a legitimate break in the line\nconst BREAK_LINE = '<br/>';\n\n// Soft return in HTML to signify a broken line without\n// displaying the escaped '<br/>' line break text\nconst CARRIAGE_RETURN = '\\r';\n\n// Handle this the same as carriage return, in case text copied has this\nconst NEW_LINE = '\\n';\n\nexport { BREAK_LINE, CARRIAGE_RETURN, NEW_LINE };\n","export const XLS = 'application/vnd.ms-excel';\nexport const XLSX = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\nexport const DOC = 'application/msword';\nexport const DOCX = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\nexport const PPT = 'application/vnd.ms-powerpoint';\nexport const PPTX = 'application/vnd.openxmlformats-officedocument.presentationml.presentation';\nexport const ODT = 'application/vnd.oasis.opendocument.text';\nexport const RTF = 'application/rtf';\nexport const TXT = 'text/plain';\nexport const ODS = 'application/vnd.oasis.opendocument.spreadsheet';\nexport const ODP = 'application/vnd.oasis.opendocument.presentation';\nexport const PDF = 'application/pdf';\nexport const JPEG = 'image/jpeg';\nexport const PNG = 'image/png';\nexport const SVG = 'image/svg+xml';\n\nexport const UPLOAD_SUPORTED = [\n  XLS,\n  XLSX,\n  DOC,\n  DOCX,\n  PPT,\n  PPTX,\n  ODT,\n  RTF,\n  TXT,\n  ODS,\n  ODP,\n  PDF,\n  JPEG,\n  PNG,\n];\n","//\n// Regular Expression for URL validation\n//\n// Author: Diego Perini\n// Updated: 2010/12/05\n// License: MIT\n//\n// Copyright (c) 2010-2013 Diego Perini (http://www.iport.it)\n//\n// Permission is hereby granted, free of charge, to any person\n// obtaining a copy of this software and associated documentation\n// files (the \"Software\"), to deal in the Software without\n// restriction, including without limitation the rights to use,\n// copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the\n// Software is furnished to do so, subject to the following\n// conditions:\n//\n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n// OTHER DEALINGS IN THE SOFTWARE.\n//\n// the regular expression composed & commented\n// could be easily tweaked for RFC compliance,\n// it was expressly modified to fit & satisfy\n// these test for an URL shortener:\n//\n//   http://mathiasbynens.be/demo/url-regex\n//\n// Notes on possible differences from a standard/generic validation:\n//\n// - utf-8 char class take in consideration the full Unicode range\n// - TLDs have been made mandatory so single names like \"localhost\" fails\n// - protocols have been restricted to ftp, http and https only as requested\n//\n// Changes:\n//\n// - IP address dotted notation validation, range: 1.0.0.0 - 223.255.255.255\n//   first and last IP address of each class is considered invalid\n//   (since they are broadcast/network addresses)\n//\n// - Added exclusion of private, reserved and/or local networks ranges\n//\n// - Made starting path slash optional (http://example.com?foo=bar)\n//\n// - Allow a dot (.) at the end of hostnames (http://example.com.)\n//\n// Compressed one-line versions:\n//\n// Javascript version (merge into one line)\n//\n// /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})\n// (?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})\n// (?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}\n// (?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)\n// (?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)\n// (?::\\d{2,5})?(?:[/?#]\\S*)?$/i\n//\n// PHP version (merge into one line)\n//\n// _^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)\n// (?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])\n// (?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5]))\n// {2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)\n// *[a-z\\x{00a1}-\\x{ffff}0-9]+)(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)*[a-z\\x{00a1}-\\x{ffff}0-9]+)\n// *(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$_iuS\n//\n\nexport default new RegExp(\n\n  // protocol identifier\n  '(?:(?:https?|ftp)://)' +\n\n  // user:pass authentication\n  '(?:\\\\S+(?::\\\\S*)?@)?' +\n  '(?:' +\n\n    // IP address exclusion\n    // private & local networks\n    '(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})' +\n    '(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})' +\n    '(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})' +\n\n    // IP address dotted notation octets\n    // excludes loopback network 0.0.0.0\n    // excludes reserved space >= 224.0.0.0\n    // excludes network & broacast addresses\n    // (first & last IP address of each class)\n    '(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])' +\n    '(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}' +\n    '(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))' +\n  '|' +\n\n    // host name\n    '(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)' +\n\n    // domain name\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*' +\n\n    // TLD identifier\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))' +\n\n    // TLD may end with dot\n    '\\\\.?' +\n  ')' +\n\n  // port number\n  '(?::\\\\d{2,5})?' +\n\n  // resource path\n  '(?:[/?#]\\\\S*)?', 'img',\n);\n","import '/imports/startup/server';\n\n// 2x\nimport '/imports/api/meetings/server';\nimport '/imports/api/users/server';\nimport '/imports/api/annotations/server';\nimport '/imports/api/cursor/server';\nimport '/imports/api/polls/server';\nimport '/imports/api/captions/server';\nimport '/imports/api/presentations/server';\nimport '/imports/api/presentation-pods/server';\nimport '/imports/api/presentation-upload-token/server';\nimport '/imports/api/slides/server';\nimport '/imports/api/breakouts/server';\nimport '/imports/api/group-chat/server';\nimport '/imports/api/group-chat-msg/server';\nimport '/imports/api/screenshare/server';\nimport '/imports/api/users-settings/server';\nimport '/imports/api/voice-users/server';\nimport '/imports/api/whiteboard-multi-user/server';\nimport '/imports/api/video-streams/server';\nimport '/imports/api/network-information/server';\nimport '/imports/api/users-infos/server';\nimport '/imports/api/users-persistent-data/server';\nimport '/imports/api/connection-status/server';\nimport '/imports/api/note/server';\nimport '/imports/api/external-videos/server';\nimport '/imports/api/guest-users/server';\nimport '/imports/api/local-settings/server';\nimport '/imports/api/voice-call-states/server';\nimport '/imports/api/auth-token-validation/server';\n\n// Commons\nimport '/imports/api/log-client/server';\nimport '/imports/api/common/server/helpers';\nimport '/imports/startup/server/logger';\n\n// Needed for Atmosphere package RocketChat/meteor-streamer\n// It is out of date and was written when Meteor contained lodash\n// package. However, we now import lodash as an npm package\n// in order to control versions, update flexibly, etc..\n// Setting the global._ to utilize the npm lodash package is an interim fix\n// and its introduction was inspired by\n// https://github.com/RocketChat/meteor-streamer/issues/40#issuecomment-497627893\nimport _ from 'lodash';\n\nglobal._ = _;\n"]}