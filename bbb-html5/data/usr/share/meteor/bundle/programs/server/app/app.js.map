{"version":3,"sources":["meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardCleared.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardSend.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardUndo.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/clearWhiteboard.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendAnnotationHelper.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendBulkAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/undoAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/addAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/clearAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/removeAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/annotations/server/index.js","meteor://ðŸ’»app/imports/api/annotations/server/methods.js","meteor://ðŸ’»app/imports/api/annotations/server/publishers.js","meteor://ðŸ’»app/imports/api/annotations/server/streamer.js","meteor://ðŸ’»app/imports/api/annotations/addAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/index.js","meteor://ðŸ’»app/imports/api/auth-token-validation/server/modifiers/clearAuthTokenValidation.js","meteor://ðŸ’»app/imports/api/auth-token-validation/server/modifiers/upsertValidationState.js","meteor://ðŸ’»app/imports/api/auth-token-validation/server/index.js","meteor://ðŸ’»app/imports/api/auth-token-validation/server/publishers.js","meteor://ðŸ’»app/imports/api/auth-token-validation/index.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutClosed.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutJoinURL.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutStarted.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/joinedUsersChanged.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/updateTimeRemaining.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/createBreakout.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/endAllBreakouts.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/requestJoinURL.js","meteor://ðŸ’»app/imports/api/breakouts/server/modifiers/clearBreakouts.js","meteor://ðŸ’»app/imports/api/breakouts/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/breakouts/server/index.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods.js","meteor://ðŸ’»app/imports/api/breakouts/server/publishers.js","meteor://ðŸ’»app/imports/api/breakouts/index.js","meteor://ðŸ’»app/imports/api/captions/server/handlers/padCreate.js","meteor://ðŸ’»app/imports/api/captions/server/handlers/padUpdate.js","meteor://ðŸ’»app/imports/api/captions/server/methods/appendText.js","meteor://ðŸ’»app/imports/api/captions/server/methods/createCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/methods/editCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/methods/fetchReadOnlyPadId.js","meteor://ðŸ’»app/imports/api/captions/server/methods/takeOwnership.js","meteor://ðŸ’»app/imports/api/captions/server/methods/updateOwner.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/addCaption.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/clearCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/updateOwnerId.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/updatePad.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/updateReadOnlyPadId.js","meteor://ðŸ’»app/imports/api/captions/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/captions/server/helpers.js","meteor://ðŸ’»app/imports/api/captions/server/index.js","meteor://ðŸ’»app/imports/api/captions/server/methods.js","meteor://ðŸ’»app/imports/api/captions/server/publishers.js","meteor://ðŸ’»app/imports/api/captions/index.js","meteor://ðŸ’»app/imports/api/connection-status/server/methods/addConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/modifiers/clearConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/modifiers/updateConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/index.js","meteor://ðŸ’»app/imports/api/connection-status/server/methods.js","meteor://ðŸ’»app/imports/api/connection-status/server/publishers.js","meteor://ðŸ’»app/imports/api/connection-status/index.js","meteor://ðŸ’»app/imports/api/cursor/server/handlers/cursorUpdate.js","meteor://ðŸ’»app/imports/api/cursor/server/methods/publishCursorUpdate.js","meteor://ðŸ’»app/imports/api/cursor/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/cursor/server/index.js","meteor://ðŸ’»app/imports/api/cursor/server/methods.js","meteor://ðŸ’»app/imports/api/cursor/server/streamer.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/destroyExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/emitExternalVideoEvent.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/initializeExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/startWatchingExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/stopWatchingExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/index.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChatCreated.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChatDestroyed.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChats.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods/createGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods/destroyGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/modifiers/addGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/modifiers/clearGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/group-chat/server/index.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods.js","meteor://ðŸ’»app/imports/api/group-chat/server/publishers.js","meteor://ðŸ’»app/imports/api/group-chat/index.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/clearPublicGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/groupChatMsgBroadcast.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/syncGroupsChat.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/userTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/clearPublicChatHistory.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/sendGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/startUserTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/stopUserTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/addBulkGroupChatMsgs.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/addGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/clearGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/startTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/stopTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/syncMeetingChatMsgs.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/index.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/publishers.js","meteor://ðŸ’»app/imports/api/group-chat-msg/index.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestApproved.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestWaitingLeft.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestsWaitingForApproval.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/allowPendingUsers.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/changeGuestPolicy.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/removeGuest.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/setGuestStatus.js","meteor://ðŸ’»app/imports/api/guest-users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/guest-users/server/index.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods.js","meteor://ðŸ’»app/imports/api/guest-users/server/publishers.js","meteor://ðŸ’»app/imports/api/guest-users/index.js","meteor://ðŸ’»app/imports/api/local-settings/server/methods/userChangedLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/modifiers/clearLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/modifiers/setChangedLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/index.js","meteor://ðŸ’»app/imports/api/local-settings/server/methods.js","meteor://ðŸ’»app/imports/api/local-settings/server/publishers.js","meteor://ðŸ’»app/imports/api/local-settings/index.js","meteor://ðŸ’»app/imports/api/log-client/server/methods/logClient.js","meteor://ðŸ’»app/imports/api/log-client/server/index.js","meteor://ðŸ’»app/imports/api/log-client/server/methods.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/getAllMeetings.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingCreation.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingDestruction.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingEnd.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingLockChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/recordingStatusChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/recordingTimerChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/timeRemainingUpdate.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/userLockChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/webcamOnlyModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/endMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleLockSettings.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleRecording.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleWebcamsOnlyForModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/transferUser.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/addMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/changeLockSettings.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/changeUserLock.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/clearRecordMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/meetingHasEnded.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/setPublishedPoll.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/webcamOnlyModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/meetings/server/index.js","meteor://ðŸ’»app/imports/api/meetings/server/methods.js","meteor://ðŸ’»app/imports/api/meetings/server/publishers.js","meteor://ðŸ’»app/imports/api/meetings/index.js","meteor://ðŸ’»app/imports/api/network-information/server/methods/userInstabilityDetected.js","meteor://ðŸ’»app/imports/api/network-information/server/modifiers/clearNetworkInformation.js","meteor://ðŸ’»app/imports/api/network-information/server/index.js","meteor://ðŸ’»app/imports/api/network-information/server/methods.js","meteor://ðŸ’»app/imports/api/network-information/server/publisher.js","meteor://ðŸ’»app/imports/api/network-information/index.js","meteor://ðŸ’»app/imports/api/note/server/handlers/padUpdate.js","meteor://ðŸ’»app/imports/api/note/server/methods/createNote.js","meteor://ðŸ’»app/imports/api/note/server/modifiers/addNote.js","meteor://ðŸ’»app/imports/api/note/server/modifiers/clearNote.js","meteor://ðŸ’»app/imports/api/note/server/modifiers/updateNote.js","meteor://ðŸ’»app/imports/api/note/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/note/server/helpers.js","meteor://ðŸ’»app/imports/api/note/server/index.js","meteor://ðŸ’»app/imports/api/note/server/publishers.js","meteor://ðŸ’»app/imports/api/note/index.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollPublished.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollStarted.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollStopped.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/userResponded.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/userVoted.js","meteor://ðŸ’»app/imports/api/polls/server/methods/publishPoll.js","meteor://ðŸ’»app/imports/api/polls/server/methods/publishVote.js","meteor://ðŸ’»app/imports/api/polls/server/methods/startPoll.js","meteor://ðŸ’»app/imports/api/polls/server/methods/stopPoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/addPoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/clearPolls.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/removePoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/updateVotes.js","meteor://ðŸ’»app/imports/api/polls/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/polls/server/index.js","meteor://ðŸ’»app/imports/api/polls/server/methods.js","meteor://ðŸ’»app/imports/api/polls/server/publishers.js","meteor://ðŸ’»app/imports/api/polls/index.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/createNewPresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/removePresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/setPresenterInPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/syncGetPresentationPods.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/addPresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/clearPresentationPods.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/removePresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/setPresenterInPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/index.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/publishers.js","meteor://ðŸ’»app/imports/api/presentation-pods/index.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/handlers/presentationUploadTokenFail.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/handlers/presentationUploadTokenPass.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods/requestPresentationUploadToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods/setUsedToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/index.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/publishers.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/index.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationAdded.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationConversionUpdate.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationCurrentSet.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationDownloadableSet.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationRemove.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/removePresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/setPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/setPresentationDownloadable.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/addPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/clearPresentations.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/removePresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/setCurrentPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/setPresentationDownloadable.js","meteor://ðŸ’»app/imports/api/presentations/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentations/server/index.js","meteor://ðŸ’»app/imports/api/presentations/server/methods.js","meteor://ðŸ’»app/imports/api/presentations/server/publishers.js","meteor://ðŸ’»app/imports/api/presentations/index.js","meteor://ðŸ’»app/imports/api/screenshare/server/handlers/screenshareStarted.js","meteor://ðŸ’»app/imports/api/screenshare/server/handlers/screenshareStopped.js","meteor://ðŸ’»app/imports/api/screenshare/server/modifiers/addScreenshare.js","meteor://ðŸ’»app/imports/api/screenshare/server/modifiers/clearScreenshare.js","meteor://ðŸ’»app/imports/api/screenshare/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/screenshare/server/index.js","meteor://ðŸ’»app/imports/api/screenshare/server/methods.js","meteor://ðŸ’»app/imports/api/screenshare/server/publishers.js","meteor://ðŸ’»app/imports/api/screenshare/index.js","meteor://ðŸ’»app/imports/api/slides/server/handlers/slideChange.js","meteor://ðŸ’»app/imports/api/slides/server/handlers/slideResize.js","meteor://ðŸ’»app/imports/api/slides/server/methods/switchSlide.js","meteor://ðŸ’»app/imports/api/slides/server/methods/zoomSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/addSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/addSlidePositions.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/changeCurrentSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/clearSlides.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/clearSlidesPresentation.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/resizeSlide.js","meteor://ðŸ’»app/imports/api/slides/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/slides/server/helpers.js","meteor://ðŸ’»app/imports/api/slides/server/index.js","meteor://ðŸ’»app/imports/api/slides/server/methods.js","meteor://ðŸ’»app/imports/api/slides/server/publishers.js","meteor://ðŸ’»app/imports/api/slides/index.js","meteor://ðŸ’»app/imports/api/users/server/handlers/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/handlers/emojiStatus.js","meteor://ðŸ’»app/imports/api/users/server/handlers/presenterAssigned.js","meteor://ðŸ’»app/imports/api/users/server/handlers/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userEjected.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userInactivityInspect.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userJoin.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userJoined.js","meteor://ðŸ’»app/imports/api/users/server/handlers/validateAuthToken.js","meteor://ðŸ’»app/imports/api/users/server/methods/assignPresenter.js","meteor://ðŸ’»app/imports/api/users/server/methods/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/methods/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/methods/setEmojiStatus.js","meteor://ðŸ’»app/imports/api/users/server/methods/setUserEffectiveConnectionType.js","meteor://ðŸ’»app/imports/api/users/server/methods/toggleUserLock.js","meteor://ðŸ’»app/imports/api/users/server/methods/userActivitySign.js","meteor://ðŸ’»app/imports/api/users/server/methods/userLeaving.js","meteor://ðŸ’»app/imports/api/users/server/methods/userLeftMeeting.js","meteor://ðŸ’»app/imports/api/users/server/methods/validateAuthToken.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/addDialInUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/addUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/changePresenter.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/clearUsers.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/createDummyUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/setUserEffectiveConnectionType.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/userEjected.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/userInactivityInspect.js","meteor://ðŸ’»app/imports/api/users/server/store/bannedUsers.js","meteor://ðŸ’»app/imports/api/users/server/store/pendingAuthentications.js","meteor://ðŸ’»app/imports/api/users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/users/server/index.js","meteor://ðŸ’»app/imports/api/users/server/methods.js","meteor://ðŸ’»app/imports/api/users/server/publishers.js","meteor://ðŸ’»app/imports/api/users/index.js","meteor://ðŸ’»app/imports/api/users-infos/server/handlers/userInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods/removeUserInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods/requestUserInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/addUserInfo.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/clearUserInfo.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/clearUserInfoForRequester.js","meteor://ðŸ’»app/imports/api/users-infos/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/users-infos/server/index.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods.js","meteor://ðŸ’»app/imports/api/users-infos/server/publishers.js","meteor://ðŸ’»app/imports/api/users-infos/index.js","meteor://ðŸ’»app/imports/api/users-settings/server/methods/addUserSettings.js","meteor://ðŸ’»app/imports/api/users-settings/server/modifiers/addUserSetting.js","meteor://ðŸ’»app/imports/api/users-settings/server/modifiers/clearUsersSettings.js","meteor://ðŸ’»app/imports/api/users-settings/server/index.js","meteor://ðŸ’»app/imports/api/users-settings/server/methods.js","meteor://ðŸ’»app/imports/api/users-settings/server/publishers.js","meteor://ðŸ’»app/imports/api/users-settings/index.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/userSharedHtml5Webcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/userUnsharedHtml5Webcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods/userShareWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods/userUnshareWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/clearVideoStreams.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/sharedWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/unsharedWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/video-streams/server/helpers.js","meteor://ðŸ’»app/imports/api/video-streams/server/index.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods.js","meteor://ðŸ’»app/imports/api/video-streams/server/publisher.js","meteor://ðŸ’»app/imports/api/video-streams/index.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/handlers/voiceCallStateEvent.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/modifiers/clearVoiceCallStates.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/index.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/publishers.js","meteor://ðŸ’»app/imports/api/voice-call-states/index.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/getVoiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/joinVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/leftVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/meetingMuted.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/mutedVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/talkingVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/voiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/ejectUserFromVoice.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteAllExceptPresenterToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteAllToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/addVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/changeMuteMeeting.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/clearVoiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/removeVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/updateVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/voice-users/server/index.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods.js","meteor://ðŸ’»app/imports/api/voice-users/server/publishers.js","meteor://ðŸ’»app/imports/api/voice-users/index.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/handlers/modifyWhiteboardAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods/changeWhiteboardAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/modifiers/modifyWhiteboardAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/index.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/publishers.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/index.js","meteor://ðŸ’»app/imports/api/common/server/helpers.js","meteor://ðŸ’»app/imports/startup/server/ClientConnections.js","meteor://ðŸ’»app/imports/startup/server/index.js","meteor://ðŸ’»app/imports/startup/server/logger.js","meteor://ðŸ’»app/imports/startup/server/metrics.js","meteor://ðŸ’»app/imports/startup/server/minBrowserVersion.js","meteor://ðŸ’»app/imports/startup/server/redis.js","meteor://ðŸ’»app/imports/startup/server/settings.js","meteor://ðŸ’»app/imports/utils/lineEndings.js","meteor://ðŸ’»app/imports/utils/mimeTypes.js","meteor://ðŸ’»app/imports/utils/regex-weburl.js","meteor://ðŸ’»app/server/main.js"],"names":["module","export","default","handleWhiteboardAnnotations","_","link","v","check","modifyWhiteboardAccess","clearAnnotations","addAnnotation","meetingId","header","body","Object","userId","String","annotations","whiteboardId","multiUser","Array","Boolean","annotationsAdded","each","annotation","wbId","push","handleWhiteboardCleared","AnnotationsStreamer","fullClear","emit","handleWhiteboardSend","Metrics","queueMetrics","Meteor","settings","private","redis","metrics","ANNOTATION_PROCCESS_INTERVAL","annotationsQueue","annotationsRecieverIsRunning","proccess","keys","length","forEach","setAnnotationQueueLength","setTimeout","hasOwnProperty","handleWhiteboardUndo","removeAnnotation","shapeId","annotationId","clearWhiteboard","RedisPubSub","extractCredentials","REDIS_CONFIG","CHANNEL","channels","toAkkaApps","EVENT_NAME","requesterUserId","payload","publishUserMessage","sendAnnotation","sendAnnotationHelper","annotationType","id","status","annotationInfo","x","Number","y","fontColor","calcedFontSize","textBoxWidth","text","textBoxHeight","fontSize","dataPoints","type","position","color","thickness","points","dimensions","Match","Maybe","drawEndOnly","sendBulkAnnotations","undoAnnotation","Logger","Annotations","addAnnotationQuery","query","insertedId","upsert","selector","modifier","info","err","error","numberAffected","remove","processForHTML5ServerOnly","on","methods","AuthTokenValidation","ValidationStates","tokenValidation","findOne","connectionId","connection","validationStatus","VALIDATED","warn","find","debug","publish","boundAnnotations","bind","removeAnnotationsStreamer","addAnnotationsStreamer","get","StreamerCentral","instances","streamer","Streamer","retransmit","allowRead","includes","allowWrite","ANNOTATION_TYPE_TEXT","ANNOTATION_TYPE_PENCIL","handleCommonAnnotation","$set","$setOnInsert","$inc","version","handleTextUpdate","replace","handlePencilUpdate","DRAW_START","DRAW_UPDATE","DRAW_END","baseSelector","baseModifier","$push","$each","Mongo","Collection","isServer","_ensureIndex","exportDefault","clearAuthTokenValidation","ClientConnections","num","removeMeeting","upsertValidationState","updatedAt","Date","getTime","cb","numChanged","JSON","stringify","authTokenValidation","boundAuthTokenValidation","freeze","NOT_VALIDATED","VALIDATING","INVALID","handleBreakoutClosed","clearBreakouts","breakoutId","handleBreakoutJoinURL","Breakouts","redirectToHtml5JoinURL","users","insertedTime","handleBreakoutRoomStarted","flat","DEFAULT_TIME_REMAINING","parentMeetingId","breakout","assign","joinedUsers","timeRemaining","joinedUsersChanged","parentId","usersMapped","map","user","name","update","handleUpdateTimeRemaining","options","multi","createBreakoutRoom","rooms","durationInMinutes","record","BREAKOUT_LIM","public","app","breakoutRoomLimit","MIN_BREAKOUT_ROOMS","MAX_BREAKOUT_ROOMS","eventName","endAllBreakouts","requestJoinURL","userIdToInvite","handleBreakoutStarted","Users","ROLE_MODERATOR","role_moderator","breakouts","role","User","fields","presenterSelector","$or","freeJoin","boundBreakouts","handlePadCreate","fetchReadOnlyPadId","pad","handlePadUpdate","getDataFromChangeset","updatePad","revs","changeset","data","appendText","axios","generatePadId","appendTextURL","locale","padId","method","url","responseType","then","response","verbose","catch","createCaptions","isEnabled","getLocalesURL","addCaption","locales","editCaptions","Captions","getIndex","ownerId","index","startIndex","localeCode","endIndex","getReadOnlyIdURL","getDataFromResponse","updateReadOnlyPadId","readOnlyURL","readOnlyPadId","takeOwnership","updateOwnerId","$regex","clearCaptions","updateOwner","processForCaptionsPadOnly","hashFNV32a","CAPTIONS_CONFIG","captions","BASENAME","basename","APP","INSTANCE_ID","instanceId","LOCALES_URL","host","port","localesUrl","CAPTIONS","TOKEN","isCaptionsPad","splitPadId","split","splitChangeset","shift","join","enabled","fn","message","args","requestedBy","boundCaptions","addConnectionStatus","updateConnectionStatus","level","clearConnectionStatus","ConnectionStatus","timestamp","connectionStatus","boundNote","handleCursorUpdate","CursorStreamer","streamerLog","serverLog","CURSOR_PROCCESS_INTERVAL","cursorQueue","throttle","cursors","publishCursorUpdate","removeCursorStreamer","addCursorStreamer","destroyExternalVideo","streamName","emitExternalVideoEvent","messageName","presenter","streamerName","rest","initializeExternalVideo","allowRecentMessages","time","rate","state","allowEmit","startWatchingExternalVideo","Meetings","externalVideoUrl","stopWatchingExternalVideo","meeting","handleGroupChatCreated","addGroupChat","handleGroupChatDestroyed","handleGroupChats","chats","chat","createGroupChat","CHAT_ACCESS_PRIVATE","receiver","correlationId","now","msg","access","destroyGroupChat","GroupChat","chatId","createdBy","chatDocument","u","participants","safe","clearGroupChat","clearGroupChatMsg","groupChat","CHAT_CONFIG","PUBLIC_CHAT_TYPE","type_public","$all","boundGroupChat","CHAT_ACCESS_PUBLIC","CHAT_ACCESS","PUBLIC","PRIVATE","clearPublicChatHistory","handleGroupChatMsgBroadcast","addGroupChatMsg","addBulkGroupChatMsgs","bufferChatInsertsMs","msgBuffer","bulkFn","handleSyncGroupChat","syncMeetingChatMsgs","msgs","handleUserTyping","startTyping","PUBLIC_GROUP_CHAT_ID","public_group_id","sendGroupChatMsg","RegexWebUrl","HTML_SAFE_MAP","parseMessage","parsedMessage","trim","c","startUserTyping","stopUserTyping","UsersTyping","stopTyping","userTyping","_objectSpread","GroupChatMsg","mappedMsgs","_id","ObjectID","_str","sender","el","insertedCount","rawCollection","insertMany","BREAK_LINE","msgDocument","insert","PUBLIC_CHAT_SYSTEM_ID","system_userid","CHAT_CLEAR_MESSAGE","system_messages_keys","chat_clear","clearMsg","$eq","TYPING_TIMEOUT","isTypingTo","typingUser","sendMsgInitiated","stillTyping","bulkOperations","initializeOrderedBulkOp","msgToSync","updateOne","execute","handleClearPublicGroupChat","handleSyncGroupChatMsg","groupChatMsg","chatsIds","$in","usersTyping","pubishUsersTyping","boundUsersTyping","handleGuestApproved","setGuestStatus","approvedBy","guests","guest","handleGuestWaitingLeft","removeGuest","handleGuestsWaitingForApproval","stringHash","GuestUsers","COLOR_LIST","intId","approved","denied","loginTime","allowPendingUsers","mappedGuests","changeGuestPolicy","policyRule","setBy","policy","GUEST_STATUS_ALLOW","GUEST_STATUS_DENY","guestUsers","boundSlides","userChangedLocalSettings","LocalSettings","setChangedLocalSettings","userLocalSettings","isEqual","clearLocalSettings","localSettings","boundLocalSettings","logDescription","logCode","extraInfo","userInfo","logContents","log","logClient","handleGetAllMeetings","handleMeetingCreation","addMeeting","props","durationInSecods","durationProps","duration","handleMeetingDestruction","destroyMeetingQueue","handleMeetingEnd","meetingHasEnded","meetingType","meetingEnded","handleLockSettingsInMeeting","changeLockSettings","handleRecordingStatusChange","RecordMeetings","recording","handleRecordingTimerChange","handleTimeRemainingUpdate","MeetingTimeRemaining","timeLeftInSec","changeUserLock","handleChangeWebcamOnlyModerator","changeWebcamOnlyModerator","endMeeting","toggleLockSettings","lockSettingsProps","disableCam","disableMic","disablePrivateChat","disablePublicChat","disableNote","hideUserList","lockedLayout","lockOnJoin","lockOnJoinConfigurable","disablePrivChat","disablePubChat","toggleRecording","meetingRecorded","allowedToRecord","recordObject","allowStartStopRecording","toggleWebcamsOnlyForModerator","webcamsOnlyForModerator","transferUser","fromMeetingId","toMeetingId","_objectWithoutProperties","SanitizeHTML","createNote","BannedUsers","meetingProp","breakoutProps","sequence","breakoutRooms","privateChatEnabled","extId","isBreakout","usersProp","guestPolicy","maxUsers","allowModsToUnmuteUsers","createdTime","createdDate","meetingExpireIfNoUserJoinedInMinutes","meetingExpireWhenLastUserLeftInMinutes","userInactivityInspectTimerInMinutes","userInactivityThresholdInMinutes","userActivitySignResponseDelayInMinutes","welcomeProp","welcomeMsg","modOnlyMessage","welcomeMsgTemplate","recordProp","ObjectIncluding","autoStartRecording","password","viewerPass","moderatorPass","voiceProp","voiceConf","dialNumber","telVoice","muteOnStart","screenshareProps","red5ScreenshareIp","red5ScreenshareApp","screenshareConf","metadataProp","systemProps","html5InstanceId","restProps","newMeeting","sanitizeTextInChat","original","allowedTags","allowedAttributes","a","img","allowedSchemes","sanitizedWelcomeText","insertBlankTarget","s","i","substr","linkWithoutTarget","RegExp","test","lastIndex","publishedPoll","init","locked","lockedBy","clearUsers","clearUsersSettings","clearSlides","clearPolls","clearPresentationPods","clearVoiceUsers","clearUserInfo","clearNote","clearNetworkInformation","clearRecordMeeting","clearVoiceCallStates","clearVideoStreams","delete","setPublishedPoll","isPublished","handleMeetingLocksChange","handleUserLockChange","meetings","boundMeetings","recordMeetings","recordPublish","boundRecordMeetings","meetingTimeRemaining","timeRemainingPublish","boundtimeRemaining","userInstabilityDetected","NetworkInformation","networkInformation","boundNetworkInformation","updateNote","generateNoteId","createPadURL","addNote","noteId","createURL","responseOuter","readOnlyNoteId","Note","processForNotePadOnly","ETHERPAD","etherpad","NOTE_CONFIG","note","BASE_URL","apikey","encodeURIComponent","key","innerData","isNotePad","search","pollPublished","removePoll","pollId","pollStarted","addPoll","poll","pollStopped","userResponded","Polls","answerId","$pull","responses","userVoted","updateVotes","answers","numVotes","numRespondents","numResponders","publishPoll","requesterId","publishVote","pollAnswerId","allowedToVote","questionId","startPoll","pollType","stopPoll","userSelector","$ne","clientType","userIds","fetch","requester","handlePollStarted","handlePollStopped","handlePollPublished","handleUserVoted","handleUserResponded","currentPoll","publishCurrentPoll","boundPolls","polls","handleCreateNewPresentationPod","addPresentationPod","currentPresenterId","podId","pod","handleRemovePresentationPod","removePresentationPod","handleSetPresenterInPod","setPresenterInPod","nextPresenterId","handleSyncGetPresentationPods","PresentationPods","pods","presentationPodIds","presentationPodsToRemove","$nin","p","currentPresenter","presentations","addPresentation","undefined","presentation","clearPresentations","clearPresentationUploadToken","presentationPods","boundPresentationPods","handlePresentationUploadTokenFail","PresentationUploadToken","filename","failed","authzToken","handlePresentationUploadTokenPass","used","requestPresentationUploadToken","setUsedToken","presentationUploadToken","boundPresentationUploadToken","handlePresentationAdded","handlePresentationConversionUpdate","Presentations","OFFICE_DOC_CONVERSION_FAILED_KEY","OFFICE_DOC_CONVERSION_INVALID_KEY","SUPPORTED_DOCUMENT_KEY","UNSUPPORTED_DOCUMENT_KEY","PAGE_COUNT_FAILED_KEY","PAGE_COUNT_EXCEEDED_KEY","PDF_HAS_BIG_PAGE_KEY","GENERATED_SLIDE_KEY","presentationId","messageKey","presName","presentationName","statusModifier","pagesCompleted","numberOfPages","handlePresentationCurrentSet","setCurrentPresentation","handlePresentationDownloadableSet","setPresentationDownloadable","downloadable","handlePresentationRemove","removePresentation","setPresentation","HTTP","addSlide","getSlideText","content","addSlides","slides","slide","txtUri","current","pages","thumbUri","swfUri","svgUri","xOffset","yOffset","widthRatio","heightRatio","clearSlidesPresentation","oldCurrent","callback","newCurrent","oldPresentation","newPresentation","boundPresentations","handleScreenshareStarted","addScreenshare","presenterId","handleScreenshareStopped","clearScreenshare","Screenshare","screenshare","boundScreenshare","handleSlideChange","changeCurrentSlide","pageId","handleSlideResize","resizeSlide","switchSlide","Slides","slideNumber","Presentation","Error","Slide","zoomSlide","probe","SVG","PNG","calculateSlideData","addSlidePositions","loadSlidesFromHttpAlways","requestWhiteboardHistory","slideId","USER_ID","SUPPORTED_TYPES","fetchImageSizes","imageUri","result","mime","width","height","reason","restSlide","pngUri","imageSizeUri","slideData","slidePosition","SlidePositions","viewBoxWidth","viewBoxHeight","oldSlide","newSlide","numberAffectedSlidePositions","whiteboardIds","row","SlidePosition","calculatedData","slidePositions","publishPositions","boundSlidePositions","handleChangeRole","changeRole","changedBy","handleEmojiStatus","emoji","emojiTime","handlePresenterAssigned","changePresenter","setPresenterInPodReqMsg","credentials","assignedBy","prevPresenter","setPresenterPayload","defaultPodSelector","currentDefaultPodPresenter","oldPresenter","handleRemoveUser","removeUser","handleEjectedUser","userEjected","reasonCode","handleUserInactivityInspect","userInactivityInspect","responseDelay","Integer","userJoin","authToken","handleUserJoined","addUser","handleValidateAuthToken","pendingAuthenticationsStore","createDummyUser","clearOtherSessions","sessionUserId","serverSessions","server","sessions","filter","close","valid","waitForApproval","pendingAuths","take","pendingAuth","methodInvocationObject","e","sessionId","setUserId","validated","inactivityCheck","currentConnectionId","assignPresenter","newPresenterId","newPresenterName","banUser","ejectedBy","removedUser","add","setEmojiStatus","setUserEffectiveConnectionType","setEffectiveConnectionType","effectiveConnectionType","toggleUserLock","lock","userActivitySign","userLeaving","auth","sort","userLeftMeeting","loggedOut","removeClientConnection","validateAuthToken","requesterToken","externalId","has","invalid","error_type","isUserInvalid","ejected","addDialInUser","voiceUser","USER_CONFIG","ROLE_VIEWER","role_viewer","callerName","voiceOnlyUser","toLowerCase","authed","waitingForAcceptance","guestStatus","avatar","VoiceUsers","addVoiceUser","userData","sanitizedName","escape","Meeting","sortName","isBreakoutUser","voiceUserId","callerNum","muted","talking","callingWith","listenOnly","joined","doc","VideoStreams","clearUserInfoForRequester","clearAllSessions","userToRemove","ejectedReason","constructor","store","Set","PendingAuthentitcations","generateKey","matches","handleUserEjected","currentUser","publishCurrentUser","boundUsers","handleUserInformation","addUserInfo","removeUserInformation","UserInfos","getUserInformation","externalUserId","toThirdParty","clearUsersInfo","clearUsersInfoForRequester","requestUserInformation","userInfos","boundUserInfos","addUserSettings","addUserSetting","logger","oldParameters","askForFeedbackOnLogout","autoJoin","autoShareWebcam","autoSwapLayout","clientTitle","customStyle","customStyleUrl","displayBrandingArea","enableScreensharing","enableVideo","forceListenOnly","hidePresentation","listenOnlyMode","multiUserPenOnly","multiUserTools","outsideToggleRecording","outsideToggleSelfVoice","presenterTools","shortcuts","skipCheck","oldParametersKeys","currentParameters","valueParser","val","parsedValue","parse","parameters","settingKey","normalizedKey","matchingNewKey","settingsAdded","entries","setting","value","UserSettings","Any","userSettings","mainRoomUserSettings","boundUserSettings","handleUserSharedHtml5Webcam","sharedWebcam","isValidStream","stream","handleUserUnsharedHtml5Webcam","unsharedWebcam","userShareWebcam","userUnshareWebcam","getDeviceId","getUserName","deviceId","FLASH_STREAM_REGEX","splitStream","videoStreams","boundVideoStreams","handleVoiceCallStateEvent","VoiceCallState","clientSession","callState","VoiceCallStates","voiceCallStates","boundVoiceCallStates","handleGetVoiceUsers","removeVoiceUser","updateVoiceUser","usersIds","m","voiceUsersIdsToUpdate","voiceUsersUpdated","indexOf","voiceUsersToRemove","handleJoinVoiceUser","handleVoiceUpdate","isDialInUser","meetingID","handleMeetingMuted","changeMuteMeeting","handleVoiceUsers","voiceUsers","voice","ejectUserFromVoice","muteAllExceptPresenterToggle","toggleMeetingMuted","mutedBy","mute","muteAllToggle","muteToggle","uId","userToMute","spoke","clearVoiceUser","clearSpokeTimeout","spokeTimeoutHandles","TALKING_TIMEOUT","startTime","endTime","timeoutHandle","spokeDelay","handleLeftVoiceUser","handleTalkingVoiceUser","handleMutedVoiceUser","toggleVoice","muteAllUsers","muteAllExceptPresenter","onCloseConnection","bindEnvironment","_session","socket","debounce","boundVoiceUser","handleModifyWhiteboardAccess","changeWhiteboardAccess","WhiteboardMultiUser","handleGetWhiteboardAccess","whiteboardMultiUser","boundMultiUser","MSG_DIRECT_TYPE","NODE_USER","clearTimeout","item","l","envelope","routing","msgType","shouldSkip","str","asString","seed","hval","charCodeAt","toString","credentialsArray","connections","Map","setInterval","print","exists","createMeetingConnections","sessionConnections","onClose","set","getConnectionsForClient","mapConnectionsObj","k","meetingConnections","filteredConnections","syncConnectionsWithServer","console","from","ClientConnectionsSingleton","eventEmitter","redisPubSub","WebAppInternals","Langmap","fs","lookupUserAgent","lookup","Redis","setMinBrowserVersions","guestWaitHtml","AVAILABLE_LOCALES","readdirSync","FALLBACK_LOCALES","Assets","getText","process","exit","startup","APP_CONFIG","env","isDevelopment","CDN_URL","cdn","slice","customHeartbeat","newHeartbeat","heartbeat","currentTime","ws","lastSentFrameTimestamp","session","_meteorSession","supportsHeartbeats","ping","hto_ref","sentAt","heartbeatTimeout","newSend","send","meteorHeartbeat","_seenPacket","_heartbeatTimeoutHandle","_clearHeartbeatTimeoutTimer","readyState","Buffer","_driver","messages","write","values","recv","bbbFixApplied","__proto__","BrowserPolicy","disallowEval","allowInlineScripts","allowInlineStyles","allowImageDataUrl","allowFontDataUrl","allowOriginForAll","setBundledJsCssPrefix","fontRegExp","WebApp","rawConnectHandlers","use","req","res","next","_parsedUrl","pathname","setHeader","generateLocaleOptions","tempAggregateLocales","file","localeName","nativeName","avaibleLocalesNamesJSON","connectHandlers","html5clientStatus","writeHead","end","fallback","defaultSettings","application","fallbackLocale","override","overrideLocale","browserLocale","localeList","usableLocales","reduce","match","regionDefault","normalizedLocale","toUpperCase","userName","reqUserName","comment","rating","feedback","userAgent","headers","emitter","createLogger","format","transports","LOG_CONFIG","combine","colorize","splat","simple","Console","prettyPrint","humanReadableUnhandledException","handleExceptions","path","metricsDumpIntervalMs","metricsFolderPath","removeMeetingOnEnd","addEvent","messageLength","currentlyInQueue","wasInQueue","count","payloadSize","processEvent","size","processingStartTimestamp","currentProcessingTimestamp","processTime","min","max","last","total","avg","processingTime","annotationQueueLength","startDumpFile","fileDate","fullYear","getFullYear","month","getMonth","padStart","day","getDate","hour","getHours","minutes","getMinutes","seconds","getSeconds","folderName","fileName","folderPath","fullFilePath","existsSync","mkdirSync","writeFileSync","metricsSingleton","setMinimumBrowserVersions","minBrowserVersions","versions","elem","Infinity","browser","EventEmitter2","NO_MEETING_ID","makeEnvelope","channel","core","MeetingMessageQueue","asyncMessages","redisDebugEnabled","queue","PowerQueue","handleTask","taskHandler","isAsync","beginHandleTimestamp","called","callNext","queueId","dataLength","queueLength","onError","stack","emitAsync","handlePublishError","config","didSendRequestEvent","REDIS_HOST","redisConf","instanceMax","parseInt","INSTANCE_MAX","customRedisChannel","pub","createClient","sub","mettingsQueues","async","handleSubscribe","handleMessage","channelsToSubscribe","subscribeTo","psubscribe","updateConfig","publishSystemMessage","pattern","ignored","ignoredMessages","newIntId","publishVoiceMessage","publishMeetingMessage","RedisPubSubSingleton","YAML","YAML_FILE_PATH","BBB_HTML5_SETTINGS","REQUESTED_INSTANCE_ID","SETTINGS","readFileSync","__meteor_runtime_config__","PUBLIC_SETTINGS","CARRIAGE_RETURN","NEW_LINE","XLS","XLSX","DOC","DOCX","PPT","PPTX","ODT","RTF","TXT","ODS","ODP","PDF","JPEG","UPLOAD_SUPORTED","global"],"mappings":"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","file":"/app.js","sourcesContent":["import _ from 'lodash';\nimport { check } from 'meteor/check';\nimport modifyWhiteboardAccess from '/imports/api/whiteboard-multi-user/server/modifiers/modifyWhiteboardAccess';\nimport clearAnnotations from '../modifiers/clearAnnotations';\nimport addAnnotation from '../modifiers/addAnnotation';\n\nexport default function handleWhiteboardAnnotations({ header, body }, meetingId) {\n  check(header, Object);\n  if (header.userId !== 'nodeJSapp') { return false; }\n\n  check(meetingId, String);\n  check(body, Object);\n\n  const { annotations, whiteboardId, multiUser } = body;\n\n  check(annotations, Array);\n  check(whiteboardId, String);\n  check(multiUser, Boolean);\n\n  clearAnnotations(meetingId, whiteboardId);\n\n  const annotationsAdded = [];\n  _.each(annotations, (annotation) => {\n    const { wbId, userId } = annotation;\n    annotationsAdded.push(addAnnotation(meetingId, wbId, userId, annotation));\n  });\n\n  modifyWhiteboardAccess(meetingId, whiteboardId, multiUser);\n\n  return annotationsAdded;\n}\n","import { check } from 'meteor/check';\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\n\nimport clearAnnotations from '../modifiers/clearAnnotations';\n\nexport default function handleWhiteboardCleared({ body }, meetingId) {\n  check(body, {\n    userId: String,\n    whiteboardId: String,\n    fullClear: Boolean,\n  });\n\n  const { whiteboardId, fullClear, userId } = body;\n\n  if (fullClear) {\n    AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId });\n    return clearAnnotations(meetingId, whiteboardId);\n  }\n\n  AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId, userId });\n  return clearAnnotations(meetingId, whiteboardId, userId);\n}\n","import { check } from 'meteor/check';\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\nimport addAnnotation from '../modifiers/addAnnotation';\nimport Metrics from '/imports/startup/server/metrics';\n\nconst { queueMetrics } = Meteor.settings.private.redis.metrics;\n\nconst ANNOTATION_PROCCESS_INTERVAL = 60;\n\nlet annotationsQueue = {};\nlet annotationsRecieverIsRunning = false;\n\nconst proccess = () => {\n  if (!Object.keys(annotationsQueue).length) {\n    annotationsRecieverIsRunning = false;\n    return;\n  }\n  annotationsRecieverIsRunning = true;\n  Object.keys(annotationsQueue).forEach((meetingId) => {\n    AnnotationsStreamer(meetingId).emit('added', { meetingId, annotations: annotationsQueue[meetingId] });\n    if (queueMetrics) {\n      Metrics.setAnnotationQueueLength(meetingId, 0);\n    }\n  });\n  annotationsQueue = {};\n\n  Meteor.setTimeout(proccess, ANNOTATION_PROCCESS_INTERVAL);\n};\n\nexport default function handleWhiteboardSend({ header, body }, meetingId) {\n  const userId = header.userId;\n  const annotation = body.annotation;\n\n  check(userId, String);\n  check(annotation, Object);\n\n  const whiteboardId = annotation.wbId;\n  check(whiteboardId, String);\n\n  if (!annotationsQueue.hasOwnProperty(meetingId)) {\n    annotationsQueue[meetingId] = [];\n  }\n\n  annotationsQueue[meetingId].push({ meetingId, whiteboardId, userId, annotation });\n  if (queueMetrics) {\n    Metrics.setAnnotationQueueLength(meetingId, annotationsQueue[meetingId].length);\n  }\n  if (!annotationsRecieverIsRunning) proccess();\n\n  return addAnnotation(meetingId, whiteboardId, userId, annotation);\n}\n","import { check } from 'meteor/check';\n\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\nimport removeAnnotation from '../modifiers/removeAnnotation';\n\nexport default function handleWhiteboardUndo({ body }, meetingId) {\n  const whiteboardId = body.whiteboardId;\n  const shapeId = body.annotationId;\n\n  check(whiteboardId, String);\n  check(shapeId, String);\n\n  AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId, shapeId });\n  return removeAnnotation(meetingId, whiteboardId, shapeId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function clearWhiteboard(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ClearWhiteboardPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(whiteboardId, String);\n\n  const payload = {\n    whiteboardId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import sendAnnotationHelper from './sendAnnotationHelper';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function sendAnnotation(annotation) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  sendAnnotationHelper(annotation, meetingId, requesterUserId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function sendAnnotationHelper(annotation, meetingId, requesterUserId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendWhiteboardAnnotationPubMsg';\n\n  const whiteboardId = annotation.wbId;\n\n  check(annotation, Object);\n  check(whiteboardId, String);\n\n  if (annotation.annotationType === 'text') {\n    check(annotation, {\n      id: String,\n      status: String,\n      annotationType: String,\n      annotationInfo: {\n        x: Number,\n        y: Number,\n        fontColor: Number,\n        calcedFontSize: Number,\n        textBoxWidth: Number,\n        text: String,\n        textBoxHeight: Number,\n        id: String,\n        whiteboardId: String,\n        status: String,\n        fontSize: Number,\n        dataPoints: String,\n        type: String,\n      },\n      wbId: String,\n      userId: String,\n      position: Number,\n    });\n  } else {\n    check(annotation, {\n      id: String,\n      status: String,\n      annotationType: String,\n      annotationInfo: {\n        color: Number,\n        thickness: Number,\n        points: Array,\n        id: String,\n        whiteboardId: String,\n        status: String,\n        type: String,\n        dimensions: Match.Maybe([Number]),\n      },\n      wbId: String,\n      userId: String,\n      position: Number,\n    });\n  }\n\n  const payload = {\n    annotation,\n    drawEndOnly: true,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { extractCredentials } from '/imports/api/common/server/helpers';\nimport sendAnnotationHelper from './sendAnnotationHelper';\n\nexport default function sendBulkAnnotations(payload) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  payload.forEach(annotation => sendAnnotationHelper(annotation, meetingId, requesterUserId));\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function undoAnnotation(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UndoWhiteboardPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(whiteboardId, String);\n\n  const payload = {\n    whiteboardId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Annotations from '/imports/api/annotations';\nimport addAnnotationQuery from '/imports/api/annotations/addAnnotation';\n\nexport default function addAnnotation(meetingId, whiteboardId, userId, annotation) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(annotation, Object);\n\n  const query = addAnnotationQuery(meetingId, whiteboardId, userId, annotation);\n\n  try {\n    const { insertedId } = Annotations.upsert(query.selector, query.modifier);\n\n    if (insertedId) {\n      Logger.info(`Added annotation id=${annotation.id} whiteboard=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding annotation to collection: ${err}`);\n  }\n}\n","import Annotations from '/imports/api/annotations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearAnnotations(meetingId, whiteboardId, userId) {\n  const selector = {};\n\n  if (meetingId) {\n    selector.meetingId = meetingId;\n  }\n\n  if (whiteboardId) {\n    selector.whiteboardId = whiteboardId;\n  }\n\n  if (userId) {\n    selector.userId = userId;\n  }\n\n  try {\n    const numberAffected = Annotations.remove(selector);\n\n    if (numberAffected) {\n      if (userId) {\n        Logger.info(`Cleared Annotations for userId=${userId} where whiteboard=${whiteboardId}`);\n        return;\n      }\n\n      if (whiteboardId) {\n        Logger.info(`Cleared Annotations for whiteboard=${whiteboardId}`);\n        return;\n      }\n\n      if (meetingId) {\n        Logger.info(`Cleared Annotations (${meetingId})`);\n        return;\n      }\n\n      Logger.info('Cleared Annotations (all)');\n    }\n  } catch (err) {\n    Logger.error(`Removing Annotations from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Annotations from '/imports/api/annotations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeAnnotation(meetingId, whiteboardId, shapeId) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(shapeId, String);\n\n  const selector = {\n    meetingId,\n    whiteboardId,\n    id: shapeId,\n  };\n\n  try {\n    const numberAffected = Annotations.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed annotation id=${shapeId} whiteboard=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing annotation from collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleWhiteboardCleared from './handlers/whiteboardCleared';\nimport handleWhiteboardUndo from './handlers/whiteboardUndo';\nimport handleWhiteboardSend from './handlers/whiteboardSend';\nimport handleWhiteboardAnnotations from './handlers/whiteboardAnnotations';\n\nRedisPubSub.on('ClearWhiteboardEvtMsg', handleWhiteboardCleared);\nRedisPubSub.on('UndoWhiteboardEvtMsg', handleWhiteboardUndo);\nRedisPubSub.on('SendWhiteboardAnnotationEvtMsg', handleWhiteboardSend);\nRedisPubSub.on('GetWhiteboardAnnotationsRespMsg', processForHTML5ServerOnly(handleWhiteboardAnnotations));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport undoAnnotation from './methods/undoAnnotation';\nimport clearWhiteboard from './methods/clearWhiteboard';\nimport sendAnnotation from './methods/sendAnnotation';\nimport sendBulkAnnotations from './methods/sendBulkAnnotations';\n\nMeteor.methods({\n  undoAnnotation,\n  clearWhiteboard,\n  sendAnnotation,\n  sendBulkAnnotations,\n});\n","import Annotations from '/imports/api/annotations';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction annotations() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Annotations was requested by unauth connection ${this.connection.id}`);\n    return Annotations.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Annotations', { meetingId, userId });\n\n  return Annotations.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundAnnotations = annotations.bind(this);\n  return boundAnnotations(...args);\n}\n\nMeteor.publish('annotations', publish);\n","import Logger from '/imports/startup/server/logger';\n\nexport function removeAnnotationsStreamer(meetingId) {\n  Logger.info(`Removing Annotations streamer object for meeting ${meetingId}`);\n  delete Meteor.StreamerCentral.instances[`annotations-${meetingId}`];\n}\n\nexport function addAnnotationsStreamer(meetingId) {\n  const streamer = new Meteor.Streamer(`annotations-${meetingId}`, { retransmit: false });\n\n  streamer.allowRead(function allowRead() {\n    if (!this.userId) return false;\n\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.allowWrite(function allowWrite() {\n    return false;\n  });\n}\n\nexport default function get(meetingId) {\n  return Meteor.StreamerCentral.instances[`annotations-${meetingId}`];\n}\n","import { check } from 'meteor/check';\n\nconst ANNOTATION_TYPE_TEXT = 'text';\nconst ANNOTATION_TYPE_PENCIL = 'pencil';\n\n// line, triangle, ellipse, rectangle\nfunction handleCommonAnnotation(meetingId, whiteboardId, userId, annotation) {\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const selector = {\n    meetingId,\n    id,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      whiteboardId,\n      meetingId,\n      id,\n      status,\n      annotationType,\n      annotationInfo,\n      wbId,\n    },\n    $setOnInsert: {\n      position,\n    },\n    $inc: { version: 1 },\n  };\n\n  return { selector, modifier };\n}\n\nfunction handleTextUpdate(meetingId, whiteboardId, userId, annotation) {\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const selector = {\n    meetingId,\n    id,\n    userId,\n  };\n\n  annotationInfo.text = annotationInfo.text.replace(/[\\r]/g, '\\n');\n\n  const modifier = {\n    $set: {\n      whiteboardId,\n      meetingId,\n      id,\n      status,\n      annotationType,\n      annotationInfo,\n      wbId,\n    },\n    $setOnInsert: {\n      position,\n    },\n    $inc: { version: 1 },\n  };\n\n  return { selector, modifier };\n}\n\nfunction handlePencilUpdate(meetingId, whiteboardId, userId, annotation) {\n  const DRAW_START = 'DRAW_START';\n  const DRAW_UPDATE = 'DRAW_UPDATE';\n  const DRAW_END = 'DRAW_END';\n\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const baseSelector = {\n    meetingId,\n    id,\n    userId,\n    whiteboardId,\n  };\n\n  let baseModifier;\n  switch (status) {\n    case DRAW_START:\n      // on start we split the points\n\n      // create the 'pencil_base'\n      // TODO: find and removed unused props (chunks, version, etc)\n      baseModifier = {\n        $set: {\n          id,\n          userId,\n          meetingId,\n          whiteboardId,\n          position,\n          status,\n          annotationType,\n          annotationInfo,\n          wbId,\n          version: 1,\n        },\n      };\n      break;\n    case DRAW_UPDATE:\n      baseModifier = {\n        $push: {\n          'annotationInfo.points': { $each: annotationInfo.points },\n        },\n        $set: {\n          status,\n        },\n        $inc: { version: 1 },\n      };\n      break;\n    case DRAW_END:\n      // Updating the main pencil object with the final info\n      baseModifier = {\n        $set: {\n          whiteboardId,\n          meetingId,\n          id,\n          status,\n          annotationType,\n          annotationInfo,\n          wbId,\n          position,\n        },\n        $inc: { version: 1 },\n      };\n      break;\n    default:\n      break;\n  }\n\n  return { selector: baseSelector, modifier: baseModifier };\n}\n\nexport default function addAnnotation(meetingId, whiteboardId, userId, annotation) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(annotation, Object);\n\n  switch (annotation.annotationType) {\n    case ANNOTATION_TYPE_TEXT:\n      return handleTextUpdate(meetingId, whiteboardId, userId, annotation);\n    case ANNOTATION_TYPE_PENCIL:\n      return handlePencilUpdate(meetingId, whiteboardId, userId, annotation);\n    default:\n      return handleCommonAnnotation(meetingId, whiteboardId, userId, annotation);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\n\nconst Annotations = new Mongo.Collection('annotations');\n\nif (Meteor.isServer) {\n  // types of queries for the annotations  (Total):\n  // 1. meetingId, id, userId               ( 8 )\n  // 2. meetingId, id, userId, whiteboardId ( 1 )\n  // 3. meetingId                           ( 1 )\n  // 4. meetingId, whiteboardId             ( 1 )\n  // 5. meetingId, whiteboardId, id         ( 1 )\n  // 6. meetingId, whiteboardId, userId     ( 1 )\n  // These 2 indexes seem to cover all of the cases\n\n  Annotations._ensureIndex({ id: 1 });\n  Annotations._ensureIndex({ meetingId: 1, whiteboardId: 1, userId: 1 });\n}\n\nexport default Annotations;\n","import AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Logger from '/imports/startup/server/logger';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nexport default function clearAuthTokenValidation(meetingId) {\n  return AuthTokenValidation.remove({ meetingId }, (err, num) => {\n    if (err) {\n      Logger.info(`Error when removing auth-token-validation for meeting=${meetingId}`);\n    }\n\n    ClientConnections.removeMeeting(meetingId);\n    Logger.info(`Cleared AuthTokenValidation (${meetingId})`);\n  });\n}\n","import Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\n\nexport default function upsertValidationState(meetingId, userId, validationStatus, connectionId) {\n  const selector = {\n    meetingId, userId, connectionId,\n  };\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      connectionId,\n      validationStatus,\n      updatedAt: new Date().getTime(),\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Could not upsert to collection AuthTokenValidation: ${err}`);\n      return;\n    }\n    if (numChanged) {\n      Logger.info(`Upserted ${JSON.stringify(selector)} ${validationStatus} in AuthTokenValidation`);\n    }\n  };\n\n  return AuthTokenValidation.upsert(selector, modifier, cb);\n}\n","import './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Logger from '/imports/startup/server/logger';\n\nfunction authTokenValidation({ meetingId, userId }) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  Logger.debug(`Publishing auth-token-validation for ${meetingId} ${userId}`);\n\n  return AuthTokenValidation.find(selector);\n}\n\nfunction publish(...args) {\n  const boundAuthTokenValidation = authTokenValidation.bind(this);\n  return boundAuthTokenValidation(...args);\n}\n\nMeteor.publish('auth-token-validation', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst AuthTokenValidation = new Mongo.Collection('auth-token-validation');\n\nif (Meteor.isServer) {\n  AuthTokenValidation._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport const ValidationStates = Object.freeze({\n  NOT_VALIDATED: 1,\n  VALIDATING: 2,\n  VALIDATED: 3,\n  INVALID: 4,\n});\n\nexport default AuthTokenValidation;\n","import { check } from 'meteor/check';\nimport clearBreakouts from '../modifiers/clearBreakouts';\n\nexport default function handleBreakoutClosed({ body }) {\n  const { breakoutId } = body;\n  check(breakoutId, String);\n\n  return clearBreakouts(breakoutId);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function handleBreakoutJoinURL({ body }) {\n  const {\n    redirectToHtml5JoinURL,\n    userId,\n    breakoutId,\n  } = body;\n\n  check(redirectToHtml5JoinURL, String);\n\n  const selector = {\n    breakoutId,\n  };\n\n  const modifier = {\n    $push: {\n      users: {\n        userId,\n        redirectToHtml5JoinURL,\n        insertedTime: new Date().getTime(),\n      },\n    },\n  };\n\n  try {\n    const { insertedId, numberAffected } = Breakouts.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added breakout id=${breakoutId}`);\n    } else if (numberAffected) {\n      Logger.info(`Upserted breakout id=${breakoutId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding breakout to collection: ${err}`);\n  }\n}\n","import Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\n\nexport default function handleBreakoutRoomStarted({ body }, meetingId) {\n  // 0 seconds default breakout time, forces use of real expiration time\n  const DEFAULT_TIME_REMAINING = 0;\n\n  const {\n    parentMeetingId,\n    breakout,\n  } = body;\n\n  const { breakoutId } = breakout;\n\n  check(meetingId, String);\n\n  const selector = {\n    breakoutId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      {\n        users: [],\n        joinedUsers: [],\n      },\n      { timeRemaining: DEFAULT_TIME_REMAINING },\n      { parentMeetingId },\n      flat(breakout),\n    ),\n  };\n\n  try {\n    const { numberAffected } = Breakouts.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info('Updated timeRemaining and externalMeetingId '\n        + `for breakout id=${breakoutId}`);\n    }\n  } catch (err) {\n    Logger.error(`updating breakout: ${err}`);\n  }\n}\n","import Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function joinedUsersChanged({ body }) {\n  check(body, Object);\n\n  const {\n    parentId,\n    breakoutId,\n    users,\n  } = body;\n\n  check(parentId, String);\n  check(breakoutId, String);\n  check(users, Array);\n\n  const selector = {\n    parentMeetingId: parentId,\n    breakoutId,\n  };\n\n  const usersMapped = users.map(user => ({ userId: user.id, name: user.name }));\n  const modifier = {\n    $set: {\n      joinedUsers: usersMapped,\n    },\n  };\n\n  try {\n    const numberAffected = Breakouts.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated joined users in breakout id=${breakoutId}`);\n    }\n  } catch (err) {\n    Logger.error(`updating joined users in breakout: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function handleUpdateTimeRemaining({ body }, meetingId) {\n  const {\n    timeRemaining,\n  } = body;\n\n  check(meetingId, String);\n  check(timeRemaining, Number);\n\n  const selector = {\n    parentMeetingId: meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      timeRemaining,\n    },\n  };\n\n  const options = {\n    multi: true,\n  };\n\n  try {\n    const numberAffected = Breakouts.update(selector, modifier, options);\n\n    if (numberAffected) {\n      Logger.info(`Updated breakout time remaining for breakouts where parentMeetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating breakouts: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function createBreakoutRoom(rooms, durationInMinutes, record = false) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const BREAKOUT_LIM = Meteor.settings.public.app.breakoutRoomLimit;\n  const MIN_BREAKOUT_ROOMS = 2;\n  const MAX_BREAKOUT_ROOMS = BREAKOUT_LIM > MIN_BREAKOUT_ROOMS ? BREAKOUT_LIM : MIN_BREAKOUT_ROOMS;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const eventName = 'CreateBreakoutRoomsCmdMsg';\n  if (rooms.length > MAX_BREAKOUT_ROOMS) {\n    Logger.info(`Attempt to create breakout rooms with invalid number of rooms in meeting id=${meetingId}`);\n    return;\n  }\n  const payload = {\n    record,\n    durationInMinutes,\n    rooms,\n    meetingId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function endAllBreakouts() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const eventName = 'EndAllBreakoutRoomsMsg';\n  return RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, null);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function requestJoinURL({ breakoutId, userId: userIdToInvite }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const userId = userIdToInvite || requesterUserId;\n  const eventName = 'RequestBreakoutJoinURLReqMsg';\n\n  return RedisPubSub.publishUserMessage(\n    CHANNEL, eventName, meetingId, requesterUserId,\n    {\n      meetingId,\n      breakoutId,\n      userId,\n    },\n  );\n}\n","import Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function clearBreakouts(breakoutId) {\n  if (breakoutId) {\n    const selector = {\n      breakoutId,\n    };\n\n    try {\n      const numberAffected = Breakouts.remove(selector);\n\n      if (numberAffected) {\n        Logger.info(`Cleared Breakouts (${breakoutId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Breakouts (${breakoutId})`);\n    }\n  } else {\n    try {\n      const numberAffected = Breakouts.remove({});\n      if (numberAffected) {\n        Logger.info('Cleared Breakouts (all)');\n      }\n    } catch (err) {\n      Logger.error('Error on clearing Breakouts (all)');\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleBreakoutJoinURL from './handlers/breakoutJoinURL';\nimport handleBreakoutStarted from './handlers/breakoutStarted';\nimport handleUpdateTimeRemaining from './handlers/updateTimeRemaining';\nimport handleBreakoutClosed from './handlers/breakoutClosed';\nimport joinedUsersChanged from './handlers/joinedUsersChanged';\n\nRedisPubSub.on('BreakoutRoomStartedEvtMsg', handleBreakoutStarted);\nRedisPubSub.on('BreakoutRoomJoinURLEvtMsg', handleBreakoutJoinURL);\nRedisPubSub.on('RequestBreakoutJoinURLRespMsg', handleBreakoutJoinURL);\nRedisPubSub.on('BreakoutRoomsTimeRemainingUpdateEvtMsg', handleUpdateTimeRemaining);\nRedisPubSub.on('BreakoutRoomEndedEvtMsg', handleBreakoutClosed);\nRedisPubSub.on('UpdateBreakoutUsersEvtMsg', joinedUsersChanged);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport createBreakoutRoom from '/imports/api/breakouts/server/methods/createBreakout';\nimport requestJoinURL from './methods/requestJoinURL';\nimport endAllBreakouts from './methods/endAllBreakouts';\n\nMeteor.methods({\n  requestJoinURL,\n  createBreakoutRoom,\n  endAllBreakouts,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Breakouts from '/imports/api/breakouts';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction breakouts(role) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Breakouts was requested by unauth connection ${this.connection.id}`);\n    return Breakouts.find({ meetingId: '' });\n  }\n  const { meetingId, userId } = tokenValidation;\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  Logger.debug('Publishing Breakouts', { meetingId, userId });\n\n  if (!!User && User.role === ROLE_MODERATOR) {\n    const presenterSelector = {\n      $or: [\n        { parentMeetingId: meetingId },\n        { breakoutId: meetingId },\n      ],\n    };\n\n    return Breakouts.find(presenterSelector);\n  }\n\n  const selector = {\n    $or: [\n      {\n        parentMeetingId: meetingId,\n        freeJoin: true,\n      },\n      {\n        parentMeetingId: meetingId,\n        'users.userId': userId,\n      },\n      {\n        breakoutId: meetingId,\n      },\n    ],\n  };\n\n  return Breakouts.find(selector);\n}\n\nfunction publish(...args) {\n  const boundBreakouts = breakouts.bind(this);\n  return boundBreakouts(...args);\n}\n\nMeteor.publish('breakouts', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Breakouts = new Mongo.Collection('breakouts');\n\nif (Meteor.isServer) {\n  // types of queries for the breakouts:\n  // 1. breakoutId ( handleJoinUrl, roomStarted, clearBreakouts )\n  // 2. parentMeetingId ( updateTimeRemaining )\n\n  Breakouts._ensureIndex({ breakoutId: 1 });\n  Breakouts._ensureIndex({ parentMeetingId: 1 });\n}\n\nexport default Breakouts;\n","import { check } from 'meteor/check';\nimport fetchReadOnlyPadId from '/imports/api/captions/server/methods/fetchReadOnlyPadId';\n\nexport default function handlePadCreate({ body }) {\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  fetchReadOnlyPadId(id);\n}\n","import { check } from 'meteor/check';\nimport { getDataFromChangeset } from '/imports/api/captions/server/helpers';\nimport updatePad from '/imports/api/captions/server/modifiers/updatePad';\n\nexport default function handlePadUpdate({ body }) {\n  const { pad, revs, changeset } = body;\n  const { id } = pad;\n\n  check(id, String);\n  check(changeset, String);\n  check(revs, Number);\n\n  const data = getDataFromChangeset(changeset);\n\n  if (data !== '') {\n    updatePad(id, data, revs);\n  }\n}\n","import axios from 'axios';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  generatePadId,\n} from '/imports/api/captions/server/helpers';\nimport {\n  appendTextURL,\n} from '/imports/api/note/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function appendText(text, locale) {\n  const { meetingId } = extractCredentials(this.userId);\n  check(meetingId, String);\n  check(text, String);\n  check(locale, String);\n\n  const padId = generatePadId(meetingId, locale);\n\n  axios({\n    method: 'get',\n    url: appendTextURL(padId, text),\n    responseType: 'json',\n  }).then((response) => {\n    const { status } = response;\n    if (status === 200) {\n      Logger.verbose('Captions: appended text', { padId });\n    }\n  }).catch(error => Logger.error(`Could not append captions for padId=${padId}: ${error}`));\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  generatePadId,\n  isEnabled,\n  getLocalesURL,\n} from '/imports/api/captions/server/helpers';\nimport addCaption from '/imports/api/captions/server/modifiers/addCaption';\nimport axios from 'axios';\n\nexport default function createCaptions(meetingId) {\n  // Avoid captions creation if this feature is disabled\n  if (!isEnabled()) {\n    Logger.warn(`Captions are disabled for ${meetingId}`);\n    return;\n  }\n\n  check(meetingId, String);\n\n  axios({\n    method: 'get',\n    url: getLocalesURL(),\n    responseType: 'json',\n  }).then((response) => {\n    const { status } = response;\n    if (status !== 200) {\n      Logger.error(`Could not get locales info for ${meetingId} ${status}`);\n    }\n    const locales = response.data;\n    locales.forEach((locale) => {\n      const padId = generatePadId(meetingId, locale.locale);\n      addCaption(meetingId, padId, locale);\n    });\n  }).catch(error => Logger.error(`Could not create captions for ${meetingId}: ${error}`));\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nconst getIndex = (data, length) => length - data.length;\n\nexport default function editCaptions(padId, data) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EditCaptionHistoryPubMsg';\n\n  check(padId, String);\n  check(data, String);\n\n  const pad = Captions.findOne({ padId });\n\n  if (!pad) {\n    Logger.error(`Editing captions history: ${padId}`);\n    return;\n  }\n\n\n  const {\n    meetingId,\n    ownerId,\n    locale,\n    length,\n  } = pad;\n\n  check(meetingId, String);\n  check(ownerId, String);\n  check(locale, { locale: String, name: String });\n  check(length, Number);\n\n  const index = getIndex(data, length);\n\n  const payload = {\n    startIndex: index,\n    localeCode: locale.locale,\n    locale: locale.name,\n    endIndex: index,\n    text: data,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, ownerId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  getReadOnlyIdURL,\n  getDataFromResponse,\n} from '/imports/api/note/server/helpers';\nimport updateReadOnlyPadId from '/imports/api/captions/server/modifiers/updateReadOnlyPadId';\nimport axios from 'axios';\n\nexport default function fetchReadOnlyPadId(padId) {\n  check(padId, String);\n\n  const readOnlyURL = getReadOnlyIdURL(padId);\n  axios({\n    method: 'get',\n    url: readOnlyURL,\n    responseType: 'json',\n  }).then((response) => {\n    const readOnlyPadId = getDataFromResponse(response.data, 'readOnlyID');\n    if (readOnlyPadId) {\n      updateReadOnlyPadId(padId, readOnlyPadId);\n    } else {\n      Logger.error(`Could not get pad readOnlyID for ${padId}`);\n    }\n  }).catch(error => Logger.error(`Could not get pad readOnlyID for ${padId}: ${error}`));\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport updateOwnerId from '/imports/api/captions/server/modifiers/updateOwnerId';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function takeOwnership(locale) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(locale, String);\n\n  const pad = Captions.findOne({ meetingId, padId: { $regex: `_captions_${locale}$` } });\n\n  if (pad) {\n    updateOwnerId(meetingId, requesterUserId, pad.padId);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function editCaptions(meetingId, userId, padId) { // TODO\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateCaptionOwnerPubMsg';\n\n  check(meetingId, String);\n  check(userId, String);\n  check(padId, String);\n\n  const pad = Captions.findOne({ meetingId, padId });\n\n  if (!pad) {\n    Logger.error(`Editing captions owner: ${padId}`);\n    return;\n  }\n\n  const { locale } = pad;\n\n  check(locale, { locale: String, name: String });\n\n  const payload = {\n    ownerId: userId,\n    locale: locale.name,\n    localeCode: locale.locale,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addCaption(meetingId, padId, locale) {\n  check(meetingId, String);\n  check(padId, String);\n  check(locale, {\n    locale: String,\n    name: String,\n  });\n\n  const selector = {\n    meetingId,\n    padId,\n  };\n\n  const modifier = {\n    meetingId,\n    padId,\n    locale,\n    ownerId: '',\n    readOnlyPadId: '',\n    data: '',\n    revs: 0,\n    length: 0,\n  };\n\n  try {\n    const { insertedId, numberAffected } = Captions.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.verbose('Captions: added locale', { locale: locale.locale, meetingId });\n    } else if (numberAffected) {\n      Logger.verbose('Captions: upserted locale', { locale: locale.locale, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Adding caption to collection: ${err}`);\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearCaptions(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Captions.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Captions (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing captions (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Captions.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Captions (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing captions (all). ${err}`);\n    }\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport updateOwner from '/imports/api/captions/server/methods/updateOwner';\nimport { check } from 'meteor/check';\n\nexport default function updateOwnerId(meetingId, userId, padId) {\n  check(meetingId, String);\n  check(userId, String);\n  check(padId, String);\n\n  const selector = {\n    meetingId,\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      ownerId: userId,\n    },\n  };\n\n  try {\n    const numberAffected = Captions.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      updateOwner(meetingId, userId, padId);\n      Logger.verbose('Captions: updated caption', { padId, ownerId: userId });\n    }\n  } catch (err) {\n    Logger.error('Captions: error while updating pad', { err });\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport editCaptions from '/imports/api/captions/server/methods/editCaptions';\nimport { check } from 'meteor/check';\n\nexport default function updatePad(padId, data, revs) {\n  check(padId, String);\n  check(data, String);\n  check(revs, Number);\n\n  const selector = {\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      data,\n      revs,\n    },\n    $inc: {\n      length: data.length,\n    },\n  };\n\n  try {\n    const numberAffected = Captions.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      editCaptions(padId, data, revs);\n      Logger.verbose('Captions: updated pad', { padId, revs });\n    }\n  } catch (err) {\n    Logger.error(`Updating captions pad: ${err}`);\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateReadOnlyPadId(padId, readOnlyPadId) {\n  check(padId, String);\n  check(readOnlyPadId, String);\n\n  const selector = {\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      readOnlyPadId,\n    },\n  };\n\n  try {\n    const numberAffected = Captions.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      Logger.verbose('Captions: added readOnlyPadId', { padId, readOnlyPadId });\n    }\n  } catch (err) {\n    Logger.error('Captions: error when adding readOnlyPadId', { err });\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForCaptionsPadOnly } from '/imports/api/captions/server/helpers';\nimport handlePadCreate from './handlers/padCreate';\nimport handlePadUpdate from './handlers/padUpdate';\n\nRedisPubSub.on('PadCreateSysMsg', processForCaptionsPadOnly(handlePadCreate));\nRedisPubSub.on('PadUpdateSysMsg', processForCaptionsPadOnly(handlePadUpdate));\n","import { Meteor } from 'meteor/meteor';\nimport { hashFNV32a } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nconst CAPTIONS_CONFIG = Meteor.settings.public.captions;\nconst BASENAME = Meteor.settings.public.app.basename;\nconst APP = Meteor.settings.private.app;\nconst INSTANCE_ID = Meteor.settings.public.app.instanceId;\nconst LOCALES_URL = `http://${APP.host}:${APP.port}${BASENAME}${INSTANCE_ID}${APP.localesUrl} `;\nconst CAPTIONS = '_captions_';\nconst TOKEN = '$';\n\n// Captions padId should look like: {padId}_captions_{locale}\nconst generatePadId = (meetingId, locale) => {\n  const padId = `${hashFNV32a(meetingId, true)}${CAPTIONS}${locale}`;\n  return padId;\n};\n\nconst isCaptionsPad = (padId) => {\n  const splitPadId = padId.split(CAPTIONS);\n  return splitPadId.length === 2;\n};\n\nconst getDataFromChangeset = (changeset) => {\n  const splitChangeset = changeset.split(TOKEN);\n  if (splitChangeset.length > 1) {\n    splitChangeset.shift();\n    return splitChangeset.join(TOKEN);\n  }\n  return '';\n};\n\nconst isEnabled = () => CAPTIONS_CONFIG.enabled;\n\nconst getLocalesURL = () => LOCALES_URL;\n\nconst processForCaptionsPadOnly = fn => (message, ...args) => {\n  const { body } = message;\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  if (isCaptionsPad(id)) return fn(message, ...args);\n  return () => {};\n};\n\nexport {\n  generatePadId,\n  processForCaptionsPadOnly,\n  isEnabled,\n  getLocalesURL,\n  getDataFromChangeset,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport takeOwnership from '/imports/api/captions/server/methods/takeOwnership';\nimport appendText from '/imports/api/captions/server/methods/appendText';\n\nMeteor.methods({\n  takeOwnership,\n  appendText,\n});\n","import Captions from '/imports/api/captions';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction captions() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Captions was requested by unauth connection ${this.connection.id}`);\n    return Captions.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug('Publishing Captions', { meetingId, requestedBy: userId });\n\n  return Captions.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundCaptions = captions.bind(this);\n  return boundCaptions(...args);\n}\n\nMeteor.publish('captions', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Captions = new Mongo.Collection('captions');\n\nif (Meteor.isServer) {\n  Captions._ensureIndex({ meetingId: 1, padId: 1 });\n}\n\nexport default Captions;\n","import { check } from 'meteor/check';\nimport updateConnectionStatus from '/imports/api/connection-status/server/modifiers/updateConnectionStatus';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function addConnectionStatus(level) {\n  check(level, String);\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  updateConnectionStatus(meetingId, requesterUserId, level);\n}\n","import ConnectionStatus from '/imports/api/connection-status';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearConnectionStatus(meetingId) {\n  if (meetingId) {\n    return ConnectionStatus.remove({ meetingId }, () => {\n      Logger.info(`Cleared ConnectionStatus (${meetingId})`);\n    });\n  }\n\n  return ConnectionStatus.remove({}, () => {\n    Logger.info('Cleared ConnectionStatus (all)');\n  });\n}\n","import ConnectionStatus from '/imports/api/connection-status';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateConnectionStatus(meetingId, userId, level) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const timestamp = new Date().getTime();\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    meetingId,\n    userId,\n    level,\n    timestamp,\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Updating connection status: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n    if (insertedId) {\n      return Logger.info(`Added connection status userId=${userId} level=${level}`);\n    }\n\n    return Logger.verbose(`Update connection status userId=${userId} level=${level}`);\n  };\n\n  return ConnectionStatus.upsert(selector, modifier, cb);\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addConnectionStatus from './methods/addConnectionStatus';\n\nMeteor.methods({\n  addConnectionStatus,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport ConnectionStatus from '/imports/api/connection-status';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction connectionStatus() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing ConnectionStatus was requested by unauth connection ${this.connection.id}`);\n    return ConnectionStatus.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  check(meetingId, String);\n  check(userId, String);\n\n  Logger.info(`Publishing connection status for ${meetingId} ${userId}`);\n\n  return ConnectionStatus.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundNote = connectionStatus.bind(this);\n  return boundNote(...args);\n}\n\nMeteor.publish('connection-status', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst ConnectionStatus = new Mongo.Collection('connection-status');\n\nif (Meteor.isServer) {\n  ConnectionStatus._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default ConnectionStatus;\n","import { check } from 'meteor/check';\nimport CursorStreamer from '/imports/api/cursor/server/streamer';\nimport Logger from '/imports/startup/server/logger';\nimport _ from 'lodash';\n\nconst { streamerLog } = Meteor.settings.private.serverLog;\n\nconst CURSOR_PROCCESS_INTERVAL = 30;\n\nconst cursorQueue = {};\n\nconst proccess = _.throttle(() => {\n  try {\n    Object.keys(cursorQueue).forEach((meetingId) => {\n      try {\n        const cursors = cursorQueue[meetingId];\n        delete cursorQueue[meetingId];\n        CursorStreamer(meetingId).emit('message', { meetingId, cursors });\n\n        // if (streamerLog) {\n        //   Logger.debug('CursorUpdate process has finished', { meetingId });\n        // }\n      } catch (error) {\n        Logger.error(`Error while trying to send cursor streamer data for meeting ${meetingId}. ${error}`);\n      }\n    });\n  } catch (error) {\n    Logger.error(`Error while processing cursor queue. ${error}`);\n  }\n}, CURSOR_PROCCESS_INTERVAL);\n\nexport default function handleCursorUpdate({ header, body }, meetingId) {\n  const { userId } = header;\n  check(body, Object);\n\n  check(meetingId, String);\n  check(userId, String);\n\n  if (!cursorQueue[meetingId]) {\n    cursorQueue[meetingId] = {};\n  }\n\n  // overwrite since we dont care about the other positions\n  cursorQueue[meetingId][userId] = body;\n\n  proccess();\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\n\nexport default function publishCursorUpdate(meetingId, requesterUserId, payload) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendCursorPositionPubMsg';\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleCursorUpdate from './handlers/cursorUpdate';\n\nRedisPubSub.on('SendCursorPositionEvtMsg', handleCursorUpdate);\n","import './eventHandlers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport publishCursorUpdate from './methods/publishCursorUpdate';\n\nMeteor.methods({\n  publishCursorUpdate,\n});\n","import Logger from '/imports/startup/server/logger';\nimport publishCursorUpdate from './methods/publishCursorUpdate';\n\nconst { streamerLog } = Meteor.settings.private.serverLog;\n\nexport function removeCursorStreamer(meetingId) {\n  Logger.info(`Removing Cursor streamer object for meeting ${meetingId}`);\n  delete Meteor.StreamerCentral.instances[`cursor-${meetingId}`];\n}\n\nexport function addCursorStreamer(meetingId) {\n  const streamer = new Meteor.Streamer(`cursor-${meetingId}`, { retransmit: false });\n  if (streamerLog) {\n    Logger.debug('Cursor streamer created', { meetingId });\n  }\n\n  streamer.allowRead(function allowRead() {\n    if (streamerLog) {\n      Logger.debug('Cursor streamer called allowRead', { userId: this.userId, meetingId });\n    }\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.allowWrite(function allowWrite() {\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.on('publish', (message) => {\n    publishCursorUpdate(meetingId, message.userId, message.payload);\n  });\n}\n\nexport default function get(meetingId) {\n  return Meteor.StreamerCentral.instances[`cursor-${meetingId}`];\n}\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function destroyExternalVideo(meetingId) {\n  const streamName = `external-videos-${meetingId}`;\n\n  if (Meteor.StreamerCentral.instances[streamName]) {\n    Logger.info(`Destroying External Video streamer object for ${streamName}`);\n    delete Meteor.StreamerCentral.instances[streamName];\n  }\n}\n","import Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function emitExternalVideoEvent(messageName, ...rest) {\n  const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n\n  const user = Users.findOne({ userId, meetingId });\n\n  if (user && user.presenter) {\n    const streamerName = `external-videos-${meetingId}`;\n    const streamer = Meteor.StreamerCentral.instances[streamerName];\n\n    if (streamer) {\n      streamer.emit(messageName, ...rest);\n    } else {\n      Logger.error(`External Video Streamer not found for meetingId: ${meetingId} userId: ${userId}`);\n    }\n  }\n}\n","import { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nconst allowRecentMessages = (eventName, message) => {\n  const {\n    userId,\n    meetingId,\n    time,\n    rate,\n    state,\n  } = message;\n\n  Logger.debug('ExternalVideo Streamer auth allowed', {\n    userId, meetingId, eventName, time, rate, state,\n  });\n  return true;\n};\n\nexport default function initializeExternalVideo() {\n  const { meetingId } = extractCredentials(this.userId);\n\n  const streamName = `external-videos-${meetingId}`;\n  if (!Meteor.StreamerCentral.instances[streamName]) {\n    const streamer = new Meteor.Streamer(streamName);\n    streamer.allowRead('all');\n    streamer.allowWrite('none');\n    streamer.allowEmit(allowRecentMessages);\n    Logger.info(`Created External Video streamer for ${streamName}`);\n  } else {\n    Logger.debug('External Video streamer is already created', { streamName });\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startWatchingExternalVideo(options) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StartExternalVideoMsg';\n\n  const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n  const { externalVideoUrl } = options;\n\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(externalVideoUrl, String);\n\n    const user = Users.findOne({ meetingId, userId, presenter: true }, { presenter: 1 });\n\n    if (!user) {\n      Logger.error(`Only presenters are allowed to start external video for a meeting. meeting=${meetingId} userId=${userId}`);\n      return;\n    }\n\n    Meetings.update({ meetingId }, { $set: { externalVideoUrl } });\n\n    const payload = { externalVideoUrl };\n\n    Logger.info(`User id=${userId} sharing an external video: ${externalVideoUrl} for meeting ${meetingId}`);\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n  } catch (error) {\n    Logger.error(`Error on sharing an external video: ${externalVideoUrl} ${error}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function stopWatchingExternalVideo(options) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StopExternalVideoMsg';\n\n  const { meetingId, requesterUserId } = this.userId ? extractCredentials(this.userId) : options;\n\n  try {\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const user = Users.findOne({\n      meetingId,\n      userId: requesterUserId,\n      presenter: true,\n    }, { presenter: 1 });\n\n    if (this.userId && !user) {\n      Logger.error(`Only presenters are allowed to stop external video for a meeting. meeting=${meetingId} userId=${requesterUserId}`);\n      return;\n    }\n\n    const meeting = Meetings.findOne({ meetingId });\n    if (!meeting || meeting.externalVideoUrl === null) return;\n\n    Meetings.update({ meetingId }, { $set: { externalVideoUrl: null } });\n    const payload = {};\n\n    Logger.info(`User id=${requesterUserId} stopped sharing an external video for meeting=${meetingId}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (error) {\n    Logger.error(`Error on stop sharing an external video for meeting=${meetingId} ${error}`);\n  }\n}\n","import './methods';\n\n","import { Meteor } from 'meteor/meteor';\nimport startWatchingExternalVideo from './methods/startWatchingExternalVideo';\nimport stopWatchingExternalVideo from './methods/stopWatchingExternalVideo';\nimport initializeExternalVideo from './methods/initializeExternalVideo';\nimport emitExternalVideoEvent from './methods/emitExternalVideoEvent';\n\nMeteor.methods({\n  initializeExternalVideo,\n  startWatchingExternalVideo,\n  stopWatchingExternalVideo,\n  emitExternalVideoEvent,\n});\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChatCreated({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  addGroupChat(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChatDestroyed({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  addGroupChat(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChats({ body }, meetingId) {\n  const { chats } = body;\n\n  check(meetingId, String);\n  check(chats, Array);\n\n  chats.forEach(chat => addGroupChat(meetingId, chat));\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { CHAT_ACCESS_PRIVATE } from '/imports/api/group-chat';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function createGroupChat(receiver) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'CreateGroupChatReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(receiver, Object);\n\n  const payload = {\n    correlationId: `${requesterUserId}-${Date.now()}`,\n    msg: [],\n    users: [receiver.userId],\n    access: CHAT_ACCESS_PRIVATE,\n    name: receiver.name,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function destroyGroupChat() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const eventName = 'DestroyGroupChatReqMsg';\n\n  const payload = {\n    // TODO: Implement this together with #4988\n    // chats: Array[String],\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, payload);\n}\n","import flat from 'flat';\nimport { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport GroupChat from '/imports/api/group-chat';\n\nexport default function addGroupChat(meetingId, chat) {\n  check(meetingId, String);\n  check(chat, {\n    id: Match.Maybe(String),\n    chatId: Match.Maybe(String),\n    correlationId: Match.Maybe(String),\n    name: String,\n    access: String,\n    createdBy: Object,\n    users: Array,\n    msg: Match.Maybe(Array),\n  });\n\n  const chatDocument = {\n    meetingId,\n    chatId: chat.chatId || chat.id,\n    name: chat.name,\n    access: chat.access,\n    users: chat.users.map(u => u.id),\n    participants: chat.users,\n    createdBy: chat.createdBy.id,\n  };\n\n  const selector = {\n    chatId: chatDocument.chatId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: flat(chatDocument, { safe: true }),\n  };\n\n  try {\n    const { insertedId } = GroupChat.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added group-chat name=${chat.name} meetingId=${meetingId}`);\n    } else {\n      Logger.info(`Upserted group-chat name=${chat.name} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding group-chat to collection: ${err}`);\n  }\n}\n","import GroupChat from '/imports/api/group-chat';\nimport Logger from '/imports/startup/server/logger';\nimport clearGroupChatMsg from '/imports/api/group-chat-msg/server/modifiers/clearGroupChatMsg';\n\nexport default function clearGroupChat(meetingId) {\n  try {\n    clearGroupChatMsg(meetingId);\n    const numberAffected = GroupChat.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared GroupChat (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing GroupChat (${meetingId}). ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleGroupChats from './handlers/groupChats';\nimport handleGroupChatCreated from './handlers/groupChatCreated';\nimport handleGroupChatDestroyed from './handlers/groupChatDestroyed';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nRedisPubSub.on('GetGroupChatsRespMsg', processForHTML5ServerOnly(handleGroupChats));\nRedisPubSub.on('GroupChatCreatedEvtMsg', handleGroupChatCreated);\nRedisPubSub.on('GroupChatDestroyedEvtMsg', handleGroupChatDestroyed);\nRedisPubSub.on('SyncGetGroupChatsRespMsg', handleGroupChats);\n","import '/imports/api/group-chat-msg/server';\nimport './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport createGroupChat from './methods/createGroupChat';\nimport destroyGroupChat from './methods/destroyGroupChat';\n\nMeteor.methods({\n  createGroupChat,\n  destroyGroupChat,\n});\n","import GroupChat from '/imports/api/group-chat';\nimport { Meteor } from 'meteor/meteor';\n\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction groupChat() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GroupChat was requested by unauth connection ${this.connection.id}`);\n    return GroupChat.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_CHAT_TYPE = CHAT_CONFIG.type_public;\n\n  Logger.debug('Publishing group-chat', { meetingId, userId });\n\n  return GroupChat.find({\n    $or: [\n      { meetingId, access: PUBLIC_CHAT_TYPE },\n      { meetingId, users: { $all: [userId] } },\n    ],\n\n  });\n}\n\nfunction publish(...args) {\n  const boundGroupChat = groupChat.bind(this);\n  return boundGroupChat(...args);\n}\n\nMeteor.publish('group-chat', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst GroupChat = new Mongo.Collection('group-chat');\n\nif (Meteor.isServer) {\n  GroupChat._ensureIndex({\n    meetingId: 1, chatId: 1, access: 1, users: 1,\n  });\n}\n\nexport default GroupChat;\n\nconst CHAT_ACCESS = {\n  PUBLIC: 'PUBLIC_ACCESS',\n  PRIVATE: 'PRIVATE_ACCESS',\n};\n\nexport const CHAT_ACCESS_PUBLIC = CHAT_ACCESS.PUBLIC;\nexport const CHAT_ACCESS_PRIVATE = CHAT_ACCESS.PRIVATE;\n","import { check } from 'meteor/check';\nimport clearGroupChatMsg from '../modifiers/clearGroupChatMsg';\n\nexport default function clearPublicChatHistory({ header, body }) {\n  const { meetingId } = header;\n  const { chatId } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n\n  return clearGroupChatMsg(meetingId, chatId);\n}\n","import { check } from 'meteor/check';\nimport _ from 'lodash';\nimport addGroupChatMsg from '../modifiers/addGroupChatMsg';\nimport addBulkGroupChatMsgs from '../modifiers/addBulkGroupChatMsgs';\n\nconst { bufferChatInsertsMs } = Meteor.settings.public.chat;\n\nconst msgBuffer = [];\n\nconst bulkFn = _.throttle(addBulkGroupChatMsgs, bufferChatInsertsMs);\n\nexport default function handleGroupChatMsgBroadcast({ body }, meetingId) {\n  const { chatId, msg } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, Object);\n\n  if (bufferChatInsertsMs) {\n    msgBuffer.push({ meetingId, chatId, msg });\n    bulkFn(msgBuffer);\n  } else {\n    addGroupChatMsg(meetingId, chatId, msg);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport syncMeetingChatMsgs from '../modifiers/syncMeetingChatMsgs';\n\nexport default function handleSyncGroupChat({ body }, meetingId) {\n  const { chatId, msgs } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msgs, Match.Maybe(Array));\n\n  syncMeetingChatMsgs(meetingId, chatId, msgs);\n}\n","import { check } from 'meteor/check';\nimport startTyping from '../modifiers/startTyping';\n\nexport default function handleUserTyping({ body }, meetingId) {\n  const { chatId, userId } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(chatId, String);\n\n  startTyping(meetingId, userId, chatId);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function clearPublicChatHistory() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ClearPublicChatHistoryPubMsg';\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const payload = {\n    chatId: PUBLIC_GROUP_CHAT_ID,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport RegexWebUrl from '/imports/utils/regex-weburl';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst HTML_SAFE_MAP = {\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n};\n\nconst parseMessage = (message) => {\n  let parsedMessage = message || '';\n  parsedMessage = parsedMessage.trim();\n\n  // Replace <br/> with \\n\\r\n  parsedMessage = parsedMessage.replace(/<br\\s*[\\\\/]?>/gi, '\\n\\r');\n\n  // Sanitize. See: http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\n  parsedMessage = parsedMessage.replace(/[<>'\"]/g, c => HTML_SAFE_MAP[c]);\n\n  // Replace flash links to flash valid ones\n  parsedMessage = parsedMessage.replace(RegexWebUrl, \"<a href='event:$&'><u>$&</u></a>\");\n\n  return parsedMessage;\n};\n\nexport default function sendGroupChatMsg(chatId, message) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendGroupChatMessageMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(message, Object);\n\n  const parsedMessage = parseMessage(message.message);\n\n  message.message = parsedMessage;\n\n  const payload = {\n    msg: message,\n    chatId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startUserTyping(chatId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserTypingPubMsg';\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(chatId, String);\n\n  const payload = {\n    chatId: chatId || PUBLIC_GROUP_CHAT_ID,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { UsersTyping } from '/imports/api/group-chat-msg';\nimport stopTyping from '../modifiers/stopTyping';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function stopUserTyping() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const userTyping = UsersTyping.findOne({\n    meetingId,\n    userId: requesterUserId,\n  });\n\n  if (userTyping && meetingId && requesterUserId) {\n    stopTyping(meetingId, requesterUserId, true);\n  }\n}\n","import { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport { parseMessage } from './addGroupChatMsg';\n\nexport default async function addBulkGroupChatMsgs(msgs) {\n  if (!msgs.length) return;\n\n  const mappedMsgs = msgs\n    .map(({ chatId, meetingId, msg }) => ({\n      _id: new Mongo.ObjectID()._str,\n      ...msg,\n      meetingId,\n      chatId,\n      message: parseMessage(msg.message),\n      sender: msg.sender.id,\n    }))\n    .map(el => flat(el, { safe: true }));\n\n  try {\n    const { insertedCount } = await GroupChatMsg.rawCollection().insertMany(mappedMsgs);\n    msgs.length = 0;\n\n    if (insertedCount) {\n      Logger.info(`Inserted ${insertedCount} messages`);\n    }\n  } catch (err) {\n    Logger.error(`Error on bulk insert. ${err}`);\n  }\n}\n","import flat from 'flat';\nimport { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport { BREAK_LINE } from '/imports/utils/lineEndings';\n\nexport function parseMessage(message) {\n  let parsedMessage = message || '';\n\n  // Replace \\r and \\n to <br/>\n  parsedMessage = parsedMessage.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, `$1${BREAK_LINE}$2`);\n\n  // Replace flash links to html valid ones\n  parsedMessage = parsedMessage.split('<a href=\\'event:').join('<a target=\"_blank\" href=\\'');\n  parsedMessage = parsedMessage.split('<a href=\"event:').join('<a target=\"_blank\" href=\"');\n\n  return parsedMessage;\n}\n\nexport default function addGroupChatMsg(meetingId, chatId, msg) {\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, {\n    id: Match.Maybe(String),\n    timestamp: Number,\n    sender: Object,\n    color: String,\n    message: String,\n    correlationId: Match.Maybe(String),\n  });\n  const msgDocument = {\n    ...msg,\n    meetingId,\n    chatId,\n    message: parseMessage(msg.message),\n  };\n\n  try {\n    const insertedId = GroupChatMsg.insert(msgDocument);\n\n    if (insertedId) {\n      Logger.info(`Added group-chat-msg msgId=${msg.id} chatId=${chatId} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on adding group-chat-msg to collection: ${err}`);\n  }\n}\n","import { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport addGroupChatMsg from '/imports/api/group-chat-msg/server/modifiers/addGroupChatMsg';\n\nexport default function clearGroupChatMsg(meetingId, chatId) {\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_CHAT_SYSTEM_ID = CHAT_CONFIG.system_userid;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const CHAT_CLEAR_MESSAGE = CHAT_CONFIG.system_messages_keys.chat_clear;\n\n  if (chatId) {\n    try {\n      const numberAffected = GroupChatMsg.remove({ meetingId, chatId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GroupChatMsg (${meetingId}, ${chatId})`);\n        const clearMsg = {\n          color: '0',\n          timestamp: Date.now(),\n          correlationId: `${PUBLIC_CHAT_SYSTEM_ID}-${Date.now()}`,\n          sender: {\n            id: PUBLIC_CHAT_SYSTEM_ID,\n            name: '',\n          },\n          message: CHAT_CLEAR_MESSAGE,\n        };\n        addGroupChatMsg(meetingId, PUBLIC_GROUP_CHAT_ID, clearMsg);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChat (${meetingId}, ${chatId}). ${err}`);\n    }\n    return true;\n  }\n\n  if (meetingId) {\n    try {\n      const numberAffected = GroupChatMsg.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GroupChatMsg (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChatMsg (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = GroupChatMsg.remove({ chatId: { $eq: PUBLIC_GROUP_CHAT_ID } });\n\n      if (numberAffected) {\n        Logger.info('Cleared GroupChatMsg (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChatMsg (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { UsersTyping } from '/imports/api/group-chat-msg';\nimport stopTyping from './stopTyping';\n\nconst TYPING_TIMEOUT = 5000;\n\nexport default function startTyping(meetingId, userId, chatId) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = Users.findOne(selector);\n\n  const modifier = {\n    meetingId,\n    userId,\n    name: user.name,\n    isTypingTo: chatId,\n    role: user.role,\n    time: (new Date()),\n  };\n\n  const typingUser = UsersTyping.findOne(selector, {\n    fields: {\n      time: 1,\n    },\n  });\n\n  if (typingUser) {\n    if (modifier.time - typingUser.time <= TYPING_TIMEOUT - 100) return;\n  }\n\n  try {\n    const { numberAffected } = UsersTyping.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Typing indicator update', { userId, chatId });\n      Meteor.setTimeout(() => {\n        stopTyping(meetingId, userId);\n      }, TYPING_TIMEOUT);\n    }\n  } catch (err) {\n    Logger.error(`Typing indicator update error: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { UsersTyping } from '/imports/api/group-chat-msg';\n\nexport default function stopTyping(meetingId, userId, sendMsgInitiated = false) {\n  check(meetingId, String);\n  check(userId, String);\n  check(sendMsgInitiated, Boolean);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = UsersTyping.findOne(selector);\n  const stillTyping = !sendMsgInitiated && user && (new Date()) - user.time < 3000;\n  if (stillTyping) return;\n\n  try {\n    const numberAffected = UsersTyping.remove(selector);\n\n    if (numberAffected) {\n      Logger.debug('Stopped typing indicator', { userId });\n    }\n  } catch (err) {\n    Logger.error(`Stop user=${userId} typing indicator error: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport flat from 'flat';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport { parseMessage } from './addGroupChatMsg';\n\nexport default function syncMeetingChatMsgs(meetingId, chatId, msgs) {\n  if (!msgs.length) return;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msgs, Match.Maybe(Array));\n\n  try {\n    const bulkOperations = GroupChatMsg.rawCollection().initializeOrderedBulkOp();\n\n    msgs\n      .forEach((msg) => {\n        const msgToSync = {\n          ...msg,\n          meetingId,\n          chatId,\n          message: parseMessage(msg.message),\n          sender: msg.sender.id,\n        };\n\n        const modifier = flat(msgToSync, { safe: true });\n\n        bulkOperations\n          .find({ chatId, meetingId, id: msg.id })\n          .upsert()\n          .updateOne({\n            $setOnInsert: { _id: new Mongo.ObjectID()._str },\n            $set: { ...modifier },\n          });\n      });\n\n    bulkOperations.execute();\n\n    Logger.info('Chat messages synchronized', { chatId, meetingId });\n  } catch (err) {\n    Logger.error(`Error on sync chat messages: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleGroupChatMsgBroadcast from './handlers/groupChatMsgBroadcast';\nimport handleClearPublicGroupChat from './handlers/clearPublicGroupChat';\nimport handleUserTyping from './handlers/userTyping';\nimport handleSyncGroupChatMsg from './handlers/syncGroupsChat';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nRedisPubSub.on('GetGroupChatMsgsRespMsg', processForHTML5ServerOnly(handleSyncGroupChatMsg));\nRedisPubSub.on('GroupChatMessageBroadcastEvtMsg', handleGroupChatMsgBroadcast);\nRedisPubSub.on('ClearPublicChatHistoryEvtMsg', handleClearPublicGroupChat);\nRedisPubSub.on('SyncGetGroupChatMsgsRespMsg', handleSyncGroupChatMsg);\nRedisPubSub.on('UserTypingEvtMsg', handleUserTyping);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport sendGroupChatMsg from './methods/sendGroupChatMsg';\nimport clearPublicChatHistory from './methods/clearPublicChatHistory';\nimport startUserTyping from './methods/startUserTyping';\nimport stopUserTyping from './methods/stopUserTyping';\n\nMeteor.methods({\n  sendGroupChatMsg,\n  clearPublicChatHistory,\n  startUserTyping,\n  stopUserTyping,\n});\n","import { GroupChatMsg, UsersTyping } from '/imports/api/group-chat-msg';\nimport { Meteor } from 'meteor/meteor';\n\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction groupChatMsg(chatsIds) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GroupChatMsg was requested by unauth connection ${this.connection.id}`);\n    return GroupChatMsg.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  Logger.debug('Publishing group-chat-msg', { meetingId, userId });\n\n  return GroupChatMsg.find({\n    $or: [\n      { meetingId, chatId: { $eq: PUBLIC_GROUP_CHAT_ID } },\n      { chatId: { $in: chatsIds } },\n    ],\n  });\n}\n\nfunction publish(...args) {\n  const boundGroupChat = groupChatMsg.bind(this);\n  return boundGroupChat(...args);\n}\n\nMeteor.publish('group-chat-msg', publish);\n\nfunction usersTyping() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing users-typing was requested by unauth connection ${this.connection.id}`);\n    return UsersTyping.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing users-typing', { meetingId, userId });\n\n  return UsersTyping.find({ meetingId });\n}\n\nfunction pubishUsersTyping(...args) {\n  const boundUsersTyping = usersTyping.bind(this);\n  return boundUsersTyping(...args);\n}\n\nMeteor.publish('users-typing', pubishUsersTyping);\n","import { Meteor } from 'meteor/meteor';\n\nconst GroupChatMsg = new Mongo.Collection('group-chat-msg');\nconst UsersTyping = new Mongo.Collection('users-typing');\n\nif (Meteor.isServer) {\n  GroupChatMsg._ensureIndex({ meetingId: 1, chatId: 1 });\n  UsersTyping._ensureIndex({ meetingId: 1, isTypingTo: 1 });\n}\n\nexport { GroupChatMsg, UsersTyping };\n","import { check } from 'meteor/check';\nimport setGuestStatus from '../modifiers/setGuestStatus';\n\nexport default function handleGuestApproved({ body }, meetingId) {\n  const { approvedBy, guests } = body;\n  check(meetingId, String);\n  check(approvedBy, String);\n  check(guests, Array);\n\n  return guests.forEach(guest => setGuestStatus(meetingId, guest.guest, guest.status, approvedBy));\n}\n","import { check } from 'meteor/check';\nimport removeGuest from '../modifiers/removeGuest';\n\nexport default function handleGuestWaitingLeft({ body }, meetingId) {\n  const { userId } = body;\n  check(meetingId, String);\n  check(userId, String);\n\n  return removeGuest(meetingId, userId);\n}\n","import stringHash from 'string-hash';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport GuestUsers from '/imports/api/guest-users/';\n\nconst COLOR_LIST = [\n  '#7b1fa2', '#6a1b9a', '#4a148c', '#5e35b1', '#512da8', '#4527a0',\n  '#311b92', '#3949ab', '#303f9f', '#283593', '#1a237e', '#1976d2', '#1565c0',\n  '#0d47a1', '#0277bd', '#01579b',\n];\n\nexport default function handleGuestsWaitingForApproval({ body }, meetingId) {\n  const { guests } = body;\n  check(guests, Array);\n  check(meetingId, String);\n\n  return guests.map((guest) => {\n    try {\n      const { insertedId, numberAffected } = GuestUsers.upsert({\n        meetingId,\n        intId: guest.intId,\n      }, {\n        approved: false,\n        denied: false,\n        ...guest,\n        meetingId,\n        loginTime: new Date().getTime(),\n        color: COLOR_LIST[stringHash(guest.intId) % COLOR_LIST.length],\n      });\n\n      if (insertedId) {\n        Logger.info(`Added guest user meeting=${meetingId}`);\n      } else if (numberAffected) {\n        Logger.info(`Upserted guest user meeting=${meetingId}`);\n      }\n    } catch (err) {\n      Logger.error(`Adding guest user to collection: ${err}`);\n    }\n  });\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'GuestsWaitingApprovedMsg';\n\nexport default function allowPendingUsers(guests, status) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(guests, Array);\n  const mappedGuests = guests.map(guest => ({ status, guest: guest.intId }));\n\n  const payload = {\n    approvedBy: requesterUserId,\n    guests: mappedGuests,\n  };\n\n  Logger.info(`User=${requesterUserId} ${status} guests ${JSON.stringify(mappedGuests)}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'SetGuestPolicyCmdMsg';\n\nexport default function changeGuestPolicy(policyRule) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(policyRule, String);\n\n  const payload = {\n    setBy: requesterUserId,\n    policy: policyRule,\n  };\n\n  Logger.info(`User=${requesterUserId} change guest policy to ${policyRule}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeGuest(meetingId, intId) {\n  check(meetingId, String);\n  check(intId, String);\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing guest user from collection: ${err}`);\n    }\n\n    return Logger.info(`Removed guest user id=${intId} meetingId=${meetingId}`);\n  };\n\n  return GuestUsers.remove(selector, cb);\n}\n","import { check } from 'meteor/check';\nimport GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nconst GUEST_STATUS_ALLOW = 'ALLOW';\nconst GUEST_STATUS_DENY = 'DENY';\nexport default function setGuestStatus(meetingId, intId, status, approvedBy = null) {\n  check(meetingId, String);\n  check(intId, String);\n  check(status, String);\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      approved: status === GUEST_STATUS_ALLOW,\n      denied: status === GUEST_STATUS_DENY,\n      approvedBy,\n    },\n  };\n\n  try {\n    const numberAffected = GuestUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated status=${status} user=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating status=${status} user=${intId}: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleGuestApproved from './handlers/guestApproved';\nimport handleGuestsWaitingForApproval from './handlers/guestsWaitingForApproval';\nimport handleGuestWaitingLeft from './handlers/guestWaitingLeft';\n\nRedisPubSub.on('GuestWaitingLeftEvtMsg', handleGuestWaitingLeft);\nRedisPubSub.on('GuestsWaitingForApprovalEvtMsg', processForHTML5ServerOnly(handleGuestsWaitingForApproval));\nRedisPubSub.on('GuestsWaitingApprovedEvtMsg', processForHTML5ServerOnly(handleGuestApproved));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport allowPendingUsers from '/imports/api/guest-users/server/methods/allowPendingUsers';\nimport changeGuestPolicy from '/imports/api/guest-users/server/methods/changeGuestPolicy';\n\nMeteor.methods({\n  allowPendingUsers,\n  changeGuestPolicy,\n});\n","import GuestUsers from '/imports/api/guest-users/';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction guestUsers() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GuestUsers was requested by unauth connection ${this.connection.id}`);\n    return GuestUsers.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing GuestUsers for ${meetingId} ${userId}`);\n\n  return GuestUsers.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundSlides = guestUsers.bind(this);\n  return boundSlides(...args);\n}\n\nMeteor.publish('guestUser', publish);\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\n\nconst GuestUsers = new Mongo.Collection('guestUsers');\n\nexport default GuestUsers;\n","import _ from 'lodash';\nimport { check } from 'meteor/check';\nimport LocalSettings from '/imports/api/local-settings';\nimport setChangedLocalSettings from '../modifiers/setChangedLocalSettings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userChangedLocalSettings(settings) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  if (!meetingId || !requesterUserId) return;\n\n  check(settings, Object);\n\n  const userLocalSettings = LocalSettings\n    .findOne({ meetingId, userId: requesterUserId },\n      {\n        fields: { settings: 1 },\n      });\n\n  if (!userLocalSettings || !_.isEqual(userLocalSettings.settings, settings)) {\n    setChangedLocalSettings(meetingId, requesterUserId, settings);\n  }\n}\n","import LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearLocalSettings(meetingId) {\n  try {\n    const numberAffected = LocalSettings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared Local Settings (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing Local Settings (${meetingId}). ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setChangedLocalSettings(meetingId, userId, settings) {\n  check(meetingId, String);\n  check(userId, String);\n  check(settings, Object);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      settings,\n    },\n  };\n\n  try {\n    const { numChanged } = LocalSettings.upsert(selector, modifier);\n\n    if (numChanged) {\n      Logger.info(`Updated settings for user ${userId} on meeting ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on update settings. ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport userChangedLocalSettings from './methods/userChangedLocalSettings';\n\nMeteor.methods({\n  userChangedLocalSettings,\n});\n","import { Meteor } from 'meteor/meteor';\nimport LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction localSettings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing LocalSettings was requested by unauth connection ${this.connection.id}`);\n    return LocalSettings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing local settings', { userId });\n\n  return LocalSettings.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundLocalSettings = localSettings.bind(this);\n  return boundLocalSettings(...args);\n}\n\nMeteor.publish('local-settings', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst LocalSettings = new Mongo.Collection('local-settings');\n\nif (Meteor.isServer) {\n  LocalSettings._ensureIndex({\n    meetingId: 1, userId: 1,\n  });\n}\n\nexport default LocalSettings;\n","import Logger from '/imports/startup/server/logger';\n\nexport default function (type, logDescription, logCode = 'was_not_provided', extraInfo = {}, userInfo = {}) {\n  const connectionId = this.connection.id;\n  const logContents = {\n    logCode,\n    logDescription,\n    connectionId,\n    extraInfo,\n    userInfo,\n  };\n\n  // If I don't pass message, logs will start with `undefined`\n  Logger.log({ message: JSON.stringify(logContents), level: type });\n}\n","import './methods';\n","import { Meteor } from 'meteor/meteor';\nimport logClient from './methods/logClient';\n\nMeteor.methods({ logClient });\n","import handleMeetingCreation from './meetingCreation';\n\nexport default function handleGetAllMeetings({ body }) {\n  return handleMeetingCreation({ body });\n}\n","import { check } from 'meteor/check';\nimport addMeeting from '../modifiers/addMeeting';\n\nexport default function handleMeetingCreation({ body }) {\n  const meeting = body.props;\n  const durationInSecods = (meeting.durationProps.duration * 60);\n  meeting.durationProps.timeRemaining = durationInSecods;\n  check(meeting, Object);\n\n  return addMeeting(meeting);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\n\nimport destroyExternalVideo from '/imports/api/external-videos/server/methods/destroyExternalVideo';\nimport { removeAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { removeCursorStreamer } from '/imports/api/cursor/server/streamer';\n\nexport default function handleMeetingDestruction({ body }) {\n  check(body, Object);\n  const { meetingId } = body;\n  check(meetingId, String);\n\n  destroyExternalVideo(meetingId);\n  removeAnnotationsStreamer(meetingId);\n  removeCursorStreamer(meetingId);\n\n  return RedisPubSub.destroyMeetingQueue(meetingId);\n}\n","import { check } from 'meteor/check';\nimport meetingHasEnded from '../modifiers/meetingHasEnded';\nimport Meetings from '/imports/api/meetings';\nimport Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleMeetingEnd({ body }) {\n  check(body, Object);\n  const { meetingId } = body;\n  check(meetingId, String);\n\n  const cb = (err, num, meetingType) => {\n    if (err) {\n      Logger.error(`${meetingType} ending error: ${err}`);\n      return;\n    }\n    if (num) {\n      Meteor.setTimeout(() => { meetingHasEnded(meetingId); }, 10000);\n    }\n  };\n\n  Meetings.update({ meetingId },\n    { $set: { meetingEnded: true } },\n    (err, num) => { cb(err, num, 'Meeting'); });\n\n  Breakouts.update({ parentMeetingId: meetingId },\n    { $set: { meetingEnded: true } },\n    (err, num) => { cb(err, num, 'Breakout'); });\n}\n","import changeLockSettings from '../modifiers/changeLockSettings';\n\nexport default function handleLockSettingsInMeeting({ body }, meetingId) {\n  changeLockSettings(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleRecordingStatusChange({ body }, meetingId) {\n  const { recording } = body;\n  check(recording, Boolean);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: { recording },\n  };\n\n  try {\n    const { numberAffected } = RecordMeetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting record status id=${meetingId} recording=${recording}`);\n    }\n  } catch (err) {\n    Logger.error(`Changing record status: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleRecordingTimerChange({ body }, meetingId) {\n  const { time } = body;\n\n  check(meetingId, String);\n\n  check(body, {\n    time: Number,\n  });\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: { time },\n  };\n\n  try {\n    RecordMeetings.upsert(selector, modifier);\n  } catch (err) {\n    Logger.error(`Changing recording time: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { MeetingTimeRemaining } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleTimeRemainingUpdate({ body }, meetingId) {\n  check(meetingId, String);\n\n  check(body, {\n    timeLeftInSec: Number,\n  });\n  const { timeLeftInSec } = body;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      timeRemaining: timeLeftInSec,\n    },\n  };\n\n  try {\n    MeetingTimeRemaining.upsert(selector, modifier);\n  } catch (err) {\n    Logger.error(`Changing recording time: ${err}`);\n  }\n}\n","import changeUserLock from '../modifiers/changeUserLock';\n\nexport default function handleLockSettingsInMeeting({ body }, meetingId) {\n  changeUserLock(meetingId, body);\n}\n","import changeWebcamOnlyModerator from '../modifiers/webcamOnlyModerator';\n\nexport default function handleChangeWebcamOnlyModerator({ body }, meetingId) {\n  changeWebcamOnlyModerator(meetingId, body);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function endMeeting() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'LogoutAndEndMeetingCmdMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const payload = {\n    userId: requesterUserId,\n  };\n  Logger.warn(`Meeting '${meetingId}' is destroyed by '${requesterUserId}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function toggleLockSettings(lockSettingsProps) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeLockSettingsInMeetingCmdMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(lockSettingsProps, {\n    disableCam: Boolean,\n    disableMic: Boolean,\n    disablePrivateChat: Boolean,\n    disablePublicChat: Boolean,\n    disableNote: Boolean,\n    hideUserList: Boolean,\n    lockedLayout: Boolean,\n    lockOnJoin: Boolean,\n    lockOnJoinConfigurable: Boolean,\n    setBy: Match.Maybe(String),\n  });\n\n  const {\n    disableCam,\n    disableMic,\n    disablePrivateChat: disablePrivChat,\n    disablePublicChat: disablePubChat,\n    disableNote,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n  } = lockSettingsProps;\n\n  const payload = {\n    disableCam,\n    disableMic,\n    disablePrivChat,\n    disablePubChat,\n    disableNote,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n    setBy: requesterUserId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function toggleRecording() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  const EVENT_NAME = 'SetRecordingStatusCmdMsg';\n\n  let meetingRecorded;\n  let allowedToRecord;\n\n  const recordObject = RecordMeetings.findOne({ meetingId });\n\n  if (recordObject != null) {\n    const {\n      allowStartStopRecording,\n      recording,\n      record,\n    } = recordObject;\n\n    meetingRecorded = recording;\n    allowedToRecord = record && allowStartStopRecording; // TODO-- remove some day\n  }\n\n  const payload = {\n    recording: !meetingRecorded,\n    setBy: requesterUserId,\n  };\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n  };\n  const user = Users.findOne(selector);\n\n  if (allowedToRecord && !!user && user.role === ROLE_MODERATOR) {\n    Logger.info(`Setting the record parameter to ${!meetingRecorded} for ${meetingId} by ${requesterUserId}`);\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  }\n  return null;\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '../../../common/server/helpers';\n\nexport default function toggleWebcamsOnlyForModerator(webcamsOnlyForModerator) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateWebcamsOnlyForModeratorCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(webcamsOnlyForModerator, Boolean);\n\n  const payload = {\n    webcamsOnlyForModerator,\n    setBy: requesterUserId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\n\nexport default function transferUser(fromMeetingId, toMeetingId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'TransferUserToMeetingRequestMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const payload = {\n    fromMeetingId,\n    toMeetingId,\n    userId: requesterUserId,\n  };\n\n  Logger.verbose('User was transferred from one meting to another', { requesterUserId, fromMeetingId, toMeetingId });\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import flat from 'flat';\nimport {\n  check,\n  Match,\n} from 'meteor/check';\nimport SanitizeHTML from 'sanitize-html';\nimport Meetings, { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport createNote from '/imports/api/note/server/methods/createNote';\nimport createCaptions from '/imports/api/captions/server/methods/createCaptions';\nimport { addAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { addCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport BannedUsers from '/imports/api/users/server/store/bannedUsers';\n\nexport default function addMeeting(meeting) {\n  const meetingId = meeting.meetingProp.intId;\n\n  check(meetingId, String);\n  check(meeting, {\n    breakoutProps: {\n      sequence: Number,\n      freeJoin: Boolean,\n      breakoutRooms: Array,\n      parentId: String,\n      enabled: Boolean,\n      record: Boolean,\n      privateChatEnabled: Boolean,\n    },\n    meetingProp: {\n      intId: String,\n      extId: String,\n      isBreakout: Boolean,\n      name: String,\n    },\n    usersProp: {\n      webcamsOnlyForModerator: Boolean,\n      guestPolicy: String,\n      maxUsers: Number,\n      allowModsToUnmuteUsers: Boolean,\n    },\n    durationProps: {\n      createdTime: Number,\n      duration: Number,\n      createdDate: String,\n      meetingExpireIfNoUserJoinedInMinutes: Number,\n      meetingExpireWhenLastUserLeftInMinutes: Number,\n      userInactivityInspectTimerInMinutes: Number,\n      userInactivityThresholdInMinutes: Number,\n      userActivitySignResponseDelayInMinutes: Number,\n      timeRemaining: Number,\n    },\n    welcomeProp: {\n      welcomeMsg: String,\n      modOnlyMessage: String,\n      welcomeMsgTemplate: String,\n    },\n    recordProp: Match.ObjectIncluding({\n      allowStartStopRecording: Boolean,\n      autoStartRecording: Boolean,\n      record: Boolean,\n    }),\n    password: {\n      viewerPass: String,\n      moderatorPass: String,\n    },\n    voiceProp: {\n      voiceConf: String,\n      dialNumber: String,\n      telVoice: String,\n      muteOnStart: Boolean,\n    },\n    screenshareProps: {\n      red5ScreenshareIp: String,\n      red5ScreenshareApp: String,\n      screenshareConf: String,\n    },\n    metadataProp: Object,\n    lockSettingsProps: {\n      disableCam: Boolean,\n      disableMic: Boolean,\n      disablePrivateChat: Boolean,\n      disablePublicChat: Boolean,\n      disableNote: Boolean,\n      hideUserList: Boolean,\n      lockOnJoin: Boolean,\n      lockOnJoinConfigurable: Boolean,\n      lockedLayout: Boolean,\n    },\n    systemProps: {\n      html5InstanceId: Number,\n    },\n  });\n\n  const {\n    recordProp,\n    ...restProps\n  } = meeting;\n\n  const newMeeting = restProps;\n\n  const selector = {\n    meetingId,\n  };\n\n  newMeeting.lockSettingsProps = Object.assign(meeting.lockSettingsProps, { setBy: 'temp' });\n\n  const meetingEnded = false;\n\n  let { welcomeMsg } = newMeeting.welcomeProp;\n\n  const sanitizeTextInChat = original => SanitizeHTML(original, {\n    allowedTags: ['a', 'b', 'br', 'i', 'img', 'li', 'small', 'span', 'strong', 'u', 'ul'],\n    allowedAttributes: {\n      a: ['href', 'name', 'target'],\n      img: ['src', 'width', 'height'],\n    },\n    allowedSchemes: ['https'],\n  });\n\n  const sanitizedWelcomeText = sanitizeTextInChat(welcomeMsg);\n  welcomeMsg = sanitizedWelcomeText.replace(\n    'href=\"event:',\n    'href=\"',\n  );\n\n  const insertBlankTarget = (s, i) => `${s.substr(0, i)} target=\"_blank\"${s.substr(i)}`;\n  const linkWithoutTarget = new RegExp('<a href=\"(.*?)\">', 'g');\n  linkWithoutTarget.test(welcomeMsg);\n\n  if (linkWithoutTarget.lastIndex > 0) {\n    welcomeMsg = insertBlankTarget(\n      welcomeMsg,\n      linkWithoutTarget.lastIndex - 1,\n    );\n  }\n\n  newMeeting.welcomeProp.welcomeMsg = welcomeMsg;\n\n  // note: as of July 2020 `modOnlyMessage` is not published to the client side.\n  // We are sanitizing this data simply to prevent future potential usage\n  // At the moment `modOnlyMessage` is obtained from client side as a response to Enter API\n  newMeeting.welcomeProp.modOnlyMessage = sanitizeTextInChat(newMeeting.welcomeProp.modOnlyMessage);\n\n  const modifier = {\n    $set: Object.assign({\n      meetingId,\n      meetingEnded,\n      publishedPoll: false,\n    }, flat(newMeeting, {\n      safe: true,\n    })),\n  };\n\n  try {\n    const { insertedId, numberAffected } = RecordMeetings.upsert(selector, { meetingId, ...recordProp });\n\n    if (insertedId) {\n      Logger.info(`Added record prop id=${meetingId}`);\n    } else if (numberAffected) {\n      Logger.info(`Upserted record prop id=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding record prop to collection: ${err}`);\n  }\n\n  try {\n    const { insertedId, numberAffected } = Meetings.upsert(selector, modifier);\n\n    addAnnotationsStreamer(meetingId);\n    addCursorStreamer(meetingId);\n\n    if (insertedId) {\n      Logger.info(`Added meeting id=${meetingId}`);\n      // TODO: Here we call Etherpad API to create this meeting notes. Is there a\n      // better place we can run this post-creation routine?\n      createNote(meetingId);\n      createCaptions(meetingId);\n      BannedUsers.init(meetingId);\n    } else if (numberAffected) {\n      Logger.info(`Upserted meeting id=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding meeting to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\n\nexport default function changeLockSettings(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    disableCam: Boolean,\n    disableMic: Boolean,\n    disablePrivChat: Boolean,\n    disablePubChat: Boolean,\n    disableNote: Boolean,\n    hideUserList: Boolean,\n    lockedLayout: Boolean,\n    lockOnJoin: Boolean,\n    lockOnJoinConfigurable: Boolean,\n    setBy: Match.Maybe(String),\n  });\n\n  const {\n    disableCam,\n    disableMic,\n    disablePrivChat,\n    disablePubChat,\n    disableNote,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n    setBy,\n  } = payload;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      lockSettingsProps: {\n        disableCam,\n        disableMic,\n        disablePrivateChat: disablePrivChat,\n        disablePublicChat: disablePubChat,\n        disableNote,\n        hideUserList,\n        lockedLayout,\n        lockOnJoin,\n        lockOnJoinConfigurable,\n        setBy,\n      },\n    },\n  };\n\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting={${meetingId}} updated lock settings`);\n    } else {\n      Logger.info(`meeting={${meetingId}} lock settings were not updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changing meeting={${meetingId}} lock settings: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { check } from 'meteor/check';\n\nexport default function changeUserLock(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    userId: String,\n    locked: Boolean,\n    lockedBy: String,\n  });\n\n  const { userId, locked, lockedBy } = payload;\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      locked,\n    },\n  };\n\n  try {\n    const { numberAffected } = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`User's userId=${userId} lock status was changed to: ${locked} by user userId=${lockedBy}`);\n    } else {\n      Logger.info(`User's userId=${userId} lock status wasn't updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changing user lock setting: ${err}`);\n  }\n}\n","import { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function meetingHasEnded(meetingId) {\n  try {\n    const numberAffected = RecordMeetings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared record prop from meeting with id ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing record prop from meeting with id ${meetingId}. ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nimport BannedUsers from '/imports/api/users/server/store/bannedUsers';\nimport { removeAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { removeCursorStreamer } from '/imports/api/cursor/server/streamer';\n\nimport clearUsers from '/imports/api/users/server/modifiers/clearUsers';\nimport clearUsersSettings from '/imports/api/users-settings/server/modifiers/clearUsersSettings';\nimport clearGroupChat from '/imports/api/group-chat/server/modifiers/clearGroupChat';\nimport clearBreakouts from '/imports/api/breakouts/server/modifiers/clearBreakouts';\nimport clearAnnotations from '/imports/api/annotations/server/modifiers/clearAnnotations';\nimport clearSlides from '/imports/api/slides/server/modifiers/clearSlides';\nimport clearPolls from '/imports/api/polls/server/modifiers/clearPolls';\nimport clearCaptions from '/imports/api/captions/server/modifiers/clearCaptions';\nimport clearPresentationPods from '/imports/api/presentation-pods/server/modifiers/clearPresentationPods';\nimport clearVoiceUsers from '/imports/api/voice-users/server/modifiers/clearVoiceUsers';\nimport clearUserInfo from '/imports/api/users-infos/server/modifiers/clearUserInfo';\nimport clearConnectionStatus from '/imports/api/connection-status/server/modifiers/clearConnectionStatus';\nimport clearNote from '/imports/api/note/server/modifiers/clearNote';\nimport clearNetworkInformation from '/imports/api/network-information/server/modifiers/clearNetworkInformation';\nimport clearLocalSettings from '/imports/api/local-settings/server/modifiers/clearLocalSettings';\nimport clearRecordMeeting from './clearRecordMeeting';\nimport clearVoiceCallStates from '/imports/api/voice-call-states/server/modifiers/clearVoiceCallStates';\nimport clearVideoStreams from '/imports/api/video-streams/server/modifiers/clearVideoStreams';\nimport clearAuthTokenValidation from '/imports/api/auth-token-validation/server/modifiers/clearAuthTokenValidation';\nimport Metrics from '/imports/startup/server/metrics';\n\nexport default function meetingHasEnded(meetingId) {\n  removeAnnotationsStreamer(meetingId);\n  removeCursorStreamer(meetingId);\n\n  return Meetings.remove({ meetingId }, () => {\n    clearCaptions(meetingId);\n    clearGroupChat(meetingId);\n    clearPresentationPods(meetingId);\n    clearBreakouts(meetingId);\n    clearPolls(meetingId);\n    clearAnnotations(meetingId);\n    clearSlides(meetingId);\n    clearUsers(meetingId);\n    clearUsersSettings(meetingId);\n    clearVoiceUsers(meetingId);\n    clearUserInfo(meetingId);\n    clearConnectionStatus(meetingId);\n    clearNote(meetingId);\n    clearNetworkInformation(meetingId);\n    clearLocalSettings(meetingId);\n    clearRecordMeeting(meetingId);\n    clearVoiceCallStates(meetingId);\n    clearVideoStreams(meetingId);\n    clearAuthTokenValidation(meetingId);\n    BannedUsers.delete(meetingId);\n    Metrics.removeMeeting(meetingId);\n\n    Logger.info(`Cleared Meetings with id ${meetingId}`);\n  });\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setPublishedPoll(meetingId, isPublished) {\n  check(meetingId, String);\n  check(isPublished, Boolean);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      publishedPoll: isPublished,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set publishedPoll=${isPublished} in meeitingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting publishedPoll=${isPublished} for meetingId=${meetingId}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\n\nexport default function changeWebcamOnlyModerator(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    webcamsOnlyForModerator: Boolean,\n    setBy: String,\n  });\n  const { webcamsOnlyForModerator } = payload;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'usersProp.webcamsOnlyForModerator': webcamsOnlyForModerator,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting={${meetingId}} updated webcam Only for Moderator`);\n    } else {\n      Logger.info(`meeting={${meetingId}} webcam Only for Moderator were not updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changwing meeting={${meetingId}} webcam Only for Moderator: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleMeetingCreation from './handlers/meetingCreation';\nimport handleGetAllMeetings from './handlers/getAllMeetings';\nimport handleMeetingEnd from './handlers/meetingEnd';\nimport handleMeetingDestruction from './handlers/meetingDestruction';\nimport handleMeetingLocksChange from './handlers/meetingLockChange';\nimport handleUserLockChange from './handlers/userLockChange';\nimport handleRecordingStatusChange from './handlers/recordingStatusChange';\nimport handleRecordingTimerChange from './handlers/recordingTimerChange';\nimport handleTimeRemainingUpdate from './handlers/timeRemainingUpdate';\nimport handleChangeWebcamOnlyModerator from './handlers/webcamOnlyModerator';\n\nRedisPubSub.on('MeetingCreatedEvtMsg', handleMeetingCreation);\nRedisPubSub.on('SyncGetMeetingInfoRespMsg', handleGetAllMeetings);\nRedisPubSub.on('MeetingEndingEvtMsg', handleMeetingEnd);\nRedisPubSub.on('MeetingDestroyedEvtMsg', handleMeetingDestruction);\nRedisPubSub.on('LockSettingsInMeetingChangedEvtMsg', handleMeetingLocksChange);\nRedisPubSub.on('UserLockedInMeetingEvtMsg', handleUserLockChange);\nRedisPubSub.on('RecordingStatusChangedEvtMsg', handleRecordingStatusChange);\nRedisPubSub.on('UpdateRecordingTimerEvtMsg', handleRecordingTimerChange);\nRedisPubSub.on('WebcamsOnlyForModeratorChangedEvtMsg', handleChangeWebcamOnlyModerator);\nRedisPubSub.on('GetLockSettingsRespMsg', handleMeetingLocksChange);\nRedisPubSub.on('MeetingTimeRemainingUpdateEvtMsg', handleTimeRemainingUpdate);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport endMeeting from './methods/endMeeting';\nimport toggleRecording from './methods/toggleRecording';\nimport transferUser from './methods/transferUser';\nimport toggleLockSettings from './methods/toggleLockSettings';\nimport toggleWebcamsOnlyForModerator from './methods/toggleWebcamsOnlyForModerator';\n\nMeteor.methods({\n  endMeeting,\n  toggleRecording,\n  toggleLockSettings,\n  transferUser,\n  toggleWebcamsOnlyForModerator,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Meetings, { RecordMeetings, MeetingTimeRemaining } from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction meetings(role) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Meetings was requested by unauth connection ${this.connection.id}`);\n    return Meetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing meeting', { meetingId, userId });\n\n  const selector = {\n    $or: [\n      { meetingId },\n    ],\n  };\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    selector.$or.push({\n      'meetingProp.isBreakout': true,\n      'breakoutProps.parentId': meetingId,\n    });\n  }\n\n  const options = {\n    fields: {\n      password: false,\n      'welcomeProp.modOnlyMessage': false,\n    },\n  };\n\n  return Meetings.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundMeetings = meetings.bind(this);\n  return boundMeetings(...args);\n}\n\nMeteor.publish('meetings', publish);\n\nfunction recordMeetings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing RecordMeetings was requested by unauth connection ${this.connection.id}`);\n    return RecordMeetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing RecordMeetings for ${meetingId} ${userId}`);\n\n  return RecordMeetings.find({ meetingId });\n}\nfunction recordPublish(...args) {\n  const boundRecordMeetings = recordMeetings.bind(this);\n  return boundRecordMeetings(...args);\n}\n\nMeteor.publish('record-meetings', recordPublish);\n\nfunction meetingTimeRemaining() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing MeetingTimeRemaining was requested by unauth connection ${this.connection.id}`);\n    return MeetingTimeRemaining.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug(`Publishing MeetingTimeRemaining for ${meetingId} ${userId}`);\n\n  return MeetingTimeRemaining.find({ meetingId });\n}\nfunction timeRemainingPublish(...args) {\n  const boundtimeRemaining = meetingTimeRemaining.bind(this);\n  return boundtimeRemaining(...args);\n}\n\nMeteor.publish('meeting-time-remaining', timeRemainingPublish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Meetings = new Mongo.Collection('meetings');\nconst RecordMeetings = new Mongo.Collection('record-meetings');\nconst MeetingTimeRemaining = new Mongo.Collection('meeting-time-remaining');\n\nif (Meteor.isServer) {\n  // types of queries for the meetings:\n  // 1. meetingId\n\n  Meetings._ensureIndex({ meetingId: 1 });\n  RecordMeetings._ensureIndex({ meetingId: 1 });\n  MeetingTimeRemaining._ensureIndex({ meetingId: 1 });\n}\n\nexport {\n  RecordMeetings,\n  MeetingTimeRemaining,\n};\nexport default Meetings;\n","import { check } from 'meteor/check';\nimport NetworkInformation from '/imports/api/network-information';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userInstabilityDetected(sender) {\n  const { meetingId, requesterUserId: receiver } = extractCredentials(this.userId);\n  check(sender, String);\n\n  const payload = {\n    time: new Date().getTime(),\n    meetingId,\n    receiver,\n    sender,\n  };\n\n  Logger.debug('Receiver reported a network instability', { receiver, meetingId });\n\n  return NetworkInformation.insert(payload);\n}\n","import NetworkInformation from '/imports/api/network-information';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearNetworkInformation(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = NetworkInformation.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Network Information (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Network Information (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = NetworkInformation.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Network Information (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Network Information (all). ${err}`);\n    }\n  }\n}\n","import './methods';\nimport './publisher';\n","import { Meteor } from 'meteor/meteor';\nimport userInstabilityDetected from './methods/userInstabilityDetected';\n\nMeteor.methods({\n  userInstabilityDetected,\n});\n","import { Meteor } from 'meteor/meteor';\nimport NetworkInformation from '/imports/api/network-information';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\n\nfunction networkInformation() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing NetworkInformation was requested by unauth connection ${this.connection.id}`);\n    return NetworkInformation.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing NetworkInformation for ${meetingId} ${userId}`);\n  return NetworkInformation.find({\n    meetingId,\n  });\n}\n\nfunction publish(...args) {\n  const boundNetworkInformation = networkInformation.bind(this);\n\n  return boundNetworkInformation(...args);\n}\n\nMeteor.publish('network-information', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst NetworkInformation = new Mongo.Collection('network-information');\n\nif (Meteor.isServer) {\n  NetworkInformation._ensureIndex({ meetingId: 1 });\n}\n\nexport default NetworkInformation;\n","import { check } from 'meteor/check';\nimport updateNote from '/imports/api/note/server/modifiers/updateNote';\n\nexport default function handlePadUpdate({ body }) {\n  const { pad, revs } = body;\n  const { id } = pad;\n\n  check(id, String);\n  check(revs, Number);\n\n  updateNote(id, revs);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  generateNoteId,\n  createPadURL,\n  getReadOnlyIdURL,\n  isEnabled,\n  getDataFromResponse,\n} from '/imports/api/note/server/helpers';\nimport addNote from '/imports/api/note/server/modifiers/addNote';\nimport axios from 'axios';\n\nexport default function createNote(meetingId) {\n  // Avoid note creation if this feature is disabled\n  if (!isEnabled()) {\n    Logger.warn(`Notes are disabled for ${meetingId}`);\n    return;\n  }\n\n  check(meetingId, String);\n\n  const noteId = generateNoteId(meetingId);\n\n  const createURL = createPadURL(noteId);\n  axios({\n    method: 'get',\n    url: createURL,\n    responseType: 'json',\n  }).then((responseOuter) => {\n    const { status } = responseOuter;\n    if (status !== 200) {\n      Logger.error(`Could not get note info for ${meetingId} ${status}`);\n    }\n    const readOnlyURL = getReadOnlyIdURL(noteId);\n    axios({\n      method: 'get',\n      url: readOnlyURL,\n      responseType: 'json',\n    }).then((response) => {\n      const readOnlyNoteId = getDataFromResponse(response.data, 'readOnlyID');\n      if (readOnlyNoteId) {\n        addNote(meetingId, noteId, readOnlyNoteId);\n      } else {\n        Logger.error(`Could not get note readOnlyID for ${meetingId}`);\n      }\n    }).catch(error => Logger.error(`Could not get note readOnlyID for ${meetingId}: ${error}`));\n  }).catch(error => Logger.error(`Could not create note for ${meetingId}: ${error}`));\n}\n","import { check } from 'meteor/check';\nimport Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addNote(meetingId, noteId, readOnlyNoteId) {\n  check(meetingId, String);\n  check(noteId, String);\n  check(readOnlyNoteId, String);\n\n  const selector = {\n    meetingId,\n    noteId,\n  };\n\n  const modifier = {\n    meetingId,\n    noteId,\n    readOnlyNoteId,\n    revs: 0,\n  };\n\n  try {\n    const { insertedId } = Note.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added note id=${noteId} readOnlyId=${readOnlyNoteId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted note id=${noteId} readOnlyId=${readOnlyNoteId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding note to the collection: ${err}`);\n  }\n}\n","import Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearNote(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Note.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Note (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Note (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Note.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Note (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Note (all). ${err}`);\n    }\n  }\n}\n","import Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateNote(noteId, revs) {\n  check(noteId, String);\n  check(revs, Number);\n\n  const selector = {\n    noteId,\n  };\n\n  const modifier = {\n    $set: {\n      revs,\n    },\n  };\n\n  try {\n    const numberAffected = Note.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      Logger.verbose('Notes: update note pad', { pad: noteId, revs });\n    }\n  } catch (err) {\n    Logger.error('Notes: error when updating note pad', { err });\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForNotePadOnly } from '/imports/api/note/server/helpers';\nimport handlePadUpdate from './handlers/padUpdate';\n\nRedisPubSub.on('PadUpdateSysMsg', processForNotePadOnly(handlePadUpdate));\n","import { Meteor } from 'meteor/meteor';\nimport { hashFNV32a } from '/imports/api/common/server/helpers';\n\nconst ETHERPAD = Meteor.settings.private.etherpad;\nconst NOTE_CONFIG = Meteor.settings.public.note;\nconst BASE_URL = `http://${ETHERPAD.host}:${ETHERPAD.port}/api/${ETHERPAD.version}`;\nconst TOKEN = '_';\n\nconst createPadURL = padId => `${BASE_URL}/createPad?apikey=${ETHERPAD.apikey}&padID=${padId}`;\n\nconst getReadOnlyIdURL = padId => `${BASE_URL}/getReadOnlyID?apikey=${ETHERPAD.apikey}&padID=${padId}`;\n\nconst appendTextURL = (padId, text) => `${BASE_URL}/appendText?apikey=${ETHERPAD.apikey}&padID=${padId}&text=${encodeURIComponent(text)}`;\n\nconst generateNoteId = (meetingId) => {\n  const noteId = hashFNV32a(meetingId, true);\n  return noteId;\n};\n\nconst isEnabled = () => NOTE_CONFIG.enabled;\n\nconst getDataFromResponse = (data, key) => {\n  if (data) {\n    const innerData = data.data;\n    if (innerData && innerData[key]) {\n      return innerData[key];\n    }\n  }\n  return null;\n};\n\nconst isNotePad = padId => padId.search(TOKEN);\n\nconst processForNotePadOnly = fn => (message, ...args) => {\n  const { body } = message;\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  if (isNotePad(id)) return fn(message, ...args);\n  return () => {};\n};\n\nexport {\n  generateNoteId,\n  createPadURL,\n  getReadOnlyIdURL,\n  isEnabled,\n  getDataFromResponse,\n  appendTextURL,\n  processForNotePadOnly,\n};\n","import './publishers';\nimport './eventHandlers';\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Note from '/imports/api/note';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction note() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Note was requested by unauth connection ${this.connection.id}`);\n    return Note.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.info(`Publishing Note for ${meetingId} ${userId}`);\n\n  return Note.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundNote = note.bind(this);\n  return boundNote(...args);\n}\n\nMeteor.publish('note', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Note = new Mongo.Collection('note');\n\nif (Meteor.isServer) {\n  Note._ensureIndex({ meetingId: 1, noteId: 1 });\n}\n\nexport default Note;\n","import { check } from 'meteor/check';\nimport removePoll from '../modifiers/removePoll';\nimport setPublishedPoll from '../../../meetings/server/modifiers/setPublishedPoll';\n\nexport default function pollPublished({ body }, meetingId) {\n  const { pollId } = body;\n\n  check(meetingId, String);\n  check(pollId, String);\n\n  setPublishedPoll(meetingId, true);\n\n  return removePoll(meetingId, pollId);\n}\n","import { check } from 'meteor/check';\nimport addPoll from '../modifiers/addPoll';\nimport setPublishedPoll from '../../../meetings/server/modifiers/setPublishedPoll';\n\nexport default function pollStarted({ body }, meetingId) {\n  const { userId } = body;\n  const { poll } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(poll, Object);\n\n  setPublishedPoll(meetingId, false);\n\n  return addPoll(meetingId, userId, poll);\n}\n","import { check } from 'meteor/check';\nimport removePoll from '../modifiers/removePoll';\nimport clearPolls from '../modifiers/clearPolls';\n\nexport default function pollStopped({ body }, meetingId) {\n  const { poll } = body;\n\n  check(meetingId, String);\n\n  if (poll) {\n    const { pollId } = poll;\n\n    check(pollId, String);\n\n    return removePoll(meetingId, pollId);\n  }\n\n  return clearPolls(meetingId);\n}\n","import { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userResponded({ body }) {\n  const { pollId, userId, answerId } = body;\n\n  check(pollId, String);\n  check(userId, String);\n  check(answerId, Number);\n\n  const selector = {\n    id: pollId,\n  };\n\n  const modifier = {\n    $pull: {\n      users: userId,\n    },\n    $push: {\n      responses: { userId, answerId },\n    },\n  };\n\n  try {\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updating Poll response (userId: ${userId}, response: ${answerId}, pollId: ${pollId})`);\n    }\n  } catch (err) {\n    Logger.error(`Updating Poll responses: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport updateVotes from '../modifiers/updateVotes';\n\nexport default function userVoted({ body }, meetingId) {\n  const { poll } = body;\n\n  check(meetingId, String);\n  check(poll, {\n    id: String,\n    answers: [\n      {\n        id: Number,\n        key: String,\n        numVotes: Number,\n      },\n    ],\n    numRespondents: Number,\n    numResponders: Number,\n  });\n\n  return updateVotes(poll, meetingId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function publishPoll() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ShowPollResultReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  const poll = Polls.findOne({ meetingId }); // TODO--send pollid from client\n  if (!poll) {\n    Logger.error(`Attempted to publish inexisting poll for meetingId: ${meetingId}`);\n    return false;\n  }\n\n  return RedisPubSub.publishUserMessage(\n    CHANNEL,\n    EVENT_NAME,\n    meetingId,\n    requesterUserId,\n    ({ requesterId: requesterUserId, pollId: poll.id }),\n  );\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function publishVote(pollId, pollAnswerId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RespondToPollReqMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(pollAnswerId, Number);\n  check(pollId, String);\n\n  const allowedToVote = Polls.findOne({ id: pollId, users: { $in: [requesterUserId] } }, {\n    fields: {\n      users: 1,\n    },\n  });\n\n  if (!allowedToVote) {\n    Logger.info(`Poll User={${requesterUserId}} has already voted in PollId={${pollId}}`);\n    return null;\n  }\n\n  const selector = {\n    users: requesterUserId,\n    meetingId,\n    'answers.id': pollAnswerId,\n  };\n\n  const payload = {\n    requesterId: requesterUserId,\n    pollId,\n    questionId: 0,\n    answerId: pollAnswerId,\n  };\n\n  /*\n   We keep an array of people who were in the meeting at the time the poll\n   was started. The poll is published to them only.\n   Once they vote - their ID is removed and they cannot see the poll anymore\n  */\n  const modifier = {\n    $pull: {\n      users: requesterUserId,\n    },\n  };\n\n  try {\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Removed responded user=${requesterUserId} from poll (meetingId: ${meetingId}, pollId: ${pollId}!)`);\n\n      RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n    }\n  } catch (err) {\n    Logger.error(`Removing responded user from Polls collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startPoll(pollType, pollId, answers) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  let EVENT_NAME = 'StartPollReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(pollId, String);\n  check(pollType, String);\n\n  const payload = {\n    requesterId: requesterUserId,\n    pollId: `${pollId}/${new Date().getTime()}`,\n    pollType,\n  };\n\n  if (pollType === 'custom') {\n    EVENT_NAME = 'StartCustomPollReqMsg';\n    check(answers, Array);\n    payload.answers = answers;\n  }\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function stopPoll() {\n  const { meetingId, requesterUserId: requesterId } = extractCredentials(this.userId);\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StopPollReqMsg';\n\n  return RedisPubSub.publishUserMessage(\n    CHANNEL,\n    EVENT_NAME,\n    meetingId,\n    requesterId,\n    ({ requesterId }),\n  );\n}\n","import Users from '/imports/api/users';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport { check } from 'meteor/check';\n\nexport default function addPoll(meetingId, requesterId, poll) {\n  check(requesterId, String);\n  check(meetingId, String);\n  check(poll, {\n    id: String,\n    answers: [\n      {\n        id: Number,\n        key: String,\n      },\n    ],\n  });\n\n  const userSelector = {\n    meetingId,\n    userId: { $ne: requesterId },\n    clientType: { $ne: 'dial-in-user' },\n  };\n\n  const userIds = Users.find(userSelector, { fields: { userId: 1 } })\n    .fetch()\n    .map(user => user.userId);\n\n  const selector = {\n    meetingId,\n    requester: requesterId,\n    id: poll.id,\n  };\n\n  const modifier = Object.assign(\n    { meetingId },\n    { requester: requesterId },\n    { users: userIds },\n    flat(poll, { safe: true }),\n  );\n\n\n  try {\n    const { insertedId } = Polls.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added Poll id=${poll.id}`);\n    } else {\n      Logger.info(`Upserted Poll id=${poll.id}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding Poll to collection: ${poll.id}`);\n  }\n}\n","import Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPolls(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Polls.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Polls (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Polls (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Polls.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Polls (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Polls (all). ${err}`);\n    }\n  }\n}\n","import Polls from '/imports/api/polls';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removePoll(meetingId, id) {\n  check(meetingId, String);\n  check(id, String);\n\n  const selector = {\n    meetingId,\n    id,\n  };\n\n  try {\n    const numberAffected = Polls.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed Poll id=${id}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing Poll from collection: ${err}`);\n  }\n}\n","import Polls from '/imports/api/polls';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\n\nexport default function updateVotes(poll, meetingId) {\n  check(meetingId, String);\n  check(poll, Object);\n\n  const {\n    id,\n    answers,\n    numResponders,\n    numRespondents,\n  } = poll;\n\n  check(id, String);\n  check(answers, Array);\n\n  check(numResponders, Number);\n  check(numRespondents, Number);\n\n  const selector = {\n    meetingId,\n    id,\n  };\n\n  const modifier = {\n    $set: flat(poll, { safe: true }),\n  };\n\n  try {\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updating Polls collection (meetingId: ${meetingId}, pollId: ${id}!)`);\n    }\n  } catch (err) {\n    Logger.error(`Updating Polls collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handlePollStarted from './handlers/pollStarted';\nimport handlePollStopped from './handlers/pollStopped';\nimport handlePollPublished from './handlers/pollPublished';\nimport handleUserVoted from './handlers/userVoted';\nimport handleUserResponded from './handlers/userResponded';\n\nRedisPubSub.on('PollShowResultEvtMsg', handlePollPublished);\nRedisPubSub.on('PollStartedEvtMsg', handlePollStarted);\nRedisPubSub.on('PollStoppedEvtMsg', handlePollStopped);\nRedisPubSub.on('PollUpdatedEvtMsg', handleUserVoted);\nRedisPubSub.on('UserRespondedToPollRespMsg', handleUserResponded);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport publishVote from './methods/publishVote';\nimport publishPoll from './methods/publishPoll';\nimport startPoll from './methods/startPoll';\nimport stopPoll from './methods/stopPoll';\n\nMeteor.methods({\n  publishVote,\n  publishPoll,\n  startPoll,\n  stopPoll,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Polls from '/imports/api/polls';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction currentPoll() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Polls was requested by unauth connection ${this.connection.id}`);\n    return Polls.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Polls', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n  };\n\n  return Polls.find(selector);\n}\n\nfunction publishCurrentPoll(...args) {\n  const boundPolls = currentPoll.bind(this);\n  return boundPolls(...args);\n}\n\nMeteor.publish('current-poll', publishCurrentPoll);\n\n\nfunction polls() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Polls was requested by unauth connection ${this.connection.id}`);\n    return Polls.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing polls', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n    users: userId,\n  };\n\n  return Polls.find(selector);\n}\n\nfunction publish(...args) {\n  const boundPolls = polls.bind(this);\n  return boundPolls(...args);\n}\n\nMeteor.publish('polls', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Polls = new Mongo.Collection('polls');\n\nif (Meteor.isServer) {\n  // We can have just one active poll per meeting\n  // makes no sense to index it by anything other than meetingId\n\n  Polls._ensureIndex({ meetingId: 1 });\n}\n\nexport default Polls;\n","import { check } from 'meteor/check';\nimport addPresentationPod from '../modifiers/addPresentationPod';\n\nexport default function handleCreateNewPresentationPod({ body }, meetingId) {\n  check(body, {\n    currentPresenterId: String,\n    podId: String,\n  });\n  check(meetingId, String);\n\n  const { currentPresenterId, podId } = body;\n\n  const pod = {\n    currentPresenterId,\n    podId,\n  };\n\n  addPresentationPod(meetingId, pod);\n}\n","import { check } from 'meteor/check';\nimport removePresentationPod from '../modifiers/removePresentationPod';\n\nexport default function handleRemovePresentationPod({ body }, meetingId) {\n  check(body, Object);\n  check(meetingId, String);\n\n  const { podId } = body;\n\n  check(podId, String);\n\n  removePresentationPod(meetingId, podId);\n}\n","import { check } from 'meteor/check';\nimport setPresenterInPod from '../modifiers/setPresenterInPod';\n\nexport default function handleSetPresenterInPod({ body }, meetingId) {\n  check(body, Object);\n\n  const { podId, nextPresenterId } = body;\n\n  check(podId, String);\n  check(nextPresenterId, String);\n\n  setPresenterInPod(meetingId, podId, nextPresenterId);\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport removePresentationPod from '../modifiers/removePresentationPod';\nimport addPresentationPod from '../modifiers/addPresentationPod';\n\nexport default function handleSyncGetPresentationPods({ body }, meetingId) {\n  check(body, Object);\n  check(meetingId, String);\n\n  const { pods } = body;\n  check(pods, Array);\n\n  const presentationPodIds = pods.map(pod => pod.id);\n\n  const presentationPodsToRemove = PresentationPods.find({\n    meetingId,\n    podId: { $nin: presentationPodIds },\n  }, { fields: { podId: 1 } }).fetch();\n\n  presentationPodsToRemove.forEach(p => removePresentationPod(meetingId, p.podId));\n\n  pods.forEach((pod) => {\n    // 'podId' and 'currentPresenterId' for some reason called 'id' and 'currentPresenter'\n    // in this message\n    const {\n      id: podId,\n      currentPresenter: currentPresenterId,\n      presentations,\n    } = pod;\n    addPresentationPod(meetingId, { podId, currentPresenterId }, presentations);\n  });\n}\n","import { Match, check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport addPresentation from '/imports/api/presentations/server/modifiers/addPresentation';\n\n// 'presentations' is passed down here when we receive a Sync message\n// and it's not used when we just create a new presentation pod\nexport default function addPresentationPod(meetingId, pod, presentations = undefined) {\n  check(meetingId, String);\n  check(presentations, Match.Maybe(Array));\n  check(pod, {\n    currentPresenterId: String,\n    podId: String,\n  });\n\n  const { currentPresenterId, podId } = pod;\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const modifier = {\n    meetingId,\n    podId,\n    currentPresenterId,\n  };\n\n  try {\n    const { insertedId } = PresentationPods.upsert(selector, modifier);\n\n    // if it's a Sync message - continue adding the attached presentations\n    if (presentations) {\n      presentations.forEach(presentation => addPresentation(meetingId, podId, presentation));\n    }\n\n    if (insertedId) {\n      Logger.info(`Added presentation pod id=${podId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted presentation pod id=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding presentation pod to the collection: ${err}`);\n  }\n}\n","import PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport clearPresentations from '/imports/api/presentations/server/modifiers/clearPresentations';\nimport clearPresentationUploadToken from '/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken';\n\nexport default function clearPresentationPods(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = PresentationPods.remove({ meetingId });\n\n      if (numberAffected) {\n        clearPresentations(meetingId);\n        clearPresentationUploadToken(meetingId);\n        Logger.info(`Cleared Presentations Pods (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Presentations Pods (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = PresentationPods.remove({});\n\n      if (numberAffected) {\n        clearPresentations();\n        clearPresentationUploadToken();\n        Logger.info('Cleared Presentations Pods (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Presentations Pods (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport clearPresentations from '/imports/api/presentations/server/modifiers/clearPresentations';\nimport clearPresentationUploadToken from '/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken';\n\nexport default function removePresentationPod(meetingId, podId) {\n  check(meetingId, String);\n  check(podId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  try {\n    const numberAffected = PresentationPods.remove(selector);\n\n    if (numberAffected && podId) {\n      Logger.info(`Removed presentation pod id=${podId} meeting=${meetingId}`);\n      clearPresentations(meetingId, podId);\n      clearPresentationUploadToken(meetingId, podId);\n    }\n  } catch (err) {\n    Logger.error(`Error on removing presentation pod from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresenterInPod(meetingId, podId, nextPresenterId) {\n  check(meetingId, String);\n  check(podId, String);\n  check(nextPresenterId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const modifier = {\n    $set: {\n      currentPresenterId: nextPresenterId,\n    },\n  };\n\n  try {\n    const { numberAffected } = PresentationPods.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set a new presenter in pod id=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting a presenter in pod: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleCreateNewPresentationPod from './handlers/createNewPresentationPod';\nimport handleRemovePresentationPod from './handlers/removePresentationPod';\nimport handleSyncGetPresentationPods from './handlers/syncGetPresentationPods';\nimport handleSetPresenterInPod from './handlers/setPresenterInPod';\n\nRedisPubSub.on('CreateNewPresentationPodEvtMsg', handleCreateNewPresentationPod);\nRedisPubSub.on('RemovePresentationPodEvtMsg', handleRemovePresentationPod);\nRedisPubSub.on('SetPresenterInPodRespMsg', handleSetPresenterInPod);\nRedisPubSub.on('SyncGetPresentationPodsRespMsg', handleSyncGetPresentationPods);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentationPods() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing PresentationPods was requested by unauth connection ${this.connection.id}`);\n    return PresentationPods.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug('Publishing presentation-pods', { meetingId, userId });\n\n  return PresentationPods.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundPresentationPods = presentationPods.bind(this);\n  return boundPresentationPods(...args);\n}\n\nMeteor.publish('presentation-pods', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst PresentationPods = new Mongo.Collection('presentation-pods');\n\nif (Meteor.isServer) {\n  // types of queries for the presentation pods:\n  // 1. meetingId, podId  ( 4 )\n\n  PresentationPods._ensureIndex({ meetingId: 1, podId: 1 });\n}\n\nexport default PresentationPods;\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\n\nexport default function handlePresentationUploadTokenFail({ body, header }, meetingId) {\n  check(body, Object);\n\n  const { userId } = header;\n  const { podId, filename } = body;\n\n  check(userId, String);\n  check(podId, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    podId,\n    filename,\n  };\n\n  try {\n    const { numberAffected } = PresentationUploadToken.upsert(selector, { failed: true, authzToken: null });\n\n    if (numberAffected) {\n      Logger.info(`Removing presentationToken filename=${filename} podId=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing presentationToken from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\n\nexport default function handlePresentationUploadTokenPass({ body, header }, meetingId) {\n  check(body, Object);\n\n  const { userId } = header;\n  const { podId, authzToken, filename } = body;\n\n  check(userId, String);\n  check(podId, String);\n  check(authzToken, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n  };\n\n  const modifier = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n    authzToken,\n    failed: false,\n    used: false,\n  };\n\n  try {\n    const { insertedId } = PresentationUploadToken.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Inserting presentationToken filename=${filename} podId=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Inserting presentationToken from collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function requestPresentationUploadToken(podId, filename) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'PresentationUploadTokenReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(podId, String);\n  check(filename, String);\n\n  const payload = {\n    podId,\n    filename,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setUsedToken(authzToken) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const payload = {\n    $set: {\n      used: true,\n    },\n  };\n\n  try {\n    const numberAffected = PresentationUploadToken.update({\n      meetingId,\n      userId: requesterUserId,\n      authzToken,\n    }, payload);\n\n    if (numberAffected) {\n      Logger.info(`Token: ${authzToken} has been set as used in meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Unable to set token as used : ${err}`);\n  }\n}\n","import PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPresentationUploadToken(meetingId, podId) {\n  if (meetingId && podId) {\n    try {\n      const numberAffected = PresentationUploadToken.remove({ meetingId, podId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations Upload Token (${meetingId}, ${podId})`);\n        return true;\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (${meetingId}, ${podId}). ${err}`);\n      return false;\n    }\n  }\n\n  if (meetingId) {\n    try {\n      const numberAffected = PresentationUploadToken.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations Upload Token (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      // clearing presentations for the whole server\n      const numberAffected = PresentationUploadToken.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Presentations Upload Token (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (all). ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nimport handlePresentationUploadTokenPass from './handlers/presentationUploadTokenPass';\nimport handlePresentationUploadTokenFail from './handlers/presentationUploadTokenFail';\n\nRedisPubSub.on('PresentationUploadTokenPassRespMsg', processForHTML5ServerOnly(handlePresentationUploadTokenPass));\nRedisPubSub.on('PresentationUploadTokenFailRespMsg', processForHTML5ServerOnly(handlePresentationUploadTokenFail));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport requestPresentationUploadToken from './methods/requestPresentationUploadToken';\nimport setUsedToken from './methods/setUsedToken';\n\nMeteor.methods({\n  requestPresentationUploadToken,\n  setUsedToken,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentationUploadToken(podId, filename) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing PresentationUploadToken was requested by unauth connection ${this.connection.id}`);\n    return PresentationUploadToken.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  check(podId, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n  };\n\n  Logger.debug('Publishing PresentationUploadToken', { meetingId, userId });\n\n  return PresentationUploadToken.find(selector);\n}\n\nfunction publish(...args) {\n  const boundPresentationUploadToken = presentationUploadToken.bind(this);\n  return boundPresentationUploadToken(...args);\n}\n\nMeteor.publish('presentation-upload-token', publish);\n","const PresentationUploadToken = new Mongo.Collection('presentation-upload-token');\n\nexport default PresentationUploadToken;\n","import { check } from 'meteor/check';\nimport addPresentation from '../modifiers/addPresentation';\n\nexport default function handlePresentationAdded({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentation, podId } = body;\n\n  check(meetingId, String);\n  check(podId, String);\n  check(presentation, Object);\n\n  return addPresentation(meetingId, podId, presentation);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Presentations from '/imports/api/presentations';\n\n// const OFFICE_DOC_CONVERSION_SUCCESS_KEY = 'OFFICE_DOC_CONVERSION_SUCCESS';\nconst OFFICE_DOC_CONVERSION_FAILED_KEY = 'OFFICE_DOC_CONVERSION_FAILED';\nconst OFFICE_DOC_CONVERSION_INVALID_KEY = 'OFFICE_DOC_CONVERSION_INVALID';\nconst SUPPORTED_DOCUMENT_KEY = 'SUPPORTED_DOCUMENT';\nconst UNSUPPORTED_DOCUMENT_KEY = 'UNSUPPORTED_DOCUMENT';\nconst PAGE_COUNT_FAILED_KEY = 'PAGE_COUNT_FAILED';\nconst PAGE_COUNT_EXCEEDED_KEY = 'PAGE_COUNT_EXCEEDED';\nconst PDF_HAS_BIG_PAGE_KEY = 'PDF_HAS_BIG_PAGE';\nconst GENERATED_SLIDE_KEY = 'GENERATED_SLIDE';\n// const GENERATING_THUMBNAIL_KEY = 'GENERATING_THUMBNAIL';\n// const GENERATED_THUMBNAIL_KEY = 'GENERATED_THUMBNAIL';\n// const GENERATING_TEXTFILES_KEY = 'GENERATING_TEXTFILES';\n// const GENERATED_TEXTFILES_KEY = 'GENERATED_TEXTFILES';\n// const GENERATING_SVGIMAGES_KEY = 'GENERATING_SVGIMAGES';\n// const GENERATED_SVGIMAGES_KEY = 'GENERATED_SVGIMAGES';\n// const CONVERSION_COMPLETED_KEY = 'CONVERSION_COMPLETED';\n\nexport default function handlePresentationConversionUpdate({ body }, meetingId) {\n  check(body, Object);\n\n  const {\n    presentationId, podId, messageKey: status, presName: presentationName,\n  } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(status, String);\n\n  const statusModifier = {\n    'conversion.status': status,\n    'conversion.error': false,\n    'conversion.done': false,\n  };\n\n  switch (status) {\n    case SUPPORTED_DOCUMENT_KEY:\n      statusModifier.id = presentationId;\n      statusModifier.name = presentationName;\n      break;\n\n    case UNSUPPORTED_DOCUMENT_KEY:\n    case OFFICE_DOC_CONVERSION_FAILED_KEY:\n    case OFFICE_DOC_CONVERSION_INVALID_KEY:\n    case PAGE_COUNT_FAILED_KEY:\n    case PAGE_COUNT_EXCEEDED_KEY:\n    case PDF_HAS_BIG_PAGE_KEY:\n      statusModifier.id = presentationId;\n      statusModifier.name = presentationName;\n      statusModifier['conversion.error'] = true;\n      break;\n\n    case GENERATED_SLIDE_KEY:\n      statusModifier['conversion.pagesCompleted'] = body.pagesCompleted;\n      statusModifier['conversion.numPages'] = body.numberOfPages;\n      break;\n\n    default:\n      break;\n  }\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  const modifier = {\n    $set: Object.assign({ meetingId, podId }, statusModifier),\n  };\n\n  try {\n    const { insertedId } = Presentations.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Updated presentation conversion status=${status} id=${presentationId} meeting=${meetingId}`);\n    } else {\n      Logger.debug('Upserted presentation conversion', { status, presentationId, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Updating conversion status presentation to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport setCurrentPresentation from '../modifiers/setCurrentPresentation';\n\nexport default function handlePresentationCurrentSet({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentationId, podId } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  return setCurrentPresentation(meetingId, podId, presentationId);\n}\n","import { check } from 'meteor/check';\nimport setPresentationDownloadable from '../modifiers/setPresentationDownloadable';\n\nexport default function handlePresentationDownloadableSet({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentationId, podId, downloadable } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(downloadable, Boolean);\n\n  return setPresentationDownloadable(meetingId, podId, presentationId, downloadable);\n}\n","import { check } from 'meteor/check';\n\nimport removePresentation from '../modifiers/removePresentation';\n\nexport default function handlePresentationRemove({ body }, meetingId) {\n  const { podId, presentationId } = body;\n\n  check(meetingId, String);\n  check(podId, String);\n  check(presentationId, String);\n\n  return removePresentation(meetingId, podId, presentationId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function removePresentation(presentationId, podId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RemovePresentationPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(presentationId, String);\n  check(podId, String);\n\n  const payload = {\n    presentationId,\n    podId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setPresentation(presentationId, podId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetCurrentPresentationPubMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(presentationId, String);\n  check(podId, String);\n\n  const payload = {\n    presentationId,\n    podId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setPresentationDownloadable(presentationId, downloadable) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetPresentationDownloadablePubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(downloadable, Boolean);\n  check(presentationId, String);\n\n  const payload = {\n    presentationId,\n    podId: 'DEFAULT_PRESENTATION_POD',\n    downloadable,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { HTTP } from 'meteor/http';\nimport { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport addSlide from '/imports/api/slides/server/modifiers/addSlide';\nimport setCurrentPresentation from './setCurrentPresentation';\n\nconst getSlideText = async (url) => {\n  let content = '';\n  try {\n    content = await HTTP.get(url).content;\n  } catch (error) {\n    Logger.error(`No file found. ${error}`);\n  }\n  return content;\n};\n\nconst addSlides = (meetingId, podId, presentationId, slides) => {\n  slides.forEach(async (slide) => {\n    const content = await getSlideText(slide.txtUri);\n\n    Object.assign(slide, { content });\n\n    addSlide(meetingId, podId, presentationId, slide);\n  });\n};\n\nexport default function addPresentation(meetingId, podId, presentation) {\n  check(meetingId, String);\n  check(podId, String);\n  check(presentation, {\n    id: String,\n    name: String,\n    current: Boolean,\n    pages: [\n      {\n        id: String,\n        num: Number,\n        thumbUri: String,\n        swfUri: String,\n        txtUri: String,\n        svgUri: String,\n        current: Boolean,\n        xOffset: Number,\n        yOffset: Number,\n        widthRatio: Number,\n        heightRatio: Number,\n      },\n    ],\n    downloadable: Boolean,\n  });\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentation.id,\n  };\n\n  const modifier = {\n    $set: Object.assign({\n      meetingId,\n      podId,\n      'conversion.done': true,\n      'conversion.error': false,\n    }, flat(presentation, { safe: true })),\n  };\n\n  try {\n    const { insertedId } = Presentations.upsert(selector, modifier);\n\n    addSlides(meetingId, podId, presentation.id, presentation.pages);\n\n    if (insertedId) {\n      if (presentation.current) {\n        setCurrentPresentation(meetingId, podId, presentation.id);\n        Logger.info(`Added presentation id=${presentation.id} meeting=${meetingId}`);\n      } else {\n        Logger.info(`Upserted presentation id=${presentation.id} meeting=${meetingId}`);\n      }\n    }\n  } catch (err) {\n    Logger.error(`Adding presentation to collection: ${err}`);\n  }\n}\n","import Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPresentations(meetingId, podId) {\n  // clearing presentations for 1 pod\n  if (meetingId && podId) {\n    try {\n      const numberAffected = Presentations.remove({ meetingId, podId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations (${meetingId}, ${podId})`);\n        return true;\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (${meetingId}, ${podId}). ${err}`);\n      return false;\n    }\n  }\n\n  // clearing presentations for the whole meeting\n  if (meetingId) {\n    try {\n      const numberAffected = Presentations.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Presentations.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Presentations (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nimport clearSlidesPresentation from '/imports/api/slides/server/modifiers/clearSlidesPresentation';\n\nexport default function removePresentation(meetingId, podId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  try {\n    const numberAffected = Presentations.remove(selector);\n\n    if (numberAffected) {\n      clearSlidesPresentation(meetingId, presentationId);\n      Logger.info(`Removed presentation id=${presentationId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing presentation from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setCurrentPresentation(meetingId, podId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const oldCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      current: true,\n    },\n    modifier: {\n      $set: { current: false },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Unsetting the current presentation: ${err}`);\n        return;\n      }\n\n      Logger.info('Unsetted as current presentation');\n    },\n  };\n\n  const newCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      id: presentationId,\n    },\n    modifier: {\n      $set: { current: true },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Setting as current presentation id=${presentationId}: ${err}`);\n        return;\n      }\n\n      Logger.info(`Setted as current presentation id=${presentationId}`);\n    },\n  };\n\n  const oldPresentation = Presentations.findOne(oldCurrent.selector);\n  const newPresentation = Presentations.findOne(newCurrent.selector);\n\n  // Prevent bug with presentation being unset, same happens in the slide\n  // See: https://github.com/bigbluebutton/bigbluebutton/pull/4431\n  if (oldPresentation && newPresentation && (oldPresentation._id === newPresentation._id)) {\n    return;\n  }\n\n  if (newPresentation) {\n    Presentations.update(newPresentation._id, newCurrent.modifier, newCurrent.callback);\n  }\n\n  if (oldPresentation) {\n    Presentations.update(oldPresentation._id, oldCurrent.modifier, oldCurrent.callback);\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresentationDownloadable(meetingId, podId,\n  presentationId, downloadable) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(downloadable, Boolean);\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  const modifier = {\n    $set: {\n      downloadable,\n    },\n  };\n\n  try {\n    const { numberAffected } = Presentations.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set downloadable status on presentation {${presentationId} in meeting {${meetingId}}`);\n    }\n  } catch (err) {\n    Logger.error(`Could not set downloadable on pres {${presentationId} in meeting {${meetingId}} ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handlePresentationAdded from './handlers/presentationAdded';\nimport handlePresentationRemove from './handlers/presentationRemove';\nimport handlePresentationCurrentSet from './handlers/presentationCurrentSet';\nimport handlePresentationConversionUpdate from './handlers/presentationConversionUpdate';\nimport handlePresentationDownloadableSet from './handlers/presentationDownloadableSet';\n\nRedisPubSub.on('PdfConversionInvalidErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationPageGeneratedEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationPageCountErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationConversionUpdateEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationConversionCompletedEvtMsg', handlePresentationAdded);\nRedisPubSub.on('RemovePresentationEvtMsg', handlePresentationRemove);\nRedisPubSub.on('SetCurrentPresentationEvtMsg', handlePresentationCurrentSet);\nRedisPubSub.on('SetPresentationDownloadableEvtMsg', handlePresentationDownloadableSet);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport removePresentation from './methods/removePresentation';\nimport setPresentation from './methods/setPresentation';\nimport setPresentationDownloadable from './methods/setPresentationDownloadable';\n\nMeteor.methods({\n  removePresentation,\n  setPresentation,\n  setPresentationDownloadable,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentations() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Presentation was requested by unauth connection ${this.connection.id}`);\n    return Presentations.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Presentations', { meetingId, userId });\n\n  return Presentations.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundPresentations = presentations.bind(this);\n  return boundPresentations(...args);\n}\n\nMeteor.publish('presentations', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Presentations = new Mongo.Collection('presentations');\n\nif (Meteor.isServer) {\n  // types of queries for the presentations:\n  // 1. meetingId, podId, id        ( 3 )\n  // 2. meetingId, id               ( 1 )\n  // 3. meetingId, id, current      ( 2 )\n  // 4. meetingId                   ( 1 )\n\n  Presentations._ensureIndex({ meetingId: 1, podId: 1, id: 1 });\n}\n\nexport default Presentations;\n","import { check } from 'meteor/check';\nimport Meetings from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport addScreenshare from '../modifiers/addScreenshare';\nimport Logger from '/imports/startup/server/logger';\nimport stopWatchingExternalVideo from '/imports/api/external-videos/server/methods/stopWatchingExternalVideo';\n\nexport default function handleScreenshareStarted({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  const meeting = Meetings.findOne({ meetingId });\n  const presenter = Users.findOne({ meetingId, presenter: true });\n  const presenterId = presenter && presenter.userId ? presenter.userId : 'system-screenshare-starting';\n  if (meeting && meeting.externalVideoUrl) {\n    Logger.info(`ScreenshareStarted: There is external video being shared. Stopping it due to presenter change, ${meeting.externalVideoUrl}`);\n    stopWatchingExternalVideo({ meetingId, requesterUserId: presenterId });\n  }\n  return addScreenshare(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport clearScreenshare from '../modifiers/clearScreenshare';\n\nexport default function handleScreenshareStopped({ body }, meetingId) {\n  const { screenshareConf } = body;\n\n  check(meetingId, String);\n  check(screenshareConf, String);\n\n  return clearScreenshare(meetingId, screenshareConf);\n}\n","import { check } from 'meteor/check';\nimport flat from 'flat';\nimport Logger from '/imports/startup/server/logger';\nimport Screenshare from '/imports/api/screenshare';\n\nexport default function addScreenshare(meetingId, body) {\n  check(meetingId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      screenshare: flat(body),\n    },\n  };\n\n  try {\n    const { numberAffected } = Screenshare.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Upserted screenshare id=${body.screenshareConf}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding screenshare to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Screenshare from '/imports/api/screenshare';\n\nexport default function clearScreenshare(meetingId, screenshareConf) {\n  try {\n    let numberAffected;\n\n    if (meetingId && screenshareConf) {\n      numberAffected = Screenshare.remove({ meetingId, 'screenshare.screenshareConf': screenshareConf });\n    } else {\n      numberAffected = Screenshare.remove({});\n    }\n\n    if (numberAffected) {\n      Logger.info(`removed screenshare meetingId=${meetingId} id=${screenshareConf}`);\n    }\n  } catch (err) {\n    Logger.error(`removing screenshare to collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleScreenshareStarted from './handlers/screenshareStarted';\nimport handleScreenshareStopped from './handlers/screenshareStopped';\n\nRedisPubSub.on('ScreenshareRtmpBroadcastStartedEvtMsg', handleScreenshareStarted);\nRedisPubSub.on('ScreenshareRtmpBroadcastStoppedEvtMsg', handleScreenshareStopped);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\n\nMeteor.methods({\n});\n","import Screenshare from '/imports/api/screenshare';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction screenshare() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Screenshare was requested by unauth connection ${this.connection.id}`);\n    return Screenshare.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Screenshare', { meetingId, userId });\n\n  return Screenshare.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundScreenshare = screenshare.bind(this);\n  return boundScreenshare(...args);\n}\n\nMeteor.publish('screenshare', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Screenshare = new Mongo.Collection('screenshare');\n\nif (Meteor.isServer) {\n  // types of queries for the screenshare:\n  // 1. meetingId\n\n  Screenshare._ensureIndex({ meetingId: 1 });\n}\n\nexport default Screenshare;\n","import { check } from 'meteor/check';\nimport changeCurrentSlide from '../modifiers/changeCurrentSlide';\n\nexport default function handleSlideChange({ body }, meetingId) {\n  const { pageId, presentationId, podId } = body;\n\n  check(pageId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  return changeCurrentSlide(meetingId, podId, presentationId, pageId);\n}\n","import { check } from 'meteor/check';\nimport resizeSlide from '../modifiers/resizeSlide';\n\nexport default function handleSlideResize({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  return resizeSlide(meetingId, body);\n}\n","import Presentations from '/imports/api/presentations';\nimport { Slides } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function switchSlide(slideNumber, podId) { // TODO-- send presentationId and SlideId\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetCurrentPagePubMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(slideNumber, Number);\n\n  const selector = {\n    meetingId,\n    podId,\n    current: true,\n  };\n\n  const Presentation = Presentations.findOne(selector);\n\n  if (!Presentation) {\n    throw new Meteor.Error('presentation-not-found', 'You need a presentation to be able to switch slides');\n  }\n\n  const Slide = Slides.findOne({\n    meetingId,\n    podId,\n    presentationId: Presentation.id,\n    num: slideNumber,\n  });\n\n  if (!Slide) {\n    throw new Meteor.Error('slide-not-found', `Slide number ${slideNumber} not found in the current presentation`);\n  }\n\n  const payload = {\n    podId,\n    presentationId: Presentation.id,\n    pageId: Slide.id,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import Presentations from '/imports/api/presentations';\nimport { Slides } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function zoomSlide(slideNumber, podId, widthRatio, heightRatio, x, y) { // TODO-- send presentationId and SlideId\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ResizeAndMovePagePubMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const selector = {\n    meetingId,\n    podId,\n    current: true,\n  };\n  const Presentation = Presentations.findOne(selector);\n\n  if (!Presentation) {\n    throw new Meteor.Error('presentation-not-found', 'You need a presentation to be able to switch slides');\n  }\n\n  const Slide = Slides.findOne({\n    meetingId,\n    podId,\n    presentationId: Presentation.id,\n    num: slideNumber,\n  });\n\n  if (!Slide) {\n    throw new Meteor.Error('slide-not-found', `Slide number ${slideNumber} not found in the current presentation`);\n  }\n\n  const payload = {\n    podId,\n    presentationId: Presentation.id,\n    pageId: Slide.id,\n    xOffset: x,\n    yOffset: y,\n    widthRatio,\n    heightRatio,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import probe from 'probe-image-size';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { Slides } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { SVG, PNG } from '/imports/utils/mimeTypes';\nimport calculateSlideData from '/imports/api/slides/server/helpers';\nimport addSlidePositions from './addSlidePositions';\n\nconst loadSlidesFromHttpAlways = Meteor.settings.private.app.loadSlidesFromHttpAlways || false;\n\nconst requestWhiteboardHistory = (meetingId, slideId) => {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'GetWhiteboardAnnotationsReqMsg';\n  const USER_ID = 'nodeJSapp';\n\n  const payload = {\n    whiteboardId: slideId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, USER_ID, payload);\n};\n\nconst SUPPORTED_TYPES = [SVG, PNG];\n\nconst fetchImageSizes = imageUri => probe(imageUri)\n  .then((result) => {\n    if (!SUPPORTED_TYPES.includes(result.mime)) {\n      throw new Meteor.Error('invalid-image-type', `received ${result.mime} expecting ${SUPPORTED_TYPES.join()}`);\n    }\n\n    return {\n      width: result.width,\n      height: result.height,\n    };\n  })\n  .catch((reason) => {\n    Logger.error(`Error parsing image size. ${reason}. uri=${imageUri}`);\n    return reason;\n  });\n\nexport default function addSlide(meetingId, podId, presentationId, slide) {\n  check(podId, String);\n  check(presentationId, String);\n\n  check(slide, {\n    id: String,\n    num: Number,\n    thumbUri: String,\n    swfUri: String,\n    txtUri: String,\n    svgUri: String,\n    current: Boolean,\n    xOffset: Number,\n    yOffset: Number,\n    widthRatio: Number,\n    heightRatio: Number,\n    content: String,\n  });\n\n  const {\n    id: slideId,\n    xOffset,\n    yOffset,\n    widthRatio,\n    heightRatio,\n    ...restSlide\n  } = slide;\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: slideId,\n  };\n\n  const imageUri = slide.svgUri || slide.pngUri;\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId },\n      { podId },\n      { presentationId },\n      { id: slideId },\n      { imageUri },\n      flat(restSlide),\n      { safe: true },\n    ),\n  };\n\n  const imageSizeUri = (loadSlidesFromHttpAlways ? imageUri.replace(/^https/i, 'http') : imageUri);\n\n  return fetchImageSizes(imageSizeUri)\n    .then(({ width, height }) => {\n      // there is a rare case when for a very long not-active meeting the presentation\n      // files just disappear and width/height can't be retrieved\n      if (width && height) {\n        // pre-calculating the width, height, and vieBox coordinates / dimensions\n        // to unload the client-side\n        const slideData = {\n          width,\n          height,\n          xOffset,\n          yOffset,\n          widthRatio,\n          heightRatio,\n        };\n        const slidePosition = calculateSlideData(slideData);\n\n        addSlidePositions(meetingId, podId, presentationId, slideId, slidePosition);\n      }\n\n      try {\n        const { insertedId, numberAffected } = Slides.upsert(selector, modifier);\n\n        requestWhiteboardHistory(meetingId, slideId);\n\n        if (insertedId) {\n          Logger.info(`Added slide id=${slideId} pod=${podId} presentation=${presentationId}`);\n        } else if (numberAffected) {\n          Logger.info(`Upserted slide id=${slideId} pod=${podId} presentation=${presentationId}`);\n        }\n      } catch (err) {\n        Logger.error(`Error on adding slide to collection: ${err}`);\n      }\n    })\n    .catch(reason => Logger.error(`Error parsing image size. ${reason}. slide=${slideId} uri=${imageUri}`));\n}\n","import { SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\n\nexport default function addSlidePositions(\n  meetingId,\n  podId,\n  presentationId,\n  slideId,\n  slidePosition,\n) {\n  check(meetingId, String);\n  check(podId, String);\n  check(presentationId, String);\n  check(slideId, String);\n\n  check(slidePosition, {\n    width: Number,\n    height: Number,\n    x: Number,\n    y: Number,\n    viewBoxWidth: Number,\n    viewBoxHeight: Number,\n  });\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: slideId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId },\n      { podId },\n      { presentationId },\n      { id: slideId },\n      flat(slidePosition),\n      { safe: true },\n    ),\n  };\n\n  try {\n    const { insertedId } = SlidePositions.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added slide position id=${slideId} pod=${podId} presentation=${presentationId}`);\n    } else {\n      Logger.info(`Upserted slide position id=${slideId} pod=${podId} presentation=${presentationId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding slide position to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { Slides } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function changeCurrentSlide(meetingId, podId, presentationId, slideId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(slideId, String);\n  check(podId, String);\n\n  const oldCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      presentationId,\n      current: true,\n    },\n    modifier: {\n      $set: { current: false },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Unsetting the current slide: ${err}`);\n        return;\n      }\n\n      Logger.info('Unsetted the current slide');\n    },\n  };\n\n  const newCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      presentationId,\n      id: slideId,\n    },\n    modifier: {\n      $set: { current: true },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Setting as current slide id=${slideId}: ${err}`);\n        return;\n      }\n\n      Logger.info(`Setted as current slide id=${slideId}`);\n    },\n  };\n\n  const oldSlide = Slides.findOne(oldCurrent.selector);\n  const newSlide = Slides.findOne(newCurrent.selector);\n\n  // if the oldCurrent and newCurrent have the same ids\n  if (oldSlide && newSlide && (oldSlide._id === newSlide._id)) {\n    return;\n  }\n\n  if (newSlide) {\n    Slides.update(newSlide._id, newCurrent.modifier, newCurrent.callback);\n  }\n\n  if (oldSlide) {\n    Slides.update(oldSlide._id, oldCurrent.modifier, oldCurrent.callback);\n  }\n}\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearSlides(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffectedSlidePositions = SlidePositions.remove({ meetingId });\n\n      const numberAffected = Slides.remove({ meetingId });\n\n      if (numberAffectedSlidePositions) {\n        Logger.info(`Cleared SlidePositions (${meetingId})`);\n      }\n\n      if (numberAffected) {\n        Logger.info(`Cleared Slides (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Slides (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffectedSlidePositions = SlidePositions.remove({ meetingId });\n\n      const numberAffected = Slides.remove({ meetingId });\n\n      if (numberAffectedSlidePositions) {\n        Logger.info(`Cleared SlidePositions (${meetingId})`);\n      }\n\n      if (numberAffected) {\n        Logger.info('Cleared Slides (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Slides (all). ${err}`);\n    }\n  }\n}\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport clearAnnotations from '/imports/api/annotations/server/modifiers/clearAnnotations';\n\nexport default function clearSlidesPresentation(meetingId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n\n  const selector = {\n    meetingId,\n    presentationId,\n  };\n\n  const whiteboardIds = Slides.find(selector, { fields: { id: 1 } }).map(row => row.id);\n\n  try {\n    SlidePositions.remove(selector);\n\n    const numberAffected = Slides.remove(selector);\n\n    if (numberAffected) {\n      whiteboardIds.forEach(whiteboardId => clearAnnotations(meetingId, whiteboardId));\n\n      Logger.info(`Removed Slides where presentationId=${presentationId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing Slides from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport calculateSlideData from '/imports/api/slides/server/helpers';\n\nexport default function resizeSlide(meetingId, slide) {\n  check(meetingId, String);\n\n  const {\n    podId,\n    presentationId,\n    pageId,\n    widthRatio,\n    heightRatio,\n    xOffset,\n    yOffset,\n  } = slide;\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: pageId,\n  };\n\n  // fetching the current slide data\n  // and pre-calculating the width, height, and vieBox coordinates / sizes\n  // to reduce the client-side load\n  const SlidePosition = SlidePositions.findOne(selector);\n\n  if (SlidePosition) {\n    const {\n      width,\n      height,\n    } = SlidePosition;\n\n    const slideData = {\n      width,\n      height,\n      xOffset,\n      yOffset,\n      widthRatio,\n      heightRatio,\n    };\n    const calculatedData = calculateSlideData(slideData);\n\n    const modifier = {\n      $set: calculatedData,\n    };\n\n    try {\n      const numberAffected = SlidePositions.update(selector, modifier);\n\n      if (numberAffected) {\n        Logger.debug(`Resized slide positions id=${pageId}`);\n      } else {\n        Logger.info(`No slide positions found with id=${pageId}`);\n      }\n    } catch (err) {\n      Logger.error(`Resizing slide positions id=${pageId}: ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleSlideResize from './handlers/slideResize';\nimport handleSlideChange from './handlers/slideChange';\n\nRedisPubSub.on('ResizeAndMovePageEvtMsg', handleSlideResize);\nRedisPubSub.on('SetCurrentPageEvtMsg', handleSlideChange);\n","\nconst calculateSlideData = (slideData) => {\n  const {\n    width, height, xOffset, yOffset, widthRatio, heightRatio,\n  } = slideData;\n\n  // calculating viewBox and offsets for the current presentation\n  return {\n    width,\n    height,\n    x: ((-xOffset * 2) * width) / 100,\n    y: ((-yOffset * 2) * height) / 100,\n    viewBoxWidth: (width * widthRatio) / 100,\n    viewBoxHeight: (height * heightRatio) / 100,\n  };\n};\n\nexport default calculateSlideData;\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport switchSlide from './methods/switchSlide';\nimport zoomSlide from './methods/zoomSlide';\n\nMeteor.methods({\n  switchSlide,\n  zoomSlide,\n});\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction slides() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Slides was requested by unauth connection ${this.connection.id}`);\n    return Slides.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Slides', { meetingId, userId });\n\n  return Slides.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundSlides = slides.bind(this);\n  return boundSlides(...args);\n}\n\nMeteor.publish('slides', publish);\n\nfunction slidePositions() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing SlidePositions was requested by unauth connection ${this.connection.id}`);\n    return SlidePositions.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing SlidePositions', { meetingId, userId });\n\n  return SlidePositions.find({ meetingId });\n}\n\nfunction publishPositions(...args) {\n  const boundSlidePositions = slidePositions.bind(this);\n  return boundSlidePositions(...args);\n}\n\nMeteor.publish('slide-positions', publishPositions);\n","import { Meteor } from 'meteor/meteor';\n\nconst Slides = new Mongo.Collection('slides');\nconst SlidePositions = new Mongo.Collection('slide-positions');\n\nif (Meteor.isServer) {\n  // types of queries for the slides:\n\n  // 1. meetingId                                  ( 1 )\n  // 2. meetingId, podId                           ( 1 )\n  // 3. meetingId, presentationId                  ( 1 )\n  // 3. meetingId, presentationId, num             ( 1 )\n  // 4. meetingId, podId, presentationId, id       ( 3 ) - incl. resizeSlide, which can be intense\n  // 5. meetingId, podId, presentationId, current  ( 1 )\n\n  Slides._ensureIndex({\n    meetingId: 1, podId: 1, presentationId: 1, id: 1,\n  });\n\n  SlidePositions._ensureIndex({\n    meetingId: 1, podId: 1, presentationId: 1, id: 1,\n  });\n}\n\nexport { Slides, SlidePositions };\n","import { check } from 'meteor/check';\nimport changeRole from '/imports/api/users/server/modifiers/changeRole';\n\nexport default function handleChangeRole(payload, meetingId) {\n  check(payload.body, Object);\n  check(meetingId, String);\n\n  const { userId, role, changedBy } = payload.body;\n\n  changeRole(role, userId, meetingId, changedBy);\n}\n","import Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport Users from '/imports/api/users';\n\nexport default function handleEmojiStatus({ body }, meetingId) {\n  const { userId, emoji } = body;\n\n  check(userId, String);\n  check(emoji, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      emojiTime: (new Date()).getTime(),\n      emoji,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Assigned user emoji status ${emoji} id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Assigning user emoji status: ${err}`);\n  }\n}\n","import Users from '/imports/api/users';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport changePresenter from '/imports/api/users/server/modifiers/changePresenter';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nfunction setPresenterInPodReqMsg(credentials) { // TODO-- switch to meetingId, etc\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetPresenterInPodReqMsg';\n\n  const { meetingId, requesterUserId, presenterId } = credentials;\n\n  const payload = {\n    podId: 'DEFAULT_PRESENTATION_POD',\n    nextPresenterId: presenterId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n\nexport default function handlePresenterAssigned({ body }, meetingId) {\n  const { presenterId, assignedBy } = body;\n\n  changePresenter(true, presenterId, meetingId, assignedBy);\n\n  const selector = {\n    meetingId,\n    userId: { $ne: presenterId },\n    presenter: true,\n  };\n\n  const prevPresenter = Users.findOne(selector);\n\n  // no previous presenters\n  // The below code is responsible for set Meeting presenter to be default pod presenter as well.\n  // It's been handled here because right now akka-apps don't handle all cases scenarios.\n  if (!prevPresenter) {\n    const setPresenterPayload = {\n      meetingId,\n      requesterUserId: assignedBy,\n      presenterId,\n    };\n\n    const defaultPodSelector = {\n      meetingId,\n      podId: 'DEFAULT_PRESENTATION_POD',\n    };\n    const currentDefaultPodPresenter = PresentationPods.findOne(defaultPodSelector);\n    const { currentPresenterId } = currentDefaultPodPresenter;\n\n    if (currentPresenterId === '') {\n      return setPresenterInPodReqMsg(setPresenterPayload);\n    }\n\n    const oldPresenter = Users.findOne({ meetingId, userId: currentPresenterId });\n\n    if (oldPresenter?.userId !== currentPresenterId) {\n      return setPresenterInPodReqMsg(setPresenterPayload);\n    }\n\n    return true;\n  }\n\n  changePresenter(false, prevPresenter.userId, meetingId, assignedBy);\n}\n","import { check } from 'meteor/check';\n\nimport removeUser from '../modifiers/removeUser';\n\nexport default function handleRemoveUser({ body }, meetingId) {\n  const { intId } = body;\n\n  check(meetingId, String);\n  check(intId, String);\n\n  return removeUser(meetingId, intId);\n}\n","import userEjected from '../modifiers/userEjected';\n\nexport default function handleEjectedUser({ header, body }) {\n  const { meetingId, userId } = header;\n  const { reasonCode } = body;\n\n  userEjected(meetingId, userId, reasonCode);\n}\n","import { check } from 'meteor/check';\nimport userInactivityInspect from '../modifiers/userInactivityInspect';\n\nexport default function handleUserInactivityInspect({ header, body }, meetingId) {\n  const { userId } = header;\n  const { responseDelay } = body;\n\n  check(userId, String);\n  check(responseDelay, Match.Integer);\n  check(meetingId, String);\n\n\n  userInactivityInspect(userId, responseDelay);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userJoin(meetingId, userId, authToken) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserJoinMeetingReqMsg';\n\n  check(authToken, String);\n\n  const payload = {\n    userId,\n    authToken,\n    clientType: 'HTML5',\n  };\n\n  Logger.info(`User='${userId}' is joining meeting='${meetingId}' authToken='${authToken}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\n\nimport addUser from '../modifiers/addUser';\n\nexport default function handleUserJoined({ body }, meetingId) {\n  const user = body;\n\n  check(user, Object);\n\n  addUser(meetingId, user);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport userJoin from './userJoin';\nimport pendingAuthenticationsStore from '../store/pendingAuthentications';\nimport createDummyUser from '../modifiers/createDummyUser';\n\nimport upsertValidationState from '/imports/api/auth-token-validation/server/modifiers/upsertValidationState';\nimport { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst clearOtherSessions = (sessionUserId, current = false) => {\n  const serverSessions = Meteor.server.sessions;\n  Object.keys(serverSessions)\n    .filter(i => serverSessions[i].userId === sessionUserId)\n    .filter(i => i !== current)\n    .forEach(i => serverSessions[i].close());\n};\n\nexport default function handleValidateAuthToken({ body }, meetingId) {\n  const {\n    userId,\n    valid,\n    authToken,\n    waitForApproval,\n  } = body;\n\n  check(userId, String);\n  check(authToken, String);\n  check(valid, Boolean);\n  check(waitForApproval, Boolean);\n\n  const pendingAuths = pendingAuthenticationsStore.take(meetingId, userId, authToken);\n\n  if (!valid) {\n    pendingAuths.forEach(\n      (pendingAuth) => {\n        try {\n          const { methodInvocationObject } = pendingAuth;\n          const connectionId = methodInvocationObject.connection.id;\n\n          upsertValidationState(meetingId, userId, ValidationStates.INVALID, connectionId);\n\n          // Schedule socket disconnection for this user, giving some time for client receiving the reason of disconnection\n          Meteor.setTimeout(() => {\n            methodInvocationObject.connection.close();\n          }, 2000);\n\n          Logger.info(`Closed connection ${connectionId} due to invalid auth token.`);\n        } catch (e) {\n          Logger.error(`Error closing socket for meetingId '${meetingId}', userId '${userId}', authToken ${authToken}`);\n        }\n      },\n    );\n\n    return;\n  }\n\n  if (valid) {\n    // Define user ID on connections\n    pendingAuths.forEach(\n      (pendingAuth) => {\n        const { methodInvocationObject } = pendingAuth;\n\n        /* Logic migrated from validateAuthToken method ( postponed to only run in case of success response ) - Begin */\n        const sessionId = `${meetingId}--${userId}`;\n\n        methodInvocationObject.setUserId(sessionId);\n\n        const User = Users.findOne({\n          meetingId,\n          userId,\n        });\n\n        if (!User) {\n          createDummyUser(meetingId, userId, authToken);\n        }\n\n        upsertValidationState(meetingId, userId, ValidationStates.VALIDATED, methodInvocationObject.connection.id);\n\n        /* End of logic migrated from validateAuthToken */\n      },\n    );\n  }\n\n  const selector = {\n    meetingId,\n    userId,\n    clientType: 'HTML5',\n  };\n\n  const User = Users.findOne(selector);\n\n  // If we dont find the user on our collection is a flash user and we can skip\n  if (!User) return;\n\n  // Publish user join message\n  if (valid && !waitForApproval) {\n    Logger.info('User=', User);\n    userJoin(meetingId, userId, User.authToken);\n  }\n\n  const modifier = {\n    $set: {\n      validated: valid,\n      approved: !waitForApproval,\n      loginTime: Date.now(),\n      inactivityCheck: false,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      if (valid) {\n        const sessionUserId = `${meetingId}-${userId}`;\n        const currentConnectionId = User.connectionId ? User.connectionId : false;\n        clearOtherSessions(sessionUserId, currentConnectionId);\n      }\n\n      Logger.info(`Validated auth token as ${valid} user=${userId} meeting=${meetingId}`);\n    } else {\n      Logger.info('No auth to validate');\n    }\n  } catch (err) {\n    Logger.error(`Validating auth token: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function assignPresenter(userId) { // TODO-- send username from client side\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'AssignPresenterReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(userId, String);\n\n  const User = Users.findOne({\n    meetingId,\n    userId,\n  });\n\n  if (!User) {\n    throw new Meteor.Error('user-not-found', 'You need a valid user to be able to set presenter');\n  }\n\n  const payload = {\n    newPresenterId: userId,\n    newPresenterName: User.name,\n    assignedBy: requesterUserId,\n    requesterId: requesterUserId,\n  };\n\n  Logger.verbose('User set as presenter', { userId, meetingId, setBy: requesterUserId });\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function changeRole(userId, role) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeUserRoleCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(userId, String);\n  check(role, String);\n\n  const payload = {\n    userId,\n    role,\n    changedBy: requesterUserId,\n  };\n\n  Logger.verbose('Changed user role', {\n    userId, role, changedBy: requesterUserId, meetingId,\n  });\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Users from '/imports/api/users';\nimport BannedUsers from '/imports/api/users/server/store/bannedUsers';\n\nexport default function removeUser(userId, banUser) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EjectUserFromMeetingCmdMsg';\n\n  const { meetingId, requesterUserId: ejectedBy } = extractCredentials(this.userId);\n\n  check(userId, String);\n\n  const payload = {\n    userId,\n    ejectedBy,\n    banUser,\n  };\n\n  const removedUser = Users.findOne({ meetingId, userId }, { extId: 1 });\n\n  if (banUser && removedUser) BannedUsers.add(meetingId, removedUser.extId);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, ejectedBy, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setEmojiStatus(userId, status) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeUserEmojiCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(userId, String);\n\n  const payload = {\n    emoji: status,\n    userId,\n  };\n\n  Logger.verbose('User emoji status updated', {\n    userId, status, requesterUserId, meetingId,\n  });\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport setEffectiveConnectionType from '../modifiers/setUserEffectiveConnectionType';\n\nexport default function setUserEffectiveConnectionType(effectiveConnectionType) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeUserEffectiveConnectionMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(effectiveConnectionType, String);\n\n  const payload = {\n    meetingId,\n    userId: requesterUserId,\n    effectiveConnectionType,\n  };\n\n  setEffectiveConnectionType(meetingId, requesterUserId, effectiveConnectionType);\n\n  Logger.verbose('Updated user effective connection', { requesterUserId, effectiveConnectionType });\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function toggleUserLock(userId, lock) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'LockUserInMeetingCmdMsg';\n\n  const { meetingId, requesterUserId: lockedBy } = extractCredentials(this.userId);\n\n  check(lockedBy, String);\n  check(userId, String);\n  check(lock, Boolean);\n\n  const payload = {\n    lockedBy,\n    userId,\n    lock,\n  };\n\n  Logger.verbose('Updated lock status for user', {\n    meetingId, userId, lock, lockedBy,\n  });\n\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, lockedBy, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport Users from '/imports/api/users';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userActivitySign() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserActivitySignCmdMsg';\n  const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n  const payload = {\n    userId,\n  };\n\n  const selector = {\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      inactivityCheck: false,\n    },\n  };\n\n  Users.update(selector, modifier); // TODO-- we should move this to a modifier\n\n  Logger.info(`User ${userId} sent a activity sign for meeting ${meetingId}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Users from '/imports/api/users';\n\nexport default function userLeaving(meetingId, userId, connectionId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserLeaveReqMsg';\n\n  check(userId, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const User = Users.findOne(selector);\n\n  if (!User) {\n    Logger.info(`Skipping userLeaving. Could not find ${userId} in ${meetingId}`);\n    return;\n  }\n\n  const auth = AuthTokenValidation.findOne({\n    meetingId,\n    userId,\n  }, { sort: { updatedAt: -1 } });\n\n  // If the current user connection is not the same that triggered the leave we skip\n  if (auth?.connectionId !== connectionId) {\n    Logger.info(`Skipping userLeaving. User connectionId=${User.connectionId} is different from requester connectionId=${connectionId}`);\n    return false;\n  }\n\n  const payload = {\n    userId,\n    sessionId: meetingId,\n  };\n\n  Logger.info(`User '${userId}' is leaving meeting '${meetingId}'`);\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nexport default function userLeftMeeting() { // TODO-- spread the code to method/modifier/handler\n  // so we don't update the db in a method\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n  };\n\n  try {\n    const numberAffected = Users.update(selector, { $set: { loggedOut: true } });\n\n    if (numberAffected) {\n      Logger.info(`user left id=${requesterUserId} meeting=${meetingId}`);\n    }\n    ClientConnections.removeClientConnection(this.userId, this.connection.id);\n\n    Users.update(\n      selector,\n      {\n        $set: {\n          loggedOut: true,\n        },\n      },\n      cb,\n    );\n  } catch (err) {\n    Logger.error(`leaving dummy user to collection: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\nimport upsertValidationState from '/imports/api/auth-token-validation/server/modifiers/upsertValidationState';\nimport { ValidationStates } from '/imports/api/auth-token-validation';\nimport pendingAuthenticationsStore from '../store/pendingAuthentications';\nimport BannedUsers from '../store/bannedUsers';\nimport Users from '/imports/api/users';\n\nexport default function validateAuthToken(meetingId, requesterUserId, requesterToken, externalId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ValidateAuthTokenReqMsg';\n\n  // Check if externalId is banned from the meeting\n  if (externalId) {\n    if (BannedUsers.has(meetingId, externalId)) {\n      Logger.warn(`A banned user with extId ${externalId} tried to enter in meeting ${meetingId}`);\n      return { invalid: true, reason: 'User has been banned', error_type: 'user_banned' };\n    }\n  }\n\n  // Prevent users who have left or been ejected to use the same sessionToken again.\n  const isUserInvalid = Users.findOne({\n    meetingId,\n    userId: requesterUserId,\n    authToken: requesterToken,\n    $or: [{ ejected: true }, { loggedOut: true }],\n  });\n\n  if (isUserInvalid) {\n    Logger.warn(`An invalid sessionToken tried to validateAuthToken meetingId=${meetingId} authToken=${requesterToken}`);\n    return {\n      invalid: true,\n      reason: `User has an invalid sessionToken due to ${isUserInvalid.ejected ? 'ejection' : 'log out'}`,\n      error_type: `invalid_session_token_due_to_${isUserInvalid.ejected ? 'eject' : 'log_out'}`,\n    };\n  }\n\n  ClientConnections.add(`${meetingId}--${requesterUserId}`, this.connection);\n\n  // Store reference of methodInvocationObject ( to postpone the connection userId definition )\n  pendingAuthenticationsStore.add(meetingId, requesterUserId, requesterToken, this);\n  upsertValidationState(meetingId, requesterUserId, ValidationStates.VALIDATING, this.connection.id);\n\n  const payload = {\n    userId: requesterUserId,\n    authToken: requesterToken,\n  };\n\n  Logger.info(`User '${requesterUserId}' is trying to validate auth token for meeting '${meetingId}' from connection '${this.connection.id}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport addUser from '/imports/api/users/server/modifiers/addUser';\n\n\nexport default function addDialInUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, Object);\n\n  const USER_CONFIG = Meteor.settings.public.user;\n  const ROLE_VIEWER = USER_CONFIG.role_viewer;\n\n  const { intId, callerName } = voiceUser;\n\n  const voiceOnlyUser = {\n    intId,\n    extId: intId, // TODO\n    name: callerName,\n    role: ROLE_VIEWER.toLowerCase(),\n    guest: false,\n    authed: true,\n    waitingForAcceptance: false,\n    guestStatus: 'ALLOW',\n    emoji: 'none',\n    presenter: false,\n    locked: false, // TODO\n    avatar: '',\n    clientType: 'dial-in-user',\n  };\n\n  return addUser(meetingId, voiceOnlyUser);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Meetings from '/imports/api/meetings';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport _ from 'lodash';\nimport SanitizeHTML from 'sanitize-html';\n\nimport stringHash from 'string-hash';\nimport flat from 'flat';\n\nimport addVoiceUser from '/imports/api/voice-users/server/modifiers/addVoiceUser';\n\nconst COLOR_LIST = [\n  '#7b1fa2', '#6a1b9a', '#4a148c', '#5e35b1', '#512da8', '#4527a0',\n  '#311b92', '#3949ab', '#303f9f', '#283593', '#1a237e', '#1976d2', '#1565c0',\n  '#0d47a1', '#0277bd', '#01579b',\n];\n\nexport default function addUser(meetingId, userData) {\n  const user = userData;\n  const sanitizedName = SanitizeHTML(userData.name, {\n    allowedTags: [],\n    allowedAttributes: {},\n  });\n  // if user typed only tags\n  user.name = sanitizedName.length === 0\n    ? _.escape(userData.name)\n    : sanitizedName;\n\n  check(meetingId, String);\n\n  check(user, {\n    intId: String,\n    extId: String,\n    name: String,\n    role: String,\n    guest: Boolean,\n    authed: Boolean,\n    waitingForAcceptance: Match.Maybe(Boolean),\n    guestStatus: String,\n    emoji: String,\n    presenter: Boolean,\n    locked: Boolean,\n    avatar: String,\n    clientType: String,\n  });\n\n  const userId = user.intId;\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n  const Meeting = Meetings.findOne({ meetingId });\n\n  /* While the akka-apps dont generate a color we just pick one\n    from a list based on the userId */\n  const color = COLOR_LIST[stringHash(user.intId) % COLOR_LIST.length];\n\n  const modifier = {\n    $set: Object.assign(\n      {\n        meetingId,\n        sortName: user.name.trim().toLowerCase(),\n        color,\n        breakoutProps: {\n          isBreakoutUser: Meeting.meetingProp.isBreakout,\n          parentId: Meeting.breakoutProps.parentId,\n        },\n        effectiveConnectionType: null,\n        inactivityCheck: false,\n        responseDelay: 0,\n        loggedOut: false,\n      },\n      flat(user),\n    ),\n  };\n\n  // Only add an empty VoiceUser if there isn't one already and if the user coming in isn't a\n  // dial-in user. We want to avoid overwriting good data\n  if (user.clientType !== 'dial-in-user' && !VoiceUsers.findOne({ meetingId, intId: userId })) {\n    addVoiceUser(meetingId, {\n      voiceUserId: '',\n      intId: userId,\n      callerName: user.name,\n      callerNum: '',\n      muted: false,\n      talking: false,\n      callingWith: '',\n      listenOnly: false,\n      voiceConf: '',\n      joined: false,\n    });\n  }\n\n  try {\n    const { insertedId } = Users.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added user id=${userId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted user id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding user to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Meetings from '/imports/api/meetings';\nimport stopWatchingExternalVideo from '/imports/api/external-videos/server/methods/stopWatchingExternalVideo';\n\nexport default function changePresenter(presenter, userId, meetingId, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      presenter,\n    },\n  };\n\n  try {\n    const meeting = Meetings.findOne({ meetingId });\n    if (meeting && meeting.externalVideoUrl) {\n      Logger.info(`ChangePresenter:There is external video being shared. Stopping it due to presenter change, ${meeting.externalVideoUrl}`);\n      stopWatchingExternalVideo({ meetingId, requesterUserId: userId });\n    }\n\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed presenter=${presenter} id=${userId} meeting=${meetingId}`\n        + `${changedBy ? ` changedBy=${changedBy}` : ''}`);\n    }\n  } catch (err) {\n    Logger.error(`Changed user role: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function changeRole(role, userId, meetingId, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      role,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed user role=${role} id=${userId} meeting=${meetingId}`\n        + `${changedBy ? ` changedBy=${changedBy}` : ''}`);\n    }\n  } catch (err) {\n    Logger.error(`Changed user role: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users/index';\n\nexport default function clearUsers(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Users.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Users (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error clearing Users (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Users.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Users (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error clearing Users (all). ${err}`);\n    }\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function createDummyUser(meetingId, userId, authToken) {\n  check(meetingId, String);\n  check(userId, String);\n  check(authToken, String);\n\n  const User = Users.findOne({ meetingId, userId });\n  if (User) {\n    throw new Meteor.Error('existing-user', 'Tried to create a dummy user for an existing user');\n  }\n\n  const doc = {\n    meetingId,\n    userId,\n    authToken,\n    clientType: 'HTML5',\n    validated: null,\n  };\n\n  try {\n    const insertedId = Users.insert(doc);\n\n    if (insertedId) {\n      Logger.info(`Created dummy user id=${userId} token=${authToken} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Creating dummy user to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport VideoStreams from '/imports/api/video-streams';\nimport Logger from '/imports/startup/server/logger';\nimport stopWatchingExternalVideo from '/imports/api/external-videos/server/methods/stopWatchingExternalVideo';\nimport clearUserInfoForRequester from '/imports/api/users-infos/server/modifiers/clearUserInfoForRequester';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nconst clearAllSessions = (sessionUserId) => {\n  const serverSessions = Meteor.server.sessions;\n  Object.keys(serverSessions)\n    .filter(i => serverSessions[i].userId === sessionUserId)\n    .forEach(i => serverSessions[i].close());\n};\n\nexport default function removeUser(meetingId, userId) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const userToRemove = Users.findOne({ userId, meetingId });\n\n  if (userToRemove) {\n    const { presenter } = userToRemove;\n    if (presenter) {\n      stopWatchingExternalVideo({ meetingId, requesterUserId: userId });\n    }\n  }\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  try {\n    VideoStreams.remove({ meetingId, userId });\n    const sessionUserId = `${meetingId}-${userId}`;\n\n    ClientConnections.removeClientConnection(`${meetingId}--${userId}`);\n\n    clearAllSessions(sessionUserId);\n\n    clearUserInfoForRequester(meetingId, userId);\n\n    Users.remove(selector);\n\n    Logger.info(`Removed user id=${userId} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Removing user from Users collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setUserEffectiveConnectionType(meetingId, userId, effectiveConnectionType) {\n  check(meetingId, String);\n  check(userId, String);\n  check(effectiveConnectionType, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    effectiveConnectionType: { $ne: effectiveConnectionType },\n  };\n\n  const modifier = {\n    $set: {\n      effectiveConnectionType,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated user ${userId} effective connection to ${effectiveConnectionType} in meeting ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating user ${userId}: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport clearUserInfoForRequester from '/imports/api/users-infos/server/modifiers/clearUserInfoForRequester';\n\nexport default function userEjected(meetingId, userId, ejectedReason) {\n  check(meetingId, String);\n  check(userId, String);\n  check(ejectedReason, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      ejected: true,\n      ejectedReason,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      clearUserInfoForRequester(meetingId, userId);\n      Logger.info(`Ejected user id=${userId} meeting=${meetingId} reason=${ejectedReason}`);\n    }\n  } catch (err) {\n    Logger.error(`Ejecting user from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function userInactivityInspect(userId, responseDelay) {\n  check(userId, String);\n  check(responseDelay, Match.Integer);\n\n  const selector = {\n    userId,\n    inactivityCheck: false,\n  };\n\n  const modifier = {\n    $set: {\n      inactivityCheck: true,\n      responseDelay,\n    },\n  };\n\n  try {\n    const { numberAffected } = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated user ${userId} with inactivity inspect`);\n    }\n  } catch (err) {\n    Logger.error(`Inactivity check for user ${userId}: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\n\nclass BannedUsers {\n  constructor() {\n    Logger.debug('BannedUsers :: Initializing');\n    this.store = {};\n  }\n\n  init(meetingId) {\n    Logger.debug('BannedUsers :: init', { meetingId });\n\n    if (!this.store[meetingId]) this.store[meetingId] = new Set();\n  }\n\n  add(meetingId, externalId) {\n    Logger.debug('BannedUsers :: add', { meetingId, externalId });\n    if (!this.store[meetingId]) this.store[meetingId] = new Set();\n\n    this.store[meetingId].add(externalId);\n  }\n\n  delete(meetingId) {\n    Logger.debug('BannedUsers :: delete', { meetingId });\n    delete this.store[meetingId];\n  }\n\n  has(meetingId, externalId) {\n    Logger.debug('BannedUsers :: has', { meetingId, externalId });\n    if (!this.store[meetingId]) this.store[meetingId] = new Set();\n\n    return this.store[meetingId].has(externalId);\n  }\n}\n\nexport default new BannedUsers();\n","import Logger from '/imports/startup/server/logger';\n\nclass PendingAuthentitcations {\n  constructor() {\n    Logger.debug('PendingAuthentitcations :: constructor');\n    this.store = [];\n  }\n\n  generateKey(meetingId, userId, authToken) {\n    // Protect against separator injection\n    meetingId = meetingId.replace(/ /g, '');\n    userId = userId.replace(/ /g, '');\n    authToken = authToken.replace(/ /g, '');\n\n    // Space separated key\n    return `${meetingId} ${userId} ${authToken}`;\n  }\n\n  add(meetingId, userId, authToken, methodInvocationObject) {\n    Logger.debug('PendingAuthentitcations :: add', { meetingId, userId, authToken });\n    this.store.push({\n      key: this.generateKey(meetingId, userId, authToken),\n      meetingId,\n      userId,\n      authToken,\n      methodInvocationObject,\n    });\n  }\n\n  take(meetingId, userId, authToken) {\n    const key = this.generateKey(meetingId, userId, authToken);\n    Logger.debug('PendingAuthentitcations :: take', {\n      key, meetingId, userId, authToken,\n    });\n\n    // find matches\n    const matches = this.store.filter(e => e.key === key);\n\n    // remove matches (if any)\n    if (matches.length) {\n      this.store = this.store.filter(e => e.key !== key);\n    }\n\n    // return matches\n    return matches;\n  }\n}\nexport default new PendingAuthentitcations();\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleRemoveUser from './handlers/removeUser';\nimport handleUserJoined from './handlers/userJoined';\nimport handleValidateAuthToken from './handlers/validateAuthToken';\nimport handlePresenterAssigned from './handlers/presenterAssigned';\nimport handleEmojiStatus from './handlers/emojiStatus';\n// import handleGetUsers from './handlers/getUsers';\nimport handleUserEjected from './handlers/userEjected';\nimport handleChangeRole from './handlers/changeRole';\nimport handleUserInactivityInspect from './handlers/userInactivityInspect';\n\nRedisPubSub.on('PresenterAssignedEvtMsg', handlePresenterAssigned);\nRedisPubSub.on('UserJoinedMeetingEvtMsg', handleUserJoined);\nRedisPubSub.on('UserLeftMeetingEvtMsg', handleRemoveUser);\nRedisPubSub.on('ValidateAuthTokenRespMsg', handleValidateAuthToken);\nRedisPubSub.on('UserEmojiChangedEvtMsg', handleEmojiStatus);\n// RedisPubSub.on('SyncGetUsersMeetingRespMsg', handleGetUsers);\nRedisPubSub.on('UserEjectedFromMeetingEvtMsg', handleUserEjected);\nRedisPubSub.on('UserRoleChangedEvtMsg', handleChangeRole);\nRedisPubSub.on('UserInactivityInspectMsg', handleUserInactivityInspect);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport validateAuthToken from './methods/validateAuthToken';\nimport setEmojiStatus from './methods/setEmojiStatus';\nimport assignPresenter from './methods/assignPresenter';\nimport changeRole from './methods/changeRole';\nimport removeUser from './methods/removeUser';\nimport toggleUserLock from './methods/toggleUserLock';\nimport setUserEffectiveConnectionType from './methods/setUserEffectiveConnectionType';\nimport userActivitySign from './methods/userActivitySign';\nimport userLeftMeeting from './methods/userLeftMeeting';\n\nMeteor.methods({\n  setEmojiStatus,\n  assignPresenter,\n  changeRole,\n  removeUser,\n  validateAuthToken,\n  toggleUserLock,\n  setUserEffectiveConnectionType,\n  userActivitySign,\n  userLeftMeeting,\n});\n","import Users from '/imports/api/users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction currentUser() {\n  if (!this.userId) {\n    return Users.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n  };\n\n  const options = {\n    fields: {\n      user: false,\n      authToken: false, // Not asking for authToken from client side but also not exposing it\n    },\n  };\n\n  return Users.find(selector, options);\n}\n\nfunction publishCurrentUser(...args) {\n  const boundUsers = currentUser.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('current-user', publishCurrentUser);\n\nfunction users(role) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Users was requested by unauth connection ${this.connection.id}`);\n    return Users.find({ meetingId: '' });\n  }\n\n  if (!this.userId) {\n    return Users.find({ meetingId: '' });\n  }\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing Users for ${meetingId} ${userId}`);\n\n  const selector = {\n    $or: [\n      { meetingId },\n    ],\n  };\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    selector.$or.push({\n      'breakoutProps.isBreakoutUser': true,\n      'breakoutProps.parentId': meetingId,\n    });\n  }\n\n  const options = {\n    fields: {\n      authToken: false,\n    },\n  };\n\n  Logger.debug('Publishing Users', { meetingId, userId });\n\n  return Users.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundUsers = users.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('users', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Users = new Mongo.Collection('users');\n\nif (Meteor.isServer) {\n  // types of queries for the users:\n  // 1. meetingId\n  // 2. meetingId, userId\n\n  Users._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default Users;\n","import { check } from 'meteor/check';\nimport addUserInfo from '../modifiers/addUserInfo';\n\nexport default function handleUserInformation({ header, body }) {\n  check(body, Object);\n  check(header, Object);\n\n  const { userInfo } = body;\n  const { userId, meetingId } = header;\n\n  check(userInfo, Array);\n  check(userId, String);\n  check(meetingId, String);\n\n  return addUserInfo(userInfo, userId, meetingId);\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function removeUserInformation() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  const selector = {\n    meetingId,\n    requesterUserId,\n  };\n\n  try {\n    const numberAffected = UserInfos.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed user information: requester id=${requesterUserId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing user information from collection: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function getUserInformation(externalUserId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toThirdParty;\n  const EVENT_NAME = 'LookUpUserReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(externalUserId, String);\n\n  const payload = {\n    externalUserId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserInfo(userInfo, requesterUserId, meetingId) {\n  const info = {\n    meetingId,\n    requesterUserId,\n    userInfo,\n  };\n\n  try {\n    const numberAffected = UserInfos.insert(info);\n\n    if (numberAffected) {\n      Logger.info(`Added user information: requester id=${requesterUserId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding user information to collection: ${err}`);\n  }\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersInfo(meetingId) {\n  try {\n    const numberAffected = UserInfos.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Infos (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing User Infos (${meetingId}). ${err}`);\n  }\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersInfoForRequester(meetingId, requesterUserId) {\n  try {\n    const numberAffected = UserInfos.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Infos requested by user=${requesterUserId}`);\n    }\n  } catch (err) {\n    Logger.info(`Error on clearing User Infos requested by user=${requesterUserId}. ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleUserInformation from './handlers/userInformation';\n\nRedisPubSub.on('LookUpUserRespMsg', handleUserInformation);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport requestUserInformation from './methods/requestUserInformation';\nimport removeUserInformation from './methods/removeUserInformation';\n\nMeteor.methods({\n  requestUserInformation,\n  removeUserInformation,\n});\n","import { Meteor } from 'meteor/meteor';\nimport UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction userInfos() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing UserInfos was requested by unauth connection ${this.connection.id}`);\n    return UserInfos.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId: requesterUserId } = tokenValidation;\n\n  Logger.debug('Publishing UserInfos requested', { meetingId, requesterUserId });\n\n  return UserInfos.find({ meetingId, requesterUserId });\n}\n\nfunction publish(...args) {\n  const boundUserInfos = userInfos.bind(this);\n  return boundUserInfos(...args);\n}\n\nMeteor.publish('users-infos', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst UserInfos = new Mongo.Collection('users-infos');\n\nif (Meteor.isServer) {\n  UserInfos._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default UserInfos;\n","import { check } from 'meteor/check';\nimport addUserSetting from '/imports/api/users-settings/server/modifiers/addUserSetting';\nimport logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst oldParameters = {\n  askForFeedbackOnLogout: 'bbb_ask_for_feedback_on_logout',\n  autoJoin: 'bbb_auto_join_audio',\n  autoShareWebcam: 'bbb_auto_share_webcam',\n  autoSwapLayout: 'bbb_auto_swap_layout',\n  clientTitle: 'bbb_client_title',\n  customStyle: 'bbb_custom_style',\n  customStyleUrl: 'bbb_custom_style_url',\n  displayBrandingArea: 'bbb_display_branding_area',\n  enableScreensharing: 'bbb_enable_screen_sharing',\n  enableVideo: 'bbb_enable_video',\n  forceListenOnly: 'bbb_force_listen_only',\n  hidePresentation: 'bbb_hide_presentation',\n  listenOnlyMode: 'bbb_listen_only_mode',\n  multiUserPenOnly: 'bbb_multi_user_pen_only',\n  multiUserTools: 'bbb_multi_user_tools',\n  outsideToggleRecording: 'bbb_outside_toggle_recording',\n  outsideToggleSelfVoice: 'bbb_outside_toggle_self_voice',\n  presenterTools: 'bbb_presenter_tools',\n  shortcuts: 'bbb_shortcuts',\n  skipCheck: 'bbb_skip_check_audio',\n};\n\nconst oldParametersKeys = Object.keys(oldParameters);\n\nconst currentParameters = [\n  // APP\n  'bbb_ask_for_feedback_on_logout',\n  'bbb_override_default_locale',\n  'bbb_auto_join_audio',\n  'bbb_client_title',\n  'bbb_force_listen_only',\n  'bbb_listen_only_mode',\n  'bbb_skip_check_audio',\n  // BRANDING\n  'bbb_display_branding_area',\n  // SHORTCUTS\n  'bbb_shortcuts',\n  // KURENTO\n  'bbb_auto_share_webcam',\n  'bbb_preferred_camera_profile',\n  'bbb_enable_screen_sharing',\n  'bbb_enable_video',\n  'bbb_record_video',\n  'bbb_skip_video_preview',\n  'bbb_mirror_own_webcam',\n  // PRESENTATION\n  'bbb_force_restore_presentation_on_new_events',\n  // WHITEBOARD\n  'bbb_multi_user_pen_only',\n  'bbb_presenter_tools',\n  'bbb_multi_user_tools',\n  // SKINNING/THEMMING\n  'bbb_custom_style',\n  'bbb_custom_style_url',\n  // LAYOUT\n  'bbb_auto_swap_layout',\n  'bbb_hide_presentation',\n  'bbb_show_participants_on_login',\n  'bbb_show_public_chat_on_login',\n  // OUTSIDE COMMANDS\n  'bbb_outside_toggle_self_voice',\n  'bbb_outside_toggle_recording',\n];\n\nfunction valueParser(val) {\n  try {\n    const parsedValue = JSON.parse(val.toLowerCase().trim());\n    return parsedValue;\n  } catch (error) {\n    logger.warn(`addUserSettings:Parameter ${val} could not be parsed (was not json)`);\n    return val;\n  }\n}\n\nexport default function addUserSettings(settings) {\n  check(settings, [Object]);\n\n  const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n\n  let parameters = {};\n\n  settings.forEach((el) => {\n    const settingKey = Object.keys(el).shift();\n    const normalizedKey = settingKey.trim();\n\n    if (currentParameters.includes(normalizedKey)) {\n      if (!Object.keys(parameters).includes(normalizedKey)) {\n        parameters = {\n          [normalizedKey]: valueParser(el[settingKey]),\n          ...parameters,\n        };\n      } else {\n        parameters[normalizedKey] = el[settingKey];\n      }\n      return;\n    }\n\n    if (oldParametersKeys.includes(normalizedKey)) {\n      const matchingNewKey = oldParameters[normalizedKey];\n      if (!Object.keys(parameters).includes(matchingNewKey)) {\n        parameters = {\n          [matchingNewKey]: valueParser(el[settingKey]),\n          ...parameters,\n        };\n      }\n      return;\n    }\n\n    logger.warn(`Parameter ${normalizedKey} not handled`);\n  });\n\n  const settingsAdded = [];\n  Object.entries(parameters).forEach((el) => {\n    const setting = el[0];\n    const value = el[1];\n    settingsAdded.push(addUserSetting(meetingId, userId, setting, value));\n  });\n\n  return settingsAdded;\n}\n","import { check } from 'meteor/check';\nimport UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserSetting(meetingId, userId, setting, value) {\n  check(meetingId, String);\n  check(userId, String);\n  check(setting, String);\n  check(value, Match.Any);\n\n  const selector = {\n    meetingId,\n    userId,\n    setting,\n  };\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      setting,\n      value,\n    },\n  };\n\n  try {\n    const { numberAffected } = UserSettings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose('Upserted user setting', { meetingId, userId, setting });\n    }\n  } catch (err) {\n    Logger.error(`Adding user setting to collection: ${err}`);\n  }\n}\n","import UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersSettings(meetingId) {\n  try {\n    const numberAffected = UserSettings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Settings (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing User Settings (${meetingId}). ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addUserSettings from './methods/addUserSettings';\n\nMeteor.methods({\n  addUserSettings,\n});\n","import { Meteor } from 'meteor/meteor';\nimport UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport User from '/imports/api/users';\n\nfunction userSettings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing UserSettings was requested by unauth connection ${this.connection.id}`);\n    return UserSettings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const currentUser = User.findOne({ userId });\n\n  if (currentUser && currentUser.breakoutProps.isBreakoutUser) {\n    const { parentId } = currentUser.breakoutProps;\n\n    const [externalId] = currentUser.extId.split('-');\n\n    const mainRoomUserSettings = UserSettings.find({ meetingId: parentId, userId: externalId });\n\n    mainRoomUserSettings.map(({ setting, value }) => ({\n      meetingId,\n      setting,\n      userId,\n      value,\n    })).forEach((doc) => {\n      const selector = {\n        meetingId,\n        setting: doc.setting,\n      };\n\n      UserSettings.upsert(selector, doc);\n    });\n\n    Logger.debug('Publishing UserSettings', { meetingId, userId });\n\n    return UserSettings.find({ meetingId, userId });\n  }\n\n  Logger.debug('Publishing UserSettings', { meetingId, userId });\n\n  return UserSettings.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundUserSettings = userSettings.bind(this);\n  return boundUserSettings(...args);\n}\n\nMeteor.publish('users-settings', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst UserSettings = new Mongo.Collection('users-settings');\n\nif (Meteor.isServer) {\n  UserSettings._ensureIndex({\n    meetingId: 1, userId: 1,\n  });\n}\n\nexport default UserSettings;\n","import { check } from 'meteor/check';\nimport sharedWebcam from '../modifiers/sharedWebcam';\nimport { isValidStream } from '/imports/api/video-streams/server/helpers';\n\nexport default function handleUserSharedHtml5Webcam({ header, body }, meetingId) {\n  const { userId, stream } = body;\n\n  check(header, Object);\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  if (!isValidStream(stream)) return false;\n\n  return sharedWebcam(meetingId, userId, stream);\n}\n","import { check } from 'meteor/check';\nimport unsharedWebcam from '../modifiers/unsharedWebcam';\nimport { isValidStream } from '/imports/api/video-streams/server/helpers';\n\nexport default function handleUserUnsharedHtml5Webcam({ header, body }, meetingId) {\n  const { userId, stream } = body;\n\n  check(header, Object);\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  if (!isValidStream(stream)) return false;\n\n  return unsharedWebcam(meetingId, userId, stream);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userShareWebcam(stream) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserBroadcastCamStartMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.info(`user sharing webcam: ${meetingId} ${requesterUserId}`);\n\n  check(stream, String);\n\n  // const actionName = 'joinVideo';\n  /* TODO throw an error if user has no permission to share webcam\n  if (!isAllowedTo(actionName, credentials)) {\n    throw new Meteor.Error('not-allowed', `You are not allowed to share webcam`);\n  } */\n\n  const payload = {\n    stream,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userUnshareWebcam(stream) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserBroadcastCamStopMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.info(`user unsharing webcam: ${meetingId} ${requesterUserId}`);\n\n  check(stream, String);\n\n  // const actionName = 'joinVideo';\n  /* TODO throw an error if user has no permission to share webcam\n  if (!isAllowedTo(actionName, credentials)) {\n    throw new Meteor.Error('not-allowed', `You are not allowed to share webcam`);\n  } */\n\n  const payload = {\n    stream,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\n\nexport default function clearVideoStreams(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VideoStreams.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VideoStreams in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VideoStreams (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VideoStreams.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VideoStreams in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VideoStreams (all). ${err}`);\n    }\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\nimport {\n  getDeviceId,\n  getUserName,\n} from '/imports/api/video-streams/server/helpers';\n\nexport default function sharedWebcam(meetingId, userId, stream) {\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  const deviceId = getDeviceId(stream);\n  const name = getUserName(userId);\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  const modifier = {\n    $set: {\n      stream,\n      name,\n    },\n  };\n\n  try {\n    const { insertedId } = VideoStreams.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Updated stream=${stream} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error setting stream: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\nimport { getDeviceId } from '/imports/api/video-streams/server/helpers';\n\nexport default function unsharedWebcam(meetingId, userId, stream) {\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  const deviceId = getDeviceId(stream);\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  try {\n    VideoStreams.remove(selector);\n\n    Logger.info(`Removed stream=${stream} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Error removing stream: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleUserSharedHtml5Webcam from './handlers/userSharedHtml5Webcam';\nimport handleUserUnsharedHtml5Webcam from './handlers/userUnsharedHtml5Webcam';\n\nRedisPubSub.on('UserBroadcastCamStartedEvtMsg', handleUserSharedHtml5Webcam);\nRedisPubSub.on('UserBroadcastCamStoppedEvtMsg', handleUserUnsharedHtml5Webcam);\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nconst FLASH_STREAM_REGEX = /^([A-z0-9]+)-([A-z0-9]+)-([A-z0-9]+)(-recorded)?$/;\nconst TOKEN = '_';\n\nconst isValidStream = stream => !FLASH_STREAM_REGEX.test(stream);\nconst getDeviceId = (stream) => {\n  const splitStream = stream.split(TOKEN);\n  if (splitStream.length === 3) return splitStream[2];\n  Logger.warn(`Could not get deviceId from stream=${stream}`);\n  return stream;\n};\n\nconst getUserName = (userId) => {\n  const user = Users.findOne(\n    { userId },\n    { fields: { name: 1 } },\n  );\n  if (user) return user.name;\n  return userId;\n};\n\nexport {\n  isValidStream,\n  getDeviceId,\n  getUserName,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publisher';\n","import { Meteor } from 'meteor/meteor';\nimport userShareWebcam from './methods/userShareWebcam';\nimport userUnshareWebcam from './methods/userUnshareWebcam';\n\nMeteor.methods({\n  userShareWebcam,\n  userUnshareWebcam,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction videoStreams() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VideoStreams was requested by unauth connection ${this.connection.id}`);\n    return VideoStreams.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing VideoStreams', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n  };\n\n  return VideoStreams.find(selector);\n}\n\nfunction publish(...args) {\n  const boundVideoStreams = videoStreams.bind(this);\n  return boundVideoStreams(...args);\n}\n\nMeteor.publish('video-streams', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VideoStreams = new Mongo.Collection('video-streams');\n\nif (Meteor.isServer) {\n  // types of queries for the video users:\n  // 2. meetingId\n\n  VideoStreams._ensureIndex({ meetingId: 1 });\n}\n\nexport default VideoStreams;\n","import { check } from 'meteor/check';\nimport VoiceCallState from '/imports/api/voice-call-states';\nimport Logger from '/imports/startup/server/logger';\n\n// \"CALL_STARTED\", \"IN_ECHO_TEST\", \"IN_CONFERENCE\", \"CALL_ENDED\"\n\nexport default function handleVoiceCallStateEvent({ body }, meetingId) {\n  const {\n    voiceConf,\n    clientSession,\n    userId,\n    callerName,\n    callState,\n  } = body;\n\n  check(meetingId, String);\n  check(voiceConf, String);\n  check(clientSession, String);\n  check(userId, String);\n  check(callerName, String);\n  check(callState, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    clientSession,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      voiceConf,\n      clientSession,\n      callState,\n    },\n  };\n\n  try {\n    const { numberAffected } = VoiceCallState.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Update voice call', {\n        state: userId, meetingId, clientSession, callState,\n      });\n    }\n  } catch (err) {\n    Logger.error(`Update voice call state=${userId}: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VoiceCallStates from '/imports/api/voice-users';\n\nexport default function clearVoiceCallStates(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VoiceCallStates.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VoiceCallStates in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing VoiceCallStates in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VoiceCallStates.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VoiceCallStates in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceCallStates in all meetings. ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleVoiceCallStateEvent from './handlers/voiceCallStateEvent';\n\nRedisPubSub.on('VoiceCallStateEvtMsg', handleVoiceCallStateEvent);\n","import './eventHandlers';\nimport './publishers';\n","import VoiceCallStates from '/imports/api/voice-call-states';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction voiceCallStates() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VoiceCallStates was requested by unauth connection ${this.connection.id}`);\n    return VoiceCallStates.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Voice Call States', { meetingId, userId });\n\n  return VoiceCallStates.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundVoiceCallStates = voiceCallStates.bind(this);\n  return boundVoiceCallStates(...args);\n}\n\nMeteor.publish('voice-call-states', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VoiceCallStates = new Mongo.Collection('voiceCallStates');\n\nif (Meteor.isServer) {\n  // types of queries for the voice users:\n  // 1. intId\n  // 2. meetingId, intId\n\n  VoiceCallStates._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default VoiceCallStates;\n","import { check } from 'meteor/check';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport Meetings from '/imports/api/meetings';\nimport addVoiceUser from '../modifiers/addVoiceUser';\nimport removeVoiceUser from '../modifiers/removeVoiceUser';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleGetVoiceUsers({ body }, meetingId) {\n  const { users } = body;\n\n  check(meetingId, String);\n  check(users, Array);\n\n  const meeting = Meetings.findOne({ meetingId }, { fields: { 'voiceProp.voiceConf': 1 } });\n  const usersIds = users.map(m => m.intId);\n\n  const voiceUsersIdsToUpdate = VoiceUsers.find({\n    meetingId,\n    intId: { $in: usersIds },\n  }, { fields: { intId: 1 } }).fetch().map(m => m.intId);\n\n  const voiceUsersUpdated = [];\n  users.forEach((user) => {\n    if (voiceUsersIdsToUpdate.indexOf(user.intId) >= 0) {\n      // user already exist, then update\n      voiceUsersUpdated.push(updateVoiceUser(meetingId, {\n        intId: user.intId,\n        voiceUserId: user.voiceUserId,\n        talking: user.talking,\n        muted: user.muted,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      }));\n    } else {\n      // user doesn't exist yet, then add it\n      addVoiceUser(meetingId, {\n        voiceUserId: user.voiceUserId,\n        intId: user.intId,\n        callerName: user.callerName,\n        callerNum: user.callerNum,\n        muted: user.muted,\n        talking: user.talking,\n        callingWith: user.callingWith,\n        listenOnly: user.listenOnly,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    }\n  });\n\n  // removing extra users already existing in Mongo\n  const voiceUsersToRemove = VoiceUsers.find({\n    meetingId,\n    intId: { $nin: usersIds },\n  }).fetch();\n  voiceUsersToRemove.forEach(user => removeVoiceUser(meetingId, {\n    voiceConf: meeting.voiceProp.voiceConf,\n    voiceUserId: user.voiceUserId,\n    intId: user.intId,\n  }));\n\n  return voiceUsersUpdated;\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport addDialInUser from '/imports/api/users/server/modifiers/addDialInUser';\nimport addVoiceUser from '../modifiers/addVoiceUser';\n\n\nexport default function handleJoinVoiceUser({ body }, meetingId) {\n  const voiceUser = body;\n  voiceUser.joined = true;\n\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    intId: String,\n    voiceUserId: String,\n    callerName: String,\n    callerNum: String,\n    muted: Boolean,\n    talking: Boolean,\n    callingWith: String,\n    listenOnly: Boolean,\n    joined: Boolean,\n  });\n\n  const {\n    intId,\n  } = voiceUser;\n\n  const User = Users.findOne({\n    meetingId,\n    intId,\n  });\n\n  if (!User) {\n    /* voice-only user - called into the conference */\n    addDialInUser(meetingId, voiceUser);\n  }\n\n  return addVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\n\nimport removeVoiceUser from '/imports/api/voice-users/server/modifiers/removeVoiceUser';\nimport removeUser from '/imports/api/users/server/modifiers/removeUser';\nimport Users from '/imports/api/users';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    intId: String,\n    voiceUserId: String,\n  });\n\n  const {\n    intId,\n    voiceUserId,\n  } = voiceUser;\n\n  const isDialInUser = (userId, meetingID) => !!Users.findOne({ meetingId: meetingID, userId, clientType: 'dial-in-user' });\n\n  // if the user is dial-in, leaving voice also means leaving userlist\n  if (isDialInUser(voiceUserId, meetingId)) removeUser(meetingId, intId);\n\n  return removeVoiceUser(meetingId, voiceUser);\n}\n","import changeMuteMeeting from '../modifiers/changeMuteMeeting';\n\nexport default function handleMeetingMuted({ body }, meetingId) {\n  changeMuteMeeting(meetingId, body);\n}\n","import { check } from 'meteor/check';\n\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  // If a person is muted we have to force them to not talking\n  if (voiceUser.muted) {\n    voiceUser.talking = false;\n  }\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\n\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import VoiceUsers from '/imports/api/voice-users/';\nimport Meetings from '/imports/api/meetings';\nimport addDialInUser from '/imports/api/users/server/modifiers/addDialInUser';\nimport removeVoiceUser from '../modifiers/removeVoiceUser';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\nimport addVoiceUser from '../modifiers/addVoiceUser';\n\n\nexport default function handleVoiceUsers({ header, body }) {\n  const { voiceUsers } = body;\n  const { meetingId } = header;\n\n  const meeting = Meetings.findOne({ meetingId }, { fields: { 'voiceProp.voiceConf': 1 } });\n  const usersIds = voiceUsers.map(m => m.intId);\n\n  const voiceUsersIdsToUpdate = VoiceUsers.find({\n    meetingId,\n    intId: { $in: usersIds },\n  }, { fields: { intId: 1 } }).fetch().map(m => m.intId);\n\n  const voiceUsersUpdated = [];\n  voiceUsers.forEach((voice) => {\n    if (voiceUsersIdsToUpdate.indexOf(voice.intId) >= 0) {\n      // user already exist, then update\n      voiceUsersUpdated.push(updateVoiceUser(meetingId, {\n        intId: voice.intId,\n        voiceUserId: voice.voiceUserId,\n        talking: voice.talking,\n        muted: voice.muted,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      }));\n    } else {\n      // user doesn't exist yet, then add it\n      addVoiceUser(meetingId, {\n        voiceUserId: voice.voiceUserId,\n        intId: voice.intId,\n        callerName: voice.callerName,\n        callerNum: voice.callerNum,\n        muted: voice.muted,\n        talking: voice.talking,\n        callingWith: voice.callingWith,\n        listenOnly: voice.listenOnly,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n\n      addDialInUser(meetingId, voice);\n    }\n  });\n\n  // removing extra users already existing in Mongo\n  const voiceUsersToRemove = VoiceUsers.find({\n    meetingId,\n    intId: { $nin: usersIds },\n  }, { fields: { voiceUserId: 1, intId: 1 } }).fetch();\n  voiceUsersToRemove.forEach(user => removeVoiceUser(meetingId, {\n    voiceConf: meeting.voiceProp.voiceConf,\n    voiceUserId: user.voiceUserId,\n    intId: user.intId,\n  }));\n\n  return voiceUsersUpdated;\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function ejectUserFromVoice(userId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EjectUserFromVoiceCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(userId, String);\n\n  const payload = {\n    userId,\n    ejectedBy: requesterUserId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function muteAllExceptPresenterToggle() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'MuteAllExceptPresentersCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const meeting = Meetings.findOne({ meetingId });\n  const toggleMeetingMuted = !meeting.voiceProp.muteOnStart;\n\n  const payload = {\n    mutedBy: requesterUserId,\n    mute: toggleMeetingMuted,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function muteAllToggle() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'MuteMeetingCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const meeting = Meetings.findOne({ meetingId });\n  const toggleMeetingMuted = !meeting.voiceProp.muteOnStart;\n\n  const payload = {\n    mutedBy: requesterUserId,\n    mute: toggleMeetingMuted,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Users from '/imports/api/users';\nimport VoiceUsers from '/imports/api/voice-users';\nimport Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function muteToggle(uId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'MuteUserCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  const userToMute = uId || requesterUserId;\n\n  const requester = Users.findOne({\n    meetingId,\n    userId: requesterUserId,\n  });\n\n  const voiceUser = VoiceUsers.findOne({\n    intId: userToMute,\n    meetingId,\n  });\n\n  if (!requester || !voiceUser) return;\n\n  const { listenOnly, muted } = voiceUser;\n  if (listenOnly) return;\n\n  // if allowModsToUnmuteUsers is false, users will be kicked out for attempting to unmute others\n  if (requesterUserId !== userToMute && muted) {\n    const meeting = Meetings.findOne({ meetingId },\n      { fields: { 'usersProp.allowModsToUnmuteUsers': 1 } });\n    if (meeting.usersProp && !meeting.usersProp.allowModsToUnmuteUsers) {\n      Logger.warn(`Attempted unmuting by another user meetingId:${meetingId} requester: ${requesterUserId} userId: ${userToMute}`);\n      return;\n    }\n  }\n\n  const payload = {\n    userId: userToMute,\n    mutedBy: requesterUserId,\n    mute: !muted,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport Users from '/imports/api/users';\nimport flat from 'flat';\n\nexport default function addVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceUserId: String,\n    intId: String,\n    callerName: String,\n    callerNum: String,\n    muted: Boolean,\n    talking: Boolean,\n    callingWith: String,\n    listenOnly: Boolean,\n    voiceConf: String,\n    joined: Boolean, // This is a HTML5 only param.\n  });\n\n  const { intId, talking } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId, spoke: talking },\n      flat(voiceUser),\n    ),\n  };\n\n  const user = Users.findOne({ meetingId, userId: intId }, {\n    fields: {\n      color: 1,\n    },\n  });\n\n  if (user) modifier.$set.color = user.color;\n\n  try {\n    const { numberAffected } = VoiceUsers.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Add voice user=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Add voice user=${intId}: ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function changeMuteMeeting(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    muted: Boolean,\n    mutedBy: String,\n  });\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'voiceProp.muteOnStart': payload.muted,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting mute status meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Changing meeting mute status meeting={${meetingId}} ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\n\nexport default function clearVoiceUser(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VoiceUsers.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VoiceUsers in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceUsers in ${meetingId}. ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VoiceUsers.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VoiceUsers in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceUsers. ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport { clearSpokeTimeout } from '/imports/api/common/server/helpers';\n\nexport default function removeVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    voiceUserId: String,\n    intId: String,\n  });\n\n  const { intId } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      muted: false,\n      talking: false,\n      listenOnly: false,\n      joined: false,\n      spoke: false,\n    },\n  };\n\n  try {\n    clearSpokeTimeout(meetingId, intId);\n    const numberAffected = VoiceUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Remove voiceUser=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Remove voiceUser=${intId}: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport flat from 'flat';\nimport { spokeTimeoutHandles, clearSpokeTimeout } from '/imports/api/common/server/helpers';\n\nconst TALKING_TIMEOUT = 6000;\n\nexport default function updateVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    intId: String,\n    voiceUserId: String,\n    talking: Match.Maybe(Boolean),\n    muted: Match.Maybe(Boolean),\n    voiceConf: String,\n    joined: Match.Maybe(Boolean),\n  });\n\n  const { intId } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      flat(voiceUser),\n    ),\n  };\n\n  if (voiceUser.talking) {\n    const user = VoiceUsers.findOne({ meetingId, intId }, {\n      fields: {\n        startTime: 1,\n      },\n    });\n\n    if (user && !user.startTime) modifier.$set.startTime = Date.now();\n    modifier.$set.spoke = true;\n    modifier.$set.endTime = null;\n    clearSpokeTimeout(meetingId, intId);\n  }\n\n  if (!voiceUser.talking) {\n    const timeoutHandle = Meteor.setTimeout(() => {\n      const user = VoiceUsers.findOne({ meetingId, intId }, {\n        fields: {\n          endTime: 1,\n          talking: 1,\n        },\n      });\n\n      if (user) {\n        const { endTime, talking } = user;\n        const spokeDelay = ((Date.now() - endTime) < TALKING_TIMEOUT);\n        if (talking || spokeDelay) return;\n        modifier.$set.spoke = false;\n        modifier.$set.startTime = null;\n        try {\n          const numberAffected = VoiceUsers.update(selector, modifier);\n\n          if (numberAffected) {\n            Logger.debug('Update voiceUser', { voiceUser: intId, meetingId });\n          }\n        } catch (err) {\n          Logger.error(`Update voiceUser=${intId}: ${err}`);\n        }\n      }\n    }, TALKING_TIMEOUT);\n\n    spokeTimeoutHandles[`${meetingId}-${intId}`] = timeoutHandle;\n    modifier.$set.endTime = Date.now();\n  }\n\n  try {\n    const numberAffected = VoiceUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Update voiceUser', { voiceUser: intId, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Update voiceUser=${intId}: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleJoinVoiceUser from './handlers/joinVoiceUser';\nimport handleLeftVoiceUser from './handlers/leftVoiceUser';\nimport handleTalkingVoiceUser from './handlers/talkingVoiceUser';\nimport handleMutedVoiceUser from './handlers/mutedVoiceUser';\nimport handleGetVoiceUsers from './handlers/getVoiceUsers';\nimport handleVoiceUsers from './handlers/voiceUsers';\nimport handleMeetingMuted from './handlers/meetingMuted';\n\nRedisPubSub.on('UserLeftVoiceConfToClientEvtMsg', handleLeftVoiceUser);\nRedisPubSub.on('UserJoinedVoiceConfToClientEvtMsg', handleJoinVoiceUser);\nRedisPubSub.on('UserTalkingVoiceEvtMsg', handleTalkingVoiceUser);\nRedisPubSub.on('UserMutedVoiceEvtMsg', handleMutedVoiceUser);\nRedisPubSub.on('GetVoiceUsersMeetingRespMsg', processForHTML5ServerOnly(handleGetVoiceUsers));\nRedisPubSub.on('SyncGetVoiceUsersRespMsg', handleVoiceUsers);\nRedisPubSub.on('MeetingMutedEvtMsg', handleMeetingMuted);\n","import './eventHandlers';\nimport './publishers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport muteToggle from './methods/muteToggle';\nimport muteAllToggle from './methods/muteAllToggle';\nimport muteAllExceptPresenterToggle from './methods/muteAllExceptPresenterToggle';\nimport ejectUserFromVoice from './methods/ejectUserFromVoice';\n\nMeteor.methods({\n  toggleVoice: muteToggle,\n  muteAllUsers: muteAllToggle,\n  muteAllExceptPresenter: muteAllExceptPresenterToggle,\n  ejectUserFromVoice,\n});\n","import VoiceUsers from '/imports/api/voice-users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport ejectUserFromVoice from './methods/ejectUserFromVoice';\n\nfunction voiceUser() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VoiceUsers was requested by unauth connection ${this.connection.id}`);\n    return VoiceUsers.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId: requesterUserId } = tokenValidation;\n\n  const onCloseConnection = Meteor.bindEnvironment(() => {\n    try {\n      // I used user because voiceUser is the function's name\n      const User = VoiceUsers.findOne({ meetingId, requesterUserId });\n      if (User) {\n        ejectUserFromVoice(requesterUserId);\n      }\n    } catch (e) {\n      Logger.error(`Exception while executing ejectUserFromVoice for ${requesterUserId}: ${e}`);\n    }\n  });\n\n  Logger.debug('Publishing Voice User', { meetingId, requesterUserId });\n\n  this._session.socket.on('close', _.debounce(onCloseConnection, 100));\n  return VoiceUsers.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundVoiceUser = voiceUser.bind(this);\n  return boundVoiceUser(...args);\n}\n\nMeteor.publish('voiceUsers', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VoiceUsers = new Mongo.Collection('voiceUsers');\n\nif (Meteor.isServer) {\n  // types of queries for the voice users:\n  // 1. intId\n  // 2. meetingId, intId\n\n  VoiceUsers._ensureIndex({ intId: 1 });\n  VoiceUsers._ensureIndex({ meetingId: 1, intId: 1 });\n}\n\nexport default VoiceUsers;\n","import { check } from 'meteor/check';\nimport modifyWhiteboardAccess from '../modifiers/modifyWhiteboardAccess';\n\nexport default function handleModifyWhiteboardAccess({ body }, meetingId) {\n  const { multiUser, whiteboardId } = body;\n\n  check(multiUser, Boolean);\n  check(whiteboardId, String);\n  check(meetingId, String);\n\n  return modifyWhiteboardAccess(meetingId, whiteboardId, multiUser);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function changeWhiteboardAccess(multiUser, whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(multiUser, Boolean);\n  check(whiteboardId, String);\n\n  const payload = {\n    multiUser,\n    whiteboardId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\n\nexport default function modifyWhiteboardAccess(meetingId, whiteboardId, multiUser) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(multiUser, Boolean);\n\n  const selector = {\n    meetingId,\n    whiteboardId,\n  };\n\n  const modifier = {\n    meetingId,\n    whiteboardId,\n    multiUser,\n  };\n\n  try {\n    const { insertedId } = WhiteboardMultiUser.upsert(selector, modifier);\n    if (insertedId) {\n      Logger.info(`Added multiUser flag=${multiUser} meetingId=${meetingId} whiteboardId=${whiteboardId}`);\n    } else {\n      Logger.info(`Upserted multiUser flag=${multiUser} meetingId=${meetingId} whiteboardId=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error while adding an entry to Multi-User collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleGetWhiteboardAccess from './handlers/modifyWhiteboardAccess';\n\nRedisPubSub.on('GetWhiteboardAccessRespMsg', processForHTML5ServerOnly(handleGetWhiteboardAccess));\nRedisPubSub.on('SyncGetWhiteboardAccessRespMsg', handleGetWhiteboardAccess);\nRedisPubSub.on('ModifyWhiteboardAccessEvtMsg', handleGetWhiteboardAccess);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport changeWhiteboardAccess from './methods/changeWhiteboardAccess';\n\nMeteor.methods({\n  changeWhiteboardAccess,\n});\n","import WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction whiteboardMultiUser() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing WhiteboardMultiUser was requested by unauth connection ${this.connection.id}`);\n    return WhiteboardMultiUser.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing WhiteboardMultiUser', { meetingId, userId });\n\n  return WhiteboardMultiUser.find({ meetingId });\n}\n\n\nfunction publish(...args) {\n  const boundMultiUser = whiteboardMultiUser.bind(this);\n  return boundMultiUser(...args);\n}\n\nMeteor.publish('whiteboard-multi-user', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst WhiteboardMultiUser = new Mongo.Collection('whiteboard-multi-user');\n\nif (Meteor.isServer) {\n  // types of queries for the whiteboard-multi-user:\n  // 1. meetingId\n\n  WhiteboardMultiUser._ensureIndex({ meetingId: 1 });\n}\n\nexport default WhiteboardMultiUser;\n","import Users from '/imports/api/users';\n\nconst MSG_DIRECT_TYPE = 'DIRECT';\nconst NODE_USER = 'nodeJSapp';\n\nexport const spokeTimeoutHandles = {};\nexport const clearSpokeTimeout = (meetingId, userId) => {\n  if (spokeTimeoutHandles[`${meetingId}-${userId}`]) {\n    Meteor.clearTimeout(spokeTimeoutHandles[`${meetingId}-${userId}`]);\n    delete spokeTimeoutHandles[`${meetingId}-${userId}`];\n  }\n};\n\nexport const indexOf = [].indexOf || function (item) {\n  for (let i = 0, l = this.length; i < l; i += 1) {\n    if (i in this && this[i] === item) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nexport const processForHTML5ServerOnly = fn => (message, ...args) => {\n  const { envelope } = message;\n  const { routing } = envelope;\n  const { msgType, meetingId, userId } = routing;\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const user = Users.findOne(selector);\n\n  const shouldSkip = user && msgType === MSG_DIRECT_TYPE && userId !== NODE_USER && user.clientType !== 'HTML5';\n  if (shouldSkip) return () => { };\n  return fn(message, ...args);\n};\n\n/**\n * Calculate a 32 bit FNV-1a hash\n * Found here: https://gist.github.com/vaiorabbit/5657561\n * Ref.: http://isthe.com/chongo/tech/comp/fnv/\n *\n * @param {string} str the input value\n * @param {boolean} [asString=false] set to true to return the hash value as\n *     8-digit hex string instead of an integer\n * @param {integer} [seed] optionally pass the hash of the previous chunk\n * @returns {integer | string}\n */\n/* eslint-disable */\nexport const hashFNV32a = (str, asString, seed) => {\n  let hval = (seed === undefined) ? 0x811c9dc5 : seed;\n\n  for (let i = 0, l = str.length; i < l; i++) {\n    hval ^= str.charCodeAt(i);\n    hval += (hval << 1) + (hval << 4) + (hval << 7) + (hval << 8) + (hval << 24);\n  }\n  if (asString) {\n    return (`0000000${(hval >>> 0).toString(16)}`).substr(-8);\n  }\n  return hval >>> 0;\n};\n/* eslint-enable */\n\nexport const extractCredentials = (credentials) => {\n  if (!credentials) return {};\n  const credentialsArray = credentials.split('--');\n  const meetingId = credentialsArray[0];\n  const requesterUserId = credentialsArray[1];\n  return { meetingId, requesterUserId };\n};\n","import Logger from './logger';\nimport userLeaving from '/imports/api/users/server/methods/userLeaving';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nclass ClientConnections {\n  constructor() {\n    Logger.debug('Initializing client connections structure', { logCode: 'client_connections_init' });\n    this.connections = new Map();\n\n    setInterval(() => {\n      this.print();\n    }, 30000);\n\n    // setTimeout(() => {\n    //   this.syncConnectionsWithServer();\n    // }, 10000);\n\n  }\n\n  add(sessionId, connection) {\n    Logger.info('Client connections add called', { logCode: 'client_connections_add', extraInfo: { sessionId, connection } });\n    if (!sessionId || !connection) {\n      Logger.error(`Error on add new client connection. sessionId=${sessionId} connection=${connection.id}`,\n        { logCode: 'client_connections_add_error', extraInfo: { sessionId, connection } }\n      );\n\n      return;\n    }\n\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    if (!this.exists(meetingId)) {\n      Logger.info(`Meeting not found in connections: meetingId=${meetingId}`);\n      this.createMeetingConnections(meetingId);\n    }\n\n    const sessionConnections = this.connections.get(meetingId);\n\n    if (sessionConnections.has(userId) && sessionConnections.get(userId).includes(connection.id)) {\n      Logger.info(`Connection already exists for user. userId=${userId} connectionId=${connection.id}`);\n\n      return false;\n    }\n\n    connection.onClose(Meteor.bindEnvironment(() => {\n      userLeaving(meetingId, userId, connection.id);\n    }));\n\n    Logger.info(`Adding new connection for sessionId=${sessionId} connection=${connection.id}`);\n\n    if (!sessionConnections.has(userId)) {\n      Logger.info(`Creating connections poll for ${userId}`);\n\n      sessionConnections.set(userId, []);\n      return sessionConnections.get(userId).push(connection.id);\n    } else {\n      return sessionConnections.get(userId).push(connection.id);\n    }\n  }\n\n  createMeetingConnections(meetingId) {\n    Logger.info(`Creating meeting in connections. meetingId=${meetingId}`);\n\n    if (!this.exists(meetingId))\n      return this.connections.set(meetingId, new Map());\n  }\n\n  exists(meetingId) {\n    return this.connections.has(meetingId);\n  }\n\n  getConnectionsForClient(sessionId) {\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    return this.connections.get(meetingId)?.get(userId);\n  }\n\n  print() {\n    const mapConnectionsObj = {};\n    this.connections.forEach((value, key) => {\n      mapConnectionsObj[key] = {};\n\n      value.forEach((v, k) => {\n        mapConnectionsObj[key][k] = v;\n      });\n\n    });\n    Logger.info('Active connections', mapConnectionsObj);\n  }\n\n  removeClientConnection(sessionId, connectionId = null) {\n    Logger.info(`Removing connectionId for user. sessionId=${sessionId} connectionId=${connectionId}`);\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    const meetingConnections = this.connections.get(meetingId)\n\n    if (meetingConnections?.has(userId)) {\n      const filteredConnections = meetingConnections.get(userId).filter(c => c !== connectionId);\n\n      return connectionId && filteredConnections.length ? meetingConnections.set(userId, filteredConnections) : meetingConnections.delete(userId);\n    }\n\n    return false;\n  }\n\n  removeMeeting(meetingId) {\n    Logger.debug(`Removing connections for meeting=${meetingId}`);\n    return this.connections.delete(meetingId);\n  }\n\n  syncConnectionsWithServer() {\n    console.error('syncConnectionsWithServer', Array.from(Meteor.server.sessions.keys()), Meteor.server);\n  }\n\n}\n\nconst ClientConnectionsSingleton = new ClientConnections();\n\nexport default ClientConnectionsSingleton;\n","import { Meteor } from 'meteor/meteor';\nimport { WebAppInternals } from 'meteor/webapp';\nimport Langmap from 'langmap';\nimport fs from 'fs';\nimport Users from '/imports/api/users';\nimport './settings';\nimport { lookup as lookupUserAgent } from 'useragent';\nimport { check } from 'meteor/check';\nimport Logger from './logger';\nimport Redis from './redis';\n\nimport setMinBrowserVersions from './minBrowserVersion';\n\nlet guestWaitHtml = '';\nconst AVAILABLE_LOCALES = fs.readdirSync('assets/app/locales');\nconst FALLBACK_LOCALES = JSON.parse(Assets.getText('config/fallbackLocales.json'));\n\nprocess.on('uncaughtException', (err) => {\n  Logger.error(`uncaughtException: ${err}`);\n  process.exit(1);\n});\n\nprocess.on('uncaughtException', (err) => {\n  Logger.error(`uncaughtException: ${err}`);\n  process.exit(1);\n});\n\nMeteor.startup(() => {\n  const APP_CONFIG = Meteor.settings.public.app;\n  const env = Meteor.isDevelopment ? 'development' : 'production';\n  const CDN_URL = APP_CONFIG.cdn;\n  const instanceId = APP_CONFIG.instanceId.slice(1); // remove the leading '/' character\n\n  Logger.warn('Started bbb-html5 process with instanceId=' + instanceId);\n\n  const { customHeartbeat } = APP_CONFIG;\n\n  if (customHeartbeat) {\n    Logger.warn('Custom heartbeat functions are enabled');\n    // https://github.com/sockjs/sockjs-node/blob/1ef08901f045aae7b4df0f91ef598d7a11e82897/lib/transport/websocket.js#L74-L82\n    const newHeartbeat = function heartbeat() {\n      const currentTime = new Date().getTime();\n\n      // Skipping heartbeat, because websocket is sending data\n      if (currentTime - this.ws.lastSentFrameTimestamp < 10000) {\n        try {\n          Logger.info('Skipping heartbeat, because websocket is sending data', {\n            currentTime,\n            lastSentFrameTimestamp: this.ws.lastSentFrameTimestamp,\n            userId: this.session.connection._meteorSession.userId,\n          });\n          return;\n        } catch (err) {\n          Logger.error(`Skipping heartbeat error: ${err}`);\n        }\n      }\n\n      const supportsHeartbeats = this.ws.ping(null, () => clearTimeout(this.hto_ref));\n      if (supportsHeartbeats) {\n        this.hto_ref = setTimeout(() => {\n          try {\n            Logger.info('Heartbeat timeout', { userId: this.session.connection._meteorSession.userId, sentAt: currentTime, now: new Date().getTime() });\n          } catch (err) {\n            Logger.error(`Heartbeat timeout error: ${err}`);\n          }\n        }, Meteor.server.options.heartbeatTimeout);\n      } else {\n        Logger.error('Unexpected error supportsHeartbeats=false');\n      }\n    };\n\n    // https://github.com/davhani/hagty/blob/6a5c78e9ae5a5e4ade03e747fb4cc8ea2df4be0c/faye-websocket/lib/faye/websocket/api.js#L84-L88\n    const newSend = function send(data) {\n      try {\n        this.lastSentFrameTimestamp = new Date().getTime();\n\n        if (this.meteorHeartbeat) {\n          // Call https://github.com/meteor/meteor/blob/1e7e56eec8414093cd0c1c70750b894069fc972a/packages/ddp-common/heartbeat.js#L80-L88\n          this.meteorHeartbeat._seenPacket = true;\n          if (this.meteorHeartbeat._heartbeatTimeoutHandle) {\n            this.meteorHeartbeat._clearHeartbeatTimeoutTimer();\n          }\n        }\n\n        if (this.readyState > 1/* API.OPEN = 1 */) return false;\n        if (!(data instanceof Buffer)) data = String(data);\n        return this._driver.messages.write(data);\n      } catch (err) {\n        console.error('Error on send data', err);\n        return false;\n      }\n    };\n\n    Meteor.setInterval(() => {\n      for (const session of Meteor.server.sessions.values()) {\n        const { socket } = session;\n        const recv = socket._session.recv;\n\n        if (session.bbbFixApplied || !recv || !recv.ws) {\n          continue;\n        }\n\n        recv.ws.meteorHeartbeat = session.heartbeat;\n        recv.__proto__.heartbeat = newHeartbeat;\n        recv.ws.__proto__.send = newSend;\n        session.bbbFixApplied = true;\n      }\n    }, 5000);\n\n    if (CDN_URL.trim()) {\n      // Add CDN\n      BrowserPolicy.content.disallowEval();\n      BrowserPolicy.content.allowInlineScripts();\n      BrowserPolicy.content.allowInlineStyles();\n      BrowserPolicy.content.allowImageDataUrl(CDN_URL);\n      BrowserPolicy.content.allowFontDataUrl(CDN_URL);\n      BrowserPolicy.content.allowOriginForAll(CDN_URL);\n      WebAppInternals.setBundledJsCssPrefix(CDN_URL + APP_CONFIG.basename + Meteor.settings.public.app.instanceId);\n\n      const fontRegExp = /\\.(eot|ttf|otf|woff|woff2)$/;\n\n      WebApp.rawConnectHandlers.use('/', (req, res, next) => {\n        if (fontRegExp.test(req._parsedUrl.pathname)) {\n          res.setHeader('Access-Control-Allow-Origin', '*');\n          res.setHeader('Vary', 'Origin');\n          res.setHeader('Pragma', 'public');\n          res.setHeader('Cache-Control', '\"public\"');\n        }\n        return next();\n      });\n    }\n\n    setMinBrowserVersions();\n\n    Logger.warn(`SERVER STARTED.\\nENV=${env},\\nnodejs version=${process.version}\\nCDN=${CDN_URL}\\n`, APP_CONFIG);\n  }\n});\n\n\nconst generateLocaleOptions = () => {\n  try {\n    Logger.warn('Calculating aggregateLocales (heavy)');\n    const tempAggregateLocales = AVAILABLE_LOCALES\n      .map(file => file.replace('.json', ''))\n      .map(file => file.replace('_', '-'))\n      .map((locale) => {\n        const localeName = (Langmap[locale] || {}).nativeName\n          || (FALLBACK_LOCALES[locale] || {}).nativeName\n          || locale;\n        return {\n          locale,\n          name: localeName,\n        };\n      });\n    Logger.warn(`Total locales: ${tempAggregateLocales.length}`, tempAggregateLocales);\n    return tempAggregateLocales;\n  } catch (e) {\n    Logger.error(`'Could not process locales error: ${e}`);\n    return [];\n  }\n};\n\nlet avaibleLocalesNamesJSON = JSON.stringify(generateLocaleOptions());\n\nWebApp.connectHandlers.use('/check', (req, res) => {\n  const payload = { html5clientStatus: 'running' };\n\n  res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(JSON.stringify(payload));\n});\n\nWebApp.connectHandlers.use('/locale', (req, res) => {\n  const APP_CONFIG = Meteor.settings.public.app;\n  const fallback = APP_CONFIG.defaultSettings.application.fallbackLocale;\n  const override = APP_CONFIG.defaultSettings.application.overrideLocale;\n  const browserLocale = override && req.query.init === 'true'\n    ? override.split(/[-_]/g) : req.query.locale.split(/[-_]/g);\n\n  const localeList = [fallback];\n\n  const usableLocales = AVAILABLE_LOCALES\n    .map(file => file.replace('.json', ''))\n    .reduce((locales, locale) => (locale.match(browserLocale[0])\n      ? [...locales, locale]\n      : locales), []);\n\n  const regionDefault = usableLocales.find(locale => browserLocale[0] === locale);\n\n  if (regionDefault) localeList.push(regionDefault);\n  if (!regionDefault && usableLocales.length) localeList.push(usableLocales[0]);\n\n  let normalizedLocale;\n  let messages = {};\n\n  if (browserLocale.length > 1) {\n    normalizedLocale = `${browserLocale[0]}_${browserLocale[1].toUpperCase()}`;\n    localeList.push(normalizedLocale);\n  }\n\n  localeList.forEach((locale) => {\n    try {\n      const data = Assets.getText(`locales/${locale}.json`);\n      messages = Object.assign(messages, JSON.parse(data));\n      normalizedLocale = locale;\n    } catch (e) {\n      Logger.info(`'Could not process locale ${locale}:${e}`);\n      // Getting here means the locale is not available in the current locale files.\n    }\n  });\n\n  res.setHeader('Content-Type', 'application/json');\n  res.end(JSON.stringify({ normalizedLocale, messages }));\n});\n\nWebApp.connectHandlers.use('/locales', (req, res) => {\n  if (!avaibleLocalesNamesJSON) {\n    avaibleLocalesNamesJSON = JSON.stringify(generateLocaleOptions());\n  }\n\n  res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(avaibleLocalesNamesJSON);\n});\n\nWebApp.connectHandlers.use('/feedback', (req, res) => {\n  req.on('data', Meteor.bindEnvironment((data) => {\n    const body = JSON.parse(data);\n    const {\n      meetingId,\n      userId,\n      authToken,\n      userName: reqUserName,\n      comment,\n      rating,\n    } = body;\n\n    check(meetingId, String);\n    check(userId, String);\n    check(authToken, String);\n    check(reqUserName, String);\n    check(comment, String);\n    check(rating, Number);\n\n    const user = Users.findOne({\n      meetingId,\n      userId,\n      authToken,\n    });\n\n    if (!user) {\n      Logger.warn('Couldn\\'t find user for feedback');\n    }\n\n    res.setHeader('Content-Type', 'application/json');\n    res.writeHead(200);\n    res.end(JSON.stringify({ status: 'ok' }));\n\n    body.userName = user ? user.name : `[unconfirmed] ${reqUserName}`;\n\n    const feedback = {\n      ...body,\n    };\n    Logger.info('FEEDBACK LOG:', feedback);\n  }));\n});\n\nWebApp.connectHandlers.use('/useragent', (req, res) => {\n  const userAgent = req.headers['user-agent'];\n  let response = 'No user agent found in header';\n  if (userAgent) {\n    response = lookupUserAgent(userAgent).toString();\n  }\n\n  Logger.info(`The requesting user agent is ${response}`);\n\n  // res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(response);\n});\n\nWebApp.connectHandlers.use('/guestWait', (req, res) => {\n  if (!guestWaitHtml) {\n    try {\n      guestWaitHtml = Assets.getText('static/guest-wait/guest-wait.html');\n    } catch (e) {\n      Logger.warn(`Could not process guest wait html file: ${e}`);\n    }\n  }\n\n  res.setHeader('Content-Type', 'text/html');\n  res.writeHead(200);\n  res.end(guestWaitHtml);\n});\n\n\nexport const eventEmitter = Redis.emitter;\n\nexport const redisPubSub = Redis;\n","import { Meteor } from 'meteor/meteor';\nimport { createLogger, format, transports } from 'winston';\n\nconst LOG_CONFIG = Meteor.settings.private.serverLog || {};\nconst { level } = LOG_CONFIG;\n\nconst Logger = createLogger({\n  level,\n  format: format.combine(\n    format.colorize({ level: true }),\n    format.splat(),\n    format.simple(),\n  ),\n  transports: [\n    // console logging\n    new transports.Console({\n      prettyPrint: false,\n      humanReadableUnhandledException: true,\n      colorize: true,\n      handleExceptions: true,\n      level,\n    }),\n  ],\n});\n\nexport default Logger;\n\nexport const logger = Logger;\n","/* eslint-disable no-prototype-builtins */\n\nimport fs from 'fs';\nimport path from 'path';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from './logger';\n\nconst {\n  metricsDumpIntervalMs,\n  metricsFolderPath,\n  removeMeetingOnEnd,\n} = Meteor.settings.private.redis.metrics;\n\nclass Metrics {\n  constructor() {\n    this.metrics = {};\n  }\n\n  addEvent(meetingId, eventName, messageLength) {\n    if (!this.metrics.hasOwnProperty(meetingId)) {\n      this.metrics[meetingId] = {\n        currentlyInQueue: {},\n        wasInQueue: {},\n      };\n    }\n\n    const { currentlyInQueue } = this.metrics[meetingId];\n\n    if (!currentlyInQueue.hasOwnProperty(eventName)) {\n      currentlyInQueue[eventName] = {\n        count: 1,\n        payloadSize: messageLength,\n      };\n    } else {\n      currentlyInQueue[eventName].count += 1;\n      currentlyInQueue[eventName].payloadSize += messageLength;\n    }\n  }\n\n  processEvent(meetingId, eventName, size, processingStartTimestamp) {\n    const currentProcessingTimestamp = Date.now();\n    const processTime = currentProcessingTimestamp - processingStartTimestamp;\n\n    if (!this.metrics[meetingId].wasInQueue.hasOwnProperty(eventName)) {\n      this.metrics[meetingId].wasInQueue[eventName] = {\n        count: 1,\n        payloadSize: {\n          min: size,\n          max: size,\n          last: size,\n          total: size,\n          avg: size,\n        },\n        processingTime: {\n          min: processTime,\n          max: processTime,\n          last: processTime,\n          total: processTime,\n          avg: processTime,\n        },\n      };\n      this.metrics[meetingId].currentlyInQueue[eventName].count -= 1;\n\n      if (!this.metrics[meetingId].currentlyInQueue[eventName].count) {\n        delete this.metrics[meetingId].currentlyInQueue[eventName];\n      }\n    } else {\n      const { currentlyInQueue, wasInQueue } = this.metrics[meetingId];\n\n      currentlyInQueue[eventName].count -= 1;\n\n      if (!currentlyInQueue[eventName].count) {\n        delete currentlyInQueue[eventName];\n      }\n\n      const { payloadSize, processingTime } = wasInQueue[eventName];\n\n      wasInQueue[eventName].count += 1;\n\n      payloadSize.last = size;\n      payloadSize.total += size;\n\n      if (payloadSize.min > size) payloadSize.min = size;\n      if (payloadSize.max < size) payloadSize.max = size;\n\n      payloadSize.avg = payloadSize.total / wasInQueue[eventName].count;\n\n      if (processingTime.min > processTime) processingTime.min = processTime;\n      if (processingTime.max < processTime) processingTime.max = processTime;\n\n      processingTime.last = processTime;\n      processingTime.total += processTime;\n      processingTime.avg = processingTime.total / wasInQueue[eventName].count;\n    }\n  }\n\n  setAnnotationQueueLength(meetingId, size) {\n    this.metrics[meetingId].annotationQueueLength = size;\n  }\n\n  startDumpFile() {\n    Meteor.setInterval(() => {\n      try {\n        const fileDate = new Date();\n        const fullYear = fileDate.getFullYear();\n        const month = (fileDate.getMonth() + 1).toString().padStart(2, '0');\n        const day = fileDate.getDate().toString().padStart(2, '0');\n        const hour = fileDate.getHours().toString().padStart(2, '0');\n        const minutes = fileDate.getMinutes().toString().padStart(2, '0');\n        const seconds = fileDate.getSeconds().toString().padStart(2, '0');\n\n        const folderName = `${fullYear}${month}${day}_${hour}`;\n        const fileName = `${folderName}${minutes}${seconds}_metrics.json`;\n\n        const folderPath = path.join(metricsFolderPath, folderName);\n        const fullFilePath = path.join(folderPath, fileName);\n\n        if (!fs.existsSync(folderPath)) {\n          Logger.debug(`Creating folder: ${folderPath}`);\n          fs.mkdirSync(folderPath);\n        }\n\n        fs.writeFileSync(fullFilePath, JSON.stringify(this.metrics));\n\n        Logger.info('Metric file successfully written');\n      } catch (err) {\n        Logger.error('Error on writing metrics to disk.', err);\n      }\n    }, metricsDumpIntervalMs);\n  }\n\n  removeMeeting(meetingId) {\n    if (removeMeetingOnEnd) {\n      Logger.info(`Removing meeting ${meetingId} from metrics`);\n      delete this.metrics[meetingId];\n    } else {\n      Logger.info(`Skipping remove of meeting ${meetingId} from metrics`);\n    }\n  }\n}\n\nconst metricsSingleton = new Metrics();\n\nexport default metricsSingleton;\n","import { Meteor } from 'meteor/meteor';\nimport { setMinimumBrowserVersions } from 'meteor/modern-browsers';\n\nconst setMinBrowserVersions = () => {\n  const { minBrowserVersions } = Meteor.settings.private;\n\n  const versions = {};\n\n  minBrowserVersions.forEach((elem) => {\n    let { version } = elem;\n    if (version === 'Infinity') version = Infinity;\n\n    versions[elem.browser] = version;\n  });\n\n  setMinimumBrowserVersions(versions, 'bbb-min');\n};\n\nexport default setMinBrowserVersions;\n","/* global PowerQueue */\nimport Redis from 'redis';\nimport { Meteor } from 'meteor/meteor';\nimport { EventEmitter2 } from 'eventemitter2';\nimport { check } from 'meteor/check';\nimport fs from 'fs';\nimport Logger from './logger';\nimport Metrics from './metrics';\n\n// Fake meetingId used for messages that have no meetingId\nconst NO_MEETING_ID = '_';\n\nconst { queueMetrics } = Meteor.settings.private.redis.metrics;\n\nconst makeEnvelope = (channel, eventName, header, body, routing) => {\n  const envelope = {\n    envelope: {\n      name: eventName,\n      routing: routing || {\n        sender: 'html5-server',\n      },\n      timestamp: Date.now(),\n    },\n    core: {\n      header,\n      body,\n    },\n  };\n\n  return JSON.stringify(envelope);\n};\n\nclass MeetingMessageQueue {\n  constructor(eventEmitter, asyncMessages = [], redisDebugEnabled = false) {\n    this.asyncMessages = asyncMessages;\n    this.emitter = eventEmitter;\n    this.queue = new PowerQueue();\n    this.redisDebugEnabled = redisDebugEnabled;\n\n    this.handleTask = this.handleTask.bind(this);\n    this.queue.taskHandler = this.handleTask;\n  }\n\n  handleTask(data, next) {\n    const { channel } = data;\n    const { envelope } = data.parsedMessage;\n    const { header } = data.parsedMessage.core;\n    const { body } = data.parsedMessage.core;\n    const { meetingId } = header;\n    const eventName = header.name;\n    const isAsync = this.asyncMessages.includes(channel)\n      || this.asyncMessages.includes(eventName);\n\n    const beginHandleTimestamp = Date.now();\n    let called = false;\n\n    check(eventName, String);\n    check(body, Object);\n\n    const callNext = () => {\n      if (called) return;\n      if (this.redisDebugEnabled) {\n        Logger.debug(`Redis: ${eventName} completed ${isAsync ? 'async' : 'sync'}`);\n      }\n      called = true;\n\n      if (queueMetrics) {\n        const queueId = meetingId || NO_MEETING_ID;\n        const dataLength = JSON.stringify(data).length;\n\n        Metrics.processEvent(queueId, eventName, dataLength, beginHandleTimestamp);\n      }\n\n      const queueLength = this.queue.length();\n      if (queueLength > 100) {\n        Logger.warn(`Redis: MeetingMessageQueue for meetingId=${meetingId} has queue size=${queueLength} `);\n      }\n      next();\n    };\n\n    const onError = (reason) => {\n      Logger.error(`${eventName}: ${reason.stack ? reason.stack : reason}`);\n      callNext();\n    };\n\n    try {\n      if (this.redisDebugEnabled) {\n        Logger.debug(`Redis: ${JSON.stringify(data.parsedMessage.core)} emitted`);\n      }\n\n      if (isAsync) {\n        callNext();\n      }\n\n      this.emitter\n        .emitAsync(eventName, { envelope, header, body }, meetingId)\n        .then(callNext)\n        .catch(onError);\n    } catch (reason) {\n      onError(reason);\n    }\n  }\n\n  add(...args) {\n    return this.queue.add(...args);\n  }\n}\n\nclass RedisPubSub {\n  static handlePublishError(err) {\n    if (err) {\n      Logger.error(err);\n    }\n  }\n\n  constructor(config = {}) {\n    this.config = config;\n\n    this.didSendRequestEvent = false;\n    const host = process.env.REDIS_HOST || Meteor.settings.private.redis.host;\n    const redisConf = Meteor.settings.private.redis;\n    this.instanceMax = parseInt(process.env.INSTANCE_MAX, 10) || 1;\n    this.instanceId = parseInt(process.env.INSTANCE_ID, 10) || 1; // 1 also handles running in dev mode\n    this.customRedisChannel = `to-html5-redis-channel${this.instanceId}`;\n\n    const { password, port } = redisConf;\n\n    if (password) {\n      this.pub = Redis.createClient({ host, port, password });\n      this.sub = Redis.createClient({ host, port, password });\n      this.pub.auth(password);\n      this.sub.auth(password);\n    } else {\n      this.pub = Redis.createClient({ host, port });\n      this.sub = Redis.createClient({ host, port });\n    }\n\n    if (queueMetrics) {\n      Metrics.startDumpFile();\n    }\n\n    this.emitter = new EventEmitter2();\n    this.mettingsQueues = {};\n    this.mettingsQueues[NO_MEETING_ID] = new MeetingMessageQueue(this.emitter, this.config.async, this.config.debug);\n\n    this.handleSubscribe = this.handleSubscribe.bind(this);\n    this.handleMessage = this.handleMessage.bind(this);\n  }\n\n  init() {\n    this.sub.on('psubscribe', Meteor.bindEnvironment(this.handleSubscribe));\n    this.sub.on('pmessage', Meteor.bindEnvironment(this.handleMessage));\n\n    const channelsToSubscribe = this.config.subscribeTo;\n\n    channelsToSubscribe.push(this.customRedisChannel);\n\n    channelsToSubscribe.forEach((channel) => {\n      this.sub.psubscribe(channel);\n    });\n\n    if (this.redisDebugEnabled) {\n      Logger.debug(`Redis: Subscribed to '${channelsToSubscribe}'`);\n    }\n  }\n\n  updateConfig(config) {\n    this.config = Object.assign({}, this.config, config);\n    this.redisDebugEnabled = this.config.debug;\n  }\n\n\n  // TODO: Move this out of this class, maybe pass as a callback to init?\n  handleSubscribe() {\n    if (this.didSendRequestEvent) return;\n\n    // populate collections with pre-existing data\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'GetAllMeetingsReqMsg';\n\n    const body = {\n      requesterId: 'nodeJSapp',\n      html5InstanceId: this.instanceId,\n    };\n\n    this.publishSystemMessage(CHANNEL, EVENT_NAME, body);\n    this.didSendRequestEvent = true;\n  }\n\n  handleMessage(pattern, channel, message) {\n    const parsedMessage = JSON.parse(message);\n    const { name: eventName, meetingId } = parsedMessage.core.header;\n    const { ignored: ignoredMessages, async } = this.config;\n\n    if (ignoredMessages.includes(channel)\n      || ignoredMessages.includes(eventName)) {\n      if (eventName === 'CheckAlivePongSysMsg') {\n        return;\n      }\n      if (this.redisDebugEnabled) {\n        Logger.debug(`Redis: ${eventName} skipped`);\n      }\n      return;\n    }\n\n    const queueId = meetingId || NO_MEETING_ID;\n\n    if (eventName === 'MeetingCreatedEvtMsg' || eventName === 'SyncGetMeetingInfoRespMsg') {\n      const newIntId = parsedMessage.core.body.props.meetingProp.intId;\n      const instanceId = parsedMessage.core.body.props.systemProps.html5InstanceId;\n\n      Logger.warn(`${eventName} (name=${parsedMessage.core.body.props.meetingProp.name}) received with meetingInstance: ${instanceId} -- this is instance: ${this.instanceId}`);\n\n      if (instanceId === this.instanceId) {\n        this.mettingsQueues[newIntId] = new MeetingMessageQueue(this.emitter, async, this.redisDebugEnabled);\n      } else {\n        // Logger.error('THIS NODEJS ' + this.instanceId + ' IS **NOT** PROCESSING EVENTS FOR THIS MEETING ' + instanceId)\n      }\n    }\n\n    // if (channel !== this.customRedisChannel && queueId in this.mettingsQueues) {\n    //   Logger.error(`Consider routing ${eventName} to ${this.customRedisChannel}` );\n    //   // Logger.error(`Consider routing ${eventName} to ${this.customRedisChannel}` + message);\n    // }\n\n    if (channel === this.customRedisChannel || queueId in this.mettingsQueues) {\n      this.mettingsQueues[queueId].add({\n        pattern,\n        channel,\n        eventName,\n        parsedMessage,\n      });\n    }\n  }\n\n  destroyMeetingQueue(id) {\n    delete this.mettingsQueues[id];\n  }\n\n  on(...args) {\n    return this.emitter.on(...args);\n  }\n\n  publishVoiceMessage(channel, eventName, voiceConf, payload) {\n    const header = {\n      name: eventName,\n      voiceConf,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishSystemMessage(channel, eventName, payload) {\n    const header = {\n      name: eventName,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishMeetingMessage(channel, eventName, meetingId, payload) {\n    const header = {\n      name: eventName,\n      meetingId,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishUserMessage(channel, eventName, meetingId, userId, payload) {\n    const header = {\n      name: eventName,\n      meetingId,\n      userId,\n    };\n\n    if (!meetingId || !userId) {\n      Logger.warn(`Publishing ${eventName} with potentially missing data userId=${userId} meetingId=${meetingId}`);\n    }\n    const envelope = makeEnvelope(channel, eventName, header, payload, { meetingId, userId });\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n}\n\nconst RedisPubSubSingleton = new RedisPubSub();\n\nMeteor.startup(() => {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  RedisPubSubSingleton.updateConfig(REDIS_CONFIG);\n  RedisPubSubSingleton.init();\n});\n\nexport default RedisPubSubSingleton;\n","/* global __meteor_runtime_config__ */\nimport { Meteor } from 'meteor/meteor';\nimport fs from 'fs';\nimport YAML from 'yaml';\n\nconst YAML_FILE_PATH = process.env.BBB_HTML5_SETTINGS || 'assets/app/config/settings.yml';\nconst INSTANCE_MAX = parseInt(process.env.INSTANCE_MAX, 10) || 1;\nconst REQUESTED_INSTANCE_ID = parseInt(process.env.INSTANCE_ID, 10) || 1;\nconst INSTANCE_ID = (INSTANCE_MAX < REQUESTED_INSTANCE_ID) ? 1 : REQUESTED_INSTANCE_ID;\n\n\ntry {\n  if (fs.existsSync(YAML_FILE_PATH)) {\n    const SETTINGS = YAML.parse(fs.readFileSync(YAML_FILE_PATH, 'utf-8'));\n\n    Meteor.settings = SETTINGS;\n    Meteor.settings.public.app.instanceId = `/${INSTANCE_ID}`;\n\n    __meteor_runtime_config__.PUBLIC_SETTINGS = SETTINGS.public;\n  } else {\n    throw new Error('File doesn\\'t exists');\n  }\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.error('Error on load configuration file.', error);\n}\n","// Used in Flash and HTML to show a legitimate break in the line\nconst BREAK_LINE = '<br/>';\n\n// Soft return in HTML to signify a broken line without\n// displaying the escaped '<br/>' line break text\nconst CARRIAGE_RETURN = '\\r';\n\n// Handle this the same as carriage return, in case text copied has this\nconst NEW_LINE = '\\n';\n\nexport { BREAK_LINE, CARRIAGE_RETURN, NEW_LINE };\n","export const XLS = 'application/vnd.ms-excel';\nexport const XLSX = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\nexport const DOC = 'application/msword';\nexport const DOCX = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\nexport const PPT = 'application/vnd.ms-powerpoint';\nexport const PPTX = 'application/vnd.openxmlformats-officedocument.presentationml.presentation';\nexport const ODT = 'application/vnd.oasis.opendocument.text';\nexport const RTF = 'application/rtf';\nexport const TXT = 'text/plain';\nexport const ODS = 'application/vnd.oasis.opendocument.spreadsheet';\nexport const ODP = 'application/vnd.oasis.opendocument.presentation';\nexport const PDF = 'application/pdf';\nexport const JPEG = 'image/jpeg';\nexport const PNG = 'image/png';\nexport const SVG = 'image/svg+xml';\n\nexport const UPLOAD_SUPORTED = [\n  XLS,\n  XLSX,\n  DOC,\n  DOCX,\n  PPT,\n  PPTX,\n  ODT,\n  RTF,\n  TXT,\n  ODS,\n  ODP,\n  PDF,\n  JPEG,\n  PNG,\n];\n","//\n// Regular Expression for URL validation\n//\n// Author: Diego Perini\n// Updated: 2010/12/05\n// License: MIT\n//\n// Copyright (c) 2010-2013 Diego Perini (http://www.iport.it)\n//\n// Permission is hereby granted, free of charge, to any person\n// obtaining a copy of this software and associated documentation\n// files (the \"Software\"), to deal in the Software without\n// restriction, including without limitation the rights to use,\n// copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the\n// Software is furnished to do so, subject to the following\n// conditions:\n//\n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n// OTHER DEALINGS IN THE SOFTWARE.\n//\n// the regular expression composed & commented\n// could be easily tweaked for RFC compliance,\n// it was expressly modified to fit & satisfy\n// these test for an URL shortener:\n//\n//   http://mathiasbynens.be/demo/url-regex\n//\n// Notes on possible differences from a standard/generic validation:\n//\n// - utf-8 char class take in consideration the full Unicode range\n// - TLDs have been made mandatory so single names like \"localhost\" fails\n// - protocols have been restricted to ftp, http and https only as requested\n//\n// Changes:\n//\n// - IP address dotted notation validation, range: 1.0.0.0 - 223.255.255.255\n//   first and last IP address of each class is considered invalid\n//   (since they are broadcast/network addresses)\n//\n// - Added exclusion of private, reserved and/or local networks ranges\n//\n// - Made starting path slash optional (http://example.com?foo=bar)\n//\n// - Allow a dot (.) at the end of hostnames (http://example.com.)\n//\n// Compressed one-line versions:\n//\n// Javascript version (merge into one line)\n//\n// /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})\n// (?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})\n// (?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}\n// (?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)\n// (?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)\n// (?::\\d{2,5})?(?:[/?#]\\S*)?$/i\n//\n// PHP version (merge into one line)\n//\n// _^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)\n// (?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])\n// (?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5]))\n// {2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)\n// *[a-z\\x{00a1}-\\x{ffff}0-9]+)(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)*[a-z\\x{00a1}-\\x{ffff}0-9]+)\n// *(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$_iuS\n//\n\nexport default new RegExp(\n\n  // protocol identifier\n  '(?:(?:https?|ftp)://)' +\n\n  // user:pass authentication\n  '(?:\\\\S+(?::\\\\S*)?@)?' +\n  '(?:' +\n\n    // IP address exclusion\n    // private & local networks\n    '(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})' +\n    '(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})' +\n    '(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})' +\n\n    // IP address dotted notation octets\n    // excludes loopback network 0.0.0.0\n    // excludes reserved space >= 224.0.0.0\n    // excludes network & broacast addresses\n    // (first & last IP address of each class)\n    '(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])' +\n    '(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}' +\n    '(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))' +\n  '|' +\n\n    // host name\n    '(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)' +\n\n    // domain name\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*' +\n\n    // TLD identifier\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))' +\n\n    // TLD may end with dot\n    '\\\\.?' +\n  ')' +\n\n  // port number\n  '(?::\\\\d{2,5})?' +\n\n  // resource path\n  '(?:[/?#]\\\\S*)?', 'img',\n);\n","import '/imports/startup/server';\n\n// 2x\nimport '/imports/api/meetings/server';\nimport '/imports/api/users/server';\nimport '/imports/api/annotations/server';\nimport '/imports/api/cursor/server';\nimport '/imports/api/polls/server';\nimport '/imports/api/captions/server';\nimport '/imports/api/presentations/server';\nimport '/imports/api/presentation-pods/server';\nimport '/imports/api/presentation-upload-token/server';\nimport '/imports/api/slides/server';\nimport '/imports/api/breakouts/server';\nimport '/imports/api/group-chat/server';\nimport '/imports/api/group-chat-msg/server';\nimport '/imports/api/screenshare/server';\nimport '/imports/api/users-settings/server';\nimport '/imports/api/voice-users/server';\nimport '/imports/api/whiteboard-multi-user/server';\nimport '/imports/api/video-streams/server';\nimport '/imports/api/network-information/server';\nimport '/imports/api/users-infos/server';\nimport '/imports/api/connection-status/server';\nimport '/imports/api/note/server';\nimport '/imports/api/external-videos/server';\nimport '/imports/api/guest-users/server';\nimport '/imports/api/local-settings/server';\nimport '/imports/api/voice-call-states/server';\nimport '/imports/api/auth-token-validation/server';\n\n// Commons\nimport '/imports/api/log-client/server';\nimport '/imports/api/common/server/helpers';\nimport '/imports/startup/server/logger';\n\n// Needed for Atmosphere package RocketChat/meteor-streamer\n// It is out of date and was written when Meteor contained lodash\n// package. However, we now import lodash as an npm package\n// in order to control versions, update flexibly, etc..\n// Setting the global._ to utilize the npm lodash package is an interim fix\n// and its introduction was inspired by\n// https://github.com/RocketChat/meteor-streamer/issues/40#issuecomment-497627893\nimport _ from 'lodash';\n\nglobal._ = _;\n"]}