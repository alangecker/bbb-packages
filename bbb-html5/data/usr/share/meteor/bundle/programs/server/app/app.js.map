{"version":3,"sources":["meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardCleared.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardSend.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardUndo.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/clearWhiteboard.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendAnnotationHelper.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendBulkAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/undoAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/addAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/clearAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/removeAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/annotations/server/index.js","meteor://ðŸ’»app/imports/api/annotations/server/methods.js","meteor://ðŸ’»app/imports/api/annotations/server/publishers.js","meteor://ðŸ’»app/imports/api/annotations/server/streamer.js","meteor://ðŸ’»app/imports/api/annotations/addAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/index.js","meteor://ðŸ’»app/imports/api/auth-token-validation/server/modifiers/clearAuthTokenValidation.js","meteor://ðŸ’»app/imports/api/auth-token-validation/server/modifiers/upsertValidationState.js","meteor://ðŸ’»app/imports/api/auth-token-validation/index.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutClosed.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutJoinURL.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutList.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/joinedUsersChanged.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/updateTimeRemaining.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/createBreakout.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/endAllBreakouts.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/requestJoinURL.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/sendMessageToAllBreakouts.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/setBreakoutsTime.js","meteor://ðŸ’»app/imports/api/breakouts/server/modifiers/clearBreakouts.js","meteor://ðŸ’»app/imports/api/breakouts/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/breakouts/server/index.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods.js","meteor://ðŸ’»app/imports/api/breakouts/server/publishers.js","meteor://ðŸ’»app/imports/api/breakouts/index.js","meteor://ðŸ’»app/imports/api/breakouts-history/server/handlers/breakoutRoomsList.js","meteor://ðŸ’»app/imports/api/breakouts-history/server/handlers/messageToAllSent.js","meteor://ðŸ’»app/imports/api/breakouts-history/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/breakouts-history/server/index.js","meteor://ðŸ’»app/imports/api/breakouts-history/server/publishers.js","meteor://ðŸ’»app/imports/api/breakouts-history/index.js","meteor://ðŸ’»app/imports/api/captions/server/handlers/captionsOwnerUpdated.js","meteor://ðŸ’»app/imports/api/captions/server/methods/pushSpeechTranscript.js","meteor://ðŸ’»app/imports/api/captions/server/methods/startDictation.js","meteor://ðŸ’»app/imports/api/captions/server/methods/stopDictation.js","meteor://ðŸ’»app/imports/api/captions/server/methods/updateCaptionsOwner.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/clearCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/createCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/setDictation.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/setTranscript.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/updateCaptionsOwner.js","meteor://ðŸ’»app/imports/api/captions/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/captions/server/helpers.js","meteor://ðŸ’»app/imports/api/captions/server/index.js","meteor://ðŸ’»app/imports/api/captions/server/methods.js","meteor://ðŸ’»app/imports/api/captions/server/publishers.js","meteor://ðŸ’»app/imports/api/captions/index.js","meteor://ðŸ’»app/imports/api/connection-status/server/methods/addConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/methods/voidConnection.js","meteor://ðŸ’»app/imports/api/connection-status/server/modifiers/clearConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/modifiers/updateConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/index.js","meteor://ðŸ’»app/imports/api/connection-status/server/methods.js","meteor://ðŸ’»app/imports/api/connection-status/server/publishers.js","meteor://ðŸ’»app/imports/api/connection-status/index.js","meteor://ðŸ’»app/imports/api/cursor/server/handlers/cursorUpdate.js","meteor://ðŸ’»app/imports/api/cursor/server/methods/publishCursorUpdate.js","meteor://ðŸ’»app/imports/api/cursor/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/cursor/server/index.js","meteor://ðŸ’»app/imports/api/cursor/server/methods.js","meteor://ðŸ’»app/imports/api/cursor/server/streamer.js","meteor://ðŸ’»app/imports/api/external-videos/server/handlers/startExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/handlers/stopExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/handlers/updateExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/emitExternalVideoEvent.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/startWatchingExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/stopWatchingExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/modifiers/startExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/modifiers/stopExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/modifiers/updateExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/external-videos/server/index.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods.js","meteor://ðŸ’»app/imports/api/external-videos/server/streamer.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChatCreated.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChatDestroyed.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChats.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods/createGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods/destroyGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/modifiers/addGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/modifiers/clearGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/group-chat/server/index.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods.js","meteor://ðŸ’»app/imports/api/group-chat/server/publishers.js","meteor://ðŸ’»app/imports/api/group-chat/index.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/clearPublicGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/groupChatMsgBroadcast.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/syncGroupsChat.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/userTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/chatMessageBeforeJoinCounter.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/clearPublicChatHistory.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/fetchMessagePerPage.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/sendGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/startUserTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/stopUserTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/addBulkGroupChatMsgs.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/addGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/addSystemMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/clearGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/startTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/stopTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/syncMeetingChatMsgs.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/index.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/publishers.js","meteor://ðŸ’»app/imports/api/group-chat-msg/index.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestApproved.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestWaitingLeft.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestsWaitingForApproval.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/privateGuestLobbyMessageChanged.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/allowPendingUsers.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/changeGuestPolicy.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/setGuestLobbyMessage.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/setPrivateGuestLobbyMessage.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/updatePositionInWaitingQueue.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/clearGuestUsers.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/removeGuest.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/setGuestStatus.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/setPrivateGuestLobbyMessage.js","meteor://ðŸ’»app/imports/api/guest-users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/guest-users/server/index.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods.js","meteor://ðŸ’»app/imports/api/guest-users/server/publishers.js","meteor://ðŸ’»app/imports/api/guest-users/index.js","meteor://ðŸ’»app/imports/api/local-settings/server/methods/userChangedLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/modifiers/clearLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/modifiers/setChangedLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/index.js","meteor://ðŸ’»app/imports/api/local-settings/server/methods.js","meteor://ðŸ’»app/imports/api/local-settings/server/publishers.js","meteor://ðŸ’»app/imports/api/local-settings/index.js","meteor://ðŸ’»app/imports/api/log-client/server/methods/logClient.js","meteor://ðŸ’»app/imports/api/log-client/server/index.js","meteor://ðŸ’»app/imports/api/log-client/server/methods.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/broadcastLayout.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/getAllMeetings.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/guestLobbyMessageChanged.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/guestPolicyChanged.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingCreation.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingDestruction.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingEnd.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingLockChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/recordingStatusChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/recordingTimerChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/selectRandomViewer.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/timeRemainingUpdate.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/userLockChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/webcamOnlyModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/changeLayout.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/clearRandomlySelectedUser.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/endMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleLockSettings.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleRecording.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleWebcamsOnlyForModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/transferUser.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/addMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/changeLayout.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/changeLockSettings.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/changeUserLock.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/clearExternalVideoMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/clearMeetingTimeRemaining.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/clearRecordMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/meetingHasEnded.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/setGuestLobbyMessage.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/setGuestPolicy.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/setPublishedPoll.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/updateRandomViewer.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/webcamOnlyModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/meetings/server/index.js","meteor://ðŸ’»app/imports/api/meetings/server/methods.js","meteor://ðŸ’»app/imports/api/meetings/server/publishers.js","meteor://ðŸ’»app/imports/api/meetings/index.js","meteor://ðŸ’»app/imports/api/pads/server/handlers/groupCreated.js","meteor://ðŸ’»app/imports/api/pads/server/handlers/padContent.js","meteor://ðŸ’»app/imports/api/pads/server/handlers/padCreated.js","meteor://ðŸ’»app/imports/api/pads/server/handlers/padTail.js","meteor://ðŸ’»app/imports/api/pads/server/handlers/padUpdated.js","meteor://ðŸ’»app/imports/api/pads/server/handlers/sessionCreated.js","meteor://ðŸ’»app/imports/api/pads/server/handlers/sessionDeleted.js","meteor://ðŸ’»app/imports/api/pads/server/methods/createGroup.js","meteor://ðŸ’»app/imports/api/pads/server/methods/createPad.js","meteor://ðŸ’»app/imports/api/pads/server/methods/createSession.js","meteor://ðŸ’»app/imports/api/pads/server/methods/getPadId.js","meteor://ðŸ’»app/imports/api/pads/server/methods/updatePad.js","meteor://ðŸ’»app/imports/api/pads/server/modifiers/clearPads.js","meteor://ðŸ’»app/imports/api/pads/server/modifiers/contentPad.js","meteor://ðŸ’»app/imports/api/pads/server/modifiers/createGroup.js","meteor://ðŸ’»app/imports/api/pads/server/modifiers/createPad.js","meteor://ðŸ’»app/imports/api/pads/server/modifiers/createSession.js","meteor://ðŸ’»app/imports/api/pads/server/modifiers/deleteSession.js","meteor://ðŸ’»app/imports/api/pads/server/modifiers/tailPad.js","meteor://ðŸ’»app/imports/api/pads/server/modifiers/updatePad.js","meteor://ðŸ’»app/imports/api/pads/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/pads/server/helpers.js","meteor://ðŸ’»app/imports/api/pads/server/index.js","meteor://ðŸ’»app/imports/api/pads/server/methods.js","meteor://ðŸ’»app/imports/api/pads/server/publishers.js","meteor://ðŸ’»app/imports/api/pads/index.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollPublished.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollStarted.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollStopped.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/sendPollChatMsg.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/userResponded.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/userTypedResponse.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/userVoted.js","meteor://ðŸ’»app/imports/api/polls/server/methods/publishPoll.js","meteor://ðŸ’»app/imports/api/polls/server/methods/publishTypedVote.js","meteor://ðŸ’»app/imports/api/polls/server/methods/publishVote.js","meteor://ðŸ’»app/imports/api/polls/server/methods/startPoll.js","meteor://ðŸ’»app/imports/api/polls/server/methods/stopPoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/addPoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/clearPolls.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/removePoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/updateVotes.js","meteor://ðŸ’»app/imports/api/polls/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/polls/server/index.js","meteor://ðŸ’»app/imports/api/polls/server/methods.js","meteor://ðŸ’»app/imports/api/polls/server/publishers.js","meteor://ðŸ’»app/imports/api/polls/index.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/createNewPresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/removePresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/setPresenterInPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/syncGetPresentationPods.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/addPresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/clearPresentationPods.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/removePresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/setPresenterInPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/index.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/publishers.js","meteor://ðŸ’»app/imports/api/presentation-pods/index.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/handlers/presentationUploadTokenFail.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/handlers/presentationUploadTokenPass.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods/requestPresentationUploadToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods/setUsedToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/index.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/publishers.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/index.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationAdded.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationConversionUpdate.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationCurrentSet.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationDownloadableSet.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationRemove.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/removePresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/setPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/setPresentationDownloadable.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/addPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/clearPresentations.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/removePresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/setCurrentPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/setPresentationDownloadable.js","meteor://ðŸ’»app/imports/api/presentations/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentations/server/index.js","meteor://ðŸ’»app/imports/api/presentations/server/methods.js","meteor://ðŸ’»app/imports/api/presentations/server/publishers.js","meteor://ðŸ’»app/imports/api/presentations/index.js","meteor://ðŸ’»app/imports/api/screenshare/server/handlers/screenshareStarted.js","meteor://ðŸ’»app/imports/api/screenshare/server/handlers/screenshareStopped.js","meteor://ðŸ’»app/imports/api/screenshare/server/handlers/screenshareSync.js","meteor://ðŸ’»app/imports/api/screenshare/server/modifiers/addScreenshare.js","meteor://ðŸ’»app/imports/api/screenshare/server/modifiers/clearScreenshare.js","meteor://ðŸ’»app/imports/api/screenshare/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/screenshare/server/index.js","meteor://ðŸ’»app/imports/api/screenshare/server/methods.js","meteor://ðŸ’»app/imports/api/screenshare/server/publishers.js","meteor://ðŸ’»app/imports/api/screenshare/index.js","meteor://ðŸ’»app/imports/api/slides/server/handlers/slideChange.js","meteor://ðŸ’»app/imports/api/slides/server/handlers/slideResize.js","meteor://ðŸ’»app/imports/api/slides/server/methods/switchSlide.js","meteor://ðŸ’»app/imports/api/slides/server/methods/zoomSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/addSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/addSlidePositions.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/changeCurrentSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/clearSlides.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/clearSlidesPresentation.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/resizeSlide.js","meteor://ðŸ’»app/imports/api/slides/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/slides/server/helpers.js","meteor://ðŸ’»app/imports/api/slides/server/index.js","meteor://ðŸ’»app/imports/api/slides/server/methods.js","meteor://ðŸ’»app/imports/api/slides/server/publishers.js","meteor://ðŸ’»app/imports/api/slides/index.js","meteor://ðŸ’»app/imports/api/users/server/handlers/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/handlers/emojiStatus.js","meteor://ðŸ’»app/imports/api/users/server/handlers/presenterAssigned.js","meteor://ðŸ’»app/imports/api/users/server/handlers/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userInactivityInspect.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userJoin.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userJoined.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userLeftFlagUpdated.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userPinChanged.js","meteor://ðŸ’»app/imports/api/users/server/handlers/validateAuthToken.js","meteor://ðŸ’»app/imports/api/users/server/methods/assignPresenter.js","meteor://ðŸ’»app/imports/api/users/server/methods/changePin.js","meteor://ðŸ’»app/imports/api/users/server/methods/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/methods/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/methods/setEmojiStatus.js","meteor://ðŸ’»app/imports/api/users/server/methods/setMobileUser.js","meteor://ðŸ’»app/imports/api/users/server/methods/setRandomUser.js","meteor://ðŸ’»app/imports/api/users/server/methods/setUserEffectiveConnectionType.js","meteor://ðŸ’»app/imports/api/users/server/methods/toggleUserLock.js","meteor://ðŸ’»app/imports/api/users/server/methods/userActivitySign.js","meteor://ðŸ’»app/imports/api/users/server/methods/userLeaving.js","meteor://ðŸ’»app/imports/api/users/server/methods/userLeftMeeting.js","meteor://ðŸ’»app/imports/api/users/server/methods/validateAuthToken.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/addDialInUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/addUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/changePin.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/changePresenter.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/clearUsers.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/createDummyUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/setMobile.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/setUserEffectiveConnectionType.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/userEjected.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/userInactivityInspect.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/userLeftFlagUpdated.js","meteor://ðŸ’»app/imports/api/users/server/store/pendingAuthentications.js","meteor://ðŸ’»app/imports/api/users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/users/server/index.js","meteor://ðŸ’»app/imports/api/users/server/methods.js","meteor://ðŸ’»app/imports/api/users/server/publishers.js","meteor://ðŸ’»app/imports/api/users/index.js","meteor://ðŸ’»app/imports/api/users-infos/server/handlers/userInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods/removeUserInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods/requestUserInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/addUserInfo.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/clearUserInfo.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/clearUserInfoForRequester.js","meteor://ðŸ’»app/imports/api/users-infos/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/users-infos/server/index.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods.js","meteor://ðŸ’»app/imports/api/users-infos/server/publishers.js","meteor://ðŸ’»app/imports/api/users-infos/index.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/addUserPersistentData.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/changeHasConnectionStatus.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/changeHasMessages.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/clearUsersPersistentData.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/setloggedOutStatus.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/updateRole.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/modifiers/updateUserBreakoutRoom.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/index.js","meteor://ðŸ’»app/imports/api/users-persistent-data/server/publishers.js","meteor://ðŸ’»app/imports/api/users-persistent-data/index.js","meteor://ðŸ’»app/imports/api/users-settings/server/methods/addUserSettings.js","meteor://ðŸ’»app/imports/api/users-settings/server/modifiers/addUserSetting.js","meteor://ðŸ’»app/imports/api/users-settings/server/modifiers/clearUsersSettings.js","meteor://ðŸ’»app/imports/api/users-settings/server/index.js","meteor://ðŸ’»app/imports/api/users-settings/server/methods.js","meteor://ðŸ’»app/imports/api/users-settings/server/publishers.js","meteor://ðŸ’»app/imports/api/users-settings/index.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/floorChanged.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/userPinChanged.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/userSharedHtml5Webcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/userUnsharedHtml5Webcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/webcamSync.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods/ejectUserCameras.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods/userShareWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods/userUnshareWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/changePin.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/clearVideoStreams.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/floorChanged.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/sharedWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/unsharedWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/updatedVideoStream.js","meteor://ðŸ’»app/imports/api/video-streams/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/video-streams/server/helpers.js","meteor://ðŸ’»app/imports/api/video-streams/server/index.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods.js","meteor://ðŸ’»app/imports/api/video-streams/server/publisher.js","meteor://ðŸ’»app/imports/api/video-streams/index.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/handlers/voiceCallStateEvent.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/modifiers/clearVoiceCallStates.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/index.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/publishers.js","meteor://ðŸ’»app/imports/api/voice-call-states/index.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/floorChanged.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/getVoiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/joinVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/leftVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/meetingMuted.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/mutedVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/talkingVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/voiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/ejectUserFromVoice.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteAllExceptPresenterToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteAllToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/addVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/changeMuteMeeting.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/clearVoiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/removeVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/updateVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/voice-users/server/index.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods.js","meteor://ðŸ’»app/imports/api/voice-users/server/publishers.js","meteor://ðŸ’»app/imports/api/voice-users/index.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/handlers/modifyWhiteboardAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods/addGlobalAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods/addIndividualAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods/removeGlobalAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods/removeIndividualAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/modifiers/clearWhiteboardMultiUser.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/modifiers/modifyWhiteboardAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/helpers.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/index.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/publishers.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/index.js","meteor://ðŸ’»app/imports/api/common/server/helpers.js","meteor://ðŸ’»app/imports/startup/server/prom-metrics/index.js","meteor://ðŸ’»app/imports/startup/server/prom-metrics/metrics.js","meteor://ðŸ’»app/imports/startup/server/prom-metrics/promAgent.js","meteor://ðŸ’»app/imports/startup/server/prom-metrics/winstonPromTransport.js","meteor://ðŸ’»app/imports/startup/server/ClientConnections.js","meteor://ðŸ’»app/imports/startup/server/index.js","meteor://ðŸ’»app/imports/startup/server/logger.js","meteor://ðŸ’»app/imports/startup/server/metrics.js","meteor://ðŸ’»app/imports/startup/server/minBrowserVersion.js","meteor://ðŸ’»app/imports/startup/server/redis.js","meteor://ðŸ’»app/imports/startup/server/settings.js","meteor://ðŸ’»app/imports/ui/components/layout/enums.js","meteor://ðŸ’»app/imports/utils/lineEndings.js","meteor://ðŸ’»app/imports/utils/mimeTypes.js","meteor://ðŸ’»app/imports/utils/regex-weburl.js","meteor://ðŸ’»app/server/main.js"],"names":["module","export","default","handleWhiteboardAnnotations","_","link","v","check","modifyWhiteboardAccess","clearAnnotations","addAnnotation","meetingId","header","body","Object","userId","String","annotations","whiteboardId","multiUser","Array","each","annotation","wbId","handleWhiteboardCleared","AnnotationsStreamer","fullClear","Boolean","emit","handleWhiteboardSend","Metrics","queueMetrics","Meteor","settings","private","redis","metrics","annotationsQueueProcessInterval","ANNOTATION_PROCESS_INTERVAL","public","whiteboard","annotationsQueue","annotationsRecieverIsRunning","process","keys","length","forEach","setAnnotationQueueLength","setTimeout","hasOwnProperty","push","handleWhiteboardUndo","removeAnnotation","shapeId","annotationId","clearWhiteboard","RedisPubSub","extractCredentials","Logger","REDIS_CONFIG","CHANNEL","channels","toAkkaApps","EVENT_NAME","requesterUserId","payload","publishUserMessage","err","error","stack","sendAnnotation","sendAnnotationHelper","annotationType","id","status","annotationInfo","x","Number","y","fontColor","calcedFontSize","textBoxWidth","text","textBoxHeight","fontSize","dataPoints","type","position","color","thickness","fill","points","dimensions","Match","Maybe","drawEndOnly","sendBulkAnnotations","undoAnnotation","Annotations","addAnnotationQuery","query","insertedId","upsert","selector","modifier","info","numberAffected","remove","processForHTML5ServerOnly","on","methods","AuthTokenValidation","ValidationStates","tokenValidation","findOne","connectionId","connection","validationStatus","VALIDATED","warn","find","debug","publish","boundAnnotations","bind","removeAnnotationsStreamer","addAnnotationsStreamer","get","StreamerCentral","instances","streamer","Streamer","retransmit","allowRead","includes","allowWrite","ANNOTATION_TYPE_TEXT","ANNOTATION_TYPE_PENCIL","handleCommonAnnotation","$set","$setOnInsert","$inc","version","handleTextUpdate","replace","handlePencilUpdate","DRAW_START","DRAW_UPDATE","DRAW_END","baseSelector","baseModifier","$push","$each","collectionOptions","isClient","Mongo","Collection","isServer","_ensureIndex","exportDefault","clearAuthTokenValidation","ClientConnections","num","env","BBB_HTML5_ROLE","removeMeeting","upsertValidationState","reason","updatedAt","Date","getTime","$ne","JSON","stringify","freeze","NOT_VALIDATED","VALIDATING","INVALID","handleBreakoutClosed","clearBreakouts","breakoutId","handleBreakoutJoinURL","Breakouts","redirectToHtml5JoinURL","insertedTime","ATTEMPT_EVERY_MS","updateBreakout","bindEnvironment","update","updateBreakoutPromise","Promise","resolve","updateBreakoutInterval","setInterval","clearInterval","then","_objectSpread","_objectWithoutProperties","handleBreakoutRoomsList","flat","handleBreakoutRoomsListHist","DEFAULT_TIME_REMAINING","parentMeetingId","rooms","sort","a","b","sequence","breakout","html5JoinUrls","breakoutWithoutUrls","urls","joinedUsers","timeRemaining","joinedUsersChanged","updateUserBreakoutRoom","parentId","users","usersMapped","map","user","name","handleUpdateTimeRemaining","options","multi","createBreakoutRoom","durationInMinutes","record","BREAKOUT_LIM","app","breakouts","breakoutRoomLimit","MIN_BREAKOUT_ROOMS","MAX_BREAKOUT_ROOMS","endAllBreakouts","requestJoinURL","userIdToInvite","sendMessageToAllBreakouts","msg","setBreakoutsTime","timeInMinutes","Users","publicationSafeGuard","ROLE_MODERATOR","role_moderator","User","fields","role","presenterSelector","$or","comparisonFunc","condition","_name","freeJoin","$exists","externalId","isDefaultName","shortName","boundBreakouts","BreakoutsHistory","handleSendMessageToAllBreakoutRoomsEvtMsg","senderId","totalOfRooms","broadcastMsgs","messageToAllSent","Meetings","breakoutsHistory","boundUsers","captionsOwnerUpdated","updateCaptionsOwner","locale","ownerId","pushSpeechTranscript","Captions","setTranscript","updatePad","transcript","captions","dictating","startDictation","setDictation","stopDictation","clearCaptions","createCaptions","verbose","initCaptions","axios","CAPTIONS_CONFIG","BASENAME","basename","HOST","host","LOCALES","localesUrl","LOCALES_URL","PORT","init","method","url","responseType","response","locales","data","catch","enabled","requestedBy","boundCaptions","addConnectionStatus","updateConnectionStatus","STATS","stats","logConnectionStatus","value","jitter","loss","rtt","log","voidConnection","PrometheusAgent","METRIC_NAMES","previousRtt","observe","METEOR_RTT","clearConnectionStatus","ConnectionStatus","changeHasConnectionStatus","level","timestamp","connectionStatus","boundNote","handleCursorUpdate","CursorStreamer","CURSOR_PROCCESS_INTERVAL","cursorQueue","proccess","throttle","cursors","publishCursorUpdate","removeCursorStreamer","addCursorStreamer","streamerLog","serverLog","message","handleStartExternalVideo","startExternalVideo","externalVideoUrl","handleStopExternalVideo","stopExternalVideo","handleUpdateExternalVideo","updateExternalVideo","rate","time","state","emitExternalVideoEvent","playerStatus","startWatchingExternalVideo","stopWatchingExternalVideo","ExternalVideoMeetings","ExternalVideoStreamer","removeExternalVideoStreamer","addExternalVideoStreamer","allowRecentMessages","eventName","streamName","allowEmit","handleGroupChatCreated","addGroupChat","handleGroupChatDestroyed","handleGroupChats","chats","chat","createGroupChat","CHAT_ACCESS_PRIVATE","receiver","correlationId","now","access","destroyGroupChat","GroupChat","chatId","createdBy","chatDocument","u","participants","safe","clearGroupChat","clearGroupChatMsg","groupChat","CHAT_CONFIG","PUBLIC_CHAT_TYPE","type_public","$all","boundGroupChat","CHAT_ACCESS_PUBLIC","CHAT_ACCESS","PUBLIC","PRIVATE","clearPublicChatHistory","handleGroupChatMsgBroadcast","addGroupChatMsg","addBulkGroupChatMsgs","bufferChatInsertsMs","msgBuffer","bulkFn","handleSyncGroupChat","syncMeetingChatMsgs","msgs","handleUserTyping","startTyping","chatMessageBeforeJoinCounter","GroupChatMsg","groupChats","fetch","chatIdWithCounter","msgCount","$lt","authTokenValidatedTime","count","filter","PUBLIC_GROUP_CHAT_ID","public_group_id","fetchMessagePerPage","ITENS_PER_PAGE","itemsPerPage","page","messages","skip","limit","sendGroupChatMsg","RegexWebUrl","HTML_SAFE_MAP","parseMessage","parsedMessage","trim","c","startUserTyping","stopUserTyping","UsersTyping","stopTyping","userTyping","mappedMsgs","sender","restMsg","_id","ObjectID","_str","senderName","senderRole","el","insertedCount","rawCollection","insertMany","BREAK_LINE","changeHasMessages","split","join","chatEmphasizedText","msgDocument","insert","addSystemMsg","messageValues","extra","PUBLIC_CHAT_SYSTEM_ID","system_userid","CHAT_CLEAR_MESSAGE","system_messages_keys","chat_clear","SYSTEM_CHAT_TYPE","type_system","clearMsg","$eq","TYPING_TIMEOUT","isTypingTo","typingUser","sendMsgInitiated","stillTyping","bulkOperations","initializeOrderedBulkOp","msgToSync","updateOne","execute","handleClearPublicGroupChat","handleSyncGroupChatMsg","groupChatMsg","chatCount","chatsIds","ct","$gte","$in","usersTyping","pubishUsersTyping","boundUsersTyping","onAdded","handleGuestApproved","setGuestStatus","approvedBy","guests","guest","handleGuestWaitingLeft","removeGuest","handleGuestsWaitingForApproval","stringHash","GuestUsers","updatePositionInWaitingQueue","COLOR_LIST","intId","approved","denied","loginTime","registeredOn","privateGuestLobbyMessage","handlePrivateGuestLobbyMessageChanged","setPrivateGuestLobbyMessage","guestId","allowPendingUsers","mappedGuests","changeGuestPolicy","policyRule","setBy","policy","setGuestLobbyMessage","guestUsers","idx","indexOf","clearGuestUsers","cb","GUEST_STATUS_ALLOW","GUEST_STATUS_DENY","guestLobbyMessage","boundSlides","userChangedLocalSettings","LocalSettings","setChangedLocalSettings","userLocalSettings","isEqual","clearLocalSettings","numChanged","localSettings","boundLocalSettings","logDescription","logCode","extraInfo","userInfo","logContents","logClient","broadcastLayout","changeLayout","layout","setByUserId","applyTo","handleGetAllMeetings","handleMeetingCreation","handleGuestLobbyMessageChanged","handleGuestPolicyChanged","setGuestPolicy","addMeeting","meeting","props","durationInSecods","durationProps","duration","handleMeetingDestruction","destroyMeetingQueue","handleMeetingEnd","meetingHasEnded","meetingType","doc","meetingEnded","meetingEndedBy","meetingEndedReason","learningDashboardAccessToken","password","handleLockSettingsInMeeting","changeLockSettings","handleRecordingStatusChange","RecordMeetings","recording","handleRecordingTimerChange","randomlySelectedUser","updateRandomViewer","userIds","choice","handleTimeRemainingUpdate","MeetingTimeRemaining","timeLeftInSec","timeUpdatedInMinutes","Meeting","meetingProp","isBreakout","PUBLIC_CHAT_INFO","chat_info","changeUserLock","handleChangeWebcamOnlyModerator","changeWebcamOnlyModerator","clearRandomlySelectedUser","endMeeting","toggleLockSettings","lockSettingsProps","disableCam","disableMic","disablePrivateChat","disablePublicChat","disableNotes","hideUserList","lockedLayout","lockOnJoin","lockOnJoinConfigurable","hideViewersCursor","disablePrivChat","disablePubChat","toggleRecording","meetingRecorded","allowedToRecord","recordObject","allowStartStopRecording","toggleWebcamsOnlyForModerator","webcamsOnlyForModerator","transferUser","fromMeetingId","toMeetingId","SanitizeHTML","initPads","LAYOUT_TYPE","addExternalVideo","breakoutProps","breakoutRooms","privateChatEnabled","extId","meetingCameraCap","disabledFeatures","usersProp","userCameraCap","guestPolicy","authenticatedGuest","maxUsers","allowModsToUnmuteUsers","allowModsToEjectCameras","meetingLayout","createdTime","createdDate","meetingExpireIfNoUserJoinedInMinutes","meetingExpireWhenLastUserLeftInMinutes","userInactivityInspectTimerInMinutes","userInactivityThresholdInMinutes","userActivitySignResponseDelayInMinutes","endWhenNoModerator","endWhenNoModeratorDelayInMinutes","welcomeProp","welcomeMsg","modOnlyMessage","welcomeMsgTemplate","recordProp","ObjectIncluding","autoStartRecording","viewerPass","moderatorPass","voiceProp","voiceConf","dialNumber","telVoice","muteOnStart","metadataProp","systemProps","html5InstanceId","groups","restProps","newMeeting","assign","sanitizeTextInChat","original","allowedTags","allowedAttributes","img","allowedSchemes","allowedSchemesByTag","sanitizedWelcomeText","insertBlankTarget","s","i","substr","linkWithoutTarget","RegExp","test","lastIndex","publishedPoll","affectedUsers","locked","lockedBy","clearExternalVideoMeeting","clearMeetingTimeRemaining","clearUsers","clearUsersSettings","clearSlides","clearPolls","clearPads","clearPresentationPods","clearVoiceUsers","clearUserInfo","clearScreenshare","clearRecordMeeting","clearVoiceCallStates","clearVideoStreams","clearUsersPersistentData","clearWhiteboardMultiUser","setPublishedPoll","isPublished","updateRandomUser","SELECT_RANDOM_USER_COUNTDOWN","selectRandomUser","countdown","intervals","updateIndicator","toggleIndicator","getFiveRandom","userList","IDs","slice","splice","Math","floor","random","optionsFor3","requesterId","numberOfUsers","option","order","handleMeetingLocksChange","handleUserLockChange","handleSelectRandomViewer","handleBroadcastLayout","meetings","boundMeetings","recordMeetings","recordPublish","boundRecordMeetings","externalVideoMeetings","externalVideoPublish","boundExternalVideoMeetings","meetingTimeRemaining","timeRemainingPublish","boundtimeRemaining","groupCreated","createGroup","model","padContent","contentPad","start","end","padCreated","createPad","padId","padTail","tailPad","tail","padUpdated","rev","changeset","sessionCreated","createSession","sessionId","sessionDeleted","deleteSession","getPadId","Pads","pad","PadsSessions","PadsUpdates","clear","collection","patch","content","sessions","$pull","getDataFromChangeset","models","NOTES_CONFIG","notes","TOKEN","CAPTIONS","NOTES","splitChangeset","shift","pads","padsSessions","padsUpdates","publishPads","boundPads","publishPadsSessions","boundPadsSessions","publishPadsUpdates","boundPadsUpdates","pollPublished","handleSendSystemChatForPublishedPoll","POLL_CHAT_MESSAGE","poll","chatMessage","pollId","pollStarted","addPoll","pollType","secretPoll","question","pollStopped","removePoll","sendPollChatMsg","CHAT_POLL_RESULTS_MESSAGE","chat_poll_result","pollResultData","userResponded","Polls","answerIds","responses","userTypedResponse","answer","answerId","answers","key","questionId","userVoted","updateVotes","questionType","questionText","numVotes","numRespondents","numResponders","publishPoll","publishTypedVote","pollAnswer","MAX_INPUT_CHARS","maxTypedAnswerLength","allowedToVote","activePoll","existingAnsId","substring","publishVote","pollAnswerIds","startPoll","pollTypes","isMultipleResponse","Custom","stopPoll","userSelector","clientType","requester","handlePollStarted","handlePollStopped","handlePollPublished","handleUserVoted","handleUserResponded","handleUserTypedResponse","DDPServer","server","setPublicationStrategy","publicationStrategies","NO_MERGE","currentPoll","presenter","hasPoll","_publishCursor","ready","publishCurrentPoll","boundPolls","polls","noKeyOptions","CurrentPoll","handleCreateNewPresentationPod","addPresentationPod","currentPresenterId","podId","pod","handleRemovePresentationPod","removePresentationPod","handleSetPresenterInPod","setPresenterInPod","nextPresenterId","handleSyncGetPresentationPods","PresentationPods","pods","presentationPodIds","presentationPodsToRemove","$nin","p","currentPresenter","presentations","addPresentation","undefined","presentation","clearPresentations","clearPresentationUploadToken","presentationPods","boundPresentationPods","handlePresentationUploadTokenFail","PresentationUploadToken","filename","failed","authzToken","handlePresentationUploadTokenPass","Presentations","tmpPresId","used","requestPresentationUploadToken","setUsedToken","presentationUploadToken","boundPresentationUploadToken","handlePresentationAdded","handlePresentationConversionUpdate","OFFICE_DOC_CONVERSION_FAILED_KEY","OFFICE_DOC_CONVERSION_INVALID_KEY","SUPPORTED_DOCUMENT_KEY","UNSUPPORTED_DOCUMENT_KEY","PAGE_COUNT_FAILED_KEY","PAGE_COUNT_EXCEEDED_KEY","PDF_HAS_BIG_PAGE_KEY","GENERATED_SLIDE_KEY","FILE_TOO_LARGE_KEY","presentationId","messageKey","presName","presentationName","statusModifier","maxFileSize","maxNumberPages","presentationToken","bigPageSize","pagesCompleted","numberOfPages","handlePresentationCurrentSet","setCurrentPresentation","handlePresentationDownloadableSet","setPresentationDownloadable","downloadable","handlePresentationRemove","removePresentation","setPresentation","addSlide","getSlideText","request","addSlides","slides","slide","txtUri","current","temporaryPresentationId","pages","thumbUri","swfUri","svgUri","xOffset","yOffset","widthRatio","heightRatio","removable","clearSlidesPresentation","oldCurrent","callback","newCurrent","oldPresentation","newPresentation","e","boundPresentations","handleScreenshareStarted","addScreenshare","handleScreenshareStopped","screenshareConf","handleScreenshareSync","isBroadcasting","Screenshare","screenshare","boundScreenshare","handleSlideChange","changeCurrentSlide","pageId","handleSlideResize","resizeSlide","switchSlide","Slides","slideNumber","Presentation","Error","Slide","zoomSlide","probe","SVG","PNG","calculateSlideData","addSlidePositions","loadSlidesFromHttpAlways","requestWhiteboardHistory","slideId","USER_ID","SUPPORTED_TYPES","fetchImageSizes","imageUri","result","mime","width","height","restSlide","pngUri","imageSizeUri","slideData","slidePosition","SlidePositions","viewBoxWidth","viewBoxHeight","oldSlide","newSlide","numberAffectedSlidePositions","whiteboardIds","row","SlidePosition","calculatedData","slidePositions","publishPositions","boundSlidePositions","handleChangeRole","changeRole","changedBy","handleEmojiStatus","emoji","emojiTime","handlePresenterAssigned","changePresenter","setPresenterInPodReqMsg","credentials","presenterId","assignedBy","defaultPodSelector","currentDefaultPod","setPresenterPayload","prevPresenter","presenterToBeAssigned","handleRemoveUser","removeUser","handleUserInactivityInspect","userInactivityInspect","responseDelay","Integer","userJoin","authToken","handleUserJoined","addUser","handleUserLeftFlag","userLeftFlag","handlePinAssigned","changePin","pin","handleValidateAuthToken","pendingAuthenticationsStore","createDummyUser","clearOtherSessions","sessionUserId","serverSessions","close","valid","waitForApproval","authTokenValidatedOn","reasonCode","pendingAuths","take","pendingAuth","methodInvocationObject","setUserId","add","validated","inactivityCheck","currentConnectionId","assignPresenter","newPresenterId","newPresenterName","banUser","ejectedBy","setEmojiStatus","setMobileUser","setMobile","setRandomUser","setUserEffectiveConnectionType","setEffectiveConnectionType","effectiveConnectionType","toggleUserLock","lock","userActivitySign","userLeaving","auth","loggedOut","removeClientConnection","userLeftMeeting","AUTH_TIMEOUT","validateAuthToken","requesterToken","setTimeoutRef","userValidation","res","rej","observeFunc","obj","clearTimeout","authTokenValidationObserver","added","changed","stop","errMsg","addDialInUser","voiceUser","USER_CONFIG","ROLE_VIEWER","role_viewer","callerName","voiceOnlyUser","toLowerCase","authed","waitingForAcceptance","guestStatus","avatar","VoiceUsers","addUserPsersistentData","addVoiceUser","userData","userInfos","sortName","mobile","isBreakoutUser","left","voiceUserId","callerNum","muted","talking","callingWith","listenOnly","joined","partialUser","updateRole","VideoStreams","setloggedOutStatus","clearUserInfoForRequester","UsersPersistentData","userEjected","disconnectUser","interable","values","session","eject","currentUser","hasMessages","shouldPersist","hasConnectionStatus","queryCurrentUser","queryUserObserver","observeChanges","removed","ejectedReason","ejected","userLeftFlagUpdated","PendingAuthentitcations","constructor","store","generateKey","matches","handleUserLeftFlagUpdated","handleUserPinChanged","publishCurrentUser","CurrentUser","handleUserInformation","addUserInfo","removeUserInformation","UserInfos","getUserInformation","externalUserId","toThirdParty","clearUsersInfo","clearUsersInfoForRequester","requestUserInformation","boundUserInfos","addUserPersistentData","token","lastBreakoutRoom","lastIndexOf","usersPersistentData","viewerSelector","publishUsersPersistentData","addUserSettings","addUserSetting","logger","oldParameters","askForFeedbackOnLogout","autoJoin","autoShareWebcam","autoSwapLayout","clientTitle","customStyle","customStyleUrl","displayBrandingArea","enableVideo","forceListenOnly","hidePresentation","listenOnlyMode","multiUserPenOnly","multiUserTools","presenterTools","shortcuts","skipCheck","oldParametersKeys","currentParameters","valueParser","val","parsedValue","parse","parameters","settingKey","normalizedKey","matchingNewKey","settingsAdded","entries","setting","UserSettings","Any","userSettings","boundUserSettings","handleFloorChanged","floorChanged","lastFloorTime","userPinChanged","handleUserSharedHtml5Webcam","sharedWebcam","isValidStream","stream","handleUserUnsharedHtml5Webcam","unsharedWebcam","handleWebcamSync","addWebcamSync","updatedVideoStream","webcamListSync","streamsIds","webcam","webcamStreamsToUpdate","m","videoStreamsToRemove","videoStream","ejectUserCameras","userShareWebcam","userUnshareWebcam","getDeviceId","getUserName","BASE_FLOOR_TIME","deviceId","vu","updateVideoStream","handlePinnedChanged","FLASH_STREAM_REGEX","splitStream","videoStreams","boundVideoStreams","handleVoiceCallStateEvent","VoiceCallState","clientSession","callState","VoiceCallStates","voiceCallStates","boundVoiceCallStates","handleFloorChange","updateVoiceUser","handleGetVoiceUsers","removeVoiceUser","usersIds","voiceUsersIdsToUpdate","voiceUsersToRemove","handleJoinVoiceUser","handleVoiceUpdate","isDialInUser","meetingID","handleMeetingMuted","changeMuteMeeting","handleVoiceUsers","voiceUsers","voice","ejectUserFromVoice","muteAllExceptPresenterToggle","toggleMeetingMuted","mutedBy","mute","muteAllToggle","muteToggle","uId","toggle","userToMute","_muted","spoke","clearVoiceUser","clearSpokeTimeout","spokeTimeoutHandles","TALKING_TIMEOUT","startTime","endTime","timeoutHandle","spokeDelay","handleLeftVoiceUser","handleTalkingVoiceUser","handleMutedVoiceUser","toggleVoice","muteAllUsers","muteAllExceptPresenter","onCloseConnection","_session","socket","debounce","boundVoiceUser","handleModifyWhiteboardAccess","addGlobalAccess","getUsers","addIndividualAccess","getMultiUser","removeGlobalAccess","removeIndividualAccess","WhiteboardMultiUser","handleGetWhiteboardAccess","isArray","whiteboardMultiUser","boundMultiUser","MSG_DIRECT_TYPE","NODE_USER","item","l","fn","envelope","routing","msgType","shouldSkip","args","credentialsArray","self","stopped","periodicCheck","onStop","METRICS_PREFIX","Agent","buildMetrics","METRICS_ENABLED","path","METRICS_PATH","collectDefaultMetrics","COLLECT_DEFAULT_METRICS","prometheus","prefix","instanceId","parseInt","INSTANCE_ID","injectMetrics","METRICS","Counter","Gauge","Histogram","require","METEOR_METHODS","METEOR_ERRORS_TOTAL","REDIS_MESSAGE_QUEUE","REDIS_PAYLOAD_SIZE","REDIS_PROCESSING_TIME","help","labelNames","buckets","register","LOG_PREFIX","PrometheusScrapeAgent","started","metricsPrefix","collectionTimeout","roleAndInstanceLabels","collect","writeHead","contentType","timeout","labels","WebApp","connectHandlers","use","req","metricsDictionary","increment","metricName","labelsObject","metric","inc","decrement","dec","set","module1","Transport","exports","WinstonPromTransport","opts","setImmediate","errorMessage","syncInterval","syncUsersWithConnectionManager","connections","Map","print","syncConnections","syncConnectionsWithServer","exists","createMeetingConnections","sessionConnections","has","onClose","getConnectionsForClient","mapConnectionsObj","k","meetingConnections","filteredConnections","delete","activeConnections","from","onlineUsers","onlineUsersId","usersQuery","userWithoutConnectionIds","removedUsersWithoutConnection","ClientConnectionsSingleton","eventEmitter","redisPubSub","WebAppInternals","Langmap","fs","lookupUserAgent","lookup","Redis","setMinBrowserVersions","guestWaitHtml","isDevelopment","meteorRoot","realpathSync","cwd","applicationRoot","AVAILABLE_LOCALES","readdirSync","FALLBACK_LOCALES","Assets","getText","exit","startup","APP_CONFIG","CDN_URL","cdn","customHeartbeat","newHeartbeat","heartbeat","currentTime","ws","lastSentFrameTimestamp","_meteorSession","supportsHeartbeats","ping","hto_ref","sentAt","heartbeatTimeout","newSend","send","meteorHeartbeat","_seenPacket","_heartbeatTimeoutHandle","_clearHeartbeatTimeoutTimer","readyState","Buffer","_driver","write","console","recv","bbbFixApplied","__proto__","BrowserPolicy","disallowEval","allowInlineScripts","allowInlineStyles","allowImageDataUrl","allowFontDataUrl","allowOriginForAll","setBundledJsCssPrefix","fontRegExp","rawConnectHandlers","next","_parsedUrl","pathname","setHeader","onMessage","event","methodName","generateLocaleOptions","tempAggregateLocales","file","localeName","nativeName","reverse","index","findIndex","avaibleLocalesNamesJSON","html5clientStatus","fallback","defaultSettings","application","fallbackLocale","override","overrideLocale","browserLocale","localeFile","usableLocales","reduce","match","normalizedLocale","regionDefault","toUpperCase","normDefault","specFallback","normFallback","regionDefaultLocale","userName","reqUserName","comment","rating","feedback","userAgent","headers","toString","emitter","createLogger","format","transports","LOG_CONFIG","combine","colorize","splat","simple","Console","prettyPrint","humanReadableUnhandledException","handleExceptions","metricsDumpIntervalMs","metricsFolderPath","removeMeetingOnEnd","addEvent","messageLength","currentlyInQueue","wasInQueue","payloadSize","processEvent","size","processingStartTimestamp","currentProcessingTimestamp","processTime","min","max","last","total","avg","processingTime","annotationQueueLength","startDumpFile","fileDate","fullYear","getFullYear","month","getMonth","padStart","day","getDate","hour","getHours","minutes","getMinutes","seconds","getSeconds","folderName","fileName","folderPath","fullFilePath","existsSync","mkdirSync","writeFileSync","metricsSingleton","setMinimumBrowserVersions","minBrowserVersions","versions","elem","Infinity","browser","EventEmitter2","queue","NO_MEETING_ID","collectRedisMetrics","PROM_METRICS_ENABLED","makeEnvelope","channel","core","getInstanceIdFromMessage","instanceIdFromMessage","MeetingMessageQueue","asyncMessages","redisDebugEnabled","autostart","concurrency","handleTask","taskHandler","isAsync","beginHandleTimestamp","called","callNext","queueId","dataLength","queueLength","currentTimestamp","onError","analytics","includeChat","emitAsync","handlePublishError","config","didSendRequestEvent","REDIS_HOST","redisConf","customRedisChannel","port","pub","createClient","sub","meetingsQueues","async","handleSubscribe","handleMessage","channelsToSubscribe","subscribeTo","psubscribe","updateConfig","publishSystemMessage","pattern","ignored","ignoredMessages","date","toISOString","meetingIdFromMessageCoreHeader","meetingIdFromMessageMeetingProp","meetingIdForMeetingEnded","publishVoiceMessage","publishMeetingMessage","RedisPubSubSingleton","YAML","DEFAULT_SETTINGS_FILE_PATH","BBB_HTML5_SETTINGS","LOCAL_SETTINGS_FILE_PATH","BBB_HTML5_LOCAL_SETTINGS","SETTINGS","readFileSync","LOCAL_CONFIG","mergeWith","packages","useLocationOrigin","__meteor_runtime_config__","PUBLIC_SETTINGS","DEVICE_TYPE","SMALL_VIEWPORT_BREAKPOINT","CAMERADOCK_POSITION","ACTIONS","PANELS","CUSTOM_LAYOUT","SMART_LAYOUT","PRESENTATION_FOCUS","VIDEO_FOCUS","MOBILE","TABLET_PORTRAIT","TABLET_LANDSCAPE","TABLET","DESKTOP","CONTENT_TOP","CONTENT_RIGHT","CONTENT_BOTTOM","CONTENT_LEFT","SIDEBAR_CONTENT_BOTTOM","SET_AUTO_ARRANGE_LAYOUT","SET_IS_RTL","SET_LAYOUT_TYPE","SET_DEVICE_TYPE","SET_FONT_SIZE","SET_LAYOUT_INPUT","SET_SIDEBAR_NAVIGATION_PANEL","SET_SIDEBAR_CONTENT_PANEL","SET_ID_CHAT_OPEN","SET_BROWSER_SIZE","SET_HAS_BANNER_BAR","SET_HAS_NOTIFICATIONS_BAR","SET_NAVBAR_OUTPUT","SET_ACTIONBAR_OUTPUT","SET_SIDEBAR_NAVIGATION_IS_OPEN","SET_SIDEBAR_NAVIGATION_SIZE","SET_SIDEBAR_NAVIGATION_OUTPUT","SET_SIDEBAR_NAVIGATION_IS_RESIZABLE","SET_SIDEBAR_NAVIGATION_RESIZABLE_EDGE","SET_SIDEBAR_CONTENT_IS_OPEN","SET_SIDEBAR_CONTENT_SIZE","SET_SIDEBAR_CONTENT_PANEL_TYPE","SET_SIDEBAR_CONTENT_OUTPUT","SET_SIDEBAR_CONTENT_IS_RESIZABLE","SET_SIDEBAR_CONTENT_RESIZABLE_EDGE","SET_MEDIA_AREA_SIZE","SET_NUM_CAMERAS","SET_CAMERA_DOCK_IS_DRAGGING","SET_CAMERA_DOCK_IS_RESIZING","SET_CAMERA_DOCK_POSITION","SET_CAMERA_DOCK_SIZE","SET_CAMERA_DOCK_OPTIMAL_GRID_SIZE","SET_CAMERA_DOCK_OUTPUT","SET_CAMERA_DOCK_IS_DRAGGABLE","SET_CAMERA_DOCK_IS_RESIZABLE","SET_CAMERA_DOCK_RESIZABLE_EDGE","SET_DROP_AREAS","SET_PRESENTATION_IS_OPEN","SET_PRESENTATION_CURRENT_SLIDE_SIZE","SET_PRESENTATION_NUM_CURRENT_SLIDE","SET_PRESENTATION_SLIDES_LENGTH","SET_PRESENTATION_SIZE","SET_PRESENTATION_OUTPUT","SET_PRESENTATION_IS_RESIZABLE","SET_PRESENTATION_RESIZABLE_EDGE","SET_FULLSCREEN_ELEMENT","SET_HAS_SCREEN_SHARE","SET_SCREEN_SHARE_SIZE","SET_SCREEN_SHARE_OUTPUT","SET_HAS_EXTERNAL_VIDEO","SET_EXTERNAL_VIDEO_SIZE","SET_EXTERNAL_VIDEO_OUTPUT","USERLIST","CHAT","POLL","BREAKOUT","SHARED_NOTES","WAITING_USERS","NONE","CARRIAGE_RETURN","NEW_LINE","XLS","XLSX","DOC","DOCX","PPT","PPTX","ODT","RTF","TXT","ODS","ODP","PDF","JPEG","UPLOAD_SUPORTED","global"],"mappings":"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","file":"/app.js","sourcesContent":["import _ from 'lodash';\nimport { check } from 'meteor/check';\nimport modifyWhiteboardAccess from '/imports/api/whiteboard-multi-user/server/modifiers/modifyWhiteboardAccess';\nimport clearAnnotations from '../modifiers/clearAnnotations';\nimport addAnnotation from '../modifiers/addAnnotation';\n\nexport default function handleWhiteboardAnnotations({ header, body }, meetingId) {\n  check(header, Object);\n  if (header.userId !== 'nodeJSapp') { return false; }\n\n  check(meetingId, String);\n  check(body, Object);\n\n  const { annotations, whiteboardId, multiUser } = body;\n\n  check(annotations, Array);\n  check(whiteboardId, String);\n  check(multiUser, Array);\n\n  clearAnnotations(meetingId, whiteboardId);\n\n  _.each(annotations, (annotation) => {\n    const { wbId, userId } = annotation;\n    addAnnotation(meetingId, wbId, userId, annotation);\n  });\n\n  modifyWhiteboardAccess(meetingId, whiteboardId, multiUser);\n}\n","import { check } from 'meteor/check';\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\n\nimport clearAnnotations from '../modifiers/clearAnnotations';\n\nexport default function handleWhiteboardCleared({ body }, meetingId) {\n  check(body, {\n    userId: String,\n    whiteboardId: String,\n    fullClear: Boolean,\n  });\n\n  const { whiteboardId, fullClear, userId } = body;\n\n  if (fullClear) {\n    AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId });\n    return clearAnnotations(meetingId, whiteboardId);\n  }\n\n  AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId, userId });\n  return clearAnnotations(meetingId, whiteboardId, userId);\n}\n","import { check } from 'meteor/check';\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\nimport addAnnotation from '../modifiers/addAnnotation';\nimport Metrics from '/imports/startup/server/metrics';\n\nconst { queueMetrics } = Meteor.settings.private.redis.metrics;\n\nconst {\n  annotationsQueueProcessInterval: ANNOTATION_PROCESS_INTERVAL,\n} = Meteor.settings.public.whiteboard;\n\nlet annotationsQueue = {};\nlet annotationsRecieverIsRunning = false;\n\nconst process = () => {\n  if (!Object.keys(annotationsQueue).length) {\n    annotationsRecieverIsRunning = false;\n    return;\n  }\n  annotationsRecieverIsRunning = true;\n  Object.keys(annotationsQueue).forEach((meetingId) => {\n    AnnotationsStreamer(meetingId).emit('added', { meetingId, annotations: annotationsQueue[meetingId] });\n    if (queueMetrics) {\n      Metrics.setAnnotationQueueLength(meetingId, 0);\n    }\n  });\n  annotationsQueue = {};\n\n  Meteor.setTimeout(process, ANNOTATION_PROCESS_INTERVAL);\n};\n\nexport default function handleWhiteboardSend({ header, body }, meetingId) {\n  const userId = header.userId;\n  const annotation = body.annotation;\n\n  check(userId, String);\n  check(annotation, Object);\n\n  const whiteboardId = annotation.wbId;\n  check(whiteboardId, String);\n\n  if (!annotationsQueue.hasOwnProperty(meetingId)) {\n    annotationsQueue[meetingId] = [];\n  }\n\n  annotationsQueue[meetingId].push({ meetingId, whiteboardId, userId, annotation });\n  if (queueMetrics) {\n    Metrics.setAnnotationQueueLength(meetingId, annotationsQueue[meetingId].length);\n  }\n  if (!annotationsRecieverIsRunning) process();\n\n  return addAnnotation(meetingId, whiteboardId, userId, annotation);\n}\n","import { check } from 'meteor/check';\n\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\nimport removeAnnotation from '../modifiers/removeAnnotation';\n\nexport default function handleWhiteboardUndo({ body }, meetingId) {\n  const whiteboardId = body.whiteboardId;\n  const shapeId = body.annotationId;\n\n  check(whiteboardId, String);\n  check(shapeId, String);\n\n  AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId, shapeId });\n  return removeAnnotation(meetingId, whiteboardId, shapeId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearWhiteboard(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ClearWhiteboardPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(whiteboardId, String);\n\n    const payload = {\n      whiteboardId,\n    };\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method clearWhiteboard ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport sendAnnotationHelper from './sendAnnotationHelper';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function sendAnnotation(annotation) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    sendAnnotationHelper(annotation, meetingId, requesterUserId);\n  } catch (err) {\n    Logger.error(`Exception while invoking method sendAnnotation ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function sendAnnotationHelper(annotation, meetingId, requesterUserId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendWhiteboardAnnotationPubMsg';\n\n  try {\n    const whiteboardId = annotation.wbId;\n\n    check(annotation, Object);\n    check(whiteboardId, String);\n\n    if (annotation.annotationType === 'text') {\n      check(annotation, {\n        id: String,\n        status: String,\n        annotationType: String,\n        annotationInfo: {\n          x: Number,\n          y: Number,\n          fontColor: Number,\n          calcedFontSize: Number,\n          textBoxWidth: Number,\n          text: String,\n          textBoxHeight: Number,\n          id: String,\n          whiteboardId: String,\n          status: String,\n          fontSize: Number,\n          dataPoints: String,\n          type: String,\n        },\n        wbId: String,\n        userId: String,\n        position: Number,\n      });\n    } else if (annotation.annotationType === 'rectangle' || annotation.annotationType === 'triangle' || annotation.annotationType === 'ellipse' || annotation.annotationType === 'line' ){\n      // line does not have the 'fill' property but this is necessary as 'fill' is anyway added at ui/components/whiteboard/whiteboard-overlay/shape-draw-listener/component.jsx\n      // Any other shape excluding pencil and text (e.g., eraser) needs to be added here.\n      check(annotation, {\n        id: String,\n        status: String,\n        annotationType: String,\n        annotationInfo: {\n          color: Number,\n          thickness: Number,\n          fill: Boolean,\n          points: Array,\n          id: String,\n          whiteboardId: String,\n          status: String,\n          type: String,\n          dimensions: Match.Maybe([Number]),\n        },\n        wbId: String,\n        userId: String,\n        position: Number,\n      });\n    } else {\n      check(annotation, {\n        id: String,\n        status: String,\n        annotationType: String,\n        annotationInfo: {\n          color: Number,\n          thickness: Number,\n          points: Array,\n          id: String,\n          whiteboardId: String,\n          status: String,\n          type: String,\n          dimensions: Match.Maybe([Number]),\n        },\n        wbId: String,\n        userId: String,\n        position: Number,\n      });\n    }\n\n    const payload = {\n      annotation,\n      drawEndOnly: true,\n    };\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method sendAnnotationHelper ${err.stack}`);\n  }\n}\n","import { extractCredentials } from '/imports/api/common/server/helpers';\nimport sendAnnotationHelper from './sendAnnotationHelper';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function sendBulkAnnotations(payload) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  try {\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    payload.forEach((annotation) => sendAnnotationHelper(annotation, meetingId, requesterUserId));\n    return true;\n  } catch (err) {\n    Logger.error(`Exception while invoking method sendBulkAnnotations ${err.stack}`);\n    return false;\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function undoAnnotation(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UndoWhiteboardPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(whiteboardId, String);\n\n    const payload = {\n      whiteboardId,\n    };\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method undoAnnotation ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Annotations from '/imports/api/annotations';\nimport addAnnotationQuery from '/imports/api/annotations/addAnnotation';\n\nexport default function addAnnotation(meetingId, whiteboardId, userId, annotation) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(annotation, Object);\n\n  const query = addAnnotationQuery(meetingId, whiteboardId, userId, annotation);\n\n  try {\n    const { insertedId } = Annotations.upsert(query.selector, query.modifier);\n\n    if (insertedId) {\n      Logger.info(`Added annotation id=${annotation.id} whiteboard=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding annotation to collection: ${err}`);\n  }\n}\n","import Annotations from '/imports/api/annotations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearAnnotations(meetingId, whiteboardId, userId) {\n  const selector = {};\n\n  if (meetingId) {\n    selector.meetingId = meetingId;\n  }\n\n  if (whiteboardId) {\n    selector.whiteboardId = whiteboardId;\n  }\n\n  if (userId) {\n    selector.userId = userId;\n  }\n\n  try {\n    const numberAffected = Annotations.remove(selector);\n\n    if (numberAffected) {\n      if (userId) {\n        Logger.info(`Cleared Annotations for userId=${userId} where whiteboard=${whiteboardId}`);\n        return;\n      }\n\n      if (whiteboardId) {\n        Logger.info(`Cleared Annotations for whiteboard=${whiteboardId}`);\n        return;\n      }\n\n      if (meetingId) {\n        Logger.info(`Cleared Annotations (${meetingId})`);\n        return;\n      }\n\n      Logger.info('Cleared Annotations (all)');\n    }\n  } catch (err) {\n    Logger.error(`Removing Annotations from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Annotations from '/imports/api/annotations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeAnnotation(meetingId, whiteboardId, shapeId) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(shapeId, String);\n\n  const selector = {\n    meetingId,\n    whiteboardId,\n    id: shapeId,\n  };\n\n  try {\n    const numberAffected = Annotations.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed annotation id=${shapeId} whiteboard=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing annotation from collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleWhiteboardCleared from './handlers/whiteboardCleared';\nimport handleWhiteboardUndo from './handlers/whiteboardUndo';\nimport handleWhiteboardSend from './handlers/whiteboardSend';\nimport handleWhiteboardAnnotations from './handlers/whiteboardAnnotations';\n\nRedisPubSub.on('ClearWhiteboardEvtMsg', handleWhiteboardCleared);\nRedisPubSub.on('UndoWhiteboardEvtMsg', handleWhiteboardUndo);\nRedisPubSub.on('SendWhiteboardAnnotationEvtMsg', handleWhiteboardSend);\nRedisPubSub.on('GetWhiteboardAnnotationsRespMsg', processForHTML5ServerOnly(handleWhiteboardAnnotations));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport undoAnnotation from './methods/undoAnnotation';\nimport clearWhiteboard from './methods/clearWhiteboard';\nimport sendAnnotation from './methods/sendAnnotation';\nimport sendBulkAnnotations from './methods/sendBulkAnnotations';\n\nMeteor.methods({\n  undoAnnotation,\n  clearWhiteboard,\n  sendAnnotation,\n  sendBulkAnnotations,\n});\n","import Annotations from '/imports/api/annotations';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction annotations() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Annotations was requested by unauth connection ${this.connection.id}`);\n    return Annotations.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Annotations', { meetingId, userId });\n\n  return Annotations.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundAnnotations = annotations.bind(this);\n  return boundAnnotations(...args);\n}\n\nMeteor.publish('annotations', publish);\n","import Logger from '/imports/startup/server/logger';\n\nexport function removeAnnotationsStreamer(meetingId) {\n  Logger.info(`Removing Annotations streamer object for meeting ${meetingId}`);\n  delete Meteor.StreamerCentral.instances[`annotations-${meetingId}`];\n}\n\nexport function addAnnotationsStreamer(meetingId) {\n  const streamer = new Meteor.Streamer(`annotations-${meetingId}`, { retransmit: false });\n\n  streamer.allowRead(function allowRead() {\n    if (!this.userId) return false;\n\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.allowWrite(function allowWrite() {\n    return false;\n  });\n}\n\nexport default function get(meetingId) {\n  return Meteor.StreamerCentral.instances[`annotations-${meetingId}`];\n}\n","import { check } from 'meteor/check';\n\nconst ANNOTATION_TYPE_TEXT = 'text';\nconst ANNOTATION_TYPE_PENCIL = 'pencil';\n\n// line, triangle, ellipse, rectangle\nfunction handleCommonAnnotation(meetingId, whiteboardId, userId, annotation) {\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const selector = {\n    meetingId,\n    id,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      whiteboardId,\n      meetingId,\n      id,\n      status,\n      annotationType,\n      annotationInfo,\n      wbId,\n    },\n    $setOnInsert: {\n      position,\n    },\n    $inc: { version: 1 },\n  };\n\n  return { selector, modifier };\n}\n\nfunction handleTextUpdate(meetingId, whiteboardId, userId, annotation) {\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const selector = {\n    meetingId,\n    id,\n    userId,\n  };\n\n  annotationInfo.text = annotationInfo.text.replace(/[\\r]/g, '\\n');\n\n  const modifier = {\n    $set: {\n      whiteboardId,\n      meetingId,\n      id,\n      status,\n      annotationType,\n      annotationInfo,\n      wbId,\n    },\n    $setOnInsert: {\n      position,\n    },\n    $inc: { version: 1 },\n  };\n\n  return { selector, modifier };\n}\n\nfunction handlePencilUpdate(meetingId, whiteboardId, userId, annotation) {\n  const DRAW_START = 'DRAW_START';\n  const DRAW_UPDATE = 'DRAW_UPDATE';\n  const DRAW_END = 'DRAW_END';\n\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const baseSelector = {\n    meetingId,\n    id,\n    userId,\n    whiteboardId,\n  };\n\n  let baseModifier;\n  switch (status) {\n    case DRAW_START:\n      // on start we split the points\n\n      // create the 'pencil_base'\n      // TODO: find and removed unused props (chunks, version, etc)\n      baseModifier = {\n        $set: {\n          id,\n          userId,\n          meetingId,\n          whiteboardId,\n          position,\n          status,\n          annotationType,\n          annotationInfo,\n          wbId,\n          version: 1,\n        },\n      };\n      break;\n    case DRAW_UPDATE:\n      baseModifier = {\n        $push: {\n          'annotationInfo.points': { $each: annotationInfo.points },\n        },\n        $set: {\n          status,\n        },\n        $inc: { version: 1 },\n      };\n      break;\n    case DRAW_END:\n      // Updating the main pencil object with the final info\n      baseModifier = {\n        $set: {\n          whiteboardId,\n          meetingId,\n          id,\n          status,\n          annotationType,\n          annotationInfo,\n          wbId,\n          position,\n        },\n        $inc: { version: 1 },\n      };\n      break;\n    default:\n      break;\n  }\n\n  return { selector: baseSelector, modifier: baseModifier };\n}\n\nexport default function addAnnotation(meetingId, whiteboardId, userId, annotation) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(annotation, Object);\n\n  switch (annotation.annotationType) {\n    case ANNOTATION_TYPE_TEXT:\n      return handleTextUpdate(meetingId, whiteboardId, userId, annotation);\n    case ANNOTATION_TYPE_PENCIL:\n      return handlePencilUpdate(meetingId, whiteboardId, userId, annotation);\n    default:\n      return handleCommonAnnotation(meetingId, whiteboardId, userId, annotation);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst Annotations = new Mongo.Collection('annotations', collectionOptions);\n\nif (Meteor.isServer) {\n  // types of queries for the annotations  (Total):\n  // 1. meetingId, id, userId               ( 8 )\n  // 2. meetingId, id, userId, whiteboardId ( 1 )\n  // 3. meetingId                           ( 1 )\n  // 4. meetingId, whiteboardId             ( 1 )\n  // 5. meetingId, whiteboardId, id         ( 1 )\n  // 6. meetingId, whiteboardId, userId     ( 1 )\n  // These 2 indexes seem to cover all of the cases\n\n  Annotations._ensureIndex({ id: 1 });\n  Annotations._ensureIndex({ meetingId: 1, whiteboardId: 1, userId: 1 });\n}\n\nexport default Annotations;\n","import AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Logger from '/imports/startup/server/logger';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nexport default function clearAuthTokenValidation(meetingId) {\n  return AuthTokenValidation.remove({ meetingId }, (err, num) => {\n    if (err) {\n      Logger.info(`Error when removing auth-token-validation for meeting=${meetingId}`);\n    }\n\n    if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n      ClientConnections.removeMeeting(meetingId);\n    }\n    Logger.info(`Cleared AuthTokenValidation (${meetingId})`);\n  });\n}\n","import Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\n\nexport default function upsertValidationState(meetingId, userId, validationStatus, connectionId, reason = null) {\n  const selector = {\n    meetingId, userId, connectionId,\n  };\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      connectionId,\n      validationStatus,\n      updatedAt: new Date().getTime(),\n      reason,\n    },\n  };\n\n  try {\n    AuthTokenValidation.remove({ meetingId, userId, connectionId: { $ne: connectionId } });\n    const { numberAffected } = AuthTokenValidation.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Upserted ${JSON.stringify(selector)} ${validationStatus} in AuthTokenValidation`);\n    }\n  } catch (err) {\n    Logger.error(`Could not upsert to collection AuthTokenValidation: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst AuthTokenValidation = new Mongo.Collection('auth-token-validation', collectionOptions);\n\nif (Meteor.isServer) {\n  AuthTokenValidation._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport const ValidationStates = Object.freeze({\n  NOT_VALIDATED: 1,\n  VALIDATING: 2,\n  VALIDATED: 3,\n  INVALID: 4,\n});\n\nexport default AuthTokenValidation;\n","import { check } from 'meteor/check';\nimport clearBreakouts from '../modifiers/clearBreakouts';\n\nexport default function handleBreakoutClosed({ body }) {\n  const { breakoutId } = body;\n  check(breakoutId, String);\n\n  return clearBreakouts(breakoutId);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function handleBreakoutJoinURL({ body }) {\n  const {\n    redirectToHtml5JoinURL,\n    userId,\n    breakoutId,\n  } = body;\n\n  check(redirectToHtml5JoinURL, String);\n\n  const selector = {\n    breakoutId,\n  };\n\n  const modifier = {\n    $set: {\n      [`url_${userId}`]: {\n        redirectToHtml5JoinURL,\n        insertedTime: new Date().getTime(),\n      },\n    },\n  };\n\n  try {\n    const ATTEMPT_EVERY_MS = 1000;\n\n    let numberAffected = 0;\n\n    const updateBreakout = Meteor.bindEnvironment(() => {\n      numberAffected = Breakouts.update(selector, modifier);\n    });\n\n    const updateBreakoutPromise = new Promise((resolve) => {\n      const updateBreakoutInterval = setInterval(() => {\n        updateBreakout();\n\n        if (numberAffected) {\n          resolve(clearInterval(updateBreakoutInterval));\n        }\n      }, ATTEMPT_EVERY_MS);\n    });\n\n    updateBreakoutPromise.then(() => {\n      Logger.info(`Upserted breakout id=${breakoutId}`);\n    });\n  } catch (err) {\n    Logger.error(`Adding breakout to collection: ${err}`);\n  }\n}\n","import Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\nimport handleBreakoutRoomsListHist from '/imports/api/breakouts-history/server/handlers/breakoutRoomsList';\n\nexport default function handleBreakoutRoomsList({ body }, meetingId) {\n  // 0 seconds default breakout time, forces use of real expiration time\n  const DEFAULT_TIME_REMAINING = 0;\n\n  const {\n    meetingId: parentMeetingId,\n    rooms,\n  } = body;\n\n  // set firstly the last seq, then client will know when receive all\n  rooms.sort((a, b) => ((a.sequence < b.sequence) ? 1 : -1)).forEach((breakout) => {\n    const { breakoutId, html5JoinUrls, ...breakoutWithoutUrls } = breakout;\n\n    check(meetingId, String);\n\n    const selector = {\n      breakoutId,\n    };\n\n    const urls = {};\n    if (typeof html5JoinUrls === 'object' && Object.keys(html5JoinUrls).length > 0) {\n      Object.keys(html5JoinUrls).forEach((userId) => {\n        urls[`url_${userId}`] = {\n          redirectToHtml5JoinURL: html5JoinUrls[userId],\n          insertedTime: new Date().getTime(),\n        };\n      });\n    }\n\n    const modifier = {\n      $set: {\n        breakoutId,\n        joinedUsers: [],\n        timeRemaining: DEFAULT_TIME_REMAINING,\n        parentMeetingId,\n        ...flat(breakoutWithoutUrls),\n        ...urls,\n      },\n    };\n\n    try {\n      const { numberAffected } = Breakouts.upsert(selector, modifier);\n\n      if (numberAffected) {\n        Logger.info('Updated timeRemaining and externalMeetingId '\n            + `for breakout id=${breakoutId}`);\n      }\n    } catch (err) {\n      Logger.error(`updating breakout: ${err}`);\n    }\n  });\n\n  handleBreakoutRoomsListHist({ body });\n}\n","import Breakouts from '/imports/api/breakouts';\nimport updateUserBreakoutRoom from '/imports/api/users-persistent-data/server/modifiers/updateUserBreakoutRoom';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function joinedUsersChanged({ body }) {\n  check(body, Object);\n\n  const {\n    parentId,\n    breakoutId,\n    users,\n  } = body;\n\n  check(parentId, String);\n  check(breakoutId, String);\n  check(users, Array);\n\n  const selector = {\n    parentMeetingId: parentId,\n    breakoutId,\n  };\n\n  const usersMapped = users.map(user => ({ userId: user.id, name: user.name }));\n  const modifier = {\n    $set: {\n      joinedUsers: usersMapped,\n    },\n  };\n\n  try {\n    const numberAffected = Breakouts.update(selector, modifier);\n\n    if (numberAffected) {\n      updateUserBreakoutRoom(parentId, breakoutId, users);\n\n      Logger.info(`Updated joined users in breakout id=${breakoutId}`);\n    }\n  } catch (err) {\n    Logger.error(`updating joined users in breakout: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function handleUpdateTimeRemaining({ body }, meetingId) {\n  const {\n    timeRemaining,\n  } = body;\n\n  check(meetingId, String);\n  check(timeRemaining, Number);\n\n  const selector = {\n    parentMeetingId: meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      timeRemaining,\n    },\n  };\n\n  const options = {\n    multi: true,\n  };\n\n  try {\n    const numberAffected = Breakouts.update(selector, modifier, options);\n\n    if (numberAffected) {\n      Logger.info(`Updated breakout time remaining for breakouts where parentMeetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating breakouts: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function createBreakoutRoom(rooms, durationInMinutes, record = false) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const BREAKOUT_LIM = Meteor.settings.public.app.breakouts.breakoutRoomLimit;\n  const MIN_BREAKOUT_ROOMS = 2;\n  const MAX_BREAKOUT_ROOMS = BREAKOUT_LIM > MIN_BREAKOUT_ROOMS ? BREAKOUT_LIM : MIN_BREAKOUT_ROOMS;\n  const EVENT_NAME = 'CreateBreakoutRoomsCmdMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    if (rooms.length > MAX_BREAKOUT_ROOMS) {\n      Logger.info(`Attempt to create breakout rooms with invalid number of rooms in meeting id=${meetingId}`);\n      return;\n    }\n    const payload = {\n      record,\n      durationInMinutes,\n      rooms,\n      meetingId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method createBreakoutRoom ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function endAllBreakouts() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EndAllBreakoutRoomsMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, null);\n  } catch (err) {\n    Logger.error(`Exception while invoking method endAllBreakouts ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function requestJoinURL({ breakoutId, userId: userIdToInvite }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RequestBreakoutJoinURLReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const userId = userIdToInvite || requesterUserId;\n\n    return RedisPubSub.publishUserMessage(\n      CHANNEL, EVENT_NAME, meetingId, requesterUserId,\n      {\n        meetingId,\n        breakoutId,\n        userId,\n      },\n    );\n  } catch (err) {\n    Logger.error(`Exception while invoking method requestJoinURL ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function sendMessageToAllBreakouts({ msg }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendMessageToAllBreakoutRoomsReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    RedisPubSub.publishUserMessage(\n      CHANNEL, EVENT_NAME, meetingId, requesterUserId,\n      {\n        meetingId,\n        msg,\n      },\n    );\n  } catch (err) {\n    Logger.error(`Exception while invoking method sendMessageToAllBreakouts ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setBreakoutsTime({ timeInMinutes }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateBreakoutRoomsTimeReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    RedisPubSub.publishUserMessage(\n      CHANNEL, EVENT_NAME, meetingId, requesterUserId,\n      {\n        meetingId,\n        timeInMinutes,\n      },\n    );\n  } catch (err) {\n    Logger.error(`Exception while invoking method setBreakoutsTime ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function clearBreakouts(breakoutId) {\n  if (breakoutId) {\n    const selector = {\n      breakoutId,\n    };\n\n    try {\n      const numberAffected = Breakouts.remove(selector);\n\n      if (numberAffected) {\n        Logger.info(`Cleared Breakouts (${breakoutId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Breakouts (${breakoutId})`);\n    }\n  } else {\n    try {\n      const numberAffected = Breakouts.remove({});\n      if (numberAffected) {\n        Logger.info('Cleared Breakouts (all)');\n      }\n    } catch (err) {\n      Logger.error('Error on clearing Breakouts (all)');\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleBreakoutJoinURL from './handlers/breakoutJoinURL';\nimport handleBreakoutRoomsList from './handlers/breakoutList';\nimport handleUpdateTimeRemaining from './handlers/updateTimeRemaining';\nimport handleBreakoutClosed from './handlers/breakoutClosed';\nimport joinedUsersChanged from './handlers/joinedUsersChanged';\n\nRedisPubSub.on('BreakoutRoomsListEvtMsg', handleBreakoutRoomsList);\nRedisPubSub.on('BreakoutRoomJoinURLEvtMsg', handleBreakoutJoinURL);\nRedisPubSub.on('BreakoutRoomsTimeRemainingUpdateEvtMsg', handleUpdateTimeRemaining);\nRedisPubSub.on('BreakoutRoomEndedEvtMsg', handleBreakoutClosed);\nRedisPubSub.on('UpdateBreakoutUsersEvtMsg', joinedUsersChanged);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport createBreakoutRoom from '/imports/api/breakouts/server/methods/createBreakout';\nimport requestJoinURL from './methods/requestJoinURL';\nimport endAllBreakouts from './methods/endAllBreakouts';\nimport setBreakoutsTime from '/imports/api/breakouts/server/methods/setBreakoutsTime';\nimport sendMessageToAllBreakouts from './methods/sendMessageToAllBreakouts';\n\nMeteor.methods({\n  requestJoinURL,\n  createBreakoutRoom,\n  endAllBreakouts,\n  setBreakoutsTime,\n  sendMessageToAllBreakouts,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Breakouts from '/imports/api/breakouts';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport { publicationSafeGuard } from '/imports/api/common/server/helpers';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction breakouts() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Breakouts was requested by unauth connection ${this.connection.id}`);\n    return Breakouts.find({ meetingId: '' });\n  }\n  const { meetingId, userId } = tokenValidation;\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  Logger.debug('Publishing Breakouts', { meetingId, userId });\n\n  if (!!User && User.role === ROLE_MODERATOR) {\n    const presenterSelector = {\n      $or: [\n        { parentMeetingId: meetingId },\n        { breakoutId: meetingId },\n      ],\n    };\n    // Monitor this publication and stop it when user is not a moderator anymore\n    const comparisonFunc = () => {\n      const user = Users.findOne({ userId, meetingId }, { fields: { role: 1, userId: 1 } });\n      const condition = user.role === ROLE_MODERATOR;\n\n      if (!condition) {\n        Logger.info(`conditions aren't filled anymore in publication ${this._name}: \n        user.role === ROLE_MODERATOR :${condition}, user.role: ${user.role} ROLE_MODERATOR: ${ROLE_MODERATOR}`);\n      }\n\n      return condition;\n    };\n    publicationSafeGuard(comparisonFunc, this);\n    return Breakouts.find(presenterSelector);\n  }\n\n  const selector = {\n    $or: [\n      {\n        parentMeetingId: meetingId,\n        freeJoin: true,\n      },\n      {\n        parentMeetingId: meetingId,\n        [`url_${userId}`]: { $exists: true },\n      },\n      {\n        breakoutId: meetingId,\n      },\n    ],\n  };\n\n  const fields = {\n    fields: {\n      [`url_${userId}`]: 1,\n      breakoutId: 1,\n      externalId: 1,\n      freeJoin: 1,\n      isDefaultName: 1,\n      joinedUsers: 1,\n      name: 1,\n      parentMeetingId: 1,\n      sequence: 1,\n      shortName: 1,\n      timeRemaining: 1,\n    },\n  };\n\n  return Breakouts.find(selector, fields);\n}\n\nfunction publish(...args) {\n  const boundBreakouts = breakouts.bind(this);\n  return boundBreakouts(...args);\n}\n\nMeteor.publish('breakouts', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst Breakouts = new Mongo.Collection('breakouts', collectionOptions);\n\nif (Meteor.isServer) {\n  // types of queries for the breakouts:\n  // 1. breakoutId ( handleJoinUrl, roomStarted, clearBreakouts )\n  // 2. parentMeetingId ( updateTimeRemaining )\n\n  Breakouts._ensureIndex({ breakoutId: 1 });\n  Breakouts._ensureIndex({ parentMeetingId: 1 });\n}\n\nexport default Breakouts;\n","import { check } from 'meteor/check';\nimport BreakoutsHistory from '/imports/api/breakouts-history';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleBreakoutRoomsList({ body }) {\n  const {\n    meetingId,\n    rooms,\n  } = body;\n\n  check(meetingId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      rooms,\n    },\n  };\n\n  try {\n    const { insertedId } = BreakoutsHistory.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added rooms to breakout-history Data: meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted rooms to breakout-history Data: meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding rooms to the collection breakout-history: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport BreakoutsHistory from '/imports/api/breakouts-history';\n\nexport default function handleSendMessageToAllBreakoutRoomsEvtMsg({ body }, meetingId) {\n\n  const {\n    senderId,\n    msg,\n    totalOfRooms,\n  } = body;\n\n  check(meetingId, String);\n  check(senderId, String);\n  check(msg, String);\n  check(totalOfRooms, Number);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $push: {\n      broadcastMsgs: {\n        senderId,\n        msg,\n        totalOfRooms,\n      },\n    },\n  };\n\n  try {\n    const { insertedId } = BreakoutsHistory.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added broadCastMsg to breakout-history Data: meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted broadCastMsg to breakout-history Data: meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding broadCastMsg to the collection breakout-history: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleBreakoutRoomsList from './handlers/breakoutRoomsList';\nimport messageToAllSent from '/imports/api/breakouts-history/server/handlers/messageToAllSent';\n\nRedisPubSub.on('BreakoutRoomsListEvtMsg', handleBreakoutRoomsList);\nRedisPubSub.on('SendMessageToAllBreakoutRoomsEvtMsg', messageToAllSent);\n","import './eventHandlers';\nimport './publishers';\n","import BreakoutsHistory from '/imports/api/breakouts-history';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport { publicationSafeGuard } from '/imports/api/common/server/helpers';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction breakoutsHistory() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Meetings-history was requested by unauth connection ${this.connection.id}`);\n    return Meetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug('Publishing Breakouts-History', { meetingId, userId });\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { userId: 1, role: 1 } });\n  if (!User || User.role !== ROLE_MODERATOR) {\n    return BreakoutsHistory.find({ meetingId: '' });\n  }\n\n  check(meetingId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  // Monitor this publication and stop it when user is not a moderator anymore\n  const comparisonFunc = () => {\n    const user = Users.findOne({ userId, meetingId }, { fields: { role: 1, userId: 1 } });\n    const condition = user.role === ROLE_MODERATOR;\n\n    if (!condition) {\n      Logger.info(`conditions aren't filled anymore in publication ${this._name}: \n      user.role === ROLE_MODERATOR :${condition}, user.role: ${user.role} ROLE_MODERATOR: ${ROLE_MODERATOR}`);\n    }\n\n    return condition;\n  };\n  publicationSafeGuard(comparisonFunc, this);\n\n  return BreakoutsHistory.find(selector);\n}\n\nfunction publish(...args) {\n  const boundUsers = breakoutsHistory.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('breakouts-history', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst BreakoutsHistory = new Mongo.Collection('breakouts-history', collectionOptions);\n\nif (Meteor.isServer) {\n  BreakoutsHistory._ensureIndex({ meetingId: 1 });\n}\n\nexport default BreakoutsHistory;\n","import updateCaptionsOwner from '/imports/api/captions/server/modifiers/updateCaptionsOwner';\n\nexport default function captionsOwnerUpdated({ header, body }) {\n  const { meetingId } = header;\n  const {\n    locale,\n    ownerId,\n  } = body;\n\n  updateCaptionsOwner(meetingId, locale, ownerId);\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\nimport setTranscript from '/imports/api/captions/server/modifiers/setTranscript';\nimport updatePad from '/imports/api/pads/server/methods/updatePad';\n\nexport default function pushSpeechTranscript(locale, transcript, type) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(locale, String);\n    check(transcript, String);\n    check(type, String);\n\n    const captions = Captions.findOne({\n      meetingId,\n      ownerId: requesterUserId,\n      locale,\n      dictating: true,\n    });\n\n    if (captions) {\n      if (type === 'final') {\n        const text = `\\n${transcript}`;\n        updatePad(meetingId, requesterUserId, locale, text);\n      }\n\n      setTranscript(meetingId, locale, transcript);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method pushSpeechTranscript ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\nimport setDictation from '/imports/api/captions/server/modifiers/setDictation';\n\nexport default function startDictation(locale) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(locale, String);\n\n    const captions = Captions.findOne({\n      meetingId,\n      ownerId: requesterUserId,\n      locale,\n    });\n\n    if (captions) setDictation(meetingId, locale, true);\n  } catch (err) {\n    Logger.error(`Exception while invoking method startDictation ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\nimport setDictation from '/imports/api/captions/server/modifiers/setDictation';\n\nexport default function stopDictation(locale) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(locale, String);\n\n    const captions = Captions.findOne({\n      meetingId,\n      ownerId: requesterUserId,\n      locale,\n    });\n\n    if (captions) setDictation(meetingId, locale, false);\n  } catch (err) {\n    Logger.error(`Exception while invoking method stopDictation ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function updateCaptionsOwner(locale, name) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateCaptionOwnerPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(locale, String);\n    check(name, String);\n\n    const payload = {\n      ownerId: requesterUserId,\n      locale,\n      name,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method updateCaptionsOwner ${err.stack}`);\n  }\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearCaptions(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Captions.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Captions (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing captions (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Captions.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Captions (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing captions (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function createCaptions(meetingId, locale, name) {\n  try {\n    check(meetingId, String);\n    check(locale, String);\n    check(name, String);\n\n    const selector = {\n      meetingId,\n      locale,\n    };\n\n    const modifier = {\n      meetingId,\n      locale,\n      name,\n      ownerId: '',\n      dictating: false,\n      transcript: '',\n    };\n\n    const numberAffected = Captions.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Created captions=${locale} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Creating captions owner to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setDictation(meetingId, locale, dictating) {\n  try {\n    check(meetingId, String);\n    check(locale, String);\n    check(dictating, Boolean);\n\n    const selector = {\n      meetingId,\n      locale,\n    };\n\n    const modifier = {\n      $set: {\n        dictating,\n        transcript: '',\n      },\n    };\n\n    const numberAffected = Captions.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set captions=${locale} dictating=${dictating} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted captions=${locale} dictating=${dictating} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting captions dictation to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setTranscript(meetingId, locale, transcript) {\n  try {\n    check(meetingId, String);\n    check(locale, String);\n    check(transcript, String);\n\n    const selector = {\n      meetingId,\n      locale,\n    };\n\n    const modifier = {\n      $set: {\n        transcript,\n      },\n    };\n\n    const numberAffected = Captions.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug(`Set captions=${locale} transcript=${transcript} meeting=${meetingId}`);\n    } else {\n      Logger.debug(`Upserted captions=${locale} transcript=${transcript} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting captions transcript to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function updateCaptionsOwner(meetingId, locale, ownerId) {\n  try {\n    check(meetingId, String);\n    check(locale, String);\n    check(ownerId, String);\n\n    const selector = {\n      meetingId,\n      locale,\n    };\n\n    const modifier = {\n      $set: {\n        ownerId,\n        dictating: false, // Refresh dictation mode\n      },\n    };\n\n    const numberAffected = Captions.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Added captions=${locale} owner=${ownerId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted captions=${locale} owner=${ownerId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding captions owner to the collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport captionsOwnerUpdated from './handlers/captionsOwnerUpdated';\n\nRedisPubSub.on('UpdateCaptionOwnerEvtMsg', captionsOwnerUpdated);\n","import axios from 'axios';\nimport { Meteor } from 'meteor/meteor';\nimport createCaptions from '/imports/api/captions/server/modifiers/createCaptions';\nimport Logger from '/imports/startup/server/logger';\n\nconst CAPTIONS_CONFIG = Meteor.settings.public.captions;\nconst BASENAME = Meteor.settings.public.app.basename;\nconst HOST = Meteor.settings.private.app.host;\nconst LOCALES = Meteor.settings.private.app.localesUrl;\nconst LOCALES_URL = `http://${HOST}:${process.env.PORT}${BASENAME}${LOCALES}`;\n\nconst init = (meetingId) => {\n  axios({\n    method: 'get',\n    url: LOCALES_URL,\n    responseType: 'json',\n  }).then((response) => {\n    const { status } = response;\n    if (status !== 200) return;\n\n    const locales = response.data;\n    locales.forEach((locale) => createCaptions(meetingId, locale.locale, locale.name));\n  }).catch((error) => Logger.error(`Could not create captions for ${meetingId}: ${error}`));\n};\n\nconst initCaptions = (meetingId) => {\n  if (CAPTIONS_CONFIG.enabled) init(meetingId);\n};\n\nexport {\n  initCaptions,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport updateCaptionsOwner from '/imports/api/captions/server/methods/updateCaptionsOwner';\nimport startDictation from '/imports/api/captions/server/methods/startDictation';\nimport stopDictation from '/imports/api/captions/server/methods/stopDictation';\nimport pushSpeechTranscript from '/imports/api/captions/server/methods/pushSpeechTranscript';\n\nMeteor.methods({\n  updateCaptionsOwner,\n  startDictation,\n  stopDictation,\n  pushSpeechTranscript,\n});\n","import Captions from '/imports/api/captions';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction captions() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Captions was requested by unauth connection ${this.connection.id}`);\n    return Captions.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug('Publishing Captions', { meetingId, requestedBy: userId });\n\n  return Captions.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundCaptions = captions.bind(this);\n  return boundCaptions(...args);\n}\n\nMeteor.publish('captions', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst Captions = new Mongo.Collection('captions', collectionOptions);\n\nif (Meteor.isServer) {\n  Captions._ensureIndex({ meetingId: 1, locale: 1 });\n}\n\nexport default Captions;\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport updateConnectionStatus from '/imports/api/connection-status/server/modifiers/updateConnectionStatus';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst STATS = Meteor.settings.public.stats;\n\nconst logConnectionStatus = (meetingId, userId, status, type, value) => {\n  switch (status) {\n    case 'normal':\n      Logger.info(`Connection status updated: meetingId=${meetingId} userId=${userId} status=${status} type=${type}`);\n      break;\n    case 'warning':\n    case 'danger':\n    case 'critical':\n      switch (type) {\n        case 'audio': {\n          const {\n            jitter,\n            loss,\n          } = value;\n          Logger.info(`Connection status updated: meetingId=${meetingId} userId=${userId} status=${status} type=${type} jitter=${jitter} loss=${loss}`);\n          break;\n        }\n        case 'socket': {\n          const { rtt } = value;\n          Logger.info(`Connection status updated: meetingId=${meetingId} userId=${userId} status=${status} type=${type} rtt=${rtt}`);\n          break;\n        }\n        default:\n      }\n      break;\n    default:\n  }\n};\n\nexport default function addConnectionStatus(status, type, value) {\n  try {\n    check(status, String);\n    check(type, String);\n    check(value, Object);\n\n    if (!this.userId) return;\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    if (STATS.log) logConnectionStatus(meetingId, requesterUserId, status, type, value);\n\n    // Avoid storing recoveries\n    if (status !== 'normal') {\n      updateConnectionStatus(meetingId, requesterUserId, status);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method addConnectionStatus ${err.stack}`);\n  }\n}\n","import { PrometheusAgent, METRIC_NAMES } from '/imports/startup/server/prom-metrics/index.js'\n\n// Round-trip time helper\nexport default function voidConnection(previousRtt) {\n  if (previousRtt) {\n    PrometheusAgent.observe(METRIC_NAMES.METEOR_RTT, previousRtt/1000);\n  }\n  return 0;\n}\n","import ConnectionStatus from '/imports/api/connection-status';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearConnectionStatus(meetingId) {\n  const selector = {};\n\n  if (meetingId) {\n    selector.meetingId = meetingId;\n  }\n\n  try {\n    const numberAffected = ConnectionStatus.remove(selector);\n\n    if (numberAffected) {\n      if (meetingId) {\n        Logger.info(`Removed ConnectionStatus (${meetingId})`);\n      } else {\n        Logger.info('Removed ConnectionStatus (all)');\n      }\n    } else {\n      Logger.warn('Removing ConnectionStatus nonaffected');\n    }\n  } catch (err) {\n    Logger.error(`Removing ConnectionStatus: ${err}`);\n  }\n}\n","import ConnectionStatus from '/imports/api/connection-status';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport changeHasConnectionStatus from '/imports/api/users-persistent-data/server/modifiers/changeHasConnectionStatus';\n\nexport default function updateConnectionStatus(meetingId, userId, level) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const timestamp = new Date().getTime();\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    meetingId,\n    userId,\n    level,\n    timestamp,\n  };\n\n  try {\n    const { numberAffected } = ConnectionStatus.upsert(selector, modifier);\n\n    if (numberAffected) {\n      changeHasConnectionStatus(true, userId, meetingId);\n      Logger.verbose(`Updated connection status meetingId=${meetingId} userId=${userId} level=${level}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating connection status meetingId=${meetingId} userId=${userId}: ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addConnectionStatus from './methods/addConnectionStatus';\nimport voidConnection from './methods/voidConnection';\n\nMeteor.methods({\n  addConnectionStatus,\n  voidConnection,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport ConnectionStatus from '/imports/api/connection-status';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction connectionStatus() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing ConnectionStatus was requested by unauth connection ${this.connection.id}`);\n    return ConnectionStatus.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  check(meetingId, String);\n  check(userId, String);\n\n  Logger.info(`Publishing connection status for ${meetingId} ${userId}`);\n\n  return ConnectionStatus.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundNote = connectionStatus.bind(this);\n  return boundNote(...args);\n}\n\nMeteor.publish('connection-status', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst ConnectionStatus = new Mongo.Collection('connection-status', collectionOptions);\n\nif (Meteor.isServer) {\n  ConnectionStatus._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default ConnectionStatus;\n","import { check } from 'meteor/check';\nimport CursorStreamer from '/imports/api/cursor/server/streamer';\nimport Logger from '/imports/startup/server/logger';\nimport _ from 'lodash';\n\nconst CURSOR_PROCCESS_INTERVAL = 30;\n\nconst cursorQueue = {};\n\nconst proccess = _.throttle(() => {\n  try {\n    Object.keys(cursorQueue).forEach((meetingId) => {\n      try {\n        const cursors = [];\n        for (let userId in cursorQueue[meetingId]){\n          cursorQueue[meetingId][userId].userId = userId;\n          cursors.push(cursorQueue[meetingId][userId]);\n        }\n        delete cursorQueue[meetingId];\n        CursorStreamer(meetingId).emit('message', { meetingId, cursors });\n      } catch (error) {\n        Logger.error(`Error while trying to send cursor streamer data for meeting ${meetingId}. ${error}`);\n      }\n    });\n  } catch (error) {\n    Logger.error(`Error while processing cursor queue. ${error}`);\n  }\n}, CURSOR_PROCCESS_INTERVAL);\n\nexport default function handleCursorUpdate({ header, body }, meetingId) {\n  const { userId } = header;\n  check(body, Object);\n\n  check(meetingId, String);\n  check(userId, String);\n\n  if (!cursorQueue[meetingId]) {\n    cursorQueue[meetingId] = {};\n  }\n\n  // overwrite since we dont care about the other positions\n  cursorQueue[meetingId][userId] = body;\n\n  proccess();\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\n\nexport default function publishCursorUpdate(meetingId, requesterUserId, payload) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendCursorPositionPubMsg';\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleCursorUpdate from './handlers/cursorUpdate';\n\nRedisPubSub.on('SendCursorPositionEvtMsg', handleCursorUpdate);\n","import './eventHandlers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport publishCursorUpdate from './methods/publishCursorUpdate';\n\nMeteor.methods({\n  publishCursorUpdate,\n});\n","import Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport publishCursorUpdate from './methods/publishCursorUpdate';\n\nconst { streamerLog } = Meteor.settings.private.serverLog;\n\nexport function removeCursorStreamer(meetingId) {\n  Logger.info(`Removing Cursor streamer object for meeting ${meetingId}`);\n  delete Meteor.StreamerCentral.instances[`cursor-${meetingId}`];\n}\n\nexport function addCursorStreamer(meetingId) {\n  const streamer = new Meteor.Streamer(`cursor-${meetingId}`, { retransmit: false });\n  if (streamerLog) {\n    Logger.debug('Cursor streamer created', { meetingId });\n  }\n\n  streamer.allowRead(function allowRead() {\n    if (streamerLog) {\n      Logger.debug('Cursor streamer called allowRead', { userId: this.userId, meetingId });\n    }\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.allowWrite(function allowWrite() {\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.on('publish', function (message) {\n    const { requesterUserId } = extractCredentials(this.userId);\n    publishCursorUpdate(meetingId, requesterUserId, message);\n  });\n}\n\nexport default function get(meetingId) {\n  return Meteor.StreamerCentral.instances[`cursor-${meetingId}`];\n}\n","import { check } from 'meteor/check';\nimport startExternalVideo from '../modifiers/startExternalVideo';\n\nexport default function handleStartExternalVideo({ header, body }, meetingId) {\n  check(header, Object);\n  check(body, Object);\n  check(meetingId, String);\n\n  const { userId } = header;\n  const { externalVideoUrl } = body;\n\n  startExternalVideo(meetingId, userId, externalVideoUrl);\n}\n","import { check } from 'meteor/check';\nimport stopExternalVideo from '../modifiers/stopExternalVideo';\n\nexport default function handleStopExternalVideo({ header }, meetingId) {\n  check(header, Object);\n  check(meetingId, String);\n\n  const { userId } = header;\n\n  stopExternalVideo(userId, meetingId);\n}\n","import { check } from 'meteor/check';\nimport updateExternalVideo from '../modifiers/updateExternalVideo';\n\nexport default function handleUpdateExternalVideo({ header, body }, meetingId) {\n  check(header, Object);\n  check(body, Object);\n  check(meetingId, String);\n\n  const { userId } = header;\n\n  const {\n    status,\n    rate,\n    time,\n    state,\n  } = body;\n\n  updateExternalVideo(meetingId, userId, status, rate, time, state);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function emitExternalVideoEvent(options) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateExternalVideoPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const { status, playerStatus } = options;\n\n    check(status, String);\n    check(playerStatus, {\n      rate: Match.Maybe(Number),\n      time: Match.Maybe(Number),\n      state: Match.Maybe(Number),\n    });\n\n    const state = playerStatus.state || 0;\n\n    const payload = {\n      status,\n      rate: playerStatus.rate || 0,\n      time: playerStatus.time || 0,\n      state,\n    };\n\n    Logger.debug(`User id=${requesterUserId} sending ${EVENT_NAME} event:${state} for meeting ${meetingId}`);\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method emitExternalVideoEvent ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startWatchingExternalVideo(externalVideoUrl) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StartExternalVideoPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(externalVideoUrl, String);\n\n    const payload = { externalVideoUrl };\n\n    Logger.info(`User ${requesterUserId} sharing an external video ${externalVideoUrl} for meeting ${meetingId}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (error) {\n    Logger.error(`Error on sharing an external video for meeting ${meetingId}: ${error}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nexport default function stopWatchingExternalVideo() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StopExternalVideoPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {};\n\n    Logger.info(`User ${requesterUserId} stoping an external video for meeting ${meetingId}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (error) {\n    Logger.error(`Error on stoping an external video for meeting ${meetingId}: ${error}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { ExternalVideoMeetings } from '/imports/api/meetings';\n\nexport default function startExternalVideo(meetingId, userId, externalVideoUrl) {\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(externalVideoUrl, String);\n\n    const selector = { meetingId };\n    const modifier = { $set: { externalVideoUrl } };\n\n    Logger.info(`User id=${userId} sharing an external video: ${externalVideoUrl} for meeting ${meetingId}`);\n    ExternalVideoMeetings.update(selector, modifier);\n  } catch (err) {\n    Logger.error(`Error on setting shared external video start in Meetings collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { ExternalVideoMeetings } from '/imports/api/meetings';\n\nexport default function stopExternalVideo(userId, meetingId) {\n  try {\n    check(meetingId, String);\n    check(userId, String);\n\n    const selector = { meetingId };\n    const modifier = { $set: { externalVideoUrl: null } };\n\n    Logger.info(`External video stop sharing was initiated by:[${userId}] for meeting ${meetingId}`);\n    ExternalVideoMeetings.update(selector, modifier);\n  } catch (err) {\n    Logger.error(`Error on setting shared external video stop in Meetings collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport ExternalVideoStreamer from '/imports/api/external-videos/server/streamer';\n\nexport default function updateExternalVideo(meetingId, userId, status, rate, time, state) {\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(status, String);\n    check(rate, Number);\n    check(time, Number);\n    check(state, Number);\n\n    const modifier = {\n      meetingId,\n      userId,\n      rate,\n      time,\n      state,\n    };\n\n    Logger.debug(`UpdateExternalVideoEvtMsg received for user ${userId} and meeting ${meetingId} event:${status}`);\n    ExternalVideoStreamer(meetingId).emit(status, modifier);\n  } catch (err) {\n    Logger.error(`Error on setting shared external video update in Meetings collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleStartExternalVideo from './handlers/startExternalVideo';\nimport handleStopExternalVideo from './handlers/stopExternalVideo';\nimport handleUpdateExternalVideo from './handlers/updateExternalVideo';\n\nRedisPubSub.on('StartExternalVideoEvtMsg', handleStartExternalVideo);\nRedisPubSub.on('StopExternalVideoEvtMsg', handleStopExternalVideo);\nRedisPubSub.on('UpdateExternalVideoEvtMsg', handleUpdateExternalVideo);\n","import './methods';\nimport './eventHandlers';\n","import { Meteor } from 'meteor/meteor';\nimport startWatchingExternalVideo from './methods/startWatchingExternalVideo';\nimport stopWatchingExternalVideo from './methods/stopWatchingExternalVideo';\nimport emitExternalVideoEvent from './methods/emitExternalVideoEvent';\n\nMeteor.methods({\n  startWatchingExternalVideo,\n  stopWatchingExternalVideo,\n  emitExternalVideoEvent,\n});\n","import { Meteor } from 'meteor/meteor';\r\nimport Logger from '/imports/startup/server/logger';\r\n\r\nconst allowRecentMessages = (eventName, message) => {\r\n\r\n  const {\r\n    userId,\r\n    meetingId,\r\n    time,\r\n    rate,\r\n    state,\r\n  } = message;\r\n\r\n  Logger.debug(`ExternalVideo Streamer auth allowed userId: ${userId}, meetingId: ${meetingId}, event: ${eventName}, time: ${time} rate: ${rate}, state: ${state}`);\r\n  return true;\r\n};\r\n\r\nexport function removeExternalVideoStreamer(meetingId) {\r\n  const streamName = `external-videos-${meetingId}`;\r\n\r\n  if (Meteor.StreamerCentral.instances[streamName]) {\r\n    Logger.info(`Destroying External Video streamer object for ${streamName}`);\r\n    delete Meteor.StreamerCentral.instances[streamName];\r\n  }\r\n}\r\n\r\nexport function addExternalVideoStreamer(meetingId) {\r\n\r\n  const streamName = `external-videos-${meetingId}`;\r\n  if (!Meteor.StreamerCentral.instances[streamName]) {\r\n\r\n    const streamer = new Meteor.Streamer(streamName);\r\n    streamer.allowRead(function allowRead() {\r\n      if (!this.userId) return false;\r\n\r\n      return this.userId && this.userId.includes(meetingId);\r\n    });\r\n    streamer.allowWrite('none');\r\n    streamer.allowEmit(allowRecentMessages);\r\n    Logger.info(`Created External Video streamer for ${streamName}`);\r\n  } else {\r\n    Logger.debug(`External Video streamer is already created for ${streamName}`);\r\n  }\r\n}\r\n\r\nexport default function get(meetingId) {\r\n  const streamName = `external-videos-${meetingId}`;\r\n  return Meteor.StreamerCentral.instances[streamName];\r\n}\r\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChatCreated({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  addGroupChat(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChatDestroyed({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  addGroupChat(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChats({ body }, meetingId) {\n  const { chats } = body;\n\n  check(meetingId, String);\n  check(chats, Array);\n\n  chats.forEach(chat => addGroupChat(meetingId, chat));\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { CHAT_ACCESS_PRIVATE } from '/imports/api/group-chat';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function createGroupChat(receiver) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'CreateGroupChatReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(receiver, Object);\n\n    const payload = {\n      correlationId: `${requesterUserId}-${Date.now()}`,\n      msg: [],\n      users: [receiver.userId],\n      access: CHAT_ACCESS_PRIVATE,\n      name: receiver.name,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method createGroupChat ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function destroyGroupChat() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const eventName = 'DestroyGroupChatReqMsg';\n\n    const payload = {\n      // TODO: Implement this together with #4988\n      // chats: Array[String],\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method createGroupChat ${err.stack}`);\n  }\n}\n","import flat from 'flat';\nimport { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport GroupChat from '/imports/api/group-chat';\n\nexport default function addGroupChat(meetingId, chat) {\n  check(meetingId, String);\n  check(chat, {\n    id: Match.Maybe(String),\n    chatId: Match.Maybe(String),\n    correlationId: Match.Maybe(String),\n    name: String,\n    access: String,\n    createdBy: Object,\n    users: Array,\n    msg: Match.Maybe(Array),\n  });\n\n  const chatDocument = {\n    meetingId,\n    chatId: chat.chatId || chat.id,\n    name: chat.name,\n    access: chat.access,\n    users: chat.users.map(u => u.id),\n    participants: chat.users,\n    createdBy: chat.createdBy.id,\n  };\n\n  const selector = {\n    chatId: chatDocument.chatId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: flat(chatDocument, { safe: true }),\n  };\n\n  try {\n    const { insertedId } = GroupChat.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added group-chat name=${chat.name} meetingId=${meetingId}`);\n    } else {\n      Logger.info(`Upserted group-chat name=${chat.name} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding group-chat to collection: ${err}`);\n  }\n}\n","import GroupChat from '/imports/api/group-chat';\nimport Logger from '/imports/startup/server/logger';\nimport clearGroupChatMsg from '/imports/api/group-chat-msg/server/modifiers/clearGroupChatMsg';\n\nexport default function clearGroupChat(meetingId) {\n  try {\n    clearGroupChatMsg(meetingId);\n    const numberAffected = GroupChat.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared GroupChat (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing GroupChat (${meetingId}). ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleGroupChats from './handlers/groupChats';\nimport handleGroupChatCreated from './handlers/groupChatCreated';\nimport handleGroupChatDestroyed from './handlers/groupChatDestroyed';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nRedisPubSub.on('GetGroupChatsRespMsg', processForHTML5ServerOnly(handleGroupChats));\nRedisPubSub.on('GroupChatCreatedEvtMsg', handleGroupChatCreated);\nRedisPubSub.on('GroupChatDestroyedEvtMsg', handleGroupChatDestroyed);\nRedisPubSub.on('SyncGetGroupChatsRespMsg', handleGroupChats);\n","import '/imports/api/group-chat-msg/server';\nimport './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport createGroupChat from './methods/createGroupChat';\nimport destroyGroupChat from './methods/destroyGroupChat';\n\nMeteor.methods({\n  createGroupChat,\n  destroyGroupChat,\n});\n","import GroupChat from '/imports/api/group-chat';\nimport { Meteor } from 'meteor/meteor';\n\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction groupChat() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GroupChat was requested by unauth connection ${this.connection.id}`);\n    return GroupChat.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_CHAT_TYPE = CHAT_CONFIG.type_public;\n\n  Logger.debug('Publishing group-chat', { meetingId, userId });\n\n  return GroupChat.find({\n    $or: [\n      { meetingId, access: PUBLIC_CHAT_TYPE },\n      { meetingId, users: { $all: [userId] } },\n    ],\n\n  });\n}\n\nfunction publish(...args) {\n  const boundGroupChat = groupChat.bind(this);\n  return boundGroupChat(...args);\n}\n\nMeteor.publish('group-chat', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst GroupChat = new Mongo.Collection('group-chat', collectionOptions);\n\nif (Meteor.isServer) {\n  GroupChat._ensureIndex({\n    meetingId: 1, chatId: 1, access: 1, users: 1,\n  });\n}\n\nexport default GroupChat;\n\nconst CHAT_ACCESS = {\n  PUBLIC: 'PUBLIC_ACCESS',\n  PRIVATE: 'PRIVATE_ACCESS',\n};\n\nexport const CHAT_ACCESS_PUBLIC = CHAT_ACCESS.PUBLIC;\nexport const CHAT_ACCESS_PRIVATE = CHAT_ACCESS.PRIVATE;\n","import { check } from 'meteor/check';\nimport clearGroupChatMsg from '../modifiers/clearGroupChatMsg';\n\nexport default function clearPublicChatHistory({ header, body }) {\n  const { meetingId } = header;\n  const { chatId } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n\n  return clearGroupChatMsg(meetingId, chatId);\n}\n","import { check } from 'meteor/check';\nimport _ from 'lodash';\nimport addGroupChatMsg from '../modifiers/addGroupChatMsg';\nimport addBulkGroupChatMsgs from '../modifiers/addBulkGroupChatMsgs';\n\nconst { bufferChatInsertsMs } = Meteor.settings.public.chat;\n\nconst msgBuffer = [];\n\nconst bulkFn = _.throttle(addBulkGroupChatMsgs, bufferChatInsertsMs);\n\nexport default function handleGroupChatMsgBroadcast({ body }, meetingId) {\n  const { chatId, msg } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, Object);\n\n  if (bufferChatInsertsMs) {\n    msgBuffer.push({ meetingId, chatId, msg });\n    bulkFn(msgBuffer);\n  } else {\n    addGroupChatMsg(meetingId, chatId, msg);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport syncMeetingChatMsgs from '../modifiers/syncMeetingChatMsgs';\n\nexport default function handleSyncGroupChat({ body }, meetingId) {\n  const { chatId, msgs } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msgs, Match.Maybe(Array));\n\n  syncMeetingChatMsgs(meetingId, chatId, msgs);\n}\n","import { check } from 'meteor/check';\nimport startTyping from '../modifiers/startTyping';\n\nexport default function handleUserTyping({ body }, meetingId) {\n  const { chatId, userId } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(chatId, String);\n\n  startTyping(meetingId, userId, chatId);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport GroupChat from '/imports/api/group-chat';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nconst CHAT_CONFIG = Meteor.settings.public.chat;\nconst PUBLIC_CHAT_TYPE = CHAT_CONFIG.type_public;\n\nexport default function chatMessageBeforeJoinCounter() {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const groupChats = GroupChat.find({\n      $or: [\n        { meetingId, access: PUBLIC_CHAT_TYPE },\n        { meetingId, users: { $all: [requesterUserId] } },\n      ],\n    }).fetch();\n\n    const User = Users.findOne({ userId: requesterUserId, meetingId });\n\n    const chatIdWithCounter = groupChats.map((groupChat) => {\n      const msgCount = GroupChatMsg.find({\n        meetingId,\n        chatId: groupChat.chatId,\n        timestamp: { $lt: User.authTokenValidatedTime },\n      }).count();\n      return {\n        chatId: groupChat.chatId,\n        count: msgCount,\n      };\n    }).filter((chat) => chat.count);\n    return chatIdWithCounter;\n  } catch (err) {\n    Logger.error(`Exception while invoking method chatMessageBeforeJoinCounter ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPublicChatHistory() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ClearPublicChatHistoryPubMsg';\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      chatId: PUBLIC_GROUP_CHAT_ID,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method clearPublicChatHistory ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nconst CHAT_CONFIG = Meteor.settings.public.chat;\nconst ITENS_PER_PAGE = CHAT_CONFIG.itemsPerPage;\n\nexport default function fetchMessagePerPage(chatId, page) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(chatId, String);\n    check(page, Number);\n\n    const User = Users.findOne({ userId: requesterUserId, meetingId });\n\n    const messages = GroupChatMsg.find(\n      { chatId, meetingId, timestamp: { $lt: User.authTokenValidatedTime } },\n      {\n        sort: { timestamp: 1 },\n        skip: page > 0 ? ((page - 1) * ITENS_PER_PAGE) : 0,\n        limit: ITENS_PER_PAGE,\n      },\n    )\n      .fetch();\n    return messages;\n  } catch (err) {\n    Logger.error(`Exception while invoking method fetchMessagePerPage ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport RegexWebUrl from '/imports/utils/regex-weburl';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nconst HTML_SAFE_MAP = {\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n};\n\nconst parseMessage = (message) => {\n  let parsedMessage = message || '';\n  parsedMessage = parsedMessage.trim();\n\n  // Replace <br/> with \\n\\r\n  parsedMessage = parsedMessage.replace(/<br\\s*[\\\\/]?>/gi, '\\n\\r');\n\n  // Sanitize. See: http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\n  parsedMessage = parsedMessage.replace(/[<>'\"]/g, (c) => HTML_SAFE_MAP[c]);\n\n  // Replace flash links to flash valid ones\n  parsedMessage = parsedMessage.replace(RegexWebUrl, \"<a href='event:$&'><u>$&</u></a>\");\n\n  return parsedMessage;\n};\n\nexport default function sendGroupChatMsg(chatId, message) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendGroupChatMessageMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(chatId, String);\n    check(message, Object);\n    const parsedMessage = parseMessage(message.message);\n    message.message = parsedMessage;\n\n    const payload = {\n      msg: message,\n      chatId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method sendGroupChatMsg ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function startUserTyping(chatId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserTypingPubMsg';\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(chatId, String);\n\n    const payload = {\n      chatId: chatId || PUBLIC_GROUP_CHAT_ID,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method startUserTyping ${err.stack}`);\n  }\n}\n","import { UsersTyping } from '/imports/api/group-chat-msg';\nimport stopTyping from '../modifiers/stopTyping';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function stopUserTyping() {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const userTyping = UsersTyping.findOne({\n      meetingId,\n      userId: requesterUserId,\n    });\n\n    if (userTyping && meetingId && requesterUserId) {\n      stopTyping(meetingId, requesterUserId, true);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method stopUserTyping ${err.stack}`);\n  }\n}\n","import { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport { parseMessage } from './addGroupChatMsg';\n\nexport default async function addBulkGroupChatMsgs(msgs) {\n  if (!msgs.length) return;\n\n  const mappedMsgs = msgs\n    .map(({ chatId, meetingId, msg }) => {\n      const {\n        sender,\n        ...restMsg\n      } = msg;\n\n      return {\n        _id: new Mongo.ObjectID()._str,\n        ...restMsg,\n        meetingId,\n        chatId,\n        message: parseMessage(msg.message),\n        sender: sender.id,\n        senderName: sender.name,\n        senderRole: sender.role\n      };\n    })\n    .map(el => flat(el, { safe: true }));\n\n  try {\n    const { insertedCount } = await GroupChatMsg.rawCollection().insertMany(mappedMsgs);\n    msgs.length = 0;\n\n    if (insertedCount) {\n      Logger.info(`Inserted ${insertedCount} messages`);\n    }\n  } catch (err) {\n    Logger.error(`Error on bulk insert. ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport { BREAK_LINE } from '/imports/utils/lineEndings';\nimport changeHasMessages from '/imports/api/users-persistent-data/server/modifiers/changeHasMessages';\n\nexport function parseMessage(message) {\n  let parsedMessage = message || '';\n\n  // Replace \\r and \\n to <br/>\n  parsedMessage = parsedMessage.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, `$1${BREAK_LINE}$2`);\n\n  // Replace flash links to html valid ones\n  parsedMessage = parsedMessage.split('<a href=\\'event:').join('<a target=\"_blank\" href=\\'');\n  parsedMessage = parsedMessage.split('<a href=\"event:').join('<a target=\"_blank\" href=\"');\n\n  return parsedMessage;\n}\n\nexport default function addGroupChatMsg(meetingId, chatId, msg) {\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, {\n    id: Match.Maybe(String),\n    timestamp: Number,\n    sender: Object,\n    chatEmphasizedText: Boolean,\n    message: String,\n    correlationId: Match.Maybe(String),\n  });\n\n  const {\n    sender,\n    ...restMsg\n  } = msg;\n\n  const msgDocument = {\n    ...restMsg,\n    sender: sender.id,\n    senderName: sender.name,\n    senderRole: sender.role,\n    meetingId,\n    chatId,\n    message: parseMessage(msg.message),\n  };\n\n  try {\n    const insertedId = GroupChatMsg.insert(msgDocument);\n\n    if (insertedId) {\n      changeHasMessages(true, sender.id, meetingId);\n      Logger.info(`Added group-chat-msg msgId=${msg.id} chatId=${chatId} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on adding group-chat-msg to collection: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport { BREAK_LINE } from '/imports/utils/lineEndings';\n\nexport function parseMessage(message) {\n  let parsedMessage = message || '';\n\n  // Replace \\r and \\n to <br/>\n  parsedMessage = parsedMessage.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, `$1${BREAK_LINE}$2`);\n\n  // Replace flash links to html valid ones\n  parsedMessage = parsedMessage.split('<a href=\\'event:').join('<a target=\"_blank\" href=\\'');\n  parsedMessage = parsedMessage.split('<a href=\"event:').join('<a target=\"_blank\" href=\"');\n\n  return parsedMessage;\n}\n\nexport default function addSystemMsg(meetingId, chatId, msg) {\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, {\n    id: Match.Maybe(String),\n    timestamp: Number,\n    sender: Object,\n    message: String,\n    messageValues: Match.Maybe(Object),\n    extra: Match.Maybe(Object),\n    correlationId: Match.Maybe(String),\n  });\n  const msgDocument = {\n    ...msg,\n    sender: msg.sender.id,\n    meetingId,\n    chatId,\n    message: parseMessage(msg.message),\n  };\n\n  try {\n    const insertedId = GroupChatMsg.insert(msgDocument);\n\n    if (insertedId) {\n      Logger.info(`Added system-msg msgId=${msg.id} chatId=${chatId} meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on adding system-msg to collection: ${err}`);\n  }\n}\n","import { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport addSystemMsg from '/imports/api/group-chat-msg/server/modifiers/addSystemMsg';\n\nexport default function clearGroupChatMsg(meetingId, chatId) {\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_CHAT_SYSTEM_ID = CHAT_CONFIG.system_userid;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const CHAT_CLEAR_MESSAGE = CHAT_CONFIG.system_messages_keys.chat_clear;\n  const SYSTEM_CHAT_TYPE = CHAT_CONFIG.type_system;\n\n  if (chatId) {\n    try {\n      const numberAffected = GroupChatMsg.remove({ meetingId, chatId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GroupChatMsg (${meetingId}, ${chatId})`);\n        const clearMsg = {\n          id: `${SYSTEM_CHAT_TYPE}-${CHAT_CLEAR_MESSAGE}`,\n          timestamp: Date.now(),\n          correlationId: `${PUBLIC_CHAT_SYSTEM_ID}-${Date.now()}`,\n          sender: {\n            id: PUBLIC_CHAT_SYSTEM_ID,\n            name: '',\n          },\n          message: CHAT_CLEAR_MESSAGE,\n        };\n        addSystemMsg(meetingId, PUBLIC_GROUP_CHAT_ID, clearMsg);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChat (${meetingId}, ${chatId}). ${err}`);\n    }\n    return true;\n  }\n\n  if (meetingId) {\n    try {\n      const numberAffected = GroupChatMsg.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GroupChatMsg (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChatMsg (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = GroupChatMsg.remove({ chatId: { $eq: PUBLIC_GROUP_CHAT_ID } });\n\n      if (numberAffected) {\n        Logger.info('Cleared GroupChatMsg (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GroupChatMsg (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { UsersTyping } from '/imports/api/group-chat-msg';\nimport stopTyping from './stopTyping';\n\nconst TYPING_TIMEOUT = 5000;\n\nexport default function startTyping(meetingId, userId, chatId) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = Users.findOne(selector, { fields: { name: 1, role: 1 } });\n\n  const modifier = {\n    meetingId,\n    userId,\n    name: user.name,\n    isTypingTo: chatId,\n    role: user.role,\n    time: (new Date()),\n  };\n\n  const typingUser = UsersTyping.findOne(selector, {\n    fields: {\n      time: 1,\n    },\n  });\n\n  if (typingUser) {\n    if (modifier.time - typingUser.time <= TYPING_TIMEOUT - 100) return;\n  }\n\n  try {\n    const { numberAffected } = UsersTyping.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Typing indicator update', { userId, chatId });\n      Meteor.setTimeout(() => {\n        stopTyping(meetingId, userId);\n      }, TYPING_TIMEOUT);\n    }\n  } catch (err) {\n    Logger.error(`Typing indicator update error: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { UsersTyping } from '/imports/api/group-chat-msg';\n\nexport default function stopTyping(meetingId, userId, sendMsgInitiated = false) {\n  check(meetingId, String);\n  check(userId, String);\n  check(sendMsgInitiated, Boolean);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = UsersTyping.findOne(selector);\n  const stillTyping = !sendMsgInitiated && user && (new Date()) - user.time < 3000;\n  if (stillTyping) return;\n\n  try {\n    const numberAffected = UsersTyping.remove(selector);\n\n    if (numberAffected) {\n      Logger.debug('Stopped typing indicator', { userId });\n    }\n  } catch (err) {\n    Logger.error(`Stop user=${userId} typing indicator error: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport flat from 'flat';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport { parseMessage } from './addGroupChatMsg';\n\nexport default function syncMeetingChatMsgs(meetingId, chatId, msgs) {\n  if (!msgs.length) return;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msgs, Match.Maybe(Array));\n\n  try {\n    const bulkOperations = GroupChatMsg.rawCollection().initializeOrderedBulkOp();\n\n    msgs\n      .forEach((msg) => {\n        const {\n          sender,\n          ...restMsg\n        } = msg;\n\n        const msgToSync = {\n          ...restMsg,\n          meetingId,\n          chatId,\n          message: parseMessage(msg.message),\n          sender: sender.id,\n        };\n\n        const modifier = flat(msgToSync, { safe: true });\n\n        bulkOperations\n          .find({ chatId, meetingId, id: msg.id })\n          .upsert()\n          .updateOne({\n            $setOnInsert: { _id: new Mongo.ObjectID()._str },\n            $set: { ...modifier },\n          });\n      });\n\n    bulkOperations.execute();\n\n    Logger.info('Chat messages synchronized', { chatId, meetingId });\n  } catch (err) {\n    Logger.error(`Error on sync chat messages: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleGroupChatMsgBroadcast from './handlers/groupChatMsgBroadcast';\nimport handleClearPublicGroupChat from './handlers/clearPublicGroupChat';\nimport handleUserTyping from './handlers/userTyping';\nimport handleSyncGroupChatMsg from './handlers/syncGroupsChat';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nRedisPubSub.on('GetGroupChatMsgsRespMsg', processForHTML5ServerOnly(handleSyncGroupChatMsg));\nRedisPubSub.on('GroupChatMessageBroadcastEvtMsg', handleGroupChatMsgBroadcast);\nRedisPubSub.on('ClearPublicChatHistoryEvtMsg', handleClearPublicGroupChat);\nRedisPubSub.on('SyncGetGroupChatMsgsRespMsg', handleSyncGroupChatMsg);\nRedisPubSub.on('UserTypingEvtMsg', handleUserTyping);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport sendGroupChatMsg from './methods/sendGroupChatMsg';\nimport clearPublicChatHistory from './methods/clearPublicChatHistory';\nimport startUserTyping from './methods/startUserTyping';\nimport stopUserTyping from './methods/stopUserTyping';\nimport chatMessageBeforeJoinCounter from './methods/chatMessageBeforeJoinCounter';\nimport fetchMessagePerPage from './methods/fetchMessagePerPage';\n\nMeteor.methods({\n  fetchMessagePerPage,\n  chatMessageBeforeJoinCounter,\n  sendGroupChatMsg,\n  clearPublicChatHistory,\n  startUserTyping,\n  stopUserTyping,\n});\n","import { GroupChatMsg, UsersTyping } from '/imports/api/group-chat-msg';\nimport Users from '/imports/api/users';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport GroupChat from '/imports/api/group-chat';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction groupChatMsg(chatCount) {\n  check(chatCount, Number);\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GroupChatMsg was requested by unauth connection ${this.connection.id}`);\n    return GroupChatMsg.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  Logger.debug('Publishing group-chat-msg', { meetingId, userId });\n\n  const chats = GroupChat.find({\n    $or: [\n      { meetingId, users: { $all: [userId] } },\n    ],\n  }).fetch();\n\n  const chatsIds = chats.map((ct) => ct.chatId);\n\n  const User = Users.findOne({ userId, meetingId });\n  const selector = {\n    timestamp: { $gte: User.authTokenValidatedTime },\n    $or: [\n      { meetingId, chatId: { $eq: PUBLIC_GROUP_CHAT_ID } },\n      { meetingId, chatId: { $in: chatsIds } },\n    ],\n  };\n  return GroupChatMsg.find(selector);\n}\n\nfunction publish(...args) {\n  const boundGroupChat = groupChatMsg.bind(this);\n  return boundGroupChat(...args);\n}\n\nMeteor.publish('group-chat-msg', publish);\n\nfunction usersTyping() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing users-typing was requested by unauth connection ${this.connection.id}`);\n    return UsersTyping.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing users-typing', { meetingId, userId });\n\n  return UsersTyping.find({ meetingId });\n}\n\nfunction pubishUsersTyping(...args) {\n  const boundUsersTyping = usersTyping.bind(this);\n  return boundUsersTyping(...args);\n}\n\nMeteor.publish('users-typing', pubishUsersTyping);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst GroupChatMsg = new Mongo.Collection('group-chat-msg');\nconst UsersTyping = new Mongo.Collection('users-typing', collectionOptions);\n\nif (Meteor.isServer) {\n  GroupChatMsg._ensureIndex({ meetingId: 1, chatId: 1 });\n  UsersTyping._ensureIndex({ meetingId: 1, isTypingTo: 1 });\n}\n\n// As we store chat in context, skip adding to mini mongo\nif (Meteor.isClient) {\n  GroupChatMsg.onAdded = () => false;\n}\n\nexport { GroupChatMsg, UsersTyping };\n","import { check } from 'meteor/check';\nimport setGuestStatus from '../modifiers/setGuestStatus';\n\nexport default function handleGuestApproved({ body }, meetingId) {\n  const { approvedBy, guests } = body;\n  check(meetingId, String);\n  check(approvedBy, String);\n  check(guests, Array);\n\n  return guests.forEach(guest => setGuestStatus(meetingId, guest.guest, guest.status, approvedBy));\n}\n","import { check } from 'meteor/check';\nimport removeGuest from '../modifiers/removeGuest';\n\nexport default function handleGuestWaitingLeft({ body }, meetingId) {\n  const { userId } = body;\n  check(meetingId, String);\n  check(userId, String);\n\n  return removeGuest(meetingId, userId);\n}\n","import stringHash from 'string-hash';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport GuestUsers from '/imports/api/guest-users/';\nimport updatePositionInWaitingQueue from '../methods/updatePositionInWaitingQueue';\n\nconst COLOR_LIST = [\n  '#7b1fa2', '#6a1b9a', '#4a148c', '#5e35b1', '#512da8', '#4527a0',\n  '#311b92', '#3949ab', '#303f9f', '#283593', '#1a237e', '#1976d2', '#1565c0',\n  '#0d47a1', '#0277bd', '#01579b',\n];\n\nexport default function handleGuestsWaitingForApproval({ body }, meetingId) {\n  const { guests } = body;\n  check(guests, Array);\n  check(meetingId, String);\n\n  return guests.map((guest) => {\n    try {\n      const { insertedId, numberAffected } = GuestUsers.upsert({\n        meetingId,\n        intId: guest.intId,\n      }, {\n        approved: false,\n        denied: false,\n        ...guest,\n        meetingId,\n        loginTime: guest.registeredOn,\n        privateGuestLobbyMessage: '',\n        color: COLOR_LIST[stringHash(guest.intId) % COLOR_LIST.length],\n      });\n\n      if (insertedId) {\n        Logger.info(`Added guest user meeting=${meetingId}`);\n\n        /** Update position of waiting users after user \n        *   has entered the guest lobby\n        */\n         updatePositionInWaitingQueue(meetingId); \n      } else if (numberAffected) {\n        Logger.info(`Upserted guest user meeting=${meetingId}`);\n\n        updatePositionInWaitingQueue(meetingId); \n      }\n    } catch (err) {\n      Logger.error(`Adding guest user to collection: ${err}`);\n    }\n  });\n}\n","import { check } from 'meteor/check';\nimport setPrivateGuestLobbyMessage from '../modifiers/setPrivateGuestLobbyMessage';\n\nexport default function handlePrivateGuestLobbyMessageChanged({ body }, meetingId) {\n  const {guestId, message } = body;\n\n  check(meetingId, String);\n  check(guestId, String)\n  check(message, String);\n\n  setPrivateGuestLobbyMessage(meetingId, guestId, message);\n}\n\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'GuestsWaitingApprovedMsg';\n\nexport default function allowPendingUsers(guests, status) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(guests, Array);\n    const mappedGuests = guests.map((guest) => ({ status, guest: guest.intId }));\n\n    const payload = {\n      approvedBy: requesterUserId,\n      guests: mappedGuests,\n    };\n\n    Logger.info(`User=${requesterUserId} ${status} guests ${JSON.stringify(mappedGuests)}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method allowPendingUsers ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'SetGuestPolicyCmdMsg';\n\nexport default function changeGuestPolicy(policyRule) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(policyRule, String);\n\n    const payload = {\n      setBy: requesterUserId,\n      policy: policyRule,\n    };\n\n    Logger.info(`User=${requesterUserId} change guest policy to ${policyRule}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method changeGuestPolicy ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'SetGuestLobbyMessageCmdMsg';\n\nexport default function setGuestLobbyMessage(message) {\n  try {\n    check(message, String);\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = { message };\n\n    Logger.info(`User=${requesterUserId} set guest lobby message to ${message}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setGuestLobbyMessage ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'SetPrivateGuestLobbyMessageCmdMsg';\n\nexport default function setPrivateGuestLobbyMessage(message, guestId) {\n  check(message, String);\n  check(guestId, String);\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const payload = { guestId, message };\n\n  Logger.info(`User=${requesterUserId} sent a private guest lobby message to guest user=${guestId}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport GuestUsers from '/imports/api/guest-users/';\n\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'UpdatePositionInWaitingQueueReqMsg';\n\nexport default function updatePositionInWaitingQueue(meetingId) {\n\n    check(meetingId, String); \n\n    const guestUsers = GuestUsers.find({\n        meetingId: meetingId,\n        approved: false,\n        denied: false,\n    }).fetch();\n    \n    check(guestUsers, Array);\n    try {\n\n        const guests = guestUsers.map(guest => ({intId: guest.intId, idx: String(guestUsers.indexOf(guest)+1)}));\n        check(guests, Array);\n        const payload = { guests };\n\n        Logger.info(`The waiting positions of the guest users will be updated`);\n        RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, \"not-used\", payload);\n    } catch (err) {\n        Logger.error(`Exception while invoking method updatePositionInWaitingQueue ${err.stack}`);\n    }\n}\n    ","import GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearGuestUsers(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = GuestUsers.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared GuestUsers in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing GuestUsers in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = GuestUsers.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared GuestUsers in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing GuestUsers in all meetings. ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\nimport updatePositionInWaitingQueue from '../methods/updatePositionInWaitingQueue';\n\nexport default function removeGuest(meetingId, intId) {\n  check(meetingId, String);\n  check(intId, String);\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing guest user from collection: ${err}`);\n    }\n\n    /**\n     *  Update position of waiting users after user has left the guest lobby \n     */\n     updatePositionInWaitingQueue(meetingId);\n\n    return Logger.info(`Removed guest user id=${intId} meetingId=${meetingId}`);\n  };\n\n  return GuestUsers.remove(selector, cb);\n}\n","import { check } from 'meteor/check';\nimport GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\nimport updatePositionInWaitingQueue from '../methods/updatePositionInWaitingQueue';\n\nconst GUEST_STATUS_ALLOW = 'ALLOW';\nconst GUEST_STATUS_DENY = 'DENY';\nexport default function setGuestStatus(meetingId, intId, status, approvedBy = null) {\n  check(meetingId, String);\n  check(intId, String);\n  check(status, String);\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      approved: status === GUEST_STATUS_ALLOW,\n      denied: status === GUEST_STATUS_DENY,\n      approvedBy,\n    },\n  }; \n\n  try {\n    const numberAffected = GuestUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated status=${status} user=${intId} meeting=${meetingId}`);\n      /** Update position of waiting users after user has been\n      *  approved or denied by the moderator \n      */\n      updatePositionInWaitingQueue(meetingId); \n    }\n  } catch (err) {\n    Logger.error(`Updating status=${status} user=${intId}: ${err}`);\n  }\n}\n","import GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setPrivateGuestLobbyMessage(meetingId, guestId, guestLobbyMessage) {\n  check(meetingId, String);\n  check(guestId, String);\n  check(guestLobbyMessage, String);\n\n  const intId=guestId;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      privateGuestLobbyMessage: guestLobbyMessage,\n    },\n  };\n\n  try {\n    const numberAffected = GuestUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Set a private guest lobby message meetingId=${meetingId} for guest user=${guestId} to guestLobbyMessage=${guestLobbyMessage}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting a private guest lobby message to ${guestId}: ${err}`);\n  }\n}\n\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleGuestApproved from './handlers/guestApproved';\nimport handleGuestsWaitingForApproval from './handlers/guestsWaitingForApproval';\nimport handleGuestWaitingLeft from './handlers/guestWaitingLeft';\nimport handlePrivateGuestLobbyMessageChanged from './handlers/privateGuestLobbyMessageChanged'\n\nRedisPubSub.on('GuestWaitingLeftEvtMsg', handleGuestWaitingLeft);\nRedisPubSub.on('GuestsWaitingForApprovalEvtMsg', processForHTML5ServerOnly(handleGuestsWaitingForApproval));\nRedisPubSub.on('GuestsWaitingApprovedEvtMsg', processForHTML5ServerOnly(handleGuestApproved));\nRedisPubSub.on('PrivateGuestLobbyMsgChangedEvtMsg', handlePrivateGuestLobbyMessageChanged);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport allowPendingUsers from '/imports/api/guest-users/server/methods/allowPendingUsers';\nimport changeGuestPolicy from '/imports/api/guest-users/server/methods/changeGuestPolicy';\nimport setGuestLobbyMessage from '/imports/api/guest-users/server/methods/setGuestLobbyMessage';\nimport setPrivateGuestLobbyMessage from '/imports/api/guest-users/server/methods/setPrivateGuestLobbyMessage';\n\nMeteor.methods({\n  allowPendingUsers,\n  changeGuestPolicy,\n  setGuestLobbyMessage,\n  setPrivateGuestLobbyMessage,\n});\n","import GuestUsers from '/imports/api/guest-users/';\nimport Users from '/imports/api/users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport { publicationSafeGuard } from '/imports/api/common/server/helpers';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction guestUsers() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing GuestUser was requested by unauth connection ${this.connection.id}`);\n    return GuestUsers.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  if (!User || User.role !== ROLE_MODERATOR) {\n    Logger.warn(\n      'Publishing GuestUser was requested by non-moderator connection',\n      { meetingId, userId, connectionId: this.connection.id },\n    );\n\n    return GuestUsers.find({ meetingId: '' });\n  }\n  // Monitor this publication and stop it when user is not a moderator anymore\n  const comparisonFunc = () => {\n    const user = Users.findOne({ userId, meetingId }, { fields: { role: 1, userId: 1 } });\n    const condition = user.role === ROLE_MODERATOR;\n\n    if (!condition) {\n      Logger.info(`conditions aren't filled anymore in publication ${this._name}: \n      user.role === ROLE_MODERATOR :${condition}, user.role: ${user.role} ROLE_MODERATOR: ${ROLE_MODERATOR}`);\n    }\n\n    return condition;\n  };\n  publicationSafeGuard(comparisonFunc, this);\n  Logger.debug(`Publishing GuestUsers for ${meetingId} ${userId}`);\n\n  return GuestUsers.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundSlides = guestUsers.bind(this);\n  return boundSlides(...args);\n}\n\nMeteor.publish('guestUser', publish);\n","import { Mongo } from 'meteor/mongo';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst GuestUsers = new Mongo.Collection('guestUsers', collectionOptions);\n\nexport default GuestUsers;\n","import _ from 'lodash';\nimport { check } from 'meteor/check';\nimport LocalSettings from '/imports/api/local-settings';\nimport setChangedLocalSettings from '../modifiers/setChangedLocalSettings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userChangedLocalSettings(settings) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    if (!meetingId || !requesterUserId) return;\n\n    check(settings, Object);\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const userLocalSettings = LocalSettings\n      .findOne({ meetingId, userId: requesterUserId },\n        {\n          fields: { settings: 1 },\n        });\n\n    if (!userLocalSettings || !_.isEqual(userLocalSettings.settings, settings)) {\n      setChangedLocalSettings(meetingId, requesterUserId, settings);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method userChangedLocalSettings ${err.stack}`);\n  }\n}\n","import LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearLocalSettings(meetingId) {\n  try {\n    const numberAffected = LocalSettings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared Local Settings (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing Local Settings (${meetingId}). ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setChangedLocalSettings(meetingId, userId, settings) {\n  check(meetingId, String);\n  check(userId, String);\n  check(settings, Object);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      settings,\n    },\n  };\n\n  try {\n    const { numChanged } = LocalSettings.upsert(selector, modifier);\n\n    if (numChanged) {\n      Logger.info(`Updated settings for user ${userId} on meeting ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on update settings. ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport userChangedLocalSettings from './methods/userChangedLocalSettings';\n\nMeteor.methods({\n  userChangedLocalSettings,\n});\n","import { Meteor } from 'meteor/meteor';\nimport LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction localSettings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing LocalSettings was requested by unauth connection ${this.connection.id}`);\n    return LocalSettings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing local settings', { userId });\n\n  return LocalSettings.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundLocalSettings = localSettings.bind(this);\n  return boundLocalSettings(...args);\n}\n\nMeteor.publish('local-settings', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst LocalSettings = new Mongo.Collection('local-settings');\n\nif (Meteor.isServer) {\n  LocalSettings._ensureIndex({\n    meetingId: 1, userId: 1,\n  });\n}\n\nexport default LocalSettings;\n","import Logger from '/imports/startup/server/logger';\n\nexport default function (type, logDescription, logCode = 'was_not_provided', extraInfo = {}, userInfo = {}) {\n  const connectionId = this.connection.id;\n  const logContents = {\n    logCode,\n    logDescription,\n    connectionId,\n    extraInfo,\n    userInfo,\n  };\n\n  // If I don't pass message, logs will start with `undefined`\n  Logger.log({ message: JSON.stringify(logContents), level: type });\n}\n","import './methods';\n","import { Meteor } from 'meteor/meteor';\nimport logClient from './methods/logClient';\n\nMeteor.methods({ logClient });\n","import changeLayout from '../modifiers/changeLayout';\n\nexport default function broadcastLayout({ body }, meetingId) {\n  const { layout, setByUserId, applyTo } = body;\n\n  changeLayout(meetingId, layout, setByUserId, applyTo);\n}\n","import handleMeetingCreation from './meetingCreation';\n\nexport default function handleGetAllMeetings({ body }) {\n  return handleMeetingCreation({ body });\n}\n","import setGuestLobbyMessage from '../modifiers/setGuestLobbyMessage';\nimport { check } from 'meteor/check';\n\nexport default function handleGuestLobbyMessageChanged({ body }, meetingId) {\n  const { message } = body;\n\n  check(meetingId, String);\n  check(message, String);\n\n  return setGuestLobbyMessage(meetingId, message);\n}\n","import setGuestPolicy from '../modifiers/setGuestPolicy';\nimport { check } from 'meteor/check';\n\nexport default function handleGuestPolicyChanged({ body }, meetingId) {\n  const { policy } = body;\n\n  check(meetingId, String);\n  check(policy, String);\n\n\n  return setGuestPolicy(meetingId, policy);\n}\n","import { check } from 'meteor/check';\nimport addMeeting from '../modifiers/addMeeting';\n\nexport default function handleMeetingCreation({ body }) {\n  const meeting = body.props;\n  const durationInSecods = (meeting.durationProps.duration * 60);\n  meeting.durationProps.timeRemaining = durationInSecods;\n  check(meeting, Object);\n\n  return addMeeting(meeting);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\n\nimport { removeAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { removeCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport { removeExternalVideoStreamer } from '/imports/api/external-videos/server/streamer';\n\nexport default function handleMeetingDestruction({ body }) {\n  check(body, Object);\n  const { meetingId } = body;\n  check(meetingId, String);\n\n  if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n    removeAnnotationsStreamer(meetingId);\n    removeCursorStreamer(meetingId);\n    removeExternalVideoStreamer(meetingId);\n  }\n\n  return RedisPubSub.destroyMeetingQueue(meetingId);\n}\n","import { check } from 'meteor/check';\nimport meetingHasEnded from '../modifiers/meetingHasEnded';\nimport Meetings from '/imports/api/meetings';\nimport Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleMeetingEnd({ header, body }) {\n  check(body, Object);\n  const { meetingId, reason } = body;\n  check(meetingId, String);\n\n  check(header, Object);\n  const { userId } = header;\n  check(userId, String);\n\n  const cb = (err, num, meetingType) => {\n    if (err) {\n      Logger.error(`${meetingType} ending error: ${err}`);\n      return;\n    }\n    if (num) {\n      Meteor.setTimeout(() => { meetingHasEnded(meetingId); }, 10000);\n    }\n  };\n\n  Meetings.find({ meetingId }).forEach((doc) => {\n    Meetings.update({ meetingId },\n      {\n        $set: {\n          meetingEnded: true,\n          meetingEndedBy: userId,\n          meetingEndedReason: reason,\n          learningDashboardAccessToken: doc.password.learningDashboardAccessToken,\n        },\n      },\n      (err, num) => { cb(err, num, 'Meeting'); });\n  });\n\n  Breakouts.update({ parentMeetingId: meetingId },\n    { $set: { meetingEnded: true } },\n    (err, num) => { cb(err, num, 'Breakout'); });\n}\n","import changeLockSettings from '../modifiers/changeLockSettings';\n\nexport default function handleLockSettingsInMeeting({ body }, meetingId) {\n  changeLockSettings(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleRecordingStatusChange({ body }, meetingId) {\n  const { recording } = body;\n  check(recording, Boolean);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: { recording },\n  };\n\n  try {\n    const { numberAffected } = RecordMeetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting record status id=${meetingId} recording=${recording}`);\n    }\n  } catch (err) {\n    Logger.error(`Changing record status: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleRecordingTimerChange({ body }, meetingId) {\n  const { time } = body;\n\n  check(meetingId, String);\n\n  check(body, {\n    time: Number,\n  });\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: { time },\n  };\n\n  try {\n    RecordMeetings.upsert(selector, modifier);\n  } catch (err) {\n    Logger.error(`Changing recording time: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport updateRandomViewer from '../modifiers/updateRandomViewer';\n\nexport default function randomlySelectedUser({ header, body }) {\n  const { userIds, choice, requestedBy } = body;\n  const { meetingId } = header;\n\n  check(meetingId, String);\n  check(requestedBy, String);\n  check(userIds, Array);\n  check(choice, String);\n\n  updateRandomViewer(meetingId, userIds, choice, requestedBy);\n}\n","import { check } from 'meteor/check';\nimport Meetings, { MeetingTimeRemaining } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport addSystemMsg from '/imports/api/group-chat-msg/server/modifiers/addSystemMsg';\n\nexport default function handleTimeRemainingUpdate({ body }, meetingId) {\n  check(meetingId, String);\n\n  check(body, {\n    timeLeftInSec: Number,\n    timeUpdatedInMinutes: Number,\n  });\n  const { timeLeftInSec, timeUpdatedInMinutes } = body;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      timeRemaining: timeLeftInSec,\n    },\n  };\n\n  try {\n    MeetingTimeRemaining.upsert(selector, modifier);\n  } catch (err) {\n    Logger.error(`Changing recording time: ${err}`);\n  }\n\n  if (timeUpdatedInMinutes > 0) {\n    const Meeting = Meetings.findOne({ meetingId });\n\n    if (Meeting.meetingProp.isBreakout) {\n      const CHAT_CONFIG = Meteor.settings.public.chat;\n      const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n      const PUBLIC_CHAT_SYSTEM_ID = CHAT_CONFIG.system_userid;\n      const PUBLIC_CHAT_INFO = CHAT_CONFIG.system_messages_keys.chat_info;\n      const SYSTEM_CHAT_TYPE = CHAT_CONFIG.type_system;\n\n      const messageValues = {\n        0: timeUpdatedInMinutes,\n      };\n\n      const payload = {\n        id: `${SYSTEM_CHAT_TYPE}-${PUBLIC_CHAT_INFO}`,\n        timestamp: Date.now(),\n        correlationId: `${PUBLIC_CHAT_SYSTEM_ID}-${Date.now()}`,\n        sender: {\n          id: PUBLIC_CHAT_SYSTEM_ID,\n          name: '',\n        },\n        message: 'breakoutDurationUpdated',\n        messageValues,\n      };\n\n      addSystemMsg(meetingId, PUBLIC_GROUP_CHAT_ID, payload);\n    }\n  }\n}\n","import changeUserLock from '../modifiers/changeUserLock';\n\nexport default function handleLockSettingsInMeeting({ body }, meetingId) {\n  changeUserLock(meetingId, body);\n}\n","import changeWebcamOnlyModerator from '../modifiers/webcamOnlyModerator';\n\nexport default function handleChangeWebcamOnlyModerator({ body }, meetingId) {\n  changeWebcamOnlyModerator(meetingId, body);\n}\n","import Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function changeLayout(layout) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'BroadcastLayoutMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      layout,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method changeLayout ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function clearRandomlySelectedUser() {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const selector = {\n      meetingId,\n    };\n\n    const modifier = {\n      $set: {\n        randomlySelectedUser: [],\n      },\n    };\n\n    const numberAffected = Meetings.update(selector, modifier);\n    if (numberAffected) {\n      Logger.info(`Cleared randomly selected user from meeting=${meetingId} by id=${requesterUserId}`);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method clearRandomlySelectedUser ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function endMeeting() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'LogoutAndEndMeetingCmdMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      userId: requesterUserId,\n    };\n    Logger.warn(`Meeting '${meetingId}' is destroyed by '${requesterUserId}'`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method endMeeting ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function toggleLockSettings(lockSettingsProps) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeLockSettingsInMeetingCmdMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(lockSettingsProps, {\n      disableCam: Boolean,\n      disableMic: Boolean,\n      disablePrivateChat: Boolean,\n      disablePublicChat: Boolean,\n      disableNotes: Boolean,\n      hideUserList: Boolean,\n      lockedLayout: Boolean,\n      lockOnJoin: Boolean,\n      lockOnJoinConfigurable: Boolean,\n      hideViewersCursor: Boolean,\n      setBy: Match.Maybe(String),\n    });\n\n    const {\n      disableCam,\n      disableMic,\n      disablePrivateChat: disablePrivChat,\n      disablePublicChat: disablePubChat,\n      disableNotes,\n      hideUserList,\n      lockedLayout,\n      lockOnJoin,\n      lockOnJoinConfigurable,\n      hideViewersCursor,\n    } = lockSettingsProps;\n\n    const payload = {\n      disableCam,\n      disableMic,\n      disablePrivChat,\n      disablePubChat,\n      disableNotes,\n      hideUserList,\n      lockedLayout,\n      lockOnJoin,\n      lockOnJoinConfigurable,\n      hideViewersCursor,\n      setBy: requesterUserId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method toggleLockSettings ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function toggleRecording() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n  const EVENT_NAME = 'SetRecordingStatusCmdMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    let meetingRecorded;\n    let allowedToRecord;\n\n    const recordObject = RecordMeetings.findOne({ meetingId });\n\n    if (recordObject != null) {\n      const {\n        allowStartStopRecording,\n        recording,\n        record,\n      } = recordObject;\n\n      meetingRecorded = recording;\n      allowedToRecord = record && allowStartStopRecording; // TODO-- remove some day\n    }\n\n    const payload = {\n      recording: !meetingRecorded,\n      setBy: requesterUserId,\n    };\n\n    const selector = {\n      meetingId,\n      userId: requesterUserId,\n    };\n    const user = Users.findOne(selector);\n\n    if (allowedToRecord && !!user && user.role === ROLE_MODERATOR) {\n      Logger.info(`Setting the record parameter to ${!meetingRecorded} for ${meetingId} by ${requesterUserId}`);\n      RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method toggleRecording ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '../../../common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function toggleWebcamsOnlyForModerator(webcamsOnlyForModerator) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateWebcamsOnlyForModeratorCmdMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(webcamsOnlyForModerator, Boolean);\n\n    const payload = {\n      webcamsOnlyForModerator,\n      setBy: requesterUserId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method toggleWebcamsOnlyForModerator ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function transferUser(fromMeetingId, toMeetingId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'TransferUserToMeetingRequestMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      fromMeetingId,\n      toMeetingId,\n      userId: requesterUserId,\n    };\n\n    Logger.verbose('User was transferred from one meting to another', { requesterUserId, fromMeetingId, toMeetingId });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method transferUser ${err.stack}`);\n  }\n}\n","import flat from 'flat';\nimport {\n  check,\n  Match,\n} from 'meteor/check';\nimport SanitizeHTML from 'sanitize-html';\nimport Meetings, {\n  RecordMeetings,\n  ExternalVideoMeetings,\n} from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { initPads } from '/imports/api/pads/server/helpers';\nimport { initCaptions } from '/imports/api/captions/server/helpers';\nimport { addAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { addCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport { addExternalVideoStreamer } from '/imports/api/external-videos/server/streamer';\nimport { LAYOUT_TYPE } from '/imports/ui/components/layout/enums';\n\nconst addExternalVideo = (meetingId) => {\n  const selector = { meetingId };\n\n  const modifier = {\n    meetingId,\n    externalVideoUrl: null,\n  };\n\n  try {\n    const { numberAffected } = ExternalVideoMeetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Added external video meetingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding external video: ${err}`);\n  }\n};\n\nexport default function addMeeting(meeting) {\n  const meetingId = meeting.meetingProp.intId;\n\n  check(meetingId, String);\n  check(meeting, {\n    breakoutProps: {\n      sequence: Number,\n      freeJoin: Boolean,\n      breakoutRooms: Array,\n      parentId: String,\n      record: Boolean,\n      privateChatEnabled: Boolean,\n    },\n    meetingProp: {\n      intId: String,\n      extId: String,\n      meetingCameraCap: Number,\n      isBreakout: Boolean,\n      name: String,\n      disabledFeatures: Array,\n    },\n    usersProp: {\n      webcamsOnlyForModerator: Boolean,\n      userCameraCap: Number,\n      guestPolicy: String,\n      authenticatedGuest: Boolean,\n      maxUsers: Number,\n      allowModsToUnmuteUsers: Boolean,\n      allowModsToEjectCameras: Boolean,\n      meetingLayout: String,\n    },\n    durationProps: {\n      createdTime: Number,\n      duration: Number,\n      createdDate: String,\n      meetingExpireIfNoUserJoinedInMinutes: Number,\n      meetingExpireWhenLastUserLeftInMinutes: Number,\n      userInactivityInspectTimerInMinutes: Number,\n      userInactivityThresholdInMinutes: Number,\n      userActivitySignResponseDelayInMinutes: Number,\n      endWhenNoModerator: Boolean,\n      endWhenNoModeratorDelayInMinutes: Number,\n      timeRemaining: Number,\n    },\n    welcomeProp: {\n      welcomeMsg: String,\n      modOnlyMessage: String,\n      welcomeMsgTemplate: String,\n    },\n    recordProp: Match.ObjectIncluding({\n      allowStartStopRecording: Boolean,\n      autoStartRecording: Boolean,\n      record: Boolean,\n    }),\n    password: {\n      viewerPass: String,\n      moderatorPass: String,\n      learningDashboardAccessToken: String,\n    },\n    voiceProp: {\n      voiceConf: String,\n      dialNumber: String,\n      telVoice: String,\n      muteOnStart: Boolean,\n    },\n    metadataProp: Object,\n    lockSettingsProps: {\n      disableCam: Boolean,\n      disableMic: Boolean,\n      disablePrivateChat: Boolean,\n      disablePublicChat: Boolean,\n      disableNotes: Boolean,\n      hideUserList: Boolean,\n      lockOnJoin: Boolean,\n      lockOnJoinConfigurable: Boolean,\n      lockedLayout: Boolean,\n      hideViewersCursor: Boolean,\n    },\n    systemProps: {\n      html5InstanceId: Number,\n    },\n    groups: Array,\n  });\n\n  const {\n    recordProp,\n    ...restProps\n  } = meeting;\n\n  const newMeeting = restProps;\n\n  const selector = {\n    meetingId,\n  };\n\n  newMeeting.lockSettingsProps = Object.assign(meeting.lockSettingsProps, { setBy: 'temp' });\n\n  const meetingEnded = false;\n\n  let { welcomeMsg } = newMeeting.welcomeProp;\n\n  const sanitizeTextInChat = original => SanitizeHTML(original, {\n    allowedTags: ['a', 'b', 'br', 'i', 'img', 'li', 'small', 'span', 'strong', 'u', 'ul'],\n    allowedAttributes: {\n      a: ['href', 'target'],\n      img: ['src', 'width', 'height'],\n    },\n    allowedSchemes: ['https'],\n    allowedSchemesByTag: {\n      a: ['https', 'mailto', 'tel']\n    }\n  });\n\n  const sanitizedWelcomeText = sanitizeTextInChat(welcomeMsg);\n  welcomeMsg = sanitizedWelcomeText.replace(\n    'href=\"event:',\n    'href=\"',\n  );\n\n  const insertBlankTarget = (s, i) => `${s.substr(0, i)} target=\"_blank\"${s.substr(i)}`;\n  const linkWithoutTarget = new RegExp('<a href=\"(.*?)\">', 'g');\n\n  do {\n    linkWithoutTarget.test(welcomeMsg);\n\n    if (linkWithoutTarget.lastIndex > 0) {\n      welcomeMsg = insertBlankTarget(\n        welcomeMsg,\n        linkWithoutTarget.lastIndex - 1,\n      );\n      linkWithoutTarget.lastIndex = linkWithoutTarget.lastIndex - 1;\n    }\n  } while (linkWithoutTarget.lastIndex > 0);\n\n  newMeeting.welcomeProp.welcomeMsg = welcomeMsg;\n\n  // note: as of July 2020 `modOnlyMessage` is not published to the client side.\n  // We are sanitizing this data simply to prevent future potential usage\n  // At the moment `modOnlyMessage` is obtained from client side as a response to Enter API\n  newMeeting.welcomeProp.modOnlyMessage = sanitizeTextInChat(newMeeting.welcomeProp.modOnlyMessage);\n\n  const modifier = {\n    $set: Object.assign({\n      meetingId,\n      meetingEnded,\n      layout: LAYOUT_TYPE[meeting.usersProp.meetingLayout] || 'smart',\n      publishedPoll: false,\n      guestLobbyMessage: '',\n      randomlySelectedUser: [],\n    }, flat(newMeeting, {\n      safe: true,\n    })),\n  };\n\n  if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n    addAnnotationsStreamer(meetingId);\n    addCursorStreamer(meetingId);\n    addExternalVideoStreamer(meetingId);\n\n    // we don't want to fully process the create meeting message in frontend since it can lead to duplication of meetings in mongo.\n    if (process.env.BBB_HTML5_ROLE === 'frontend') {\n      return;\n    }\n  }\n\n  try {\n    const { insertedId, numberAffected } = RecordMeetings.upsert(selector, { meetingId, ...recordProp });\n\n    if (insertedId) {\n      Logger.info(`Added record prop id=${meetingId}`);\n    } else if (numberAffected) {\n      Logger.info(`Upserted record prop id=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding record prop to collection: ${err}`);\n  }\n\n  addExternalVideo(meetingId);\n\n  try {\n    const { insertedId, numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added meeting id=${meetingId}`);\n      if (newMeeting.meetingProp.disabledFeatures.indexOf('sharedNotes') === -1) {\n        initPads(meetingId);\n      }\n      if (newMeeting.meetingProp.disabledFeatures.indexOf('captions') === -1) {\n        initCaptions(meetingId);\n      }\n    } else if (numberAffected) {\n      Logger.info(`Upserted meeting id=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding meeting to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\nimport { LAYOUT_TYPE } from '/imports/ui/components/layout/enums';\n\nexport default function changeLayout(meetingId, layout, requesterUserId, affectedUsers) {\n  try {\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(layout, String);\n    check(affectedUsers, Match.Maybe([String]));\n\n    const selector = {\n      meetingId,\n    };\n\n    const modifier = {\n      $set: {\n        layout: LAYOUT_TYPE[layout] || 'smart',\n      },\n    };\n\n    const numberAffected = Meetings.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Meeting layout changed to ${layout} for meeting=${meetingId} requested by user=${requesterUserId}`);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method changeLayout ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\n\nexport default function changeLockSettings(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    disableCam: Boolean,\n    disableMic: Boolean,\n    disablePrivChat: Boolean,\n    disablePubChat: Boolean,\n    disableNotes: Boolean,\n    hideUserList: Boolean,\n    lockedLayout: Boolean,\n    lockOnJoin: Boolean,\n    lockOnJoinConfigurable: Boolean,\n    hideViewersCursor: Boolean,\n    setBy: Match.Maybe(String),\n  });\n\n  const {\n    disableCam,\n    disableMic,\n    disablePrivChat,\n    disablePubChat,\n    disableNotes,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n    hideViewersCursor,\n    setBy,\n  } = payload;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      lockSettingsProps: {\n        disableCam,\n        disableMic,\n        disablePrivateChat: disablePrivChat,\n        disablePublicChat: disablePubChat,\n        disableNotes,\n        hideUserList,\n        lockedLayout,\n        lockOnJoin,\n        lockOnJoinConfigurable,\n        hideViewersCursor,\n        setBy,\n      },\n    },\n  };\n\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting={${meetingId}} updated lock settings`);\n    } else {\n      Logger.info(`meeting={${meetingId}} lock settings were not updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changing meeting={${meetingId}} lock settings: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { check } from 'meteor/check';\n\nexport default function changeUserLock(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    userId: String,\n    locked: Boolean,\n    lockedBy: String,\n  });\n\n  const { userId, locked, lockedBy } = payload;\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      locked,\n    },\n  };\n\n  try {\n    const { numberAffected } = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`User's userId=${userId} lock status was changed to: ${locked} by user userId=${lockedBy}`);\n    } else {\n      Logger.info(`User's userId=${userId} lock status wasn't updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changing user lock setting: ${err}`);\n  }\n}\n","import { ExternalVideoMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearExternalVideoMeeting(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = ExternalVideoMeetings.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared ExternalVideoMeetings in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing ExternalVideoMeetings in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = ExternalVideoMeetings.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared ExternalVideoMeetings in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing ExternalVideoMeetings in all meetings. ${err}`);\n    }\n  }\n}\n","import { MeetingTimeRemaining } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearMeetingTimeRemaining(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = MeetingTimeRemaining.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared MeetingTimeRemaining in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing MeetingTimeRemaining in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = MeetingTimeRemaining.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared MeetingTimeRemaining in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing MeetingTimeRemaining in all meetings. ${err}`);\n    }\n  }\n}\n","import { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function meetingHasEnded(meetingId) {\n  try {\n    const numberAffected = RecordMeetings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared record prop from meeting with id ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing record prop from meeting with id ${meetingId}. ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nimport { removeAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { removeCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport { removeExternalVideoStreamer } from '/imports/api/external-videos/server/streamer';\n\nimport clearUsers from '/imports/api/users/server/modifiers/clearUsers';\nimport clearUsersSettings from '/imports/api/users-settings/server/modifiers/clearUsersSettings';\nimport clearGroupChat from '/imports/api/group-chat/server/modifiers/clearGroupChat';\nimport clearGuestUsers from '/imports/api/guest-users/server/modifiers/clearGuestUsers';\nimport clearBreakouts from '/imports/api/breakouts/server/modifiers/clearBreakouts';\nimport clearAnnotations from '/imports/api/annotations/server/modifiers/clearAnnotations';\nimport clearSlides from '/imports/api/slides/server/modifiers/clearSlides';\nimport clearPolls from '/imports/api/polls/server/modifiers/clearPolls';\nimport clearCaptions from '/imports/api/captions/server/modifiers/clearCaptions';\nimport clearPads from '/imports/api/pads/server/modifiers/clearPads';\nimport clearPresentationPods from '/imports/api/presentation-pods/server/modifiers/clearPresentationPods';\nimport clearVoiceUsers from '/imports/api/voice-users/server/modifiers/clearVoiceUsers';\nimport clearUserInfo from '/imports/api/users-infos/server/modifiers/clearUserInfo';\nimport clearConnectionStatus from '/imports/api/connection-status/server/modifiers/clearConnectionStatus';\nimport clearScreenshare from '/imports/api/screenshare/server/modifiers/clearScreenshare';\nimport clearMeetingTimeRemaining from '/imports/api/meetings/server/modifiers/clearMeetingTimeRemaining';\nimport clearLocalSettings from '/imports/api/local-settings/server/modifiers/clearLocalSettings';\nimport clearRecordMeeting from './clearRecordMeeting';\nimport clearExternalVideoMeeting from './clearExternalVideoMeeting';\nimport clearVoiceCallStates from '/imports/api/voice-call-states/server/modifiers/clearVoiceCallStates';\nimport clearVideoStreams from '/imports/api/video-streams/server/modifiers/clearVideoStreams';\nimport clearAuthTokenValidation from '/imports/api/auth-token-validation/server/modifiers/clearAuthTokenValidation';\nimport clearUsersPersistentData from '/imports/api/users-persistent-data/server/modifiers/clearUsersPersistentData';\n\nimport clearWhiteboardMultiUser from '/imports/api/whiteboard-multi-user/server/modifiers/clearWhiteboardMultiUser';\nimport Metrics from '/imports/startup/server/metrics';\n\nexport default function meetingHasEnded(meetingId) {\n  if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n    removeAnnotationsStreamer(meetingId);\n    removeCursorStreamer(meetingId);\n    removeExternalVideoStreamer(meetingId);\n  }\n\n  return Meetings.remove({ meetingId }, () => {\n    clearCaptions(meetingId);\n    clearPads(meetingId);\n    clearGroupChat(meetingId);\n    clearGuestUsers(meetingId);\n    clearPresentationPods(meetingId);\n    clearBreakouts(meetingId);\n    clearPolls(meetingId);\n    clearAnnotations(meetingId);\n    clearSlides(meetingId);\n    clearUsers(meetingId);\n    clearUsersSettings(meetingId);\n    clearVoiceUsers(meetingId);\n    clearUserInfo(meetingId);\n    clearConnectionStatus(meetingId);\n    clearLocalSettings(meetingId);\n    clearMeetingTimeRemaining(meetingId);\n    clearRecordMeeting(meetingId);\n    clearExternalVideoMeeting(meetingId);\n    clearVoiceCallStates(meetingId);\n    clearVideoStreams(meetingId);\n    clearAuthTokenValidation(meetingId);\n    clearWhiteboardMultiUser(meetingId);\n    clearScreenshare(meetingId);\n    clearUsersPersistentData(meetingId);\n    Metrics.removeMeeting(meetingId);\n\n    Logger.info(`Cleared Meetings with id ${meetingId}`);\n  });\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setGuestLobbyMessage(meetingId, guestLobbyMessage) {\n  check(meetingId, String);\n  check(guestLobbyMessage, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      guestLobbyMessage,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Set guest lobby message meetingId=${meetingId} guestLobbyMessage=${guestLobbyMessage}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting guest lobby message: ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setGuestPolicy(meetingId, guestPolicy) {\n  check(meetingId, String);\n  check(guestPolicy, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'usersProp.guestPolicy': guestPolicy,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose(`Set guest policy meetingId=${meetingId} guestPolicy=${guestPolicy}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting guest policy: ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setPublishedPoll(meetingId, isPublished) {\n  check(meetingId, String);\n  check(isPublished, Boolean);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      publishedPoll: isPublished,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set publishedPoll=${isPublished} in meeitingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting publishedPoll=${isPublished} for meetingId=${meetingId}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nconst SELECT_RANDOM_USER_COUNTDOWN = Meteor.settings.public.selectRandomUser.countdown;\n\n//  Time intervals in milliseconds\n//  for iteration in animation.\nlet intervals = [0, 200, 450, 750, 1100, 1500];\n\n//  Used to togle to the first value of intervals to\n//  differenciare whether this function has been called\nlet updateIndicator = true;\n\n//  A finction that toggles\n//  the first interval on each call\nfunction toggleIndicator() {\n  if (updateIndicator) {\n    intervals[0] = 1;\n  } else {\n    intervals[0] = 0;\n  }\n  updateIndicator = !updateIndicator;\n}\n\nfunction getFiveRandom(userList, userIds) {\n  let IDs = userIds.slice();\n  for (let i = 0; i < intervals.length - 1; i++) {\n    if (IDs.length === 0) { // we used up all the options\n      IDs = userIds.slice(); // start over\n      let userId = IDs.splice(0, 1);\n      if (userList[userList.length] === [userId, intervals[i]]) { // If we start over with the one we finnished, change it\n        IDs.push(userId);\n        userId = IDs.splice(0, 1);\n      }\n      userList.push([userId, intervals[i]]);\n    } else {\n      const userId = IDs.splice(Math.floor(Math.random() * IDs.length), 1);\n      userList.push([userId, intervals[i]]);\n    }\n  }\n}\n\n//  All possible combinations of 3 elements\n//  to speed up randomizing\nconst optionsFor3 = [\n  [0, 1, 2],\n  [0, 2, 1],\n  [1, 2, 0],\n  [1, 0, 2],\n  [2, 0, 1],\n  [2, 1, 0],\n];\n\nexport default function updateRandomUser(meetingId, userIds, choice, requesterId) {\n  check(meetingId, String);\n  check(userIds, Array);\n  check(choice, String);\n  check(requesterId, String);\n\n  let userList = [];\n\n  const selector = {\n    meetingId,\n  };\n\n  toggleIndicator();\n\n  const numberOfUsers = userIds.length;\n\n  if (choice == \"\") { // no viewer\n    userList = [\n      [requesterId, intervals[0]],\n      [requesterId, 0],\n      [requesterId, 0],\n      [requesterId, 0],\n      [requesterId, 0],\n      [requesterId, 0],\n    ];\n  } else if (numberOfUsers === 1) { //  If user is only one, obviously it is the chosen one\n    userList = [\n      [userIds[0], intervals[0]],\n      [userIds[0], 0],\n      [userIds[0], 0],\n      [userIds[0], 0],\n      [userIds[0], 0],\n      [userIds[0], 0],\n    ];\n  }\n\n  else if (!SELECT_RANDOM_USER_COUNTDOWN) { //  If animation is disabled, we only care about the chosen one\n    userList = [\n      [choice, intervals[0]],\n      [choice, 0],\n      [choice, 0],\n      [choice, 0],\n      [choice, 0],\n      [choice, 0],\n    ];\n  }\n\n  else if (numberOfUsers === 2) { // If there are only two users, we can just chow them in turns\n    const IDs = userIds.slice();\n    IDs.splice(choice, 1);\n    userList = [\n      [IDs[0], intervals[0]],\n      [choice, intervals[1]],\n      [IDs[0], intervals[2]],\n      [choice, intervals[3]],\n      [IDs[0], intervals[4]],\n      [choice, intervals[5]],\n    ];\n  } else if (numberOfUsers === 3) { //  If there are 3 users, the number of combinations is small, so we'll use that\n    const option = Math.floor(Math.random() * 6);\n    const order = optionsFor3[option];\n    userList = [\n      [userIds[order[0]], intervals[0]],\n      [userIds[order[1]], intervals[1]],\n      [userIds[order[2]], intervals[2]],\n      [userIds[order[0]], intervals[3]],\n      [userIds[order[1]], intervals[4]],\n      [choice, intervals[5]],\n    ];\n  }\n\n  else { // We generate 5 users randomly, just for animation, and last one is the chosen one\n    getFiveRandom(userList, userIds);\n    userList.push([choice, intervals[intervals.length]]);\n  }\n\n  const modifier = {\n    $set: {\n      randomlySelectedUser: userList,\n    },\n  };\n\n  try {\n    const { insertedId } = Meetings.upsert(selector, modifier);\n    if (insertedId) {\n      Logger.info(`Set randomly selected userId and interval = ${userList} by requesterId=${requesterId} in meeitingId=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Setting randomly selected userId and interval = ${userList} by requesterId=${requesterId} in meetingId=${meetingId}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\n\nexport default function changeWebcamOnlyModerator(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    webcamsOnlyForModerator: Boolean,\n    setBy: String,\n  });\n  const { webcamsOnlyForModerator } = payload;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'usersProp.webcamsOnlyForModerator': webcamsOnlyForModerator,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting={${meetingId}} updated webcam Only for Moderator`);\n    } else {\n      Logger.info(`meeting={${meetingId}} webcam Only for Moderator were not updated`);\n    }\n  } catch (err) {\n    Logger.error(`Changwing meeting={${meetingId}} webcam Only for Moderator: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleMeetingCreation from './handlers/meetingCreation';\nimport handleGetAllMeetings from './handlers/getAllMeetings';\nimport handleMeetingEnd from './handlers/meetingEnd';\nimport handleMeetingDestruction from './handlers/meetingDestruction';\nimport handleMeetingLocksChange from './handlers/meetingLockChange';\nimport handleGuestPolicyChanged from './handlers/guestPolicyChanged';\nimport handleGuestLobbyMessageChanged from './handlers/guestLobbyMessageChanged';\nimport handleUserLockChange from './handlers/userLockChange';\nimport handleRecordingStatusChange from './handlers/recordingStatusChange';\nimport handleRecordingTimerChange from './handlers/recordingTimerChange';\nimport handleTimeRemainingUpdate from './handlers/timeRemainingUpdate';\nimport handleChangeWebcamOnlyModerator from './handlers/webcamOnlyModerator';\nimport handleSelectRandomViewer from './handlers/selectRandomViewer';\nimport handleBroadcastLayout from './handlers/broadcastLayout';\n\nRedisPubSub.on('MeetingCreatedEvtMsg', handleMeetingCreation);\nRedisPubSub.on('SyncGetMeetingInfoRespMsg', handleGetAllMeetings);\nRedisPubSub.on('MeetingEndingEvtMsg', handleMeetingEnd);\nRedisPubSub.on('MeetingDestroyedEvtMsg', handleMeetingDestruction);\nRedisPubSub.on('LockSettingsInMeetingChangedEvtMsg', handleMeetingLocksChange);\nRedisPubSub.on('UserLockedInMeetingEvtMsg', handleUserLockChange);\nRedisPubSub.on('RecordingStatusChangedEvtMsg', handleRecordingStatusChange);\nRedisPubSub.on('UpdateRecordingTimerEvtMsg', handleRecordingTimerChange);\nRedisPubSub.on('WebcamsOnlyForModeratorChangedEvtMsg', handleChangeWebcamOnlyModerator);\nRedisPubSub.on('GetLockSettingsRespMsg', handleMeetingLocksChange);\nRedisPubSub.on('GuestPolicyChangedEvtMsg', handleGuestPolicyChanged);\nRedisPubSub.on('GuestLobbyMessageChangedEvtMsg', handleGuestLobbyMessageChanged);\nRedisPubSub.on('MeetingTimeRemainingUpdateEvtMsg', handleTimeRemainingUpdate);\nRedisPubSub.on('SelectRandomViewerRespMsg', handleSelectRandomViewer);\nRedisPubSub.on('BroadcastLayoutEvtMsg', handleBroadcastLayout);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport endMeeting from './methods/endMeeting';\nimport toggleRecording from './methods/toggleRecording';\nimport transferUser from './methods/transferUser';\nimport toggleLockSettings from './methods/toggleLockSettings';\nimport toggleWebcamsOnlyForModerator from './methods/toggleWebcamsOnlyForModerator';\nimport clearRandomlySelectedUser from './methods/clearRandomlySelectedUser';\nimport changeLayout from './methods/changeLayout';\n\nMeteor.methods({\n  endMeeting,\n  toggleRecording,\n  toggleLockSettings,\n  transferUser,\n  toggleWebcamsOnlyForModerator,\n  clearRandomlySelectedUser,\n  changeLayout,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Meetings, {\n  RecordMeetings,\n  MeetingTimeRemaining,\n  ExternalVideoMeetings,\n} from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport { publicationSafeGuard } from '/imports/api/common/server/helpers';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction meetings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Meetings was requested by unauth connection ${this.connection.id}`);\n    return Meetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing meeting', { meetingId, userId });\n\n  const selector = {\n    $or: [\n      { meetingId },\n    ],\n  };\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { userId: 1, role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    selector.$or.push({\n      'meetingProp.isBreakout': true,\n      'breakoutProps.parentId': meetingId,\n    });\n    // Monitor this publication and stop it when user is not a moderator anymore\n    const comparisonFunc = () => {\n      const user = Users.findOne({ userId, meetingId }, { fields: { role: 1, userId: 1 } });\n      const condition = user.role === ROLE_MODERATOR;\n\n      if (!condition) {\n        Logger.info(`conditions aren't filled anymore in publication ${this._name}: \n        user.role === ROLE_MODERATOR :${condition}, user.role: ${user.role} ROLE_MODERATOR: ${ROLE_MODERATOR}`);\n      }\n\n      return condition;\n    };\n    publicationSafeGuard(comparisonFunc, this);\n  }\n  const options = {\n    fields: {\n      password: false,\n      'welcomeProp.modOnlyMessage': false,\n    },\n  };\n\n  if (User.role !== ROLE_MODERATOR) {\n    options.fields.learningDashboardAccessToken = false;\n  }\n\n  return Meetings.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundMeetings = meetings.bind(this);\n  return boundMeetings(...args);\n}\n\nMeteor.publish('meetings', publish);\n\nfunction recordMeetings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing RecordMeetings was requested by unauth connection ${this.connection.id}`);\n    return RecordMeetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing RecordMeetings for ${meetingId} ${userId}`);\n\n  return RecordMeetings.find({ meetingId });\n}\nfunction recordPublish(...args) {\n  const boundRecordMeetings = recordMeetings.bind(this);\n  return boundRecordMeetings(...args);\n}\n\nMeteor.publish('record-meetings', recordPublish);\n\nfunction externalVideoMeetings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing ExternalVideoMeetings was requested by unauth connection ${this.connection.id}`);\n    return ExternalVideoMeetings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing ExternalVideoMeetings for ${meetingId} ${userId}`);\n\n  return ExternalVideoMeetings.find({ meetingId });\n}\n\nfunction externalVideoPublish(...args) {\n  const boundExternalVideoMeetings = externalVideoMeetings.bind(this);\n  return boundExternalVideoMeetings(...args);\n}\n\nMeteor.publish('external-video-meetings', externalVideoPublish);\n\nfunction meetingTimeRemaining() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing MeetingTimeRemaining was requested by unauth connection ${this.connection.id}`);\n    return MeetingTimeRemaining.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug(`Publishing MeetingTimeRemaining for ${meetingId} ${userId}`);\n\n  return MeetingTimeRemaining.find({ meetingId });\n}\nfunction timeRemainingPublish(...args) {\n  const boundtimeRemaining = meetingTimeRemaining.bind(this);\n  return boundtimeRemaining(...args);\n}\n\nMeteor.publish('meeting-time-remaining', timeRemainingPublish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst Meetings = new Mongo.Collection('meetings', collectionOptions);\nconst RecordMeetings = new Mongo.Collection('record-meetings', collectionOptions);\nconst ExternalVideoMeetings = new Mongo.Collection('external-video-meetings', collectionOptions);\nconst MeetingTimeRemaining = new Mongo.Collection('meeting-time-remaining', collectionOptions);\n\nif (Meteor.isServer) {\n  // types of queries for the meetings:\n  // 1. meetingId\n\n  Meetings._ensureIndex({ meetingId: 1 });\n  RecordMeetings._ensureIndex({ meetingId: 1 });\n  ExternalVideoMeetings._ensureIndex({ meetingId: 1 });\n  MeetingTimeRemaining._ensureIndex({ meetingId: 1 });\n}\n\nexport {\n  RecordMeetings,\n  ExternalVideoMeetings,\n  MeetingTimeRemaining,\n};\nexport default Meetings;\n","import createGroup from '/imports/api/pads/server/modifiers/createGroup';\n\nexport default function groupCreated({ header, body }) {\n  const {\n    meetingId,\n    userId,\n  } = header;\n\n  const {\n    externalId,\n    model,\n    name,\n  } = body;\n\n  createGroup(meetingId, userId, externalId, model, name);\n}\n","import contentPad from '/imports/api/pads/server/modifiers/contentPad';\n\nexport default function padContent({ header, body }) {\n  const {\n    meetingId,\n  } = header;\n\n  const {\n    externalId,\n    start,\n    end,\n    text,\n  } = body;\n\n  contentPad(meetingId, externalId, start, end, text);\n}\n","import createPad from '/imports/api/pads/server/modifiers/createPad';\n\nexport default function padCreated({ header, body }) {\n  const { meetingId } = header;\n  const {\n    externalId,\n    padId,\n  } = body;\n\n  createPad(meetingId, externalId, padId);\n}\n","import tailPad from '/imports/api/pads/server/modifiers/tailPad';\n\nexport default function padTail({ header, body }) {\n  const {\n    meetingId,\n  } = header;\n\n  const {\n    externalId,\n    tail,\n  } = body;\n\n  tailPad(meetingId, externalId, tail);\n}\n","import updatePad from '/imports/api/pads/server/modifiers/updatePad';\n\nexport default function padUpdated({ header, body }) {\n  const {\n    meetingId,\n  } = header;\n\n  const {\n    externalId,\n    padId,\n    userId,\n    rev,\n    changeset,\n  } = body;\n\n  updatePad(meetingId, externalId, padId, userId, rev, changeset);\n}\n","import createSession from '/imports/api/pads/server/modifiers/createSession';\n\nexport default function sessionCreated({ header, body }) {\n  const {\n    meetingId,\n    userId,\n  } = header;\n\n  const {\n    externalId,\n    sessionId,\n  } = body;\n\n  createSession(meetingId, userId, externalId, sessionId);\n}\n","import deleteSession from '/imports/api/pads/server/modifiers/deleteSession';\n\nexport default function sessionDeleted({ header, body }) {\n  const {\n    meetingId,\n  } = header;\n\n  const {\n    externalId,\n    userId,\n    sessionId,\n  } = body;\n\n  deleteSession(meetingId, externalId, userId, sessionId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function createGroup(externalId, model, name) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'PadCreateGroupReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(externalId, String);\n    check(model, String);\n    check(name, String);\n\n    const payload = {\n      externalId,\n      model,\n      name,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method createGroup ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function createPad(meetingId, userId, externalId, name) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'PadCreateReqMsg';\n\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(externalId, String);\n    check(name, String);\n\n    const payload = {\n      externalId,\n      name,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method createPad ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function createSession(externalId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'PadCreateSessionReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(externalId, String);\n\n    const payload = {\n      externalId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method createSession ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Pads from '/imports/api/pads';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function getPadId(externalId) {\n  try {\n    const { meetingId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(externalId, String);\n\n    const pad = Pads.findOne(\n      {\n        meetingId,\n        externalId,\n      },\n      {\n        fields: {\n          padId: 1,\n        }\n      },\n    );\n\n    if (pad && pad.padId) {\n      return pad.padId;\n    }\n\n    return null;\n  } catch (err) {\n    return null;\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function updatePad(meetingId, userId, externalId, text) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'PadUpdatePubMsg';\n\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(externalId, String);\n    check(text, String);\n\n    const payload = {\n      externalId,\n      text,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method updatePad ${err.stack}`);\n  }\n}\n","import Pads, { PadsSessions, PadsUpdates } from '/imports/api/pads';\nimport Logger from '/imports/startup/server/logger';\n\nconst clear = (meetingId, name, collection) => {\n  if (meetingId) {\n    try {\n      if (collection.remove({ meetingId })) {\n        Logger.info(`Cleared ${name} (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing ${name} (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      if (collection.remove({})) {\n        Logger.info(`Cleared ${name} (all)`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing ${name} (all). ${err}`);\n    }\n  }\n};\n\nexport default function clearPads(meetingId) {\n  clear(meetingId, 'Pads', Pads);\n  clear(meetingId, 'PadsSessions', PadsSessions);\n  clear(meetingId, 'PadsUpdates', PadsUpdates);\n}\n","import { check } from 'meteor/check';\nimport { patch } from 'bbb-diff';\nimport { PadsUpdates } from '/imports/api/pads';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function contentPad(meetingId, externalId, start, end, text) {\n  try {\n    check(meetingId, String);\n    check(externalId, String);\n    check(start, Number);\n    check(end, Number);\n    check(text, String);\n\n    const selector = {\n      meetingId,\n      externalId,\n    };\n\n    const pad = PadsUpdates.findOne(selector);\n    const content = (pad && pad.content) ? pad.content : '';\n\n    const modifier = {\n      $set: {\n        content: patch(content, { start, end, text }),\n      },\n    };\n\n    PadsUpdates.upsert(selector, modifier);\n    Logger.debug(`Added pad content external=${externalId} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Adding pad content to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Pads from '/imports/api/pads';\nimport Logger from '/imports/startup/server/logger';\nimport createPad from '/imports/api/pads/server/methods/createPad';\n\nexport default function createGroup(meetingId, userId, externalId, model, name) {\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(externalId, String);\n    check(model, String);\n    check(name, String);\n\n    const selector = {\n      meetingId,\n      externalId,\n    };\n\n    const modifier = {\n      meetingId,\n      externalId,\n      model,\n      name,\n    };\n\n    const { insertedId } = Pads.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added pad group external=${externalId} meeting=${meetingId}`);\n      // Each group will get only one pad so we can control access per pad. The pad's name\n      // will be the group's externalId\n      createPad(meetingId, userId, externalId, externalId);\n    } else {\n      Logger.info(`Upserted pad group external=${externalId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding pad group to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Pads from '/imports/api/pads';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function createPad(meetingId, externalId, padId) {\n  try {\n    check(meetingId, String);\n    check(externalId, String);\n    check(padId, String);\n\n    const selector = {\n      meetingId,\n      externalId,\n    };\n\n    const modifier = {\n      $set: {\n        padId,\n      },\n    };\n\n    const { insertedId } = Pads.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added pad=${padId} external=${externalId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted pad=${padId} external=${externalId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding pad to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { PadsSessions } from '/imports/api/pads';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function createSession(meetingId, userId, externalId, sessionId) {\n  try {\n    check(meetingId, String);\n    check(userId, String);\n    check(externalId, String);\n    check(sessionId, String);\n\n    const selector = {\n      meetingId,\n      userId,\n    };\n\n    const modifier = {\n      $push: {\n        sessions: {\n          [externalId]: sessionId,\n        },\n      },\n    };\n\n    const { insertedId } = PadsSessions.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.debug(`Added pad session=${sessionId} external=${externalId} user=${userId} meeting=${meetingId}`);\n    } else {\n      Logger.debug(`Upserted pad session=${sessionId} external=${externalId} user=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding pad session to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { PadsSessions } from '/imports/api/pads';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function deleteSession(meetingId, externalId, userId, sessionId) {\n  try {\n    check(meetingId, String);\n    check(externalId, String);\n    check(userId, String);\n    check(sessionId, String);\n\n    const selector = {\n      meetingId,\n      userId,\n    };\n\n    const modifier = {\n      $pull: {\n        sessions: {\n          [externalId] : sessionId,\n        },\n      },\n    };\n\n    PadsSessions.upsert(selector, modifier);\n    Logger.debug(`Removed pad session=${sessionId} external=${externalId} user=${userId} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Removing pad session to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { PadsUpdates } from '/imports/api/pads';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function tailPad(meetingId, externalId, tail) {\n  try {\n    check(meetingId, String);\n    check(externalId, String);\n    check(tail, String);\n\n    const selector = {\n      meetingId,\n      externalId,\n    };\n\n    const modifier = {\n      $set: {\n        tail,\n      },\n    };\n\n    PadsUpdates.upsert(selector, modifier);\n    Logger.debug(`Added pad tail external=${externalId} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Adding pad tail to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { PadsUpdates } from '/imports/api/pads';\nimport { getDataFromChangeset } from '/imports/api/pads/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function updatePad(meetingId, externalId, padId, userId, rev, changeset) {\n  try {\n    check(meetingId, String);\n    check(externalId, String);\n    check(padId, String);\n    check(userId, String);\n    check(rev, Number);\n    check(changeset, String);\n\n    const selector = {\n      meetingId,\n      externalId,\n    };\n\n    const modifier = {\n      $set: {\n        padId,\n        userId,\n        rev,\n        changeset,\n        data: getDataFromChangeset(changeset),\n      },\n    };\n\n    PadsUpdates.upsert(selector, modifier);\n    Logger.debug(`Added pad update external=${externalId} user=${userId} rev=${rev} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Adding pad update to the collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport groupCreated from './handlers/groupCreated';\nimport padCreated from './handlers/padCreated';\nimport sessionCreated from './handlers/sessionCreated';\nimport padUpdated from './handlers/padUpdated';\nimport padContent from './handlers/padContent';\nimport padTail from './handlers/padTail';\nimport sessionDeleted from './handlers/sessionDeleted';\n\nRedisPubSub.on('PadGroupCreatedRespMsg', groupCreated);\nRedisPubSub.on('PadCreatedRespMsg', padCreated);\nRedisPubSub.on('PadSessionCreatedRespMsg', sessionCreated);\nRedisPubSub.on('PadUpdatedEvtMsg', padUpdated);\nRedisPubSub.on('PadContentEvtMsg', padContent);\nRedisPubSub.on('PadTailEvtMsg', padTail);\nRedisPubSub.on('PadSessionDeletedEvtMsg', sessionDeleted);\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\n\nconst NOTES_CONFIG = Meteor.settings.public.notes;\nconst CAPTIONS_CONFIG = Meteor.settings.public.captions;\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst TOKEN = '$';\n\nconst models = {\n  CAPTIONS: CAPTIONS_CONFIG.id,\n  NOTES: NOTES_CONFIG.id,\n};\n\nconst getDataFromChangeset = (changeset) => {\n  const splitChangeset = changeset.split(TOKEN);\n  if (splitChangeset.length > 1) {\n    splitChangeset.shift();\n\n    return splitChangeset.join(TOKEN);\n  }\n\n  return '';\n};\n\nconst createGroup = (meetingId, externalId, model, name) => {\n  const EVENT_NAME = 'PadCreateGroupReqMsg';\n\n  try {\n    const payload = {\n      externalId,\n      model,\n      name,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, 'nodeJSapp', payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method createGroup ${err.stack}`);\n  }\n};\n\nconst initPads = (meetingId) => {\n  if (NOTES_CONFIG.enabled) createGroup(meetingId, NOTES_CONFIG.id, models.NOTES, NOTES_CONFIG.id);\n};\n\nexport {\n  getDataFromChangeset,\n  initPads,\n  models,\n};\n","import './publishers';\nimport './methods';\nimport './eventHandlers';\n","import { Meteor } from 'meteor/meteor';\nimport createGroup from './methods/createGroup';\nimport createSession from './methods/createSession';\nimport getPadId from './methods/getPadId';\n\nMeteor.methods({\n  createGroup,\n  createSession,\n  getPadId,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Pads, { PadsSessions, PadsUpdates } from '/imports/api/pads';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction pads() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Pads was requested by unauth connection ${this.connection.id}`);\n    return Pads.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.info(`Publishing Pads for ${meetingId} ${userId}`);\n\n  const options = {\n    fields: {\n      padId: 0,\n    },\n  };\n\n  return Pads.find({ meetingId }, options);\n}\n\nfunction padsSessions() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing PadsSessions was requested by unauth connection ${this.connection.id}`);\n    return PadsSessions.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.info(`Publishing PadsSessions for ${meetingId} ${userId}`);\n\n  return PadsSessions.find({ meetingId, userId });\n}\n\nfunction padsUpdates() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing PadsUpdates was requested by unauth connection ${this.connection.id}`);\n    return PadsUpdates.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.info(`Publishing PadsUpdates for ${meetingId} ${userId}`);\n\n  return PadsUpdates.find({ meetingId });\n}\n\nfunction publishPads(...args) {\n  const boundPads = pads.bind(this);\n  return boundPads(...args);\n}\n\nfunction publishPadsSessions(...args) {\n  const boundPadsSessions = padsSessions.bind(this);\n  return boundPadsSessions(...args);\n}\n\nfunction publishPadsUpdates(...args) {\n  const boundPadsUpdates = padsUpdates.bind(this);\n  return boundPadsUpdates(...args);\n}\n\nMeteor.publish('pads', publishPads);\n\nMeteor.publish('pads-sessions', publishPadsSessions);\n\nMeteor.publish('pads-updates', publishPadsUpdates);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst Pads = new Mongo.Collection('pads', collectionOptions);\nconst PadsSessions = new Mongo.Collection('pads-sessions', collectionOptions);\nconst PadsUpdates = new Mongo.Collection('pads-updates', collectionOptions);\n\nif (Meteor.isServer) {\n  Pads._ensureIndex({ meetingId: 1, externalId: 1 });\n  PadsSessions._ensureIndex({ meetingId: 1, userId: 1 });\n  PadsUpdates._ensureIndex({ meetingId: 1, externalId: 1 });\n}\n\nexport {\n  PadsSessions,\n  PadsUpdates,\n};\n\nexport default Pads;\n","import { check } from 'meteor/check';\nimport setPublishedPoll from '../../../meetings/server/modifiers/setPublishedPoll';\nimport handleSendSystemChatForPublishedPoll from './sendPollChatMsg';\n\nconst POLL_CHAT_MESSAGE = Meteor.settings.public.poll.chatMessage;\n\nexport default function pollPublished({ body }, meetingId) {\n  const { pollId } = body;\n\n  check(meetingId, String);\n  check(pollId, String);\n\n  setPublishedPoll(meetingId, true);\n\n  if (POLL_CHAT_MESSAGE) {\n    handleSendSystemChatForPublishedPoll({ body }, meetingId);\n  }\n}\n","import { check } from 'meteor/check';\nimport addPoll from '../modifiers/addPoll';\nimport setPublishedPoll from '../../../meetings/server/modifiers/setPublishedPoll';\n\nexport default function pollStarted({ body }, meetingId) {\n  const {\n    userId, poll, pollType, secretPoll, question,\n  } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(poll, Object);\n  check(pollType, String);\n  check(secretPoll, Boolean);\n  check(question, String);\n\n  setPublishedPoll(meetingId, false);\n\n  return addPoll(meetingId, userId, poll, pollType, secretPoll, question);\n}\n","import { check } from 'meteor/check';\nimport removePoll from '../modifiers/removePoll';\nimport clearPolls from '../modifiers/clearPolls';\n\nexport default function pollStopped({ body }, meetingId) {\n  const { poll } = body;\n\n  check(meetingId, String);\n\n  if (poll) {\n    const { pollId } = poll;\n\n    check(pollId, String);\n\n    return removePoll(meetingId, pollId);\n  }\n\n  return clearPolls(meetingId);\n}\n","import addSystemMsg from '../../../group-chat-msg/server/modifiers/addSystemMsg';\n\nexport default function sendPollChatMsg({ body }, meetingId) {\n  const { poll } = body;\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const PUBLIC_CHAT_SYSTEM_ID = CHAT_CONFIG.system_userid;\n  const CHAT_POLL_RESULTS_MESSAGE = CHAT_CONFIG.system_messages_keys.chat_poll_result;\n  const SYSTEM_CHAT_TYPE = CHAT_CONFIG.type_system;\n\n  const pollResultData = poll;\n  const extra = {\n    type: 'poll',\n    pollResultData,\n  };\n\n  const payload = {\n    id: `${SYSTEM_CHAT_TYPE}-${CHAT_POLL_RESULTS_MESSAGE}`,\n    timestamp: Date.now(),\n    correlationId: `${PUBLIC_CHAT_SYSTEM_ID}-${Date.now()}`,\n    sender: {\n      id: PUBLIC_CHAT_SYSTEM_ID,\n      name: '',\n    },\n    message: '',\n    extra,\n  };\n\n  return addSystemMsg(meetingId, PUBLIC_GROUP_CHAT_ID, payload);\n}\n","import { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userResponded({ body }) {\n  const { pollId, userId, answerIds } = body;\n\n  check(pollId, String);\n  check(userId, String);\n  check(answerIds, Array);\n\n  const selector = {\n    id: pollId,\n  };\n\n  const modifier = {\n    $pull: {\n      users: userId,\n    },\n    $push: {\n      responses: { userId, answerIds },\n    },\n  };\n\n  try {\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updating Poll response (userId: ${userId}, response: ${JSON.stringify(answerIds)}, pollId: ${pollId})`);\n    }\n  } catch (err) {\n    Logger.error(`Updating Poll responses: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nexport default function userTypedResponse({ header, body }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RespondToPollReqMsg';\n\n  const { pollId, userId, answer } = body;\n  const { meetingId } = header;\n\n  check(pollId, String);\n  check(meetingId, String);\n  check(userId, String);\n  check(answer, String);\n\n  const poll = Polls.findOne({ meetingId, id: pollId });\n\n  let answerId = 0;\n  poll.answers.forEach((a) => {\n    const { id, key } = a;\n    if (key === answer) answerId = id;\n  });\n\n  const payload = {\n    requesterId: userId,\n    pollId,\n    questionId: 0,\n    answerIds: [answerId],\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\nimport updateVotes from '../modifiers/updateVotes';\n\nexport default function userVoted({ body }, meetingId) {\n  const { poll } = body;\n\n  check(meetingId, String);\n  check(poll, {\n    id: String,\n    questionType: String,\n    questionText: String,\n    answers: [\n      {\n        id: Number,\n        key: String,\n        numVotes: Number,\n      },\n    ],\n    numRespondents: Number,\n    numResponders: Number,\n  });\n\n  return updateVotes(poll, meetingId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function publishPoll() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ShowPollResultReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const poll = Polls.findOne({ meetingId }); // TODO--send pollid from client\n    if (!poll) {\n      Logger.error(`Attempted to publish inexisting poll for meetingId: ${meetingId}`);\n      return false;\n    }\n\n    RedisPubSub.publishUserMessage(\n      CHANNEL,\n      EVENT_NAME,\n      meetingId,\n      requesterUserId,\n      ({ requesterId: requesterUserId, pollId: poll.id }),\n    );\n  } catch (err) {\n    Logger.error(`Exception while invoking method publishPoll ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function publishTypedVote(id, pollAnswer) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const MAX_INPUT_CHARS = Meteor.settings.public.poll.maxTypedAnswerLength;\n  let EVENT_NAME = 'RespondToTypedPollReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(pollAnswer, String);\n    check(id, String);\n\n    const allowedToVote = Polls.findOne({\n      id,\n      users: { $in: [requesterUserId] },\n      meetingId,\n    }, {\n      fields: {\n        users: 1,\n      },\n    });\n\n    if (!allowedToVote) {\n      Logger.info(`Poll User={${requesterUserId}} has already voted in PollId={${id}}`);\n      return null;\n    }\n\n    const activePoll = Polls.findOne({ meetingId, id }, {\n      fields: {\n        answers: 1,\n      },\n    });\n\n    let existingAnsId = null;\n    activePoll.answers.forEach((a) => {\n      if (a.key === pollAnswer) existingAnsId = a.id;\n    });\n  \n    if (existingAnsId !== null) {\n      check(existingAnsId, Number);\n      EVENT_NAME = 'RespondToPollReqMsg';\n\n      return RedisPubSub.publishUserMessage(\n        CHANNEL,\n        EVENT_NAME,\n        meetingId,\n        requesterUserId,\n        {\n          requesterId: requesterUserId,\n          pollId: id,\n          questionId: 0,\n          answerIds: [existingAnsId],\n        },\n      );\n    }\n  \n    const payload = {\n      requesterId: requesterUserId,\n      pollId: id,\n      questionId: 0,\n      answer: pollAnswer.substring(0, MAX_INPUT_CHARS),\n    };\n\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method publishTypedVote ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function publishVote(pollId, pollAnswerIds) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'RespondToPollReqMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(pollAnswerIds, Array);\n    check(pollId, String);\n\n    const allowedToVote = Polls.findOne({\n      id: pollId,\n      users: { $in: [requesterUserId] },\n      meetingId,\n    }, {\n      fields: {\n        users: 1,\n      },\n    });\n\n    if (!allowedToVote) {\n      Logger.info(`Poll User={${requesterUserId}} has already voted in PollId={${pollId}}`);\n      return null;\n    }\n\n    const selector = {\n      users: requesterUserId,\n      meetingId,\n      'answers.id': { $all: pollAnswerIds },\n    };\n\n    const payload = {\n      requesterId: requesterUserId,\n      pollId,\n      questionId: 0,\n      answerIds: pollAnswerIds,\n    };\n\n    /*\n     We keep an array of people who were in the meeting at the time the poll\n     was started. The poll is published to them only.\n     Once they vote - their ID is removed and they cannot see the poll anymore\n    */\n    const modifier = {\n      $pull: {\n        users: requesterUserId,\n      },\n    };\n\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Removed responded user=${requesterUserId} from poll (meetingId: ${meetingId}, pollId: ${pollId}!)`);\n\n      RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method publishVote ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function startPoll(pollTypes, pollType, pollId, secretPoll, question, isMultipleResponse, answers) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  let EVENT_NAME = 'StartPollReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(pollId, String);\n    check(pollType, String);\n    check(secretPoll, Boolean);\n\n    const payload = {\n      requesterId: requesterUserId,\n      pollId: `${pollId}/${new Date().getTime()}`,\n      pollType,\n      secretPoll,\n      question,\n      isMultipleResponse,\n    };\n\n    if (pollType === pollTypes.Custom) {\n      EVENT_NAME = 'StartCustomPollReqMsg';\n      check(answers, Array);\n      payload.answers = answers;\n    }\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method startPoll ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function stopPoll() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StopPollReqMsg';\n\n  try {\n    const { meetingId, requesterUserId: requesterId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterId, String);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterId, ({ requesterId }));\n  } catch (err) {\n    Logger.error(`Exception while invoking method stopPoll ${err.stack}`);\n  }\n}\n","import Users from '/imports/api/users';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport { check } from 'meteor/check';\n\nexport default function addPoll(meetingId, requesterId, poll, pollType, secretPoll, question = '') {\n  check(requesterId, String);\n  check(meetingId, String);\n  check(poll, {\n    id: String,\n    answers: [\n      {\n        id: Number,\n        key: String,\n      },\n    ],\n    isMultipleResponse: Boolean,\n  });\n\n  const userSelector = {\n    meetingId,\n    userId: { $ne: requesterId },\n    clientType: { $ne: 'dial-in-user' },\n  };\n\n  const userIds = Users.find(userSelector, { fields: { userId: 1 } })\n    .fetch()\n    .map(user => user.userId);\n\n  const selector = {\n    meetingId,\n    requester: requesterId,\n    id: poll.id,\n  };\n\n  const modifier = Object.assign(\n    { meetingId },\n    { requester: requesterId },\n    { users: userIds },\n    { question, pollType, secretPoll },\n    flat(poll, { safe: true }),\n  );\n\n\n  try {\n    const { insertedId } = Polls.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added Poll id=${poll.id}`);\n    } else {\n      Logger.info(`Upserted Poll id=${poll.id}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding Poll to collection: ${poll.id}`);\n  }\n}\n","import Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPolls(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Polls.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Polls (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Polls (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Polls.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Polls (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Polls (all). ${err}`);\n    }\n  }\n}\n","import Polls from '/imports/api/polls';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removePoll(meetingId, id) {\n  check(meetingId, String);\n  check(id, String);\n\n  const selector = {\n    meetingId,\n    id,\n  };\n\n  try {\n    const numberAffected = Polls.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed Poll id=${id}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing Poll from collection: ${err}`);\n  }\n}\n","import Polls from '/imports/api/polls';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\n\nexport default function updateVotes(poll, meetingId) {\n  check(meetingId, String);\n  check(poll, Object);\n\n  const {\n    id,\n    answers,\n    numResponders,\n    numRespondents,\n  } = poll;\n\n  check(id, String);\n  check(answers, Array);\n\n  check(numResponders, Number);\n  check(numRespondents, Number);\n\n  const selector = {\n    meetingId,\n    id,\n  };\n\n  const modifier = {\n    $set: flat(poll, { safe: true }),\n  };\n\n  try {\n    const numberAffected = Polls.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updating Polls collection vote (meetingId: ${meetingId}, pollId: ${id}!)`);\n    }\n  } catch (err) {\n    Logger.error(`Updating Polls collection vote: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handlePollStarted from './handlers/pollStarted';\nimport handlePollStopped from './handlers/pollStopped';\nimport handlePollPublished from './handlers/pollPublished';\nimport handleUserVoted from './handlers/userVoted';\nimport handleUserResponded from './handlers/userResponded';\nimport handleUserTypedResponse from './handlers/userTypedResponse';\n\nRedisPubSub.on('PollShowResultEvtMsg', handlePollPublished);\nRedisPubSub.on('PollStartedEvtMsg', handlePollStarted);\nRedisPubSub.on('PollStoppedEvtMsg', handlePollStopped);\nRedisPubSub.on('PollUpdatedEvtMsg', handleUserVoted);\nRedisPubSub.on('UserRespondedToPollRespMsg', handleUserResponded);\nRedisPubSub.on('UserRespondedToTypedPollRespMsg', handleUserTypedResponse);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport publishTypedVote from './methods/publishTypedVote';\nimport publishVote from './methods/publishVote';\nimport publishPoll from './methods/publishPoll';\nimport startPoll from './methods/startPoll';\nimport stopPoll from './methods/stopPoll';\n\nMeteor.methods({\n  publishVote,\n  publishTypedVote,\n  publishPoll,\n  startPoll,\n  stopPoll,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Polls from '/imports/api/polls';\nimport AuthTokenValidation, {\n  ValidationStates,\n} from '/imports/api/auth-token-validation';\nimport { DDPServer } from 'meteor/ddp-server';\n\nMeteor.server.setPublicationStrategy('polls', DDPServer.publicationStrategies.NO_MERGE);\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction currentPoll(secretPoll) {\n  check(secretPoll, Boolean);\n  const tokenValidation = AuthTokenValidation.findOne({\n    connectionId: this.connection.id,\n  });\n\n  if (\n    !tokenValidation\n    || tokenValidation.validationStatus !== ValidationStates.VALIDATED\n  ) {\n    Logger.warn(\n      `Publishing Polls was requested by unauth connection ${this.connection.id}`,\n    );\n    return Polls.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1, presenter: 1 } });\n\n  if (!!User && User.presenter) {\n    Logger.debug('Publishing Polls', { meetingId, userId });\n\n    const selector = {\n      meetingId,\n      requester: userId,\n    };\n\n    const options = { fields: {} };\n\n    const hasPoll = Polls.findOne(selector);\n\n    if ((hasPoll && hasPoll.secretPoll) || secretPoll) {\n      options.fields.responses = 0;\n      selector.secretPoll = true;\n    } else {\n      selector.secretPoll = false;\n    }\n    Mongo.Collection._publishCursor(Polls.find(selector, options), this, 'current-poll');\n    return this.ready();\n  }\n\n  Logger.warn(\n    'Publishing current-poll was requested by non-presenter connection',\n    { meetingId, userId, connectionId: this.connection.id },\n  );\n  Mongo.Collection._publishCursor(Polls.find({ meetingId: '' }), this, 'current-poll');\n  return this.ready();\n}\n\nfunction publishCurrentPoll(...args) {\n  const boundPolls = currentPoll.bind(this);\n  return boundPolls(...args);\n}\n\nMeteor.publish('current-poll', publishCurrentPoll);\n\nfunction polls() {\n  const tokenValidation = AuthTokenValidation.findOne({\n    connectionId: this.connection.id,\n  });\n\n  if (\n    !tokenValidation\n    || tokenValidation.validationStatus !== ValidationStates.VALIDATED\n  ) {\n    Logger.warn(\n      `Publishing Polls was requested by unauth connection ${this.connection.id}`,\n    );\n    return Polls.find({ meetingId: '' });\n  }\n\n  const options = {\n    fields: {\n      'answers.numVotes': 0,\n      responses: 0,\n    },\n  };\n\n  const noKeyOptions = {\n    fields: {\n      'answers.numVotes': 0,\n      'answers.key': 0,\n      responses: 0,\n    },\n  };\n\n  const { meetingId, userId } = tokenValidation;\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1, presenter: 1 } });\n\n  Logger.debug('Publishing polls', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n    users: userId,\n  };\n\n  if (User) {\n    const poll = Polls.findOne(selector, noKeyOptions);\n\n    if (User.role === ROLE_MODERATOR || poll?.pollType !== 'R-') {\n      return Polls.find(selector, options);\n    }\n  }\n\n  return Polls.find(selector, noKeyOptions);\n}\n\nfunction publish(...args) {\n  const boundPolls = polls.bind(this);\n  return boundPolls(...args);\n}\n\nMeteor.publish('polls', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst Polls = new Mongo.Collection('polls', collectionOptions);\nexport const CurrentPoll = new Mongo.Collection('current-poll', { connection: null });\n\nif (Meteor.isServer) {\n  // We can have just one active poll per meeting\n  // makes no sense to index it by anything other than meetingId\n\n  Polls._ensureIndex({ meetingId: 1 });\n}\n\nexport default Polls;\n","import { check } from 'meteor/check';\nimport addPresentationPod from '../modifiers/addPresentationPod';\n\nexport default function handleCreateNewPresentationPod({ body }, meetingId) {\n  check(body, {\n    currentPresenterId: String,\n    podId: String,\n  });\n  check(meetingId, String);\n\n  const { currentPresenterId, podId } = body;\n\n  const pod = {\n    currentPresenterId,\n    podId,\n  };\n\n  addPresentationPod(meetingId, pod);\n}\n","import { check } from 'meteor/check';\nimport removePresentationPod from '../modifiers/removePresentationPod';\n\nexport default function handleRemovePresentationPod({ body }, meetingId) {\n  check(body, Object);\n  check(meetingId, String);\n\n  const { podId } = body;\n\n  check(podId, String);\n\n  removePresentationPod(meetingId, podId);\n}\n","import { check } from 'meteor/check';\nimport setPresenterInPod from '../modifiers/setPresenterInPod';\n\nexport default function handleSetPresenterInPod({ body }, meetingId) {\n  check(body, Object);\n\n  const { podId, nextPresenterId } = body;\n\n  check(podId, String);\n  check(nextPresenterId, String);\n\n  setPresenterInPod(meetingId, podId, nextPresenterId);\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport removePresentationPod from '../modifiers/removePresentationPod';\nimport addPresentationPod from '../modifiers/addPresentationPod';\n\nexport default function handleSyncGetPresentationPods({ body }, meetingId) {\n  check(body, Object);\n  check(meetingId, String);\n\n  const { pods } = body;\n  check(pods, Array);\n\n  const presentationPodIds = pods.map(pod => pod.id);\n\n  const presentationPodsToRemove = PresentationPods.find({\n    meetingId,\n    podId: { $nin: presentationPodIds },\n  }, { fields: { podId: 1 } }).fetch();\n\n  presentationPodsToRemove.forEach(p => removePresentationPod(meetingId, p.podId));\n\n  pods.forEach((pod) => {\n    // 'podId' and 'currentPresenterId' for some reason called 'id' and 'currentPresenter'\n    // in this message\n    const {\n      id: podId,\n      currentPresenter: currentPresenterId,\n      presentations,\n    } = pod;\n    addPresentationPod(meetingId, { podId, currentPresenterId }, presentations);\n  });\n}\n","import { Match, check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport addPresentation from '/imports/api/presentations/server/modifiers/addPresentation';\n\n// 'presentations' is passed down here when we receive a Sync message\n// and it's not used when we just create a new presentation pod\nexport default function addPresentationPod(meetingId, pod, presentations = undefined) {\n  check(meetingId, String);\n  check(presentations, Match.Maybe(Array));\n  check(pod, {\n    currentPresenterId: String,\n    podId: String,\n  });\n\n  const { currentPresenterId, podId } = pod;\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const modifier = {\n    meetingId,\n    podId,\n    currentPresenterId,\n  };\n\n  try {\n    const { insertedId } = PresentationPods.upsert(selector, modifier);\n\n    // if it's a Sync message - continue adding the attached presentations\n    if (presentations) {\n      presentations.forEach(presentation => addPresentation(meetingId, podId, presentation));\n    }\n\n    if (insertedId) {\n      Logger.info(`Added presentation pod id=${podId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted presentation pod id=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding presentation pod to the collection: ${err}`);\n  }\n}\n","import PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport clearPresentations from '/imports/api/presentations/server/modifiers/clearPresentations';\nimport clearPresentationUploadToken from '/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken';\n\nexport default function clearPresentationPods(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = PresentationPods.remove({ meetingId });\n\n      if (numberAffected) {\n        clearPresentations(meetingId);\n        clearPresentationUploadToken(meetingId);\n        Logger.info(`Cleared Presentations Pods (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Presentations Pods (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = PresentationPods.remove({});\n\n      if (numberAffected) {\n        clearPresentations();\n        clearPresentationUploadToken();\n        Logger.info('Cleared Presentations Pods (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing Presentations Pods (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport clearPresentations from '/imports/api/presentations/server/modifiers/clearPresentations';\nimport clearPresentationUploadToken from '/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken';\n\nexport default function removePresentationPod(meetingId, podId) {\n  check(meetingId, String);\n  check(podId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  try {\n    const numberAffected = PresentationPods.remove(selector);\n\n    if (numberAffected && podId) {\n      Logger.info(`Removed presentation pod id=${podId} meeting=${meetingId}`);\n      clearPresentations(meetingId, podId);\n      clearPresentationUploadToken(meetingId, podId);\n    }\n  } catch (err) {\n    Logger.error(`Error on removing presentation pod from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresenterInPod(meetingId, podId, nextPresenterId) {\n  check(meetingId, String);\n  check(podId, String);\n  check(nextPresenterId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const modifier = {\n    $set: {\n      currentPresenterId: nextPresenterId,\n    },\n  };\n\n  try {\n    const { numberAffected } = PresentationPods.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set a new presenter in pod id=${podId} meeting=${meetingId} presenter=${nextPresenterId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error on setting a presenter in pod: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleCreateNewPresentationPod from './handlers/createNewPresentationPod';\nimport handleRemovePresentationPod from './handlers/removePresentationPod';\nimport handleSyncGetPresentationPods from './handlers/syncGetPresentationPods';\nimport handleSetPresenterInPod from './handlers/setPresenterInPod';\n\nRedisPubSub.on('CreateNewPresentationPodEvtMsg', handleCreateNewPresentationPod);\nRedisPubSub.on('RemovePresentationPodEvtMsg', handleRemovePresentationPod);\nRedisPubSub.on('SetPresenterInPodRespMsg', handleSetPresenterInPod);\nRedisPubSub.on('SyncGetPresentationPodsRespMsg', handleSyncGetPresentationPods);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentationPods() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing PresentationPods was requested by unauth connection ${this.connection.id}`);\n    return PresentationPods.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n  Logger.debug('Publishing presentation-pods', { meetingId, userId });\n\n  return PresentationPods.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundPresentationPods = presentationPods.bind(this);\n  return boundPresentationPods(...args);\n}\n\nMeteor.publish('presentation-pods', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst PresentationPods = new Mongo.Collection('presentation-pods', collectionOptions);\n\nif (Meteor.isServer) {\n  // types of queries for the presentation pods:\n  // 1. meetingId, podId  ( 4 )\n\n  PresentationPods._ensureIndex({ meetingId: 1, podId: 1 });\n}\n\nexport default PresentationPods;\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\n\nexport default function handlePresentationUploadTokenFail({ body, header }, meetingId) {\n  check(body, Object);\n\n  const { userId } = header;\n  const { podId, filename } = body;\n\n  check(userId, String);\n  check(podId, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    podId,\n    filename,\n  };\n\n  try {\n    const { numberAffected } = PresentationUploadToken.upsert(selector, { failed: true, authzToken: null });\n\n    if (numberAffected) {\n      Logger.info(`Removing presentationToken filename=${filename} podId=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing presentationToken from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Presentations from '/imports/api/presentations';\n\nexport default function handlePresentationUploadTokenPass({ body, header }, meetingId) {\n  check(body, Object);\n\n  const { userId } = header;\n  const { podId, authzToken, filename, tmpPresId } = body;\n\n  check(userId, String);\n  check(podId, String);\n  check(authzToken, String);\n  check(filename, String);\n  check(tmpPresId, String)\n\n  const selector = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n    tmpPresId,\n  };\n\n  const modifier = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n    authzToken,\n    tmpPresId,\n    failed: false,\n    used: false,\n  };\n\n  try {\n    const { insertedId } = PresentationUploadToken.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Inserting presentationToken filename=${filename} podId=${podId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Inserting presentationToken from collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function requestPresentationUploadToken(podId, filename, tmpPresId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'PresentationUploadTokenReqMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(podId, String);\n    check(filename, String);\n    check(tmpPresId, String);\n\n    const payload = {\n      podId,\n      filename,\n      tmpPresId\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method requestPresentationUploadToken ${err.stack}`);\n  }\n}\n","import PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function setUsedToken(authzToken) {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(authzToken, String);\n\n    const payload = {\n      $set: {\n        used: true,\n      },\n    };\n\n    const numberAffected = PresentationUploadToken.update({\n      meetingId,\n      userId: requesterUserId,\n      authzToken,\n    }, payload);\n\n    if (numberAffected) {\n      Logger.info(`Token: ${authzToken} has been set as used in meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method setUsedToken ${err.stack}`);\n  }\n}\n","import PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPresentationUploadToken(meetingId, podId) {\n  if (meetingId && podId) {\n    try {\n      const numberAffected = PresentationUploadToken.remove({ meetingId, podId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations Upload Token (${meetingId}, ${podId})`);\n        return true;\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (${meetingId}, ${podId}). ${err}`);\n      return false;\n    }\n  }\n\n  if (meetingId) {\n    try {\n      const numberAffected = PresentationUploadToken.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations Upload Token (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      // clearing presentations for the whole server\n      const numberAffected = PresentationUploadToken.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Presentations Upload Token (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing Presentations Upload Token (all). ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nimport handlePresentationUploadTokenPass from './handlers/presentationUploadTokenPass';\nimport handlePresentationUploadTokenFail from './handlers/presentationUploadTokenFail';\n\nRedisPubSub.on('PresentationUploadTokenPassRespMsg', processForHTML5ServerOnly(handlePresentationUploadTokenPass));\nRedisPubSub.on('PresentationUploadTokenFailRespMsg', processForHTML5ServerOnly(handlePresentationUploadTokenFail));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport requestPresentationUploadToken from './methods/requestPresentationUploadToken';\nimport setUsedToken from './methods/setUsedToken';\n\nMeteor.methods({\n  requestPresentationUploadToken,\n  setUsedToken,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentationUploadToken(podId, filename, tmpPresId) {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing PresentationUploadToken was requested by unauth connection ${this.connection.id}`);\n    return PresentationUploadToken.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  check(podId, String);\n  check(filename, String);\n  check(tmpPresId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n    tmpPresId,\n  };\n\n  Logger.debug('Publishing PresentationUploadToken', { meetingId, userId });\n\n  return PresentationUploadToken.find(selector);\n}\n\nfunction publish(...args) {\n  const boundPresentationUploadToken = presentationUploadToken.bind(this);\n  return boundPresentationUploadToken(...args);\n}\n\nMeteor.publish('presentation-upload-token', publish);\n","const collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst PresentationUploadToken = new Mongo.Collection('presentation-upload-token', collectionOptions);\n\nexport default PresentationUploadToken;\n","import { check } from 'meteor/check';\nimport addPresentation from '../modifiers/addPresentation';\n\nexport default function handlePresentationAdded({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentation, podId } = body;\n\n  check(meetingId, String);\n  check(podId, String);\n  check(presentation, Object);\n\n  addPresentation(meetingId, podId, presentation);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Presentations from '/imports/api/presentations';\n\n// const OFFICE_DOC_CONVERSION_SUCCESS_KEY = 'OFFICE_DOC_CONVERSION_SUCCESS';\nconst OFFICE_DOC_CONVERSION_FAILED_KEY = 'OFFICE_DOC_CONVERSION_FAILED';\nconst OFFICE_DOC_CONVERSION_INVALID_KEY = 'OFFICE_DOC_CONVERSION_INVALID';\nconst SUPPORTED_DOCUMENT_KEY = 'SUPPORTED_DOCUMENT';\nconst UNSUPPORTED_DOCUMENT_KEY = 'UNSUPPORTED_DOCUMENT';\nconst PAGE_COUNT_FAILED_KEY = 'PAGE_COUNT_FAILED';\nconst PAGE_COUNT_EXCEEDED_KEY = 'PAGE_COUNT_EXCEEDED';\nconst PDF_HAS_BIG_PAGE_KEY = 'PDF_HAS_BIG_PAGE';\nconst GENERATED_SLIDE_KEY = 'GENERATED_SLIDE';\nconst FILE_TOO_LARGE_KEY = 'FILE_TOO_LARGE';\n// const GENERATING_THUMBNAIL_KEY = 'GENERATING_THUMBNAIL';\n// const GENERATED_THUMBNAIL_KEY = 'GENERATED_THUMBNAIL';\n// const GENERATING_TEXTFILES_KEY = 'GENERATING_TEXTFILES';\n// const GENERATED_TEXTFILES_KEY = 'GENERATED_TEXTFILES';\n// const GENERATING_SVGIMAGES_KEY = 'GENERATING_SVGIMAGES';\n// const GENERATED_SVGIMAGES_KEY = 'GENERATED_SVGIMAGES';\n// const CONVERSION_COMPLETED_KEY = 'CONVERSION_COMPLETED';\n\nexport default function handlePresentationConversionUpdate({ body }, meetingId) {\n  check(body, Object);\n\n  const {\n    presentationId, podId, messageKey: status, presName: presentationName,\n  } = body;\n\n  check(meetingId, String);\n  check(presentationId, Match.Maybe(String));\n  check(podId, String);\n  check(status, String);\n\n  const statusModifier = {\n    'conversion.status': status,\n    'conversion.error': false,\n    'conversion.done': false,\n  };\n\n  switch (status) {\n    case SUPPORTED_DOCUMENT_KEY:\n      statusModifier.id = presentationId;\n      statusModifier.name = presentationName;\n      break;\n\n    case FILE_TOO_LARGE_KEY:\n      statusModifier['conversion.maxFileSize'] = body.maxFileSize;\n    case UNSUPPORTED_DOCUMENT_KEY:\n    case OFFICE_DOC_CONVERSION_FAILED_KEY:\n    case OFFICE_DOC_CONVERSION_INVALID_KEY:\n    case PAGE_COUNT_FAILED_KEY:\n    case PAGE_COUNT_EXCEEDED_KEY:\n      statusModifier['conversion.maxNumberPages'] = body.maxNumberPages;\n    case PDF_HAS_BIG_PAGE_KEY:\n      statusModifier.id = presentationId ?? body.presentationToken;\n      statusModifier.name = presentationName ?? body.presentationName;\n      statusModifier['conversion.error'] = true;\n      statusModifier['conversion.bigPageSize'] = body.bigPageSize;\n      break;\n    case GENERATED_SLIDE_KEY:\n      statusModifier['conversion.pagesCompleted'] = body.pagesCompleted;\n      statusModifier['conversion.numPages'] = body.numberOfPages;\n      break;\n\n    default:\n      break;\n  }\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId ?? body.presentationToken,\n  };\n\n  const modifier = {\n    $set: Object.assign({ meetingId, podId }, statusModifier),\n  };\n\n  try {\n    const { insertedId } = Presentations.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Updated presentation conversion status=${status} id=${presentationId} meeting=${meetingId}`);\n    } else {\n      Logger.debug('Upserted presentation conversion', { status, presentationId, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Updating conversion status presentation to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport setCurrentPresentation from '../modifiers/setCurrentPresentation';\n\nexport default function handlePresentationCurrentSet({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentationId, podId } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  return setCurrentPresentation(meetingId, podId, presentationId);\n}\n","import { check } from 'meteor/check';\nimport setPresentationDownloadable from '../modifiers/setPresentationDownloadable';\n\nexport default function handlePresentationDownloadableSet({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentationId, podId, downloadable } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(downloadable, Boolean);\n\n  return setPresentationDownloadable(meetingId, podId, presentationId, downloadable);\n}\n","import { check } from 'meteor/check';\n\nimport removePresentation from '../modifiers/removePresentation';\n\nexport default function handlePresentationRemove({ body }, meetingId) {\n  const { podId, presentationId } = body;\n\n  check(meetingId, String);\n  check(podId, String);\n  check(presentationId, String);\n\n  return removePresentation(meetingId, podId, presentationId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removePresentation(presentationId, podId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RemovePresentationPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(presentationId, String);\n    check(podId, String);\n\n    const payload = {\n      presentationId,\n      podId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method removePresentation ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresentation(presentationId, podId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetCurrentPresentationPubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(presentationId, String);\n    check(podId, String);\n\n    const payload = {\n      presentationId,\n      podId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setPresentation ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresentationDownloadable(presentationId, downloadable) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetPresentationDownloadablePubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(downloadable, Boolean);\n    check(presentationId, String);\n\n    const payload = {\n      presentationId,\n      podId: 'DEFAULT_PRESENTATION_POD',\n      downloadable,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setPresentationDownloadable ${err.stack}`);\n  }\n}\n","import axios from 'axios';\nimport { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport addSlide from '/imports/api/slides/server/modifiers/addSlide';\nimport setCurrentPresentation from './setCurrentPresentation';\n\nconst getSlideText = async (url) => {\n  let content = '';\n  try {\n    const request = await axios(url);\n    content = request.data;\n  } catch (error) {\n    Logger.error(`No file found. ${error}`);\n  }\n  return content;\n};\n\nconst addSlides = (meetingId, podId, presentationId, slides) => {\n  slides.forEach(async (slide) => {\n    const content = await getSlideText(slide.txtUri);\n\n    Object.assign(slide, { content });\n\n    addSlide(meetingId, podId, presentationId, slide);\n  });\n};\n\nexport default function addPresentation(meetingId, podId, presentation) {\n  check(meetingId, String);\n  check(podId, String);\n  check(presentation, {\n    id: String,\n    name: String,\n    current: Boolean,\n    temporaryPresentationId: String,\n    pages: [\n      {\n        id: String,\n        num: Number,\n        thumbUri: String,\n        swfUri: String,\n        txtUri: String,\n        svgUri: String,\n        current: Boolean,\n        xOffset: Number,\n        yOffset: Number,\n        widthRatio: Number,\n        heightRatio: Number,\n      },\n    ],\n    downloadable: Boolean,\n    removable: Boolean,\n  });\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentation.id,\n  };\n\n  const modifier = {\n    $set: Object.assign({\n      meetingId,\n      podId,\n      'conversion.done': true,\n      'conversion.error': false,\n    }, flat(presentation, { safe: true })),\n  };\n\n  try {\n    const { insertedId } = Presentations.upsert(selector, modifier);\n\n    addSlides(meetingId, podId, presentation.id, presentation.pages);\n    \n    if (presentation.current) {\n      setCurrentPresentation(meetingId, podId, presentation.id);\n      Logger.info(`Added presentation id=${presentation.id} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted presentation id=${presentation.id} meeting=${meetingId}`);\n    }\n\n  } catch (err) {\n    Logger.error(`Adding presentation to collection: ${err}`);\n  }\n}\n","import Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPresentations(meetingId, podId) {\n  // clearing presentations for 1 pod\n  if (meetingId && podId) {\n    try {\n      const numberAffected = Presentations.remove({ meetingId, podId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations (${meetingId}, ${podId})`);\n        return true;\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (${meetingId}, ${podId}). ${err}`);\n      return false;\n    }\n  }\n\n  // clearing presentations for the whole meeting\n  if (meetingId) {\n    try {\n      const numberAffected = Presentations.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Presentations (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Presentations.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Presentations (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Presentations (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nimport clearSlidesPresentation from '/imports/api/slides/server/modifiers/clearSlidesPresentation';\n\nexport default function removePresentation(meetingId, podId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  try {\n    const numberAffected = Presentations.remove(selector);\n\n    if (numberAffected) {\n      clearSlidesPresentation(meetingId, presentationId);\n      Logger.info(`Removed presentation id=${presentationId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing presentation from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setCurrentPresentation(meetingId, podId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const oldCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      current: true,\n      id: {\n        $ne: presentationId,\n      },\n    },\n    modifier: {\n      $set: { current: false },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Unsetting the current presentation: ${err}`);\n        return;\n      }\n\n      Logger.info('Unsetted as current presentation');\n    },\n  };\n\n  const newCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      id: presentationId,\n    },\n    modifier: {\n      $set: { current: true },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Setting as current presentation id=${presentationId}: ${err}`);\n        return;\n      }\n\n      Logger.info(`Setted as current presentation id=${presentationId}`);\n    },\n  };\n\n  const oldPresentation = Presentations.findOne(oldCurrent.selector);\n  const newPresentation = Presentations.findOne(newCurrent.selector);\n\n  if (oldPresentation) {\n    try{\n      Presentations.update(oldCurrent.selector, oldCurrent.modifier, {multi: true});\n    } catch(e){\n      oldCurrent.callback(e);\n    }\n  }\n\n  if (newPresentation) {\n    try{\n      Presentations.update(newPresentation._id, newCurrent.modifier);\n    } catch(e){\n      newCurrent.callback(e);\n    }\n  }\n}\n ","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresentationDownloadable(meetingId, podId,\n  presentationId, downloadable) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(downloadable, Boolean);\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  const modifier = {\n    $set: {\n      downloadable,\n    },\n  };\n\n  try {\n    const { numberAffected } = Presentations.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Set downloadable status on presentation {${presentationId} in meeting {${meetingId}}`);\n    }\n  } catch (err) {\n    Logger.error(`Could not set downloadable on pres {${presentationId} in meeting {${meetingId}} ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handlePresentationAdded from './handlers/presentationAdded';\nimport handlePresentationRemove from './handlers/presentationRemove';\nimport handlePresentationCurrentSet from './handlers/presentationCurrentSet';\nimport handlePresentationConversionUpdate from './handlers/presentationConversionUpdate';\nimport handlePresentationDownloadableSet from './handlers/presentationDownloadableSet';\n\nRedisPubSub.on('PdfConversionInvalidErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationPageGeneratedEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationPageCountErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationConversionUpdateEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationUploadedFileTooLargeErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationConversionCompletedEvtMsg', handlePresentationAdded);\nRedisPubSub.on('RemovePresentationEvtMsg', handlePresentationRemove);\nRedisPubSub.on('SetCurrentPresentationEvtMsg', handlePresentationCurrentSet);\nRedisPubSub.on('SetPresentationDownloadableEvtMsg', handlePresentationDownloadableSet);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport removePresentation from './methods/removePresentation';\nimport setPresentation from './methods/setPresentation';\nimport setPresentationDownloadable from './methods/setPresentationDownloadable';\n\nMeteor.methods({\n  removePresentation,\n  setPresentation,\n  setPresentationDownloadable,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction presentations() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Presentation was requested by unauth connection ${this.connection.id}`);\n    return Presentations.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Presentations', { meetingId, userId });\n\n  return Presentations.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundPresentations = presentations.bind(this);\n  return boundPresentations(...args);\n}\n\nMeteor.publish('presentations', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst Presentations = new Mongo.Collection('presentations', collectionOptions);\n\nif (Meteor.isServer) {\n  // types of queries for the presentations:\n  // 1. meetingId, podId, id        ( 3 )\n  // 2. meetingId, id               ( 1 )\n  // 3. meetingId, id, current      ( 2 )\n  // 4. meetingId                   ( 1 )\n\n  Presentations._ensureIndex({ meetingId: 1, podId: 1, id: 1 });\n}\n\nexport default Presentations;\n","import { check } from 'meteor/check';\nimport addScreenshare from '../modifiers/addScreenshare';\n\nexport default function handleScreenshareStarted({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  return addScreenshare(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport clearScreenshare from '../modifiers/clearScreenshare';\n\nexport default function handleScreenshareStopped({ body }, meetingId) {\n  const { screenshareConf } = body;\n\n  check(meetingId, String);\n  check(screenshareConf, String);\n\n  return clearScreenshare(meetingId, screenshareConf);\n}\n","import { check } from 'meteor/check';\nimport addScreenshare from '../modifiers/addScreenshare';\nimport clearScreenshare from '../modifiers/clearScreenshare';\n\nexport default function handleScreenshareSync({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  const { isBroadcasting, screenshareConf } = body;\n\n  check(screenshareConf, String);\n  check(isBroadcasting, Boolean);\n\n  if (!isBroadcasting) {\n    return clearScreenshare(meetingId, screenshareConf);\n  }\n\n  return addScreenshare(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport flat from 'flat';\nimport Logger from '/imports/startup/server/logger';\nimport Screenshare from '/imports/api/screenshare';\n\nexport default function addScreenshare(meetingId, body) {\n  check(meetingId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      screenshare: flat(body),\n    },\n  };\n\n  try {\n    const { numberAffected } = Screenshare.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Upserted screenshare id=${body.screenshareConf}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding screenshare to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Screenshare from '/imports/api/screenshare';\n\nexport default function clearScreenshare(meetingId, screenshareConf) {\n  try {\n    let numberAffected;\n\n    if (meetingId && screenshareConf) {\n      numberAffected = Screenshare.remove({ meetingId, 'screenshare.screenshareConf': screenshareConf });\n    } else if (meetingId) {\n      numberAffected = Screenshare.remove({ meetingId });\n    } else {\n      numberAffected = Screenshare.remove({});\n    }\n\n    if (numberAffected) {\n      Logger.info(`removed screenshare meetingId=${meetingId} id=${screenshareConf}`);\n    }\n  } catch (err) {\n    Logger.error(`removing screenshare to collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleScreenshareStarted from './handlers/screenshareStarted';\nimport handleScreenshareStopped from './handlers/screenshareStopped';\nimport handleScreenshareSync from './handlers/screenshareSync';\n\nRedisPubSub.on('ScreenshareRtmpBroadcastStartedEvtMsg', handleScreenshareStarted);\nRedisPubSub.on('ScreenshareRtmpBroadcastStoppedEvtMsg', handleScreenshareStopped);\nRedisPubSub.on('SyncGetScreenshareInfoRespMsg', handleScreenshareSync);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\n\nMeteor.methods({\n});\n","import Screenshare from '/imports/api/screenshare';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction screenshare() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Screenshare was requested by unauth connection ${this.connection.id}`);\n    return Screenshare.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Screenshare', { meetingId, userId });\n\n  return Screenshare.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundScreenshare = screenshare.bind(this);\n  return boundScreenshare(...args);\n}\n\nMeteor.publish('screenshare', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst Screenshare = new Mongo.Collection('screenshare', collectionOptions);\n\nif (Meteor.isServer) {\n  // types of queries for the screenshare:\n  // 1. meetingId\n\n  Screenshare._ensureIndex({ meetingId: 1 });\n}\n\nexport default Screenshare;\n","import { check } from 'meteor/check';\nimport changeCurrentSlide from '../modifiers/changeCurrentSlide';\n\nexport default function handleSlideChange({ body }, meetingId) {\n  const { pageId, presentationId, podId } = body;\n\n  check(pageId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  return changeCurrentSlide(meetingId, podId, presentationId, pageId);\n}\n","import { check } from 'meteor/check';\nimport resizeSlide from '../modifiers/resizeSlide';\n\nexport default function handleSlideResize({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  return resizeSlide(meetingId, body);\n}\n","import Presentations from '/imports/api/presentations';\nimport { Slides } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function switchSlide(slideNumber, podId) { // TODO-- send presentationId and SlideId\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetCurrentPagePubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(slideNumber, Number);\n    check(podId, String);\n\n    const selector = {\n      meetingId,\n      podId,\n      current: true,\n    };\n\n    const Presentation = Presentations.findOne(selector);\n\n    if (!Presentation) {\n      throw new Meteor.Error('presentation-not-found', 'You need a presentation to be able to switch slides');\n    }\n\n    const Slide = Slides.findOne({\n      meetingId,\n      podId,\n      presentationId: Presentation.id,\n      num: slideNumber,\n    });\n\n    if (!Slide) {\n      throw new Meteor.Error('slide-not-found', `Slide number ${slideNumber} not found in the current presentation`);\n    }\n\n    const payload = {\n      podId,\n      presentationId: Presentation.id,\n      pageId: Slide.id,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method switchSlide ${err.stack}`);\n  }\n}\n","import Presentations from '/imports/api/presentations';\nimport { Slides } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function zoomSlide(slideNumber, podId, widthRatio, heightRatio, x, y) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ResizeAndMovePagePubMsg';\n\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const selector = {\n      meetingId,\n      podId,\n      current: true,\n    };\n    const Presentation = Presentations.findOne(selector);\n\n    if (!Presentation) {\n      throw new Meteor.Error('presentation-not-found', 'You need a presentation to be able to switch slides');\n    }\n\n    const Slide = Slides.findOne({\n      meetingId,\n      podId,\n      presentationId: Presentation.id,\n      num: slideNumber,\n    });\n\n    if (!Slide) {\n      throw new Meteor.Error('slide-not-found', `Slide number ${slideNumber} not found in the current presentation`);\n    }\n\n    const payload = {\n      podId,\n      presentationId: Presentation.id,\n      pageId: Slide.id,\n      xOffset: x,\n      yOffset: y,\n      widthRatio,\n      heightRatio,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method zoomSlide ${err.stack}`);\n  }\n}\n","import probe from 'probe-image-size';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { Slides } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { SVG, PNG } from '/imports/utils/mimeTypes';\nimport calculateSlideData from '/imports/api/slides/server/helpers';\nimport addSlidePositions from './addSlidePositions';\n\nconst loadSlidesFromHttpAlways = Meteor.settings.private.app.loadSlidesFromHttpAlways || false;\n\nconst requestWhiteboardHistory = (meetingId, slideId) => {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'GetWhiteboardAnnotationsReqMsg';\n  const USER_ID = 'nodeJSapp';\n\n  const payload = {\n    whiteboardId: slideId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, USER_ID, payload);\n};\n\nconst SUPPORTED_TYPES = [SVG, PNG];\n\nconst fetchImageSizes = imageUri => probe(imageUri)\n  .then((result) => {\n    if (!SUPPORTED_TYPES.includes(result.mime)) {\n      throw new Meteor.Error('invalid-image-type', `received ${result.mime} expecting ${SUPPORTED_TYPES.join()}`);\n    }\n\n    return {\n      width: result.width,\n      height: result.height,\n    };\n  })\n  .catch((reason) => {\n    Logger.error(`Error parsing image size. ${reason}. uri=${imageUri}`);\n    return reason;\n  });\n\nexport default function addSlide(meetingId, podId, presentationId, slide) {\n  check(podId, String);\n  check(presentationId, String);\n\n  check(slide, {\n    id: String,\n    num: Number,\n    thumbUri: String,\n    swfUri: String,\n    txtUri: String,\n    svgUri: String,\n    current: Boolean,\n    xOffset: Number,\n    yOffset: Number,\n    widthRatio: Number,\n    heightRatio: Number,\n    content: String,\n  });\n\n  const {\n    id: slideId,\n    xOffset,\n    yOffset,\n    widthRatio,\n    heightRatio,\n    ...restSlide\n  } = slide;\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: slideId,\n  };\n\n  const imageUri = slide.svgUri || slide.pngUri;\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId },\n      { podId },\n      { presentationId },\n      { id: slideId },\n      { imageUri },\n      flat(restSlide),\n      { safe: true },\n    ),\n  };\n\n  const imageSizeUri = (loadSlidesFromHttpAlways ? imageUri.replace(/^https/i, 'http') : imageUri);\n\n  return fetchImageSizes(imageSizeUri)\n    .then(({ width, height }) => {\n      // there is a rare case when for a very long not-active meeting the presentation\n      // files just disappear and width/height can't be retrieved\n      if (width && height) {\n        // pre-calculating the width, height, and vieBox coordinates / dimensions\n        // to unload the client-side\n        const slideData = {\n          width,\n          height,\n          xOffset,\n          yOffset,\n          widthRatio,\n          heightRatio,\n        };\n        const slidePosition = calculateSlideData(slideData);\n\n        addSlidePositions(meetingId, podId, presentationId, slideId, slidePosition);\n      }\n\n      try {\n        const { insertedId, numberAffected } = Slides.upsert(selector, modifier);\n\n        requestWhiteboardHistory(meetingId, slideId);\n\n        if (insertedId) {\n          Logger.info(`Added slide id=${slideId} pod=${podId} presentation=${presentationId}`);\n        } else if (numberAffected) {\n          Logger.info(`Upserted slide id=${slideId} pod=${podId} presentation=${presentationId}`);\n        }\n      } catch (err) {\n        Logger.error(`Error on adding slide to collection: ${err}`);\n      }\n    })\n    .catch(reason => Logger.error(`Error parsing image size. ${reason}. slide=${slideId} uri=${imageUri}`));\n}\n","import { SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\n\nexport default function addSlidePositions(\n  meetingId,\n  podId,\n  presentationId,\n  slideId,\n  slidePosition,\n) {\n  check(meetingId, String);\n  check(podId, String);\n  check(presentationId, String);\n  check(slideId, String);\n\n  check(slidePosition, {\n    width: Number,\n    height: Number,\n    x: Number,\n    y: Number,\n    viewBoxWidth: Number,\n    viewBoxHeight: Number,\n  });\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: slideId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId },\n      { podId },\n      { presentationId },\n      { id: slideId },\n      flat(slidePosition),\n      { safe: true },\n    ),\n  };\n\n  try {\n    const { insertedId } = SlidePositions.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added slide position id=${slideId} pod=${podId} presentation=${presentationId}`);\n    } else {\n      Logger.info(`Upserted slide position id=${slideId} pod=${podId} presentation=${presentationId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding slide position to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { Slides } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function changeCurrentSlide(meetingId, podId, presentationId, slideId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(slideId, String);\n  check(podId, String);\n\n  const oldCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      presentationId,\n      current: true,\n    },\n    modifier: {\n      $set: { current: false },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Unsetting the current slide: ${err}`);\n        return;\n      }\n\n      Logger.info('Unsetted the current slide');\n    },\n  };\n\n  const newCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      presentationId,\n      id: slideId,\n    },\n    modifier: {\n      $set: { current: true },\n    },\n    callback: (err) => {\n      if (err) {\n        Logger.error(`Setting as current slide id=${slideId}: ${err}`);\n        return;\n      }\n\n      Logger.info(`Setted as current slide id=${slideId}`);\n    },\n  };\n\n  const oldSlide = Slides.findOne(oldCurrent.selector);\n  const newSlide = Slides.findOne(newCurrent.selector);\n\n  // if the oldCurrent and newCurrent have the same ids\n  if (oldSlide && newSlide && (oldSlide._id === newSlide._id)) {\n    return;\n  }\n\n  if (newSlide) {\n    Slides.update(newSlide._id, newCurrent.modifier, newCurrent.callback);\n  }\n\n  if (oldSlide) {\n    Slides.update(oldSlide._id, oldCurrent.modifier, oldCurrent.callback);\n  }\n}\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearSlides(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffectedSlidePositions = SlidePositions.remove({ meetingId });\n\n      const numberAffected = Slides.remove({ meetingId });\n\n      if (numberAffectedSlidePositions) {\n        Logger.info(`Cleared SlidePositions (${meetingId})`);\n      }\n\n      if (numberAffected) {\n        Logger.info(`Cleared Slides (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Slides (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffectedSlidePositions = SlidePositions.remove({ meetingId });\n\n      const numberAffected = Slides.remove({ meetingId });\n\n      if (numberAffectedSlidePositions) {\n        Logger.info(`Cleared SlidePositions (${meetingId})`);\n      }\n\n      if (numberAffected) {\n        Logger.info('Cleared Slides (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error on cleaning Slides (all). ${err}`);\n    }\n  }\n}\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport clearAnnotations from '/imports/api/annotations/server/modifiers/clearAnnotations';\n\nexport default function clearSlidesPresentation(meetingId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n\n  const selector = {\n    meetingId,\n    presentationId,\n  };\n\n  const whiteboardIds = Slides.find(selector, { fields: { id: 1 } }).map(row => row.id);\n\n  try {\n    SlidePositions.remove(selector);\n\n    const numberAffected = Slides.remove(selector);\n\n    if (numberAffected) {\n      whiteboardIds.forEach(whiteboardId => clearAnnotations(meetingId, whiteboardId));\n\n      Logger.info(`Removed Slides where presentationId=${presentationId}`);\n    }\n  } catch (err) {\n    Logger.error(`Removing Slides from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport { SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport calculateSlideData from '/imports/api/slides/server/helpers';\n\nexport default function resizeSlide(meetingId, slide) {\n  check(meetingId, String);\n\n  const {\n    podId,\n    presentationId,\n    pageId,\n    widthRatio,\n    heightRatio,\n    xOffset,\n    yOffset,\n  } = slide;\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: pageId,\n  };\n\n  // fetching the current slide data\n  // and pre-calculating the width, height, and vieBox coordinates / sizes\n  // to reduce the client-side load\n  const SlidePosition = SlidePositions.findOne(selector);\n\n  if (SlidePosition) {\n    const {\n      width,\n      height,\n    } = SlidePosition;\n\n    const slideData = {\n      width,\n      height,\n      xOffset,\n      yOffset,\n      widthRatio,\n      heightRatio,\n    };\n    const calculatedData = calculateSlideData(slideData);\n\n    const modifier = {\n      $set: calculatedData,\n    };\n\n    try {\n      const numberAffected = SlidePositions.update(selector, modifier);\n\n      if (numberAffected) {\n        Logger.debug(`Resized slide positions id=${pageId}`);\n      } else {\n        Logger.info(`No slide positions found with id=${pageId}`);\n      }\n    } catch (err) {\n      Logger.error(`Resizing slide positions id=${pageId}: ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleSlideResize from './handlers/slideResize';\nimport handleSlideChange from './handlers/slideChange';\n\nRedisPubSub.on('ResizeAndMovePageEvtMsg', handleSlideResize);\nRedisPubSub.on('SetCurrentPageEvtMsg', handleSlideChange);\n","\nconst calculateSlideData = (slideData) => {\n  const {\n    width, height, xOffset, yOffset, widthRatio, heightRatio,\n  } = slideData;\n\n  // calculating viewBox and offsets for the current presentation\n  return {\n    width,\n    height,\n    x: ((-xOffset * 2) * width) / 100,\n    y: ((-yOffset * 2) * height) / 100,\n    viewBoxWidth: (width * widthRatio) / 100,\n    viewBoxHeight: (height * heightRatio) / 100,\n  };\n};\n\nexport default calculateSlideData;\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport switchSlide from './methods/switchSlide';\nimport zoomSlide from './methods/zoomSlide';\n\nMeteor.methods({\n  switchSlide,\n  zoomSlide,\n});\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction slides() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Slides was requested by unauth connection ${this.connection.id}`);\n    return Slides.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Slides', { meetingId, userId });\n\n  return Slides.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundSlides = slides.bind(this);\n  return boundSlides(...args);\n}\n\nMeteor.publish('slides', publish);\n\nfunction slidePositions() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing SlidePositions was requested by unauth connection ${this.connection.id}`);\n    return SlidePositions.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing SlidePositions', { meetingId, userId });\n\n  return SlidePositions.find({ meetingId });\n}\n\nfunction publishPositions(...args) {\n  const boundSlidePositions = slidePositions.bind(this);\n  return boundSlidePositions(...args);\n}\n\nMeteor.publish('slide-positions', publishPositions);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst Slides = new Mongo.Collection('slides', collectionOptions);\nconst SlidePositions = new Mongo.Collection('slide-positions', collectionOptions);\n\nif (Meteor.isServer) {\n  // types of queries for the slides:\n\n  // 1. meetingId                                  ( 1 )\n  // 2. meetingId, podId                           ( 1 )\n  // 3. meetingId, presentationId                  ( 1 )\n  // 3. meetingId, presentationId, num             ( 1 )\n  // 4. meetingId, podId, presentationId, id       ( 3 ) - incl. resizeSlide, which can be intense\n  // 5. meetingId, podId, presentationId, current  ( 1 )\n\n  Slides._ensureIndex({\n    meetingId: 1, podId: 1, presentationId: 1, id: 1,\n  });\n\n  SlidePositions._ensureIndex({\n    meetingId: 1, podId: 1, presentationId: 1, id: 1,\n  });\n}\n\nexport { Slides, SlidePositions };\n","import { check } from 'meteor/check';\nimport changeRole from '/imports/api/users/server/modifiers/changeRole';\n\nexport default function handleChangeRole(payload, meetingId) {\n  check(payload.body, Object);\n  check(meetingId, String);\n\n  const { userId, role, changedBy } = payload.body;\n\n  changeRole(role, userId, meetingId, changedBy);\n}\n","import Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport Users from '/imports/api/users';\n\nexport default function handleEmojiStatus({ body }, meetingId) {\n  const { userId, emoji } = body;\n\n  check(userId, String);\n  check(emoji, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      emojiTime: (new Date()).getTime(),\n      emoji,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Assigned user emoji status ${emoji} id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Assigning user emoji status: ${err}`);\n  }\n}\n","import Users from '/imports/api/users';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport changePresenter from '/imports/api/users/server/modifiers/changePresenter';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nfunction setPresenterInPodReqMsg(credentials) { // TODO-- switch to meetingId, etc\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetPresenterInPodReqMsg';\n\n  const { meetingId, requesterUserId, presenterId } = credentials;\n\n  const payload = {\n    podId: 'DEFAULT_PRESENTATION_POD',\n    nextPresenterId: presenterId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n\nexport default function handlePresenterAssigned({ body }, meetingId) {\n  const { presenterId, assignedBy } = body;\n\n  changePresenter(true, presenterId, meetingId, assignedBy);\n\n  const selector = {\n    meetingId,\n    userId: { $ne: presenterId },\n    presenter: true,\n  };\n\n  const defaultPodSelector = {\n    meetingId,\n    podId: 'DEFAULT_PRESENTATION_POD',\n  };\n\n  const currentDefaultPod = PresentationPods.findOne(defaultPodSelector);\n\n  const setPresenterPayload = {\n    meetingId,\n    requesterUserId: assignedBy,\n    presenterId,\n  };\n\n  const prevPresenter = Users.findOne(selector);\n\n  if (prevPresenter) {\n    changePresenter(false, prevPresenter.userId, meetingId, assignedBy);\n  }\n\n  /**\n   * In the cases where the first moderator joins the meeting or\n   * the current presenter left the meeting, akka-apps doesn't assign the new presenter\n   * to the default presentation pod. This step is done manually here.\n   */\n\n  if (currentDefaultPod.currentPresenterId !== presenterId) {\n    const presenterToBeAssigned = Users.findOne({ userId: presenterId });\n\n    if (!presenterToBeAssigned) setPresenterPayload.presenterId = '';\n\n    setPresenterInPodReqMsg(setPresenterPayload);\n  }\n}\n","import { check } from 'meteor/check';\n\nimport removeUser from '../modifiers/removeUser';\n\nexport default function handleRemoveUser({ body }, meetingId) {\n  const { intId } = body;\n\n  check(meetingId, String);\n  check(intId, String);\n\n  return removeUser(body, meetingId);\n}\n","import { check } from 'meteor/check';\nimport userInactivityInspect from '../modifiers/userInactivityInspect';\n\nexport default function handleUserInactivityInspect({ header, body }, meetingId) {\n  const { userId } = header;\n  const { responseDelay } = body;\n\n  check(userId, String);\n  check(responseDelay, Match.Integer);\n  check(meetingId, String);\n\n\n  userInactivityInspect(userId, responseDelay);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userJoin(meetingId, userId, authToken) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserJoinMeetingReqMsg';\n\n  check(authToken, String);\n\n  const payload = {\n    userId,\n    authToken,\n    clientType: 'HTML5',\n  };\n\n  Logger.info(`User='${userId}' is joining meeting='${meetingId}' authToken='${authToken}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\n\nimport addUser from '../modifiers/addUser';\n\nexport default function handleUserJoined({ body }, meetingId) {\n  const user = body;\n\n  check(user, Object);\n\n  addUser(meetingId, user);\n}\n","import { check } from 'meteor/check';\n\nimport userLeftFlag from '../modifiers/userLeftFlagUpdated';\n\nexport default function handleUserLeftFlag({ body }, meetingId) {\n  const user = body;\n  check(user, {\n    intId: String,\n    userLeftFlag: Boolean,\n  });\n\n  userLeftFlag(meetingId, user.intId, user.userLeftFlag);\n}\n","import { check } from 'meteor/check';\nimport changePin from '../modifiers/changePin';\n\nexport default function handlePinAssigned({ body }, meetingId) {\n  const { userId, pin, changedBy } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(pin, Boolean);\n  check(changedBy, String);\n\n  return changePin(meetingId, userId, pin, changedBy);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport userJoin from './userJoin';\nimport pendingAuthenticationsStore from '../store/pendingAuthentications';\nimport createDummyUser from '../modifiers/createDummyUser';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nimport upsertValidationState from '/imports/api/auth-token-validation/server/modifiers/upsertValidationState';\nimport { ValidationStates } from '/imports/api/auth-token-validation';\n\nconst clearOtherSessions = (sessionUserId, current = false) => {\n  const serverSessions = Meteor.server.sessions;\n  Object.keys(serverSessions)\n    .filter(i => serverSessions[i].userId === sessionUserId)\n    .filter(i => i !== current)\n    .forEach(i => serverSessions[i].close());\n};\n\nexport default function handleValidateAuthToken({ body }, meetingId) {\n  const {\n    userId,\n    valid,\n    authToken,\n    waitForApproval,\n    registeredOn,\n    authTokenValidatedOn,\n    reasonCode,\n  } = body;\n\n  check(userId, String);\n  check(authToken, String);\n  check(valid, Boolean);\n  check(waitForApproval, Boolean);\n  check(registeredOn, Number);\n  check(authTokenValidatedOn, Number);\n  check(reasonCode, String);\n\n  const pendingAuths = pendingAuthenticationsStore.take(meetingId, userId, authToken);\n  Logger.info(`PendingAuths length [${pendingAuths.length}]`);\n  if (pendingAuths.length === 0) return;\n\n  if (!valid) {\n    pendingAuths.forEach(\n      (pendingAuth) => {\n        try {\n          const { methodInvocationObject } = pendingAuth;\n          const connectionId = methodInvocationObject.connection.id;\n\n          upsertValidationState(meetingId, userId, ValidationStates.INVALID, connectionId, reasonCode);\n\n          // Schedule socket disconnection for this user, giving some time for client receiving the reason of disconnection\n          Meteor.setTimeout(() => {\n            methodInvocationObject.connection.close();\n          }, 2000);\n\n          Logger.info(`Closed connection ${connectionId} due to invalid auth token.`);\n        } catch (e) {\n          Logger.error(`Error closing socket for meetingId '${meetingId}', userId '${userId}', authToken ${authToken}`);\n        }\n      },\n    );\n\n    return;\n  }\n\n  // Define user ID on connections\n  pendingAuths.forEach(\n    (pendingAuth) => {\n      const { methodInvocationObject } = pendingAuth;\n\n      /* Logic migrated from validateAuthToken method ( postponed to only run in case of success response ) - Begin */\n      const sessionId = `${meetingId}--${userId}`;\n\n      methodInvocationObject.setUserId(sessionId);\n\n      const User = Users.findOne({\n        meetingId,\n        userId,\n      });\n\n      if (!User) {\n        createDummyUser(meetingId, userId, authToken);\n      }\n\n      ClientConnections.add(sessionId, methodInvocationObject.connection);\n      upsertValidationState(meetingId, userId, ValidationStates.VALIDATED, methodInvocationObject.connection.id);\n\n      /* End of logic migrated from validateAuthToken */\n    },\n  );\n\n  const selector = {\n    meetingId,\n    userId,\n    clientType: 'HTML5',\n  };\n\n  const User = Users.findOne(selector);\n\n  // If we dont find the user on our collection is a flash user and we can skip\n  if (!User) return;\n\n  // Publish user join message\n  if (!waitForApproval) {\n    Logger.info('User=', User);\n    userJoin(meetingId, userId, User.authToken);\n  }\n\n  const modifier = {\n    $set: {\n      validated: valid,\n      approved: !waitForApproval,\n      loginTime: registeredOn,\n      authTokenValidatedTime: authTokenValidatedOn,\n      inactivityCheck: false,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      const sessionUserId = `${meetingId}-${userId}`;\n      const currentConnectionId = User.connectionId ? User.connectionId : false;\n      clearOtherSessions(sessionUserId, currentConnectionId);\n\n      Logger.info(`Validated auth token as ${valid} user=${userId} meeting=${meetingId}`);\n    } else {\n      Logger.info('No auth to validate');\n    }\n  } catch (err) {\n    Logger.error(`Validating auth token: ${err}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function assignPresenter(userId) { // TODO-- send username from client side\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'AssignPresenterReqMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(userId, String);\n\n    const User = Users.findOne({\n      meetingId,\n      userId,\n    });\n\n    if (!User) {\n      throw new Meteor.Error('user-not-found', 'You need a valid user to be able to set presenter');\n    }\n\n    const payload = {\n      newPresenterId: userId,\n      newPresenterName: User.name,\n      assignedBy: requesterUserId,\n      requesterId: requesterUserId,\n    };\n\n    Logger.verbose('User set as presenter', { userId, meetingId, setBy: requesterUserId });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method assignPresenter ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function changePin(userId, pin) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ChangeUserPinStateReqMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(userId, String);\n    check(pin, Boolean);\n\n    const payload = {\n      pin,\n      changedBy: requesterUserId,\n      userId,\n    };\n\n    Logger.verbose('User pin requested', {\n      userId, meetingId, changedBy: requesterUserId, pin,\n    });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method changePin ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function changeRole(userId, role) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ChangeUserRoleCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(userId, String);\n    check(role, String);\n\n    const payload = {\n      userId,\n      role,\n      changedBy: requesterUserId,\n    };\n\n    Logger.verbose('Changed user role', {\n      userId, role, changedBy: requesterUserId, meetingId,\n    });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method changeRole ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeUser(userId, banUser) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'EjectUserFromMeetingCmdMsg';\n\n    const { meetingId, requesterUserId: ejectedBy } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(ejectedBy, String);\n    check(userId, String);\n    check(banUser, Boolean);\n\n    const payload = {\n      userId,\n      ejectedBy,\n      banUser,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, ejectedBy, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method removeUser ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setEmojiStatus(userId, status) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ChangeUserEmojiCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(userId, String);\n    check(status, String);\n\n    const payload = {\n      emoji: status,\n      userId,\n    };\n\n    Logger.verbose('User emoji status updated', {\n      userId, status, requesterUserId, meetingId,\n    });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setEmojiStatus ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport setMobile from '../modifiers/setMobile';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setMobileUser() {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    Logger.verbose(`Mobile user ${requesterUserId} from meeting ${meetingId}`);\n\n    setMobile(meetingId, requesterUserId);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setMobileUser ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setRandomUser() {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'SelectRandomViewerReqMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      requestedBy: requesterUserId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setRandomUser ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport setEffectiveConnectionType from '../modifiers/setUserEffectiveConnectionType';\n\nexport default function setUserEffectiveConnectionType(effectiveConnectionType) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ChangeUserEffectiveConnectionMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(effectiveConnectionType, String);\n\n    const payload = {\n      meetingId,\n      userId: requesterUserId,\n      effectiveConnectionType,\n    };\n\n    setEffectiveConnectionType(meetingId, requesterUserId, effectiveConnectionType);\n\n    Logger.verbose('Updated user effective connection', { requesterUserId, effectiveConnectionType });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method setUserEffectiveConnectionType ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function toggleUserLock(userId, lock) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'LockUserInMeetingCmdMsg';\n\n    const { meetingId, requesterUserId: lockedBy } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(lockedBy, String);\n    check(userId, String);\n    check(lock, Boolean);\n\n    const payload = {\n      lockedBy,\n      userId,\n      lock,\n    };\n\n    Logger.verbose('Updated lock status for user', {\n      meetingId, userId, lock, lockedBy,\n    });\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, lockedBy, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method toggleUserLock ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport Users from '/imports/api/users';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function userActivitySign() {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'UserActivitySignCmdMsg';\n    const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(userId, String);\n\n    const payload = {\n      userId,\n    };\n\n    const selector = {\n      userId,\n    };\n\n    const modifier = {\n      $set: {\n        inactivityCheck: false,\n      },\n    };\n\n    Users.update(selector, modifier); // TODO-- we should move this to a modifier\n\n    Logger.info(`User ${userId} sent a activity sign for meeting ${meetingId}`);\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method userActivitySign ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Users from '/imports/api/users';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\n\nexport default function userLeaving(meetingId, userId, connectionId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'UserLeaveReqMsg';\n\n    check(userId, String);\n\n    const selector = {\n      meetingId,\n      userId,\n    };\n\n    const user = Users.findOne(selector);\n\n    if (!user) {\n      Logger.info(`Skipping userLeaving. Could not find ${userId} in ${meetingId}`);\n      return;\n    }\n\n    const auth = AuthTokenValidation.findOne({\n      meetingId,\n      userId,\n    }, { sort: { updatedAt: -1 } });\n\n    // If the current user connection is not the same that triggered the leave we skip\n    if (auth?.connectionId !== connectionId) {\n      Logger.info(`Skipping userLeaving. User connectionId=${user.connectionId} is different from requester connectionId=${connectionId}`);\n      return false;\n    }\n\n    const payload = {\n      userId,\n      sessionId: meetingId,\n      loggedOut: user.loggedOut || false,\n    };\n\n    ClientConnections.removeClientConnection(`${meetingId}--${userId}`, connectionId);\n\n    Logger.info(`User '${userId}' is leaving meeting '${meetingId}'`);\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method userLeaving ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\nimport { check } from 'meteor/check';\n\nexport default function userLeftMeeting() { // TODO-- spread the code to method/modifier/handler\n  try {\n    // so we don't update the db in a method\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const selector = {\n      meetingId,\n      userId: requesterUserId,\n    };\n\n    const numberAffected = Users.update(selector, { $set: { loggedOut: true } });\n\n    if (numberAffected) {\n      Logger.info(`user left id=${requesterUserId} meeting=${meetingId}`);\n      ClientConnections.removeClientConnection(this.userId, this.connection.id);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method userLeftMeeting ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport upsertValidationState from '/imports/api/auth-token-validation/server/modifiers/upsertValidationState';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport pendingAuthenticationsStore from '../store/pendingAuthentications';\n\nconst AUTH_TIMEOUT = 120000;\n\nasync function validateAuthToken(meetingId, requesterUserId, requesterToken, externalId) {\n  let setTimeoutRef = null;\n  const userValidation = await new Promise((res, rej) => {\n    const observeFunc = (obj) => {\n      if (obj.validationStatus === ValidationStates.VALIDATED) {\n        clearTimeout(setTimeoutRef);\n        return res(obj);\n      }\n      if (obj.validationStatus === ValidationStates.INVALID) {\n        clearTimeout(setTimeoutRef);\n        return res(obj);\n      }\n    };\n    const authTokenValidationObserver = AuthTokenValidation.find({\n      connectionId: this.connection.id,\n    }).observe({\n      added: observeFunc,\n      changed: observeFunc,\n    });\n\n    setTimeoutRef = setTimeout(() => {\n      authTokenValidationObserver.stop();\n      rej();\n    }, AUTH_TIMEOUT);\n\n    try {\n      const REDIS_CONFIG = Meteor.settings.private.redis;\n      const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n      const EVENT_NAME = 'ValidateAuthTokenReqMsg';\n\n      Logger.debug('ValidateAuthToken method called', { meetingId, requesterUserId, requesterToken, externalId });\n\n      if (!meetingId) return false;\n\n      // Store reference of methodInvocationObject ( to postpone the connection userId definition )\n      pendingAuthenticationsStore.add(meetingId, requesterUserId, requesterToken, this);\n      upsertValidationState(\n        meetingId,\n        requesterUserId,\n        ValidationStates.VALIDATING,\n        this.connection.id,\n      );\n\n      const payload = {\n        userId: requesterUserId,\n        authToken: requesterToken,\n      };\n\n      Logger.info(`User '${requesterUserId}' is trying to validate auth token for meeting '${meetingId}' from connection '${this.connection.id}'`);\n\n      return RedisPubSub.publishUserMessage(\n        CHANNEL,\n        EVENT_NAME,\n        meetingId,\n        requesterUserId,\n        payload,\n      );\n    } catch (err) {\n      const errMsg = `Exception while invoking method validateAuthToken ${err}`;\n      Logger.error(errMsg);\n      rej(errMsg);\n      clearTimeout(setTimeoutRef);\n      authTokenValidationObserver.stop();\n    }\n  });\n  return userValidation;\n}\n\nexport default validateAuthToken;\n","import { check } from 'meteor/check';\nimport addUser from '/imports/api/users/server/modifiers/addUser';\n\nexport default function addDialInUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, Object);\n\n  const USER_CONFIG = Meteor.settings.public.user;\n  const ROLE_VIEWER = USER_CONFIG.role_viewer;\n\n  const { intId, callerName } = voiceUser;\n\n  const voiceOnlyUser = {\n    intId,\n    extId: intId, // TODO\n    name: callerName,\n    role: ROLE_VIEWER.toLowerCase(),\n    guest: true,\n    authed: true,\n    waitingForAcceptance: false,\n    guestStatus: 'ALLOW',\n    emoji: 'none',\n    presenter: false,\n    locked: false, // TODO\n    avatar: '',\n    pin: false,\n    clientType: 'dial-in-user',\n  };\n\n  return addUser(meetingId, voiceOnlyUser);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Meetings from '/imports/api/meetings';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport addUserPsersistentData from '/imports/api/users-persistent-data/server/modifiers/addUserPersistentData';\nimport stringHash from 'string-hash';\nimport flat from 'flat';\n\nimport addVoiceUser from '/imports/api/voice-users/server/modifiers/addVoiceUser';\n\nconst COLOR_LIST = [\n  '#7b1fa2', '#6a1b9a', '#4a148c', '#5e35b1', '#512da8', '#4527a0',\n  '#311b92', '#3949ab', '#303f9f', '#283593', '#1a237e', '#1976d2', '#1565c0',\n  '#0d47a1', '#0277bd', '#01579b',\n];\n\nexport default function addUser(meetingId, userData) {\n  const user = userData;\n\n  check(meetingId, String);\n\n  check(user, {\n    intId: String,\n    extId: String,\n    name: String,\n    role: String,\n    guest: Boolean,\n    authed: Boolean,\n    waitingForAcceptance: Match.Maybe(Boolean),\n    guestStatus: String,\n    emoji: String,\n    presenter: Boolean,\n    locked: Boolean,\n    avatar: String,\n    pin: Boolean,\n    clientType: String,\n  });\n\n  const userId = user.intId;\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n  const Meeting = Meetings.findOne({ meetingId });\n\n  /* While the akka-apps dont generate a color we just pick one\n    from a list based on the userId */\n  const color = COLOR_LIST[stringHash(user.intId) % COLOR_LIST.length];\n\n  const userInfos = {\n    meetingId,\n    sortName: user.name.trim().toLowerCase(),\n    color,\n    mobile: false,\n    breakoutProps: {\n      isBreakoutUser: Meeting.meetingProp.isBreakout,\n      parentId: Meeting.breakoutProps.parentId,\n    },\n    effectiveConnectionType: null,\n    inactivityCheck: false,\n    responseDelay: 0,\n    loggedOut: false,\n    left: false,\n    ...flat(user),\n  };\n\n  const modifier = {\n    $set: userInfos,\n  };\n  addUserPsersistentData(userInfos);\n  // Only add an empty VoiceUser if there isn't one already and if the user coming in isn't a\n  // dial-in user. We want to avoid overwriting good data\n  if (user.clientType !== 'dial-in-user' && !VoiceUsers.findOne({ meetingId, intId: userId })) {\n    addVoiceUser(meetingId, {\n      voiceUserId: '',\n      intId: userId,\n      callerName: user.name,\n      callerNum: '',\n      muted: false,\n      talking: false,\n      callingWith: '',\n      listenOnly: false,\n      voiceConf: '',\n      joined: false,\n    });\n  }\n\n  /**\n   * Add a verification to check if the user was set as presenter.\n   * In some cases the user information is set after the presenter is set\n   * causing the first moderator to join a meeting be marked as presenter: false\n   */\n  const partialUser = Users.findOne(selector);\n\n  if (partialUser?.presenter) {\n    modifier.$set.presenter = true;\n  }\n\n  try {\n    const { insertedId } = Users.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added user id=${userId} meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted user id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding user to collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function changePin(meetingId, userId, pin, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      pin,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Change pin=${pin} id=${userId} meeting=${meetingId} changedBy=${changedBy}`);\n    }\n  } catch (err) {\n    Logger.error(`Change pin error: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function changePresenter(presenter, userId, meetingId, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      presenter,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed presenter=${presenter} id=${userId} meeting=${meetingId}`\n        + `${changedBy ? ` changedBy=${changedBy}` : ''}`);\n    }\n  } catch (err) {\n    Logger.error(`Change presenter error: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport updateRole from '/imports/api/users-persistent-data/server/modifiers/updateRole';\nimport Users from '/imports/api/users';\n\nexport default function changeRole(role, userId, meetingId, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      role,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      updateRole(userId, meetingId, role);\n      Logger.info(`Changed user role=${role} id=${userId} meeting=${meetingId}`\n        + `${changedBy ? ` changedBy=${changedBy}` : ''}`);\n    }\n  } catch (err) {\n    Logger.error(`Changed user role: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users/index';\n\nexport default function clearUsers(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = Users.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared Users (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error clearing Users (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = Users.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared Users (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error clearing Users (all). ${err}`);\n    }\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function createDummyUser(meetingId, userId, authToken) {\n  check(meetingId, String);\n  check(userId, String);\n  check(authToken, String);\n\n  const User = Users.findOne({ meetingId, userId });\n  if (User) {\n    throw new Meteor.Error('existing-user', 'Tried to create a dummy user for an existing user');\n  }\n\n  const doc = {\n    meetingId,\n    userId,\n    authToken,\n    clientType: 'HTML5',\n    validated: null,\n    left: false,\n  };\n\n  try {\n    const insertedId = Users.insert(doc);\n\n    if (insertedId) {\n      Logger.info(`Created dummy user id=${userId} token=${authToken} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Creating dummy user to collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport VideoStreams from '/imports/api/video-streams';\nimport Logger from '/imports/startup/server/logger';\nimport setloggedOutStatus from '/imports/api/users-persistent-data/server/modifiers/setloggedOutStatus';\nimport clearUserInfoForRequester from '/imports/api/users-infos/server/modifiers/clearUserInfoForRequester';\nimport ClientConnections from '/imports/startup/server/ClientConnections';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport userEjected from '/imports/api/users/server/modifiers/userEjected';\nimport VoiceUsers from '/imports/api/voice-users/';\n\nconst disconnectUser = (meetingId, userId) => {\n  const sessionUserId = `${meetingId}--${userId}`;\n  ClientConnections.removeClientConnection(sessionUserId);\n\n  const serverSessions = Meteor.server.sessions;\n  const interable = serverSessions.values();\n\n  for (const session of interable) {\n    if (session.userId === sessionUserId) {\n      Logger.info(`Removed session id=${userId} meeting=${meetingId}`);\n      session.close();\n    }\n  }\n};\n\nexport default function removeUser(body, meetingId) {\n  const { intId: userId, reasonCode } = body;\n  check(meetingId, String);\n  check(userId, String);\n\n  try {\n    const selector = {\n      meetingId,\n      userId,\n    };\n\n    // we don't want to fully process the redis message in frontend\n    // since the backend is supposed to update Mongo\n    if ((process.env.BBB_HTML5_ROLE !== 'frontend')) {\n      if (body.eject) {\n        userEjected(meetingId, userId, reasonCode);\n      }\n\n      setloggedOutStatus(userId, meetingId, true);\n      VideoStreams.remove({ meetingId, userId });\n\n      clearUserInfoForRequester(meetingId, userId);\n\n      const currentUser = UsersPersistentData.findOne({ userId, meetingId });\n      const hasMessages = currentUser?.shouldPersist?.hasMessages;\n      const hasConnectionStatus = currentUser?.shouldPersist?.hasConnectionStatus;\n\n      if (!hasMessages && !hasConnectionStatus) {\n        UsersPersistentData.remove(selector);\n      }\n      Users.remove(selector);\n      VoiceUsers.remove({ intId: userId, meetingId });\n    }\n\n    if (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n      // Wait for user removal and then kill user connections and sessions\n      const queryCurrentUser = Users.find(selector);\n      if (queryCurrentUser.count() === 0) {\n        disconnectUser(meetingId, userId);\n      } else {\n        const queryUserObserver = queryCurrentUser.observeChanges({\n          removed() {\n            disconnectUser(meetingId, userId);\n            queryUserObserver.stop();\n          },\n        });\n      }\n    }\n\n    Logger.info(`Removed user id=${userId} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Removing user from Users collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function setMobile(meetingId, userId) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      mobile: true,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Assigned mobile user id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Assigning mobile user: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setUserEffectiveConnectionType(meetingId, userId, effectiveConnectionType) {\n  check(meetingId, String);\n  check(userId, String);\n  check(effectiveConnectionType, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    effectiveConnectionType: { $ne: effectiveConnectionType },\n  };\n\n  const modifier = {\n    $set: {\n      effectiveConnectionType,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated user ${userId} effective connection to ${effectiveConnectionType} in meeting ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Updating user ${userId}: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport clearUserInfoForRequester from '/imports/api/users-infos/server/modifiers/clearUserInfoForRequester';\n\nexport default function userEjected(meetingId, userId, ejectedReason) {\n  check(meetingId, String);\n  check(userId, String);\n  check(ejectedReason, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      ejected: true,\n      ejectedReason,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      clearUserInfoForRequester(meetingId, userId);\n      Logger.info(`Ejected user id=${userId} meeting=${meetingId} reason=${ejectedReason}`);\n    }\n  } catch (err) {\n    Logger.error(`Ejecting user from collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function userInactivityInspect(userId, responseDelay) {\n  check(userId, String);\n  check(responseDelay, Match.Integer);\n\n  const selector = {\n    userId,\n    inactivityCheck: false,\n  };\n\n  const modifier = {\n    $set: {\n      inactivityCheck: true,\n      responseDelay,\n    },\n  };\n\n  try {\n    const { numberAffected } = Users.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Updated user ${userId} with inactivity inspect`);\n    }\n  } catch (err) {\n    Logger.error(`Inactivity check for user ${userId}: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function userLeftFlagUpdated(meetingId, userId, left) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      left,\n    },\n  };\n\n  try {\n    const numberAffected = Users.update(selector, modifier);\n    if (numberAffected) {\n      Logger.info(`Updated user ${userId} with left flag as ${left}`);\n    }\n  } catch (err) {\n    Logger.error(`Changed user role: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\n\nclass PendingAuthentitcations {\n  constructor() {\n    Logger.debug('PendingAuthentitcations :: constructor');\n    this.store = [];\n  }\n\n  generateKey(meetingId, userId, authToken) {\n    // Protect against separator injection\n    meetingId = meetingId.replace(/ /g, '');\n    userId = userId.replace(/ /g, '');\n    authToken = authToken.replace(/ /g, '');\n\n    // Space separated key\n    return `${meetingId} ${userId} ${authToken}`;\n  }\n\n  add(meetingId, userId, authToken, methodInvocationObject) {\n    Logger.debug('PendingAuthentitcations :: add', { meetingId, userId, authToken });\n    this.store.push({\n      key: this.generateKey(meetingId, userId, authToken),\n      meetingId,\n      userId,\n      authToken,\n      methodInvocationObject,\n    });\n  }\n\n  take(meetingId, userId, authToken) {\n    const key = this.generateKey(meetingId, userId, authToken);\n    Logger.debug('PendingAuthentitcations :: take', {\n      key, meetingId, userId, authToken,\n    });\n\n    // find matches\n    const matches = this.store.filter(e => e.key === key);\n    // remove matches (if any)\n    if (matches.length) {\n      this.store = this.store.filter(e => e.key !== key);\n    }\n\n    // return matches\n    return matches;\n  }\n}\nexport default new PendingAuthentitcations();\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleRemoveUser from './handlers/removeUser';\nimport handleUserJoined from './handlers/userJoined';\nimport handleUserLeftFlagUpdated from './handlers/userLeftFlagUpdated';\nimport handleValidateAuthToken from './handlers/validateAuthToken';\nimport handlePresenterAssigned from './handlers/presenterAssigned';\nimport handleEmojiStatus from './handlers/emojiStatus';\nimport handleChangeRole from './handlers/changeRole';\nimport handleUserPinChanged from './handlers/userPinChanged';\nimport handleUserInactivityInspect from './handlers/userInactivityInspect';\n\nRedisPubSub.on('PresenterAssignedEvtMsg', handlePresenterAssigned);\nRedisPubSub.on('UserJoinedMeetingEvtMsg', handleUserJoined);\nRedisPubSub.on('UserLeftMeetingEvtMsg', handleRemoveUser);\nRedisPubSub.on('ValidateAuthTokenRespMsg', handleValidateAuthToken);\nRedisPubSub.on('UserEmojiChangedEvtMsg', handleEmojiStatus);\nRedisPubSub.on('UserRoleChangedEvtMsg', handleChangeRole);\nRedisPubSub.on('UserLeftFlagUpdatedEvtMsg', handleUserLeftFlagUpdated);\nRedisPubSub.on('UserPinStateChangedEvtMsg', handleUserPinChanged);\nRedisPubSub.on('UserInactivityInspectMsg', handleUserInactivityInspect);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport validateAuthToken from './methods/validateAuthToken';\nimport setEmojiStatus from './methods/setEmojiStatus';\nimport setMobileUser from './methods/setMobileUser';\nimport assignPresenter from './methods/assignPresenter';\nimport changeRole from './methods/changeRole';\nimport removeUser from './methods/removeUser';\nimport toggleUserLock from './methods/toggleUserLock';\nimport setUserEffectiveConnectionType from './methods/setUserEffectiveConnectionType';\nimport userActivitySign from './methods/userActivitySign';\nimport userLeftMeeting from './methods/userLeftMeeting';\nimport changePin from './methods/changePin';\nimport setRandomUser from './methods/setRandomUser';\n\nMeteor.methods({\n  setEmojiStatus,\n  setMobileUser,\n  assignPresenter,\n  changeRole,\n  removeUser,\n  validateAuthToken,\n  toggleUserLock,\n  setUserEffectiveConnectionType,\n  userActivitySign,\n  userLeftMeeting,\n  changePin,\n  setRandomUser,\n});\n","import Users from '/imports/api/users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport { extractCredentials, publicationSafeGuard } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction currentUser() {\n  if (!this.userId) {\n    Mongo.Collection._publishCursor(Users.find({ meetingId: '' }), this, 'current-user');\n    return this.ready();\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n    intId: { $exists: true },\n  };\n\n  const options = {\n    fields: {\n      user: false,\n      authToken: false, // Not asking for authToken from client side but also not exposing it\n    },\n  };\n  Mongo.Collection._publishCursor(Users.find(selector, options), this, 'current-user');\n  return this.ready();\n}\n\nfunction publishCurrentUser(...args) {\n  const boundUsers = currentUser.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('current-user', publishCurrentUser);\n\nfunction users() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing Users was requested by unauth connection ${this.connection.id}`);\n    return Users.find({ meetingId: '' });\n  }\n\n  if (!this.userId) {\n    return Users.find({ meetingId: '' });\n  }\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug(`Publishing Users for ${meetingId} ${userId}`);\n\n  const selector = {\n    $or: [\n      { meetingId },\n    ],\n    intId: { $exists: true },\n    left: false,\n  };\n\n  const User = Users.findOne({ userId, meetingId }, { fields: { role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    selector.$or.push({\n      'breakoutProps.isBreakoutUser': true,\n      'breakoutProps.parentId': meetingId,\n    });\n    // Monitor this publication and stop it when user is not a moderator anymore\n    const comparisonFunc = () => {\n      const user = Users.findOne({ userId, meetingId }, { fields: { role: 1, userId: 1 } });\n      const condition = user.role === ROLE_MODERATOR;\n      if (!condition) {\n        Logger.info(`conditions aren't filled anymore in publication ${this._name}: \n        user.role === ROLE_MODERATOR :${condition}, user.role: ${user.role} ROLE_MODERATOR: ${ROLE_MODERATOR}`);\n      }\n\n      return condition;\n    };\n    publicationSafeGuard(comparisonFunc, this);\n  }\n\n  const options = {\n    fields: {\n      authToken: false,\n    },\n  };\n\n  Logger.debug('Publishing Users', { meetingId, userId });\n\n  return Users.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundUsers = users.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('users', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst Users = new Mongo.Collection('users', collectionOptions);\nexport const CurrentUser = new Mongo.Collection('current-user', { connection: null });\n\nif (Meteor.isServer) {\n  // types of queries for the users:\n  // 1. meetingId\n  // 2. meetingId, userId\n  // { connection: Meteor.isClient ? null : true }\n  Users._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default Users;\n","import { check } from 'meteor/check';\nimport addUserInfo from '../modifiers/addUserInfo';\n\nexport default function handleUserInformation({ header, body }) {\n  check(body, Object);\n  check(header, Object);\n\n  const { userInfo } = body;\n  const { userId, meetingId } = header;\n\n  check(userInfo, Array);\n  check(userId, String);\n  check(meetingId, String);\n\n  return addUserInfo(userInfo, userId, meetingId);\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nexport default function removeUserInformation() {\n  try {\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const selector = {\n      meetingId,\n      requesterUserId,\n    };\n\n    const numberAffected = UserInfos.remove(selector);\n\n    if (numberAffected) {\n      Logger.info(`Removed user information: requester id=${requesterUserId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method removeUserInformation ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function getUserInformation(externalUserId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toThirdParty;\n    const EVENT_NAME = 'LookUpUserReqMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(externalUserId, String);\n\n    const payload = {\n      externalUserId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method getUserInformation ${err.stack}`);\n  }\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserInfo(userInfo, requesterUserId, meetingId) {\n  const info = {\n    meetingId,\n    requesterUserId,\n    userInfo,\n  };\n\n  try {\n    const numberAffected = UserInfos.insert(info);\n\n    if (numberAffected) {\n      Logger.info(`Added user information: requester id=${requesterUserId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding user information to collection: ${err}`);\n  }\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersInfo(meetingId) {\n  try {\n    const numberAffected = UserInfos.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Infos (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing User Infos (${meetingId}). ${err}`);\n  }\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersInfoForRequester(meetingId, requesterUserId) {\n  try {\n    const numberAffected = UserInfos.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Infos requested by user=${requesterUserId}`);\n    }\n  } catch (err) {\n    Logger.info(`Error on clearing User Infos requested by user=${requesterUserId}. ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleUserInformation from './handlers/userInformation';\n\nRedisPubSub.on('LookUpUserRespMsg', handleUserInformation);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport requestUserInformation from './methods/requestUserInformation';\nimport removeUserInformation from './methods/removeUserInformation';\n\nMeteor.methods({\n  requestUserInformation,\n  removeUserInformation,\n});\n","import { Meteor } from 'meteor/meteor';\nimport UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction userInfos() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing UserInfos was requested by unauth connection ${this.connection.id}`);\n    return UserInfos.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId: requesterUserId } = tokenValidation;\n\n  Logger.debug('Publishing UserInfos requested', { meetingId, requesterUserId });\n\n  return UserInfos.find({ meetingId, requesterUserId });\n}\n\nfunction publish(...args) {\n  const boundUserInfos = userInfos.bind(this);\n  return boundUserInfos(...args);\n}\n\nMeteor.publish('users-infos', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst UserInfos = new Mongo.Collection('users-infos', collectionOptions);\n\nif (Meteor.isServer) {\n  UserInfos._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default UserInfos;\n","import { check } from 'meteor/check';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserPersistentData(user) {\n  check(user, {\n    meetingId: String,\n    sortName: String,\n    color: String,\n    mobile: Boolean,\n    breakoutProps: Object,\n    inactivityCheck: Boolean,\n    responseDelay: Number,\n    loggedOut: Boolean,\n    intId: String,\n    extId: String,\n    name: String,\n    pin: Boolean,\n    role: String,\n    guest: Boolean,\n    authed: Boolean,\n    waitingForAcceptance: Match.Maybe(Boolean),\n    guestStatus: String,\n    emoji: String,\n    presenter: Boolean,\n    locked: Boolean,\n    avatar: String,\n    clientType: String,\n    left: Boolean,\n    effectiveConnectionType: null,\n  });\n\n  const {\n    intId,\n    extId,\n    meetingId,\n    name,\n    role,\n    token,\n    avatar,\n    guest,\n    color,\n    pin,\n  } = user;\n\n  const userData = {\n    userId: intId,\n    extId,\n    meetingId,\n    name,\n    role,\n    token,\n    avatar,\n    guest,\n    color,\n    pin,\n    loggedOut: false,\n  };\n\n  const selector = {\n    userId: intId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: userData,\n  };\n\n  try {\n    const { insertedId } = UsersPersistentData.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Added user id=${intId} to user persistent Data: meeting=${meetingId}`);\n    } else {\n      Logger.info(`Upserted user id=${intId} to user persistent Data: meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Adding note to the collection: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\n\nexport default function changeHasConnectionStatus(hasConnectionStatus, userId, meetingId) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      'shouldPersist.hasConnectionStatus': hasConnectionStatus,\n    },\n  };\n\n  try {\n    const numberAffected = UsersPersistentData.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed hasConnectionStatus=${hasConnectionStatus} id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Change hasConnectionStatus error: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\n\nexport default function changeHasMessages(hasMessages, userId, meetingId) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      'shouldPersist.hasMessages': hasMessages,\n    },\n  };\n\n  try {\n    const numberAffected = UsersPersistentData.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed hasMessages=${hasMessages} id=${userId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Change hasMessages error: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport UsersPersistentData from '/imports/api/users-persistent-data/index';\n\nexport default function clearUsersPersistentData(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = UsersPersistentData.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared users persistent data (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error clearing users persistent data (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = UsersPersistentData.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared users persistent data (all)');\n      }\n    } catch (err) {\n      Logger.error(`Error clearing users persistent data (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setloggedOutStatus(userId, meetingId, status = true) {\n  check(userId, String);\n  check(meetingId, String);\n  check(status, Boolean);\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      loggedOut: status,\n    },\n  };\n\n  try {\n    UsersPersistentData.update(selector, modifier);\n  } catch (err) {\n    Logger.error(`Setting users persistent data's logged out status to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function updateRole(userId, meetingId, role) {\n  check(userId, String);\n  check(meetingId, String);\n  check(role, String);\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      role,\n    },\n  };\n\n  try {\n    UsersPersistentData.update(selector, modifier);\n  } catch (err) {\n    Logger.error(`Updating users persistent data's role to the collection: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport UsersPersistentData from '/imports/api/users-persistent-data';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function updateUserBreakoutRoom(meetingId, breakoutId, users) {\n  check(meetingId, String);\n  check(breakoutId, String);\n  check(users, Array);\n\n  const lastBreakoutRoom = Breakouts.findOne({ breakoutId }, {\n    fields: {\n      isDefaultName: 1,\n      sequence: 1,\n      shortName: 1,\n    },\n  });\n\n  users.forEach((user) => {\n    const userId = user.id.substr(0, user.id.lastIndexOf('-'));\n\n    const selector = {\n      userId,\n      meetingId,\n    };\n\n    const modifier = {\n      $set: {\n        lastBreakoutRoom,\n      },\n    };\n\n    try {\n      UsersPersistentData.update(selector, modifier);\n    } catch (err) {\n      Logger.error(`Updating users persistent data's lastBreakoutRoom to the collection: ${err}`);\n    }\n  });\n}\n","import './publishers';\n","import UsersPersistentData from '/imports/api/users-persistent-data';\nimport { Meteor } from 'meteor/meteor';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Users from '/imports/api/users';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction usersPersistentData() {\n  if (!this.userId) {\n    return UsersPersistentData.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const options = {};\n\n  const User = Users.findOne({ userId: requesterUserId, meetingId }, { fields: { role: 1 } });\n  if (!User || User.role !== ROLE_MODERATOR) {\n    options.fields = {\n      lastBreakoutRoom: false,\n    };\n\n    // viewers are allowed to see other users' data if:\n    // user is logged in or user sent a message in chat\n    const viewerSelector = {\n      meetingId,\n      $or: [\n        {\n          'shouldPersist.hasMessages': true,\n        },\n        {\n          loggedOut: false,\n        },\n      ],\n    };\n    return UsersPersistentData.find(viewerSelector, options);\n  }\n  return UsersPersistentData.find(selector, options);\n}\n\nfunction publishUsersPersistentData(...args) {\n  const boundUsers = usersPersistentData.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('users-persistent-data', publishUsersPersistentData);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst UsersPersistentData = new Mongo.Collection('users-persistent-data', collectionOptions);\n\nif (Meteor.isServer) {\n  UsersPersistentData._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default UsersPersistentData;\n","import { check } from 'meteor/check';\nimport addUserSetting from '/imports/api/users-settings/server/modifiers/addUserSetting';\nimport logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst oldParameters = {\n  askForFeedbackOnLogout: 'bbb_ask_for_feedback_on_logout',\n  autoJoin: 'bbb_auto_join_audio',\n  autoShareWebcam: 'bbb_auto_share_webcam',\n  autoSwapLayout: 'bbb_auto_swap_layout',\n  clientTitle: 'bbb_client_title',\n  customStyle: 'bbb_custom_style',\n  customStyleUrl: 'bbb_custom_style_url',\n  displayBrandingArea: 'bbb_display_branding_area',\n  enableVideo: 'bbb_enable_video',\n  forceListenOnly: 'bbb_force_listen_only',\n  hidePresentation: 'bbb_hide_presentation',\n  listenOnlyMode: 'bbb_listen_only_mode',\n  multiUserPenOnly: 'bbb_multi_user_pen_only',\n  multiUserTools: 'bbb_multi_user_tools',\n  presenterTools: 'bbb_presenter_tools',\n  shortcuts: 'bbb_shortcuts',\n  skipCheck: 'bbb_skip_check_audio',\n};\n\nconst oldParametersKeys = Object.keys(oldParameters);\n\nconst currentParameters = [\n  // APP\n  'bbb_ask_for_feedback_on_logout',\n  'bbb_override_default_locale',\n  'bbb_auto_join_audio',\n  'bbb_client_title',\n  'bbb_force_listen_only',\n  'bbb_listen_only_mode',\n  'bbb_skip_check_audio',\n  'bbb_skip_check_audio_on_first_join',\n  // BRANDING\n  'bbb_display_branding_area',\n  // SHORTCUTS\n  'bbb_shortcuts',\n  // KURENTO\n  'bbb_auto_share_webcam',\n  'bbb_preferred_camera_profile',\n  'bbb_enable_video',\n  'bbb_record_video',\n  'bbb_skip_video_preview',\n  'bbb_skip_video_preview_on_first_join',\n  'bbb_mirror_own_webcam',\n  // PRESENTATION\n  'bbb_force_restore_presentation_on_new_events',\n  // WHITEBOARD\n  'bbb_multi_user_pen_only',\n  'bbb_presenter_tools',\n  'bbb_multi_user_tools',\n  // SKINNING/THEMMING\n  'bbb_custom_style',\n  'bbb_custom_style_url',\n  // LAYOUT\n  'bbb_auto_swap_layout',\n  'bbb_hide_presentation',\n  'bbb_show_participants_on_login',\n  'bbb_show_public_chat_on_login',\n  'bbb_hide_actions_bar',\n  'bbb_hide_nav_bar',\n];\n\nfunction valueParser(val) {\n  try {\n    const parsedValue = JSON.parse(val.toLowerCase().trim());\n    return parsedValue;\n  } catch (error) {\n    logger.warn(`addUserSettings:Parameter ${val} could not be parsed (was not json)`);\n    return val;\n  }\n}\n\nexport default function addUserSettings(settings) {\n  try {\n    check(settings, [Object]);\n\n    const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(userId, String);\n\n    let parameters = {};\n\n    settings.forEach((el) => {\n      const settingKey = Object.keys(el).shift();\n      const normalizedKey = settingKey.trim();\n\n      if (currentParameters.includes(normalizedKey)) {\n        if (!Object.keys(parameters).includes(normalizedKey)) {\n          parameters = {\n            [normalizedKey]: valueParser(el[settingKey]),\n            ...parameters,\n          };\n        } else {\n          parameters[normalizedKey] = el[settingKey];\n        }\n        return;\n      }\n\n      if (oldParametersKeys.includes(normalizedKey)) {\n        const matchingNewKey = oldParameters[normalizedKey];\n        if (!Object.keys(parameters).includes(matchingNewKey)) {\n          parameters = {\n            [matchingNewKey]: valueParser(el[settingKey]),\n            ...parameters,\n          };\n        }\n        return;\n      }\n\n      logger.warn(`Parameter ${normalizedKey} not handled`);\n    });\n\n    const settingsAdded = [];\n    Object.entries(parameters).forEach((el) => {\n      const setting = el[0];\n      const value = el[1];\n      settingsAdded.push(addUserSetting(meetingId, userId, setting, value));\n    });\n\n    return settingsAdded;\n  } catch (err) {\n    logger.error(`Exception while invoking method addUserSettings ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserSetting(meetingId, userId, setting, value) {\n  check(meetingId, String);\n  check(userId, String);\n  check(setting, String);\n  check(value, Match.Any);\n\n  const selector = {\n    meetingId,\n    userId,\n    setting,\n  };\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      setting,\n      value,\n    },\n  };\n\n  try {\n    const { numberAffected } = UserSettings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.verbose('Upserted user setting', { meetingId, userId, setting });\n    }\n  } catch (err) {\n    Logger.error(`Adding user setting to collection: ${err}`);\n  }\n}\n","import UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersSettings(meetingId) {\n  try {\n    const numberAffected = UserSettings.remove({ meetingId });\n\n    if (numberAffected) {\n      Logger.info(`Cleared User Settings (${meetingId})`);\n    }\n  } catch (err) {\n    Logger.error(`Error on clearing User Settings (${meetingId}). ${err}`);\n  }\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addUserSettings from './methods/addUserSettings';\n\nMeteor.methods({\n  addUserSettings,\n});\n","import { Meteor } from 'meteor/meteor';\nimport UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction userSettings() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing UserSettings was requested by unauth connection ${this.connection.id}`);\n    return UserSettings.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing UserSettings', { meetingId, userId });\n\n  return UserSettings.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundUserSettings = userSettings.bind(this);\n  return boundUserSettings(...args);\n}\n\nMeteor.publish('users-settings', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst UserSettings = new Mongo.Collection('users-settings', collectionOptions);\n\nif (Meteor.isServer) {\n  UserSettings._ensureIndex({\n    meetingId: 1, userId: 1,\n  });\n}\n\nexport default UserSettings;\n","import { check } from 'meteor/check';\nimport floorChanged from '../modifiers/floorChanged';\n\nexport default function handleFloorChanged({ header, body }, meetingId) {\n  const { intId, floor, lastFloorTime } = body;\n  check(meetingId, String);\n  check(intId, String);\n  check(floor, Boolean);\n  check(lastFloorTime, String);\n\n  return floorChanged(meetingId, intId, floor, lastFloorTime);\n}\n","import { check } from 'meteor/check';\nimport changePin from '../modifiers/changePin';\n\nexport default function userPinChanged({ body }, meetingId) {\n  const { userId, pin, changedBy } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(pin, Boolean);\n  check(changedBy, String);\n\n  return changePin(meetingId, userId, pin, changedBy);\n}\n","import { check } from 'meteor/check';\nimport sharedWebcam from '../modifiers/sharedWebcam';\nimport { isValidStream } from '/imports/api/video-streams/server/helpers';\n\nexport default function handleUserSharedHtml5Webcam({ header, body }, meetingId) {\n  const { userId, stream } = body;\n\n  check(header, Object);\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  if (!isValidStream(stream)) return false;\n\n  return sharedWebcam(meetingId, userId, stream);\n}\n","import { check } from 'meteor/check';\nimport unsharedWebcam from '../modifiers/unsharedWebcam';\nimport { isValidStream } from '/imports/api/video-streams/server/helpers';\n\nexport default function handleUserUnsharedHtml5Webcam({ header, body }, meetingId) {\n  const { userId, stream } = body;\n\n  check(header, Object);\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  if (!isValidStream(stream)) return false;\n\n  return unsharedWebcam(meetingId, userId, stream);\n}\n","import { check } from 'meteor/check';\nimport { addWebcamSync } from '../modifiers/sharedWebcam';\nimport VideoStreams from '/imports/api/video-streams/';\nimport updatedVideoStream from '../modifiers/updatedVideoStream';\nimport unsharedWebcam from '../modifiers/unsharedWebcam';\n\nexport default function handleWebcamSync({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n  const { webcamListSync } = body;\n  check(webcamListSync, Array);\n\n  const streamsIds = webcamListSync.map((webcam) => webcam.stream);\n\n  const webcamStreamsToUpdate = VideoStreams.find({\n    meetingId,\n    stream: { $in: streamsIds },\n  }, {\n    fields: {\n      stream: 1,\n    },\n  }).fetch()\n    .map((m) => m.stream);\n\n  webcamListSync.forEach((webcam) => {\n    if (webcamStreamsToUpdate.indexOf(webcam.stream) >= 0) {\n      // stream already exist, then update\n      updatedVideoStream(meetingId, webcam);\n    } else {\n      // stream doesn't exist yet, then add it\n      addWebcamSync(meetingId, webcam);\n    }\n  });\n\n  // removing extra video streams already existing in Mongo\n  const videoStreamsToRemove = VideoStreams.find({\n    meetingId,\n    stream: { $nin: streamsIds },\n  }, {\n    fields: {\n      stream: 1,\n      userId: 1,\n    },\n  }).fetch();\n\n  videoStreamsToRemove\n    .forEach((videoStream) => unsharedWebcam(meetingId, videoStream.userId, videoStream.stream));\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function ejectUserCameras(userId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'EjectUserCamerasCmdMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(userId, String);\n\n    Logger.info(`Requesting ejection of cameras: userToEject=${userId} requesterUserId=${requesterUserId}`);\n\n    const payload = {\n      userId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method ejectUserCameras ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userShareWebcam(stream) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'UserBroadcastCamStartMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(stream, String);\n\n    Logger.info(`user sharing webcam: ${meetingId} ${requesterUserId}`);\n\n    // const actionName = 'joinVideo';\n    /* TODO throw an error if user has no permission to share webcam\n    if (!isAllowedTo(actionName, credentials)) {\n      throw new Meteor.Error('not-allowed', `You are not allowed to share webcam`);\n    } */\n\n    const payload = {\n      stream,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method userShareWebcam ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userUnshareWebcam(stream) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'UserBroadcastCamStopMsg';\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(stream, String);\n\n    Logger.info(`user unsharing webcam: ${meetingId} ${requesterUserId}`);\n\n    // const actionName = 'joinVideo';\n    /* TODO throw an error if user has no permission to share webcam\n    if (!isAllowedTo(actionName, credentials)) {\n      throw new Meteor.Error('not-allowed', `You are not allowed to share webcam`);\n    } */\n\n    const payload = {\n      stream,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method userUnshareWebcam ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\n\nexport default function changePin(meetingId, userId, pin) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      pin,\n    },\n  };\n\n  try {\n    const numberAffected = VideoStreams.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      Logger.info(`Updated user streams pinned userId=${userId} pinned=${pin}`);\n    }\n  } catch (error) {\n    return Logger.error(`Error updating stream pinned status: ${error}`);\n  }\n  return null;\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\n\nexport default function clearVideoStreams(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VideoStreams.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VideoStreams in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VideoStreams (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VideoStreams.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VideoStreams in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VideoStreams (all). ${err}`);\n    }\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\n\nexport default function floorChanged(meetingId, userId, floor, lastFloorTime) {\n  check(meetingId, String);\n  check(userId, String);\n  check(floor, Boolean);\n  check(lastFloorTime, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  }\n\n  const modifier = {\n    $set: {\n      floor,\n      lastFloorTime: floor ? lastFloorTime : undefined,\n    },\n  };\n\n  try {\n    const numberAffected = VideoStreams.update(selector, modifier, { multi: true });\n\n    if (numberAffected) {\n      Logger.info(`Updated user streams floor times userId=${userId} floor=${floor} lastFloorTime=${lastFloorTime}`);\n    }\n  } catch (error) {\n    return Logger.error(`Error updating stream floor status: ${error}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\nimport {\n  getDeviceId,\n  getUserName,\n} from '/imports/api/video-streams/server/helpers';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport Users from '/imports/api/users/';\n\nconst BASE_FLOOR_TIME = \"0\";\n\nexport default function sharedWebcam(meetingId, userId, stream) {\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  const deviceId = getDeviceId(stream);\n  const name = getUserName(userId, meetingId);\n  const vu = VoiceUsers.findOne(\n    { meetingId, intId: userId },\n    { fields: { floor: 1, lastFloorTime: 1 }}\n  ) || {};\n  const u = Users.findOne(\n    { meetingId, intId: userId },\n    { fields: { pin: 1 } },\n  ) || {};\n  const floor = vu.floor || false;\n  const pin = u.pin || false;\n\n  const lastFloorTime = vu.lastFloorTime || BASE_FLOOR_TIME;\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  const modifier = {\n    $set: {\n      stream,\n      name,\n      lastFloorTime,\n      floor,\n      pin,\n    },\n  };\n\n  try {\n    const { insertedId } = VideoStreams.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Updated stream=${stream} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error setting stream: ${err}`);\n  }\n}\n\nexport function addWebcamSync(meetingId, videoStream) {\n  check(videoStream, {\n    userId: String,\n    stream: String,\n    name: String,\n    pin: Boolean,\n    floor: Boolean,\n    lastFloorTime: String,\n  });\n\n  const {\n    stream, userId, name, pin, floor, lastFloorTime,\n  } = videoStream;\n\n  const deviceId = getDeviceId(stream);\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  const modifier = {\n    $set: {\n      stream,\n      name,\n      lastFloorTime,\n      floor,\n      pin,\n    },\n  };\n\n  try {\n    const { insertedId } = VideoStreams.upsert(selector, modifier);\n\n    if (insertedId) {\n      Logger.info(`Synced stream=${stream} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error setting sync stream: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\nimport { getDeviceId } from '/imports/api/video-streams/server/helpers';\n\nexport default function unsharedWebcam(meetingId, userId, stream) {\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  const deviceId = getDeviceId(stream);\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  try {\n    VideoStreams.remove(selector);\n\n    Logger.info(`Removed stream=${stream} meeting=${meetingId}`);\n  } catch (err) {\n    Logger.error(`Error removing stream: ${err}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\n\nexport default function updateVideoStream(meetingId, videoStream) {\n  check(meetingId, String);\n  check(videoStream, {\n    userId: String,\n    stream: String,\n    name: String,\n    pin: Boolean,\n    floor: Boolean,\n    lastFloorTime: String,\n  });\n\n  const { userId, stream } = videoStream;\n\n  const selector = {\n    meetingId,\n    stream,\n    userId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      ...videoStream,\n    ),\n  };\n\n  try {\n    const numberAffected = VideoStreams.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug(`Update videoStream ${stream} for user ${userId} in ${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error update videoStream ${stream} for user=${userId}: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleUserSharedHtml5Webcam from './handlers/userSharedHtml5Webcam';\nimport handleUserUnsharedHtml5Webcam from './handlers/userUnsharedHtml5Webcam';\nimport handleFloorChanged from './handlers/floorChanged';\nimport handlePinnedChanged from './handlers/userPinChanged';\nimport handleWebcamSync from './handlers/webcamSync';\n\nRedisPubSub.on('UserBroadcastCamStartedEvtMsg', handleUserSharedHtml5Webcam);\nRedisPubSub.on('UserBroadcastCamStoppedEvtMsg', handleUserUnsharedHtml5Webcam);\nRedisPubSub.on('AudioFloorChangedEvtMsg', handleFloorChanged);\nRedisPubSub.on('UserPinStateChangedEvtMsg', handlePinnedChanged);\nRedisPubSub.on('SyncGetWebcamInfoRespMsg', handleWebcamSync);\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nconst FLASH_STREAM_REGEX = /^([A-z0-9]+)-([A-z0-9]+)-([A-z0-9]+)(-recorded)?$/;\nconst TOKEN = '_';\n\nconst isValidStream = stream => !FLASH_STREAM_REGEX.test(stream);\nconst getDeviceId = (stream) => {\n  const splitStream = stream.split(TOKEN);\n  if (splitStream.length === 3) return splitStream[2];\n  Logger.warn(`Could not get deviceId from stream=${stream}`);\n  return stream;\n};\n\nconst getUserName = (userId, meetingId) => {\n  const user = Users.findOne(\n    { userId, meetingId },\n    { fields: { name: 1 } },\n  );\n  if (user) return user.name;\n  return userId;\n};\n\nexport {\n  isValidStream,\n  getDeviceId,\n  getUserName,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publisher';\n","import { Meteor } from 'meteor/meteor';\nimport userShareWebcam from './methods/userShareWebcam';\nimport userUnshareWebcam from './methods/userUnshareWebcam';\nimport ejectUserCameras from './methods/ejectUserCameras';\n\nMeteor.methods({\n  userShareWebcam,\n  userUnshareWebcam,\n  ejectUserCameras,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction videoStreams() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VideoStreams was requested by unauth connection ${this.connection.id}`);\n    return VideoStreams.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing VideoStreams', { meetingId, userId });\n\n  const selector = {\n    meetingId,\n  };\n\n  return VideoStreams.find(selector);\n}\n\nfunction publish(...args) {\n  const boundVideoStreams = videoStreams.bind(this);\n  return boundVideoStreams(...args);\n}\n\nMeteor.publish('video-streams', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst VideoStreams = new Mongo.Collection('video-streams', collectionOptions);\n\nif (Meteor.isServer) {\n  // types of queries for the video users:\n  // 2. meetingId\n\n  VideoStreams._ensureIndex({ meetingId: 1 });\n}\n\nexport default VideoStreams;\n","import { check } from 'meteor/check';\nimport VoiceCallState from '/imports/api/voice-call-states';\nimport Logger from '/imports/startup/server/logger';\n\n// \"CALL_STARTED\", \"IN_ECHO_TEST\", \"IN_CONFERENCE\", \"CALL_ENDED\"\n\nexport default function handleVoiceCallStateEvent({ body }, meetingId) {\n  const {\n    voiceConf,\n    clientSession,\n    userId,\n    callerName,\n    callState,\n  } = body;\n\n  check(meetingId, String);\n  check(voiceConf, String);\n  check(clientSession, String);\n  check(userId, String);\n  check(callerName, String);\n  check(callState, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    clientSession,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      voiceConf,\n      clientSession,\n      callState,\n    },\n  };\n\n  try {\n    const { numberAffected } = VoiceCallState.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Update voice call', {\n        state: userId, meetingId, clientSession, callState,\n      });\n    }\n  } catch (err) {\n    Logger.error(`Update voice call state=${userId}: ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VoiceCallStates from '/imports/api/voice-call-states';\n\nexport default function clearVoiceCallStates(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VoiceCallStates.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VoiceCallStates in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error on clearing VoiceCallStates in (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VoiceCallStates.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VoiceCallStates in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceCallStates in all meetings. ${err}`);\n    }\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleVoiceCallStateEvent from './handlers/voiceCallStateEvent';\n\nRedisPubSub.on('VoiceCallStateEvtMsg', handleVoiceCallStateEvent);\n","import './eventHandlers';\nimport './publishers';\n","import VoiceCallStates from '/imports/api/voice-call-states';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction voiceCallStates() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VoiceCallStates was requested by unauth connection ${this.connection.id}`);\n    return VoiceCallStates.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing Voice Call States', { meetingId, userId });\n\n  return VoiceCallStates.find({ meetingId, userId });\n}\n\nfunction publish(...args) {\n  const boundVoiceCallStates = voiceCallStates.bind(this);\n  return boundVoiceCallStates(...args);\n}\n\nMeteor.publish('voice-call-states', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VoiceCallStates = new Mongo.Collection('voiceCallStates');\n\nif (Meteor.isServer) {\n  // types of queries for the voice users:\n  // 1. intId\n  // 2. meetingId, intId\n\n  VoiceCallStates._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default VoiceCallStates;\n","import { check } from 'meteor/check';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleFloorChange({ header, body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport Meetings from '/imports/api/meetings';\nimport addVoiceUser from '../modifiers/addVoiceUser';\nimport removeVoiceUser from '../modifiers/removeVoiceUser';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleGetVoiceUsers({ body }, meetingId) {\n  const { users } = body;\n\n  check(meetingId, String);\n  check(users, Array);\n\n  const meeting = Meetings.findOne({ meetingId }, { fields: { 'voiceProp.voiceConf': 1 } });\n  const usersIds = users.map(m => m.intId);\n\n  const voiceUsersIdsToUpdate = VoiceUsers.find({\n    meetingId,\n    intId: { $in: usersIds },\n  }, { fields: { intId: 1 } }).fetch().map(m => m.intId);\n\n  users.forEach((user) => {\n    if (voiceUsersIdsToUpdate.indexOf(user.intId) >= 0) {\n      // user already exist, then update\n      updateVoiceUser(meetingId, {\n        intId: user.intId,\n        voiceUserId: user.voiceUserId,\n        talking: user.talking,\n        muted: user.muted,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    } else {\n      // user doesn't exist yet, then add it\n      addVoiceUser(meetingId, {\n        voiceUserId: user.voiceUserId,\n        intId: user.intId,\n        callerName: user.callerName,\n        callerNum: user.callerNum,\n        muted: user.muted,\n        talking: user.talking,\n        callingWith: user.callingWith,\n        listenOnly: user.listenOnly,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    }\n  });\n\n  // removing extra users already existing in Mongo\n  const voiceUsersToRemove = VoiceUsers.find({\n    meetingId,\n    intId: { $nin: usersIds },\n  }).fetch();\n  voiceUsersToRemove.forEach(user => removeVoiceUser(meetingId, {\n    voiceConf: meeting.voiceProp.voiceConf,\n    voiceUserId: user.voiceUserId,\n    intId: user.intId,\n  }));\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport addDialInUser from '/imports/api/users/server/modifiers/addDialInUser';\nimport addVoiceUser from '../modifiers/addVoiceUser';\n\n\nexport default function handleJoinVoiceUser({ body }, meetingId) {\n  const voiceUser = body;\n  voiceUser.joined = true;\n\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    intId: String,\n    voiceUserId: String,\n    callerName: String,\n    callerNum: String,\n    muted: Boolean,\n    talking: Boolean,\n    callingWith: String,\n    listenOnly: Boolean,\n    joined: Boolean,\n  });\n\n  const {\n    intId,\n  } = voiceUser;\n\n  const User = Users.findOne({\n    meetingId,\n    intId,\n  });\n\n  if (!User) {\n    /* voice-only user - called into the conference */\n    addDialInUser(meetingId, voiceUser);\n  }\n\n  return addVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\n\nimport removeVoiceUser from '/imports/api/voice-users/server/modifiers/removeVoiceUser';\nimport removeUser from '/imports/api/users/server/modifiers/removeUser';\nimport Users from '/imports/api/users';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    intId: String,\n    voiceUserId: String,\n  });\n\n  const {\n    intId,\n    voiceUserId,\n  } = voiceUser;\n\n  const isDialInUser = (userId, meetingID) => !!Users.findOne({ meetingId: meetingID, userId, clientType: 'dial-in-user' });\n\n  // if the user is dial-in, leaving voice also means leaving userlist\n  if (isDialInUser(voiceUserId, meetingId)) removeUser(meetingId, intId);\n\n  return removeVoiceUser(meetingId, voiceUser);\n}\n","import changeMuteMeeting from '../modifiers/changeMuteMeeting';\n\nexport default function handleMeetingMuted({ body }, meetingId) {\n  changeMuteMeeting(meetingId, body);\n}\n","import { check } from 'meteor/check';\n\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  // If a person is muted we have to force them to not talking\n  if (voiceUser.muted) {\n    voiceUser.talking = false;\n  }\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\n\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import VoiceUsers from '/imports/api/voice-users/';\nimport Meetings from '/imports/api/meetings';\nimport addDialInUser from '/imports/api/users/server/modifiers/addDialInUser';\nimport removeVoiceUser from '../modifiers/removeVoiceUser';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\nimport addVoiceUser from '../modifiers/addVoiceUser';\n\n\nexport default function handleVoiceUsers({ header, body }) {\n  const { voiceUsers } = body;\n  const { meetingId } = header;\n\n  const meeting = Meetings.findOne({ meetingId }, { fields: { 'voiceProp.voiceConf': 1 } });\n  const usersIds = voiceUsers.map(m => m.intId);\n\n  const voiceUsersIdsToUpdate = VoiceUsers.find({\n    meetingId,\n    intId: { $in: usersIds },\n  }, { fields: { intId: 1 } }).fetch().map(m => m.intId);\n\n  voiceUsers.forEach((voice) => {\n    if (voiceUsersIdsToUpdate.indexOf(voice.intId) >= 0) {\n      // user already exist, then update\n      updateVoiceUser(meetingId, {\n        intId: voice.intId,\n        voiceUserId: voice.voiceUserId,\n        talking: voice.talking,\n        muted: voice.muted,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    } else {\n      // user doesn't exist yet, then add it\n      addVoiceUser(meetingId, {\n        voiceUserId: voice.voiceUserId,\n        intId: voice.intId,\n        callerName: voice.callerName,\n        callerNum: voice.callerNum,\n        muted: voice.muted,\n        talking: voice.talking,\n        callingWith: voice.callingWith,\n        listenOnly: voice.listenOnly,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n\n      addDialInUser(meetingId, voice);\n    }\n  });\n\n  // removing extra users already existing in Mongo\n  const voiceUsersToRemove = VoiceUsers.find({\n    meetingId,\n    intId: { $nin: usersIds },\n  }, { fields: { voiceUserId: 1, intId: 1 } }).fetch();\n  voiceUsersToRemove.forEach(user => removeVoiceUser(meetingId, {\n    voiceConf: meeting.voiceProp.voiceConf,\n    voiceUserId: user.voiceUserId,\n    intId: user.intId,\n  }));\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function ejectUserFromVoice(userId, banUser) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'EjectUserFromVoiceCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n    check(userId, String);\n    check(banUser, Boolean);\n\n    const payload = {\n      userId,\n      ejectedBy: requesterUserId,\n      banUser,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method ejectUserFromVoice ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function muteAllExceptPresenterToggle() {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'MuteAllExceptPresentersCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const meeting = Meetings.findOne({ meetingId });\n    const toggleMeetingMuted = !meeting.voiceProp.muteOnStart;\n\n    const payload = {\n      mutedBy: requesterUserId,\n      mute: toggleMeetingMuted,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method muteAllExceptPresenterToggle ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function muteAllToggle() {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'MuteMeetingCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const meeting = Meetings.findOne({ meetingId });\n    const toggleMeetingMuted = !meeting.voiceProp.muteOnStart;\n\n    const payload = {\n      mutedBy: requesterUserId,\n      mute: toggleMeetingMuted,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method muteAllToggle ${err.stack}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Users from '/imports/api/users';\nimport VoiceUsers from '/imports/api/voice-users';\nimport Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function muteToggle(uId, toggle) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'MuteUserCmdMsg';\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const userToMute = uId || requesterUserId;\n\n    const requester = Users.findOne({\n      meetingId,\n      userId: requesterUserId,\n    });\n\n    const voiceUser = VoiceUsers.findOne({\n      intId: userToMute,\n      meetingId,\n    });\n\n    if (!requester || !voiceUser) return;\n\n    const { listenOnly, muted } = voiceUser;\n    if (listenOnly) return;\n\n    // if allowModsToUnmuteUsers is false, users will be kicked out for attempting to unmute others\n    if (requesterUserId !== userToMute && muted) {\n      const meeting = Meetings.findOne({ meetingId },\n        { fields: { 'usersProp.allowModsToUnmuteUsers': 1 } });\n      if (meeting.usersProp && !meeting.usersProp.allowModsToUnmuteUsers) {\n        Logger.warn(`Attempted unmuting by another user meetingId:${meetingId} requester: ${requesterUserId} userId: ${userToMute}`);\n        return;\n      }\n    }\n\n    let _muted;\n\n    if ((toggle === undefined) || (toggle === null)) {\n      _muted = !muted;\n    } else {\n      _muted = !!toggle;\n    }\n\n    const payload = {\n      userId: userToMute,\n      mutedBy: requesterUserId,\n      mute: _muted,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method muteToggle ${err.stack}`);\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport Users from '/imports/api/users';\nimport flat from 'flat';\n\nexport default function addVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceUserId: String,\n    intId: String,\n    callerName: String,\n    callerNum: String,\n    muted: Boolean,\n    talking: Boolean,\n    callingWith: String,\n    listenOnly: Boolean,\n    voiceConf: String,\n    joined: Boolean, // This is a HTML5 only param.\n  });\n\n  const { intId, talking } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId, spoke: talking },\n      flat(voiceUser),\n    ),\n  };\n\n  const user = Users.findOne({ meetingId, userId: intId }, {\n    fields: {\n      color: 1,\n    },\n  });\n\n  if (user) modifier.$set.color = user.color;\n\n  try {\n    const { numberAffected } = VoiceUsers.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Add voice user=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Add voice user=${intId}: ${err}`);\n  }\n}\n","import Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function changeMuteMeeting(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    muted: Boolean,\n    mutedBy: String,\n  });\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'voiceProp.muteOnStart': payload.muted,\n    },\n  };\n\n  try {\n    const { numberAffected } = Meetings.upsert(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Changed meeting mute status meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Changing meeting mute status meeting={${meetingId}} ${err}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\n\nexport default function clearVoiceUser(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = VoiceUsers.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared VoiceUsers in (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceUsers in ${meetingId}. ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = VoiceUsers.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared VoiceUsers in all meetings');\n      }\n    } catch (err) {\n      Logger.error(`Error on clearing VoiceUsers. ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport { clearSpokeTimeout } from '/imports/api/common/server/helpers';\n\nexport default function removeVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    voiceUserId: String,\n    intId: String,\n  });\n\n  const { intId } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      muted: false,\n      talking: false,\n      listenOnly: false,\n      joined: false,\n      spoke: false,\n    },\n  };\n\n  try {\n    clearSpokeTimeout(meetingId, intId);\n    const numberAffected = VoiceUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.info(`Remove voiceUser=${intId} meeting=${meetingId}`);\n    }\n  } catch (err) {\n    Logger.error(`Remove voiceUser=${intId}: ${err}`);\n  }\n}\n","import { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport flat from 'flat';\nimport { spokeTimeoutHandles, clearSpokeTimeout } from '/imports/api/common/server/helpers';\n\nconst TALKING_TIMEOUT = 6000;\n\nexport default function updateVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    intId: String,\n    voiceUserId: String,\n    talking: Match.Maybe(Boolean),\n    muted: Match.Maybe(Boolean),\n    voiceConf: String,\n    joined: Match.Maybe(Boolean),\n    floor: Match.Maybe(Boolean),\n    lastFloorTime: Match.Maybe(String),\n  });\n\n  const { intId } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      flat(voiceUser),\n    ),\n  };\n\n  if (voiceUser.talking) {\n    const user = VoiceUsers.findOne({ meetingId, intId }, {\n      fields: {\n        startTime: 1,\n      },\n    });\n\n    if (user && !user.startTime) modifier.$set.startTime = Date.now();\n    modifier.$set.spoke = true;\n    modifier.$set.endTime = null;\n    clearSpokeTimeout(meetingId, intId);\n  }\n\n  if (!voiceUser.talking) {\n    const timeoutHandle = Meteor.setTimeout(() => {\n      const user = VoiceUsers.findOne({ meetingId, intId }, {\n        fields: {\n          endTime: 1,\n          talking: 1,\n        },\n      });\n\n      if (user) {\n        const { endTime, talking } = user;\n        const spokeDelay = ((Date.now() - endTime) < TALKING_TIMEOUT);\n        if (talking || spokeDelay) return;\n        modifier.$set.spoke = false;\n        modifier.$set.startTime = null;\n        try {\n          const numberAffected = VoiceUsers.update(selector, modifier);\n\n          if (numberAffected) {\n            Logger.debug('Update voiceUser', { voiceUser: intId, meetingId });\n          }\n        } catch (err) {\n          Logger.error(`Update voiceUser=${intId}: ${err}`);\n        }\n      }\n    }, TALKING_TIMEOUT);\n\n    spokeTimeoutHandles[`${meetingId}-${intId}`] = timeoutHandle;\n    modifier.$set.endTime = Date.now();\n  }\n\n  try {\n    const numberAffected = VoiceUsers.update(selector, modifier);\n\n    if (numberAffected) {\n      Logger.debug('Update voiceUser', { voiceUser: intId, meetingId });\n    }\n  } catch (err) {\n    Logger.error(`Update voiceUser=${intId}: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleJoinVoiceUser from './handlers/joinVoiceUser';\nimport handleLeftVoiceUser from './handlers/leftVoiceUser';\nimport handleTalkingVoiceUser from './handlers/talkingVoiceUser';\nimport handleMutedVoiceUser from './handlers/mutedVoiceUser';\nimport handleGetVoiceUsers from './handlers/getVoiceUsers';\nimport handleVoiceUsers from './handlers/voiceUsers';\nimport handleMeetingMuted from './handlers/meetingMuted';\nimport handleFloorChange from './handlers/floorChanged';\n\nRedisPubSub.on('UserLeftVoiceConfToClientEvtMsg', handleLeftVoiceUser);\nRedisPubSub.on('UserJoinedVoiceConfToClientEvtMsg', handleJoinVoiceUser);\nRedisPubSub.on('UserTalkingVoiceEvtMsg', handleTalkingVoiceUser);\nRedisPubSub.on('UserMutedVoiceEvtMsg', handleMutedVoiceUser);\nRedisPubSub.on('GetVoiceUsersMeetingRespMsg', processForHTML5ServerOnly(handleGetVoiceUsers));\nRedisPubSub.on('SyncGetVoiceUsersRespMsg', handleVoiceUsers);\nRedisPubSub.on('MeetingMutedEvtMsg', handleMeetingMuted);\nRedisPubSub.on('AudioFloorChangedEvtMsg', handleFloorChange);\n","import './eventHandlers';\nimport './publishers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport muteToggle from './methods/muteToggle';\nimport muteAllToggle from './methods/muteAllToggle';\nimport muteAllExceptPresenterToggle from './methods/muteAllExceptPresenterToggle';\nimport ejectUserFromVoice from './methods/ejectUserFromVoice';\n\nMeteor.methods({\n  toggleVoice: muteToggle,\n  muteAllUsers: muteAllToggle,\n  muteAllExceptPresenter: muteAllExceptPresenterToggle,\n  ejectUserFromVoice,\n});\n","import VoiceUsers from '/imports/api/voice-users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\nimport ejectUserFromVoice from './methods/ejectUserFromVoice';\n\nfunction voiceUser() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing VoiceUsers was requested by unauth connection ${this.connection.id}`);\n    return VoiceUsers.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId: requesterUserId } = tokenValidation;\n\n  const onCloseConnection = Meteor.bindEnvironment(() => {\n    try {\n      // I used user because voiceUser is the function's name\n      const User = VoiceUsers.findOne({ meetingId, requesterUserId });\n      if (User) {\n        ejectUserFromVoice(requesterUserId);\n      }\n    } catch (e) {\n      Logger.error(`Exception while executing ejectUserFromVoice for ${requesterUserId}: ${e}`);\n    }\n  });\n\n  Logger.debug('Publishing Voice User', { meetingId, requesterUserId });\n\n  this._session.socket.on('close', _.debounce(onCloseConnection, 100));\n  return VoiceUsers.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundVoiceUser = voiceUser.bind(this);\n  return boundVoiceUser(...args);\n}\n\nMeteor.publish('voiceUsers', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst VoiceUsers = new Mongo.Collection('voiceUsers', collectionOptions);\n\nif (Meteor.isServer) {\n  // types of queries for the voice users:\n  // 1. intId\n  // 2. meetingId, intId\n\n  VoiceUsers._ensureIndex({ intId: 1 });\n  VoiceUsers._ensureIndex({ meetingId: 1, intId: 1 });\n}\n\nexport default VoiceUsers;\n","import { check } from 'meteor/check';\nimport modifyWhiteboardAccess from '../modifiers/modifyWhiteboardAccess';\n\nexport default function handleModifyWhiteboardAccess({ body }, meetingId) {\n  const { multiUser, whiteboardId } = body;\n\n  check(multiUser, Array);\n  check(whiteboardId, String);\n  check(meetingId, String);\n\n  return modifyWhiteboardAccess(meetingId, whiteboardId, multiUser);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { getUsers } from '/imports/api/whiteboard-multi-user/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addGlobalAccess(whiteboardId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n    check(whiteboardId, String);\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const multiUser = getUsers(meetingId);\n\n    const payload = {\n      multiUser,\n      whiteboardId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method addGlobalAccess ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { getMultiUser } from '/imports/api/whiteboard-multi-user/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addIndividualAccess(whiteboardId, userId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n    check(whiteboardId, String);\n    check(userId, String);\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const multiUser = getMultiUser(meetingId, whiteboardId);\n\n    if (!multiUser.includes(userId)) {\n      multiUser.push(userId);\n\n      const payload = {\n        multiUser,\n        whiteboardId,\n      };\n\n      RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method addIndividualAccess ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeGlobalAccess(whiteboardId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n    check(whiteboardId, String);\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const payload = {\n      multiUser: [],\n      whiteboardId,\n    };\n\n    RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  } catch (err) {\n    Logger.error(`Exception while invoking method removeGlobalAccess ${err.stack}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { getMultiUser } from '/imports/api/whiteboard-multi-user/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeIndividualAccess(whiteboardId, userId) {\n  try {\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n    check(whiteboardId, String);\n    check(userId, String);\n\n    const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n    check(meetingId, String);\n    check(requesterUserId, String);\n\n    const multiUser = getMultiUser(meetingId, whiteboardId);\n\n    if (multiUser.includes(userId)) {\n      const payload = {\n        multiUser: multiUser.filter(id => id !== userId),\n        whiteboardId,\n      };\n\n      RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n    }\n  } catch (err) {\n    Logger.error(`Exception while invoking method removeIndividualAccess ${err.stack}`);\n  }\n}\n","import Logger from '/imports/startup/server/logger';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user';\n\nexport default function clearWhiteboardMultiUser(meetingId) {\n  if (meetingId) {\n    try {\n      const numberAffected = WhiteboardMultiUser.remove({ meetingId });\n\n      if (numberAffected) {\n        Logger.info(`Cleared WhiteboardMultiUser (${meetingId})`);\n      }\n    } catch (err) {\n      Logger.info(`Error clearing WhiteboardMultiUser (${meetingId}). ${err}`);\n    }\n  } else {\n    try {\n      const numberAffected = WhiteboardMultiUser.remove({});\n\n      if (numberAffected) {\n        Logger.info('Cleared WhiteboardMultiUser (all)');\n      }\n    } catch (err) {\n      Logger.info(`Error clearing WhiteboardMultiUser (all). ${err}`);\n    }\n  }\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\n\nexport default function modifyWhiteboardAccess(meetingId, whiteboardId, multiUser) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(multiUser, Array);\n\n  const selector = {\n    meetingId,\n    whiteboardId,\n  };\n\n  const modifier = {\n    meetingId,\n    whiteboardId,\n    multiUser,\n  };\n\n  try {\n    const { insertedId } = WhiteboardMultiUser.upsert(selector, modifier);\n    if (insertedId) {\n      Logger.info(`Added multiUser flag=${multiUser} meetingId=${meetingId} whiteboardId=${whiteboardId}`);\n    } else {\n      Logger.info(`Upserted multiUser flag=${multiUser} meetingId=${meetingId} whiteboardId=${whiteboardId}`);\n    }\n  } catch (err) {\n    Logger.error(`Error while adding an entry to Multi-User collection: ${err}`);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleGetWhiteboardAccess from './handlers/modifyWhiteboardAccess';\n\nRedisPubSub.on('GetWhiteboardAccessRespMsg', processForHTML5ServerOnly(handleGetWhiteboardAccess));\nRedisPubSub.on('SyncGetWhiteboardAccessRespMsg', handleGetWhiteboardAccess);\nRedisPubSub.on('ModifyWhiteboardAccessEvtMsg', handleGetWhiteboardAccess);\n","import Users from '/imports/api/users';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\n\nconst getMultiUser = (meetingId, whiteboardId) => {\n  const data = WhiteboardMultiUser.findOne(\n    {\n      meetingId,\n      whiteboardId,\n    }, { fields: { multiUser: 1 } },\n  );\n\n  if (!data || !data.multiUser || !Array.isArray(data.multiUser)) return [];\n\n  return data.multiUser;\n};\n\nconst getUsers = (meetingId) => {\n  const data = Users.find(\n    { meetingId },\n    { fields: { userId: 1 } },\n  ).fetch();\n\n  if (!data) return [];\n\n  return data.map(user => user.userId);\n};\n\nexport {\n  getMultiUser,\n  getUsers,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addGlobalAccess from './methods/addGlobalAccess';\nimport addIndividualAccess from './methods/addIndividualAccess';\nimport removeGlobalAccess from './methods/removeGlobalAccess';\nimport removeIndividualAccess from './methods/removeIndividualAccess';\n\nMeteor.methods({\n  addGlobalAccess,\n  addIndividualAccess,\n  removeGlobalAccess,\n  removeIndividualAccess,\n});\n","import WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport AuthTokenValidation, { ValidationStates } from '/imports/api/auth-token-validation';\n\nfunction whiteboardMultiUser() {\n  const tokenValidation = AuthTokenValidation.findOne({ connectionId: this.connection.id });\n\n  if (!tokenValidation || tokenValidation.validationStatus !== ValidationStates.VALIDATED) {\n    Logger.warn(`Publishing WhiteboardMultiUser was requested by unauth connection ${this.connection.id}`);\n    return WhiteboardMultiUser.find({ meetingId: '' });\n  }\n\n  const { meetingId, userId } = tokenValidation;\n\n  Logger.debug('Publishing WhiteboardMultiUser', { meetingId, userId });\n\n  return WhiteboardMultiUser.find({ meetingId });\n}\n\n\nfunction publish(...args) {\n  const boundMultiUser = whiteboardMultiUser.bind(this);\n  return boundMultiUser(...args);\n}\n\nMeteor.publish('whiteboard-multi-user', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst collectionOptions = Meteor.isClient ? {\n  connection: null,\n} : {};\n\nconst WhiteboardMultiUser = new Mongo.Collection('whiteboard-multi-user', collectionOptions);\n\nif (Meteor.isServer) {\n  // types of queries for the whiteboard-multi-user:\n  // 1. meetingId\n\n  WhiteboardMultiUser._ensureIndex({ meetingId: 1 });\n}\n\nexport default WhiteboardMultiUser;\n","import Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\n\nconst MSG_DIRECT_TYPE = 'DIRECT';\nconst NODE_USER = 'nodeJSapp';\n\nexport const spokeTimeoutHandles = {};\nexport const clearSpokeTimeout = (meetingId, userId) => {\n  if (spokeTimeoutHandles[`${meetingId}-${userId}`]) {\n    Meteor.clearTimeout(spokeTimeoutHandles[`${meetingId}-${userId}`]);\n    delete spokeTimeoutHandles[`${meetingId}-${userId}`];\n  }\n};\n\nexport const indexOf = [].indexOf || function (item) {\n  for (let i = 0, l = this.length; i < l; i += 1) {\n    if (i in this && this[i] === item) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nexport const processForHTML5ServerOnly = (fn) => (message, ...args) => {\n  const { envelope } = message;\n  const { routing } = envelope;\n  const { msgType, meetingId, userId } = routing;\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const user = Users.findOne(selector);\n\n  const shouldSkip = user && msgType === MSG_DIRECT_TYPE && userId !== NODE_USER && user.clientType !== 'HTML5';\n  if (shouldSkip) return () => { };\n  return fn(message, ...args);\n};\n\nexport const extractCredentials = (credentials) => {\n  if (!credentials) return {};\n  const credentialsArray = credentials.split('--');\n  const meetingId = credentialsArray[0];\n  const requesterUserId = credentialsArray[1];\n  return { meetingId, requesterUserId };\n};\n\n// Creates a background job to periodically check the result of the provided function.\n// The provided function is publication-specific and must check the \"survival condition\" of the publication.\nexport const publicationSafeGuard = function (fn, self) {\n  let stopped = false;\n  const periodicCheck = function () {\n    if (stopped) return;\n    if (!fn()) {\n      self.added(self._name, 'publication-stop-marker', { id: 'publication-stop-marker', stopped: true });\n      self.stop();\n    } else Meteor.setTimeout(periodicCheck, 1000);\n  };\n\n  self.onStop(() => {\n    stopped = true;\n    Logger.info(`Publication ${self._name} has stopped in server side`);\n  });\n\n  periodicCheck();\n};\n","import Agent from './promAgent.js';\n\nimport {\n  METRICS_PREFIX,\n  METRIC_NAMES,\n  buildMetrics\n} from './metrics.js';\n\nconst {\n    enabled: METRICS_ENABLED,\n    path: METRICS_PATH,\n    collectDefaultMetrics: COLLECT_DEFAULT_METRICS,\n  } = Meteor.settings.private.prometheus\n      ? Meteor.settings.private.prometheus\n      : { enabled: false };\n\nconst PrometheusAgent = new Agent({\n  path: METRICS_PATH,\n  prefix: METRICS_PREFIX,\n  collectDefaultMetrics: COLLECT_DEFAULT_METRICS,\n  role: process.env.BBB_HTML5_ROLE,\n  instanceId: parseInt(process.env.INSTANCE_ID, 10) || 1,\n});\n\nif (METRICS_ENABLED) {\n  PrometheusAgent.injectMetrics(buildMetrics());\n  PrometheusAgent.start();\n}\n\nexport {\n  METRIC_NAMES,\n  METRICS_PREFIX,\n  Agent,\n  PrometheusAgent,\n};\n","const {\n  Counter,\n  Gauge,\n  Histogram\n} = require('prom-client');\n\nconst METRICS_PREFIX = 'html5_'\nconst METRIC_NAMES = {\n  METEOR_METHODS: 'meteorMethods',\n  METEOR_ERRORS_TOTAL: 'meteorErrorsTotal',\n  METEOR_RTT: 'meteorRtt',\n  REDIS_MESSAGE_QUEUE: 'redisMessageQueue',\n  REDIS_PAYLOAD_SIZE: 'redisPayloadSize',\n  REDIS_PROCESSING_TIME: 'redisProcessingTime'\n}\n\nlet METRICS;\nconst buildMetrics = () => {\n  if (METRICS == null) {\n    METRICS = {\n      [METRIC_NAMES.METEOR_METHODS]: new Counter({\n        name: `${METRICS_PREFIX}meteor_methods`,\n        help: 'Total number of meteor methods processed in html5',\n        labelNames: ['methodName', 'role', 'instanceId'],\n      }),\n\n      [METRIC_NAMES.METEOR_ERRORS_TOTAL]: new Counter({\n        name: `${METRICS_PREFIX}meteor_errors_total`,\n        help: 'Total number of errors logs in meteor',\n        labelNames: ['errorMessage', 'role', 'instanceId'],\n      }),\n\n      [METRIC_NAMES.METEOR_RTT]: new Histogram({\n        name: `${METRICS_PREFIX}meteor_rtt_seconds`,\n        help: 'Round-trip time of meteor client-server connections in seconds',\n        buckets: [0.05, 0.1, 0.2, 0.3, 0.4, 0.5, 0.75, 1, 1.5, 2, 2.5, 5],\n        labelNames: ['role', 'instanceId'],\n      }),\n\n      [METRIC_NAMES.REDIS_MESSAGE_QUEUE]: new Gauge({\n        name: `${METRICS_PREFIX}redis_message_queue`,\n        help: 'Message queue size in redis',\n        labelNames: ['meetingId', 'role', 'instanceId'],\n      }),\n\n      [METRIC_NAMES.REDIS_PAYLOAD_SIZE]: new Histogram({\n        name: `${METRICS_PREFIX}redis_payload_size`,\n        help: 'Redis events payload size',\n        labelNames: ['eventName', 'role', 'instanceId'],\n      }),\n\n      [METRIC_NAMES.REDIS_PROCESSING_TIME]: new Histogram({\n        name: `${METRICS_PREFIX}redis_processing_time`,\n        help: 'Redis events processing time in milliseconds',\n        labelNames: ['eventName', 'role', 'instanceId'],\n      }),\n    }\n  }\n\n  return METRICS;\n};\n\nexport {\n  METRICS_PREFIX,\n  METRIC_NAMES,\n  METRICS,\n  buildMetrics,\n};\n","import {\n  register,\n  collectDefaultMetrics,\n} from 'prom-client';\n\nimport Logger from '../logger';\nconst LOG_PREFIX = '[prom-scrape-agt]';\n\nclass PrometheusScrapeAgent {\n  constructor(options) {\n    this.metrics = {};\n    this.started = false;\n\n    this.path = options.path || '/metrics';\n    this.collectDefaultMetrics = options.collectDefaultMetrics || false;\n    this.metricsPrefix = options.prefix || '';\n    this.collectionTimeout = options.collectionTimeout || 10000;\n    this.roleAndInstanceLabels = \n      options.role\n        ? { role: options.role, instanceId: options.instanceId }\n        : {};\n  }\n\n  async collect(response) {\n    try {\n      response.writeHead(200, { 'Content-Type': register.contentType });\n      const content = await register.metrics();\n      response.end(content);\n      Logger.debug(`${LOG_PREFIX} Collected prometheus metrics:\\n${content}`);\n    } catch (error) {\n      response.writeHead(500)\n      response.end(error.message);\n      Logger.error(`${LOG_PREFIX} Collecting prometheus metrics: ${error.message}`);\n    }\n  }\n\n  start() {\n    if (this.collectDefaultMetrics) collectDefaultMetrics({\n      prefix: this.metricsPrefix,\n      timeout: this.collectionTimeout,\n      labels: this.roleAndInstanceLabels,\n    });\n\n    WebApp.connectHandlers.use(this.path, (req, res) => {\n      return this.collect(res);\n    });\n\n    this.started = true;\n  };\n\n  injectMetrics(metricsDictionary) {\n    this.metrics = { ...this.metrics, ...metricsDictionary }\n  }\n\n  increment(metricName, labelsObject) {\n    if (!this.started) return;\n\n    const metric = this.metrics[metricName];\n    if (metric) {\n      labelsObject = { ...labelsObject, ...this.roleAndInstanceLabels };\n      metric.inc(labelsObject)\n    }\n  }\n\n  decrement(metricName, labelsObject) {\n    if (!this.started) return;\n\n    const metric = this.metrics[metricName];\n    if (metric) {\n      labelsObject = { ...labelsObject, ...this.roleAndInstanceLabels };\n      metric.dec(labelsObject)\n    }\n  }\n\n  set(metricName, value, labelsObject) {\n    if (!this.started) return;\n\n    const metric = this.metrics[metricName];\n    if (metric) {\n      labelsObject = { ...labelsObject, ...this.roleAndInstanceLabels };\n      metric.set(labelsObject, value)\n    }\n  }\n\n  observe(metricName, value, labelsObject) {\n    if (!this.started) return;\n\n    const metric = this.metrics[metricName];\n    if (metric) {\n      labelsObject = { ...labelsObject, ...this.roleAndInstanceLabels };\n      metric.observe(labelsObject, value)\n    }\n  }\n}\n\nexport default PrometheusScrapeAgent;\n","const Transport = require('winston-transport');\nimport { PrometheusAgent, METRIC_NAMES } from './index.js'\n\nmodule.exports = class WinstonPromTransport extends Transport {\n  constructor(opts) {\n    super(opts);\n    \n  }\n\n  log(info, callback) {\n    setImmediate(() => {\n      this.emit('logged', info);\n    });\n\n    PrometheusAgent.increment(METRIC_NAMES.METEOR_ERRORS_TOTAL, { errorMessage: info.message });\n\n    callback();\n  }\n};\n","import Logger from './logger';\nimport userLeaving from '/imports/api/users/server/methods/userLeaving';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport AuthTokenValidation from '/imports/api/auth-token-validation';\nimport Users from '/imports/api/users';\nimport { check } from 'meteor/check';\n\nconst { enabled, syncInterval } = Meteor.settings.public.syncUsersWithConnectionManager;\n\nclass ClientConnections {\n  constructor() {\n    Logger.debug('Initializing client connections structure', { logCode: 'client_connections_init' });\n    this.connections = new Map();\n\n    setInterval(() => {\n      this.print();\n    }, 30000);\n\n    if (enabled) {\n      const syncConnections = Meteor.bindEnvironment(() => {\n        this.syncConnectionsWithServer();\n      });\n\n      setInterval(() => {\n        syncConnections();\n      }, syncInterval);\n    }\n  }\n\n  add(sessionId, connection) {\n    Logger.info('Client connections add called', { logCode: 'client_connections_add', extraInfo: { sessionId, connection } });\n    if (!sessionId || !connection) {\n      Logger.error(`Error on add new client connection. sessionId=${sessionId} connection=${connection.id}`,\n        { logCode: 'client_connections_add_error', extraInfo: { sessionId, connection } }\n      );\n\n      return;\n    }\n\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    check(meetingId, String);\n    check(userId, String);\n      \n    if (!meetingId) {\n      Logger.error(`Error on add new client connection. sessionId=${sessionId} connection=${connection.id}`,\n        { logCode: 'client_connections_add_error_meeting_id_null', extraInfo: { meetingId, userId } }\n      );\n      return false;\n    }\n\n    if (!this.exists(meetingId)) {\n      Logger.info(`Meeting not found in connections: meetingId=${meetingId}`);\n      this.createMeetingConnections(meetingId);\n    }\n\n    const sessionConnections = this.connections.get(meetingId);\n\n    if (sessionConnections.has(userId) && sessionConnections.get(userId).includes(connection.id)) {\n      Logger.info(`Connection already exists for user. userId=${userId} connectionId=${connection.id}`);\n\n      return false;\n    }\n\n    connection.onClose(Meteor.bindEnvironment(() => {\n      userLeaving(meetingId, userId, connection.id);\n    }));\n\n    Logger.info(`Adding new connection for sessionId=${sessionId} connection=${connection.id}`);\n\n    if (!sessionConnections.has(userId)) {\n      Logger.info(`Creating connections poll for ${userId}`);\n\n      sessionConnections.set(userId, []);\n      return sessionConnections.get(userId).push(connection.id);\n    } else {\n      return sessionConnections.get(userId).push(connection.id);\n    }\n  }\n\n  createMeetingConnections(meetingId) {\n    Logger.info(`Creating meeting in connections. meetingId=${meetingId}`);\n\n    if (!this.exists(meetingId))\n      return this.connections.set(meetingId, new Map());\n  }\n\n  exists(meetingId) {\n    return this.connections.has(meetingId);\n  }\n\n  getConnectionsForClient(sessionId) {\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    check(meetingId, String);\n    check(userId, String);\n  \n    return this.connections.get(meetingId)?.get(userId);\n  }\n\n  print() {\n    const mapConnectionsObj = {};\n    this.connections.forEach((value, key) => {\n      mapConnectionsObj[key] = {};\n\n      value.forEach((v, k) => {\n        mapConnectionsObj[key][k] = v;\n      });\n\n    });\n    Logger.info('Active connections', mapConnectionsObj);\n  }\n\n  removeClientConnection(sessionId, connectionId = null) {\n    Logger.info(`Removing connectionId for user. sessionId=${sessionId} connectionId=${connectionId}`);\n    const { meetingId, requesterUserId: userId } = extractCredentials(sessionId);\n\n    check(meetingId, String);\n    check(userId, String);\n  \n    const meetingConnections = this.connections.get(meetingId);\n\n    if (meetingConnections?.has(userId)) {\n      const filteredConnections = meetingConnections.get(userId).filter(c => c !== connectionId);\n\n      return connectionId && filteredConnections.length ? meetingConnections.set(userId, filteredConnections) : meetingConnections.delete(userId);\n    }\n\n    return false;\n  }\n\n  removeMeeting(meetingId) {\n    Logger.debug(`Removing connections for meeting=${meetingId}`);\n    return this.connections.delete(meetingId);\n  }\n\n  syncConnectionsWithServer() {\n    Logger.info('Syncing ClientConnections with server');\n    const activeConnections = Array.from(Meteor.server.sessions.keys());\n\n    Logger.debug(`Found ${activeConnections.length} active connections in server`);\n\n    const onlineUsers = AuthTokenValidation\n      .find(\n        { connectionId: { $in: activeConnections } },\n        { fields: { meetingId: 1, userId: 1 } }\n      )\n      .fetch();\n\n    const onlineUsersId = onlineUsers.map(({ userId }) => userId);\n\n    const usersQuery = { userId: { $nin: onlineUsersId } };\n\n    const userWithoutConnectionIds = Users.find(usersQuery, { fields: { meetingId: 1, userId: 1 } }).fetch();\n\n    const removedUsersWithoutConnection = Users.remove(usersQuery);\n\n    if (removedUsersWithoutConnection) {\n      Logger.info(`Removed ${removedUsersWithoutConnection} users that are not connected`);\n      Logger.info(`Clearing connections`);\n      try {\n        userWithoutConnectionIds\n          .forEach(({ meetingId, userId }) => {\n            this.removeClientConnection(`${meetingId}--${userId}`);\n          });\n      } catch (err) {\n        Logger.error('Error on sync ClientConnections', err);\n      }\n    }\n  }\n\n}\n\nif (!process.env.BBB_HTML5_ROLE || process.env.BBB_HTML5_ROLE === 'frontend') {\n  Logger.info(\"ClientConnectionsSingleton was created\")\n\n  const ClientConnectionsSingleton = new ClientConnections();\n\n  export default ClientConnectionsSingleton;\n}\n","import { Meteor } from 'meteor/meteor';\nimport { WebAppInternals } from 'meteor/webapp';\nimport Langmap from 'langmap';\nimport fs from 'fs';\nimport Users from '/imports/api/users';\nimport './settings';\nimport { lookup as lookupUserAgent } from 'useragent';\nimport { check } from 'meteor/check';\nimport Logger from './logger';\nimport Redis from './redis';\n\nimport setMinBrowserVersions from './minBrowserVersion';\nimport { PrometheusAgent, METRIC_NAMES } from './prom-metrics/index.js'\n\nlet guestWaitHtml = '';\n\nconst env = Meteor.isDevelopment ? 'development' : 'production';\n\nconst meteorRoot = fs.realpathSync(`${process.cwd()}/../`);\n\nconst applicationRoot = (env === 'development')\n  ? fs.realpathSync(`${meteorRoot}'/../../../../public/locales/`)\n  : fs.realpathSync(`${meteorRoot}/../programs/web.browser/app/locales/`);\n\nconst AVAILABLE_LOCALES = fs.readdirSync(`${applicationRoot}`);\nconst FALLBACK_LOCALES = JSON.parse(Assets.getText('config/fallbackLocales.json'));\n\nprocess.on('uncaughtException', (err) => {\n  Logger.error(`uncaughtException: ${err}`);\n  process.exit(1);\n});\n\nprocess.on('uncaughtException', (err) => {\n  Logger.error(`uncaughtException: ${err}`);\n  process.exit(1);\n});\n\nMeteor.startup(() => {\n  const APP_CONFIG = Meteor.settings.public.app;\n  const CDN_URL = APP_CONFIG.cdn;\n  const instanceId = parseInt(process.env.INSTANCE_ID, 10) || 1;\n\n  Logger.warn(`Started bbb-html5 process with instanceId=${instanceId}`);\n\n  const { customHeartbeat } = APP_CONFIG;\n\n  if (customHeartbeat) {\n    Logger.warn('Custom heartbeat functions are enabled');\n    // https://github.com/sockjs/sockjs-node/blob/1ef08901f045aae7b4df0f91ef598d7a11e82897/lib/transport/websocket.js#L74-L82\n    const newHeartbeat = function heartbeat() {\n      const currentTime = new Date().getTime();\n\n      // Skipping heartbeat, because websocket is sending data\n      if (currentTime - this.ws.lastSentFrameTimestamp < 10000) {\n        try {\n          Logger.info('Skipping heartbeat, because websocket is sending data', {\n            currentTime,\n            lastSentFrameTimestamp: this.ws.lastSentFrameTimestamp,\n            userId: this.session.connection._meteorSession.userId,\n          });\n          return;\n        } catch (err) {\n          Logger.error(`Skipping heartbeat error: ${err}`);\n        }\n      }\n\n      const supportsHeartbeats = this.ws.ping(null, () => clearTimeout(this.hto_ref));\n      if (supportsHeartbeats) {\n        this.hto_ref = setTimeout(() => {\n          try {\n            Logger.info('Heartbeat timeout', { userId: this.session.connection._meteorSession.userId, sentAt: currentTime, now: new Date().getTime() });\n          } catch (err) {\n            Logger.error(`Heartbeat timeout error: ${err}`);\n          }\n        }, Meteor.server.options.heartbeatTimeout);\n      } else {\n        Logger.error('Unexpected error supportsHeartbeats=false');\n      }\n    };\n\n    // https://github.com/davhani/hagty/blob/6a5c78e9ae5a5e4ade03e747fb4cc8ea2df4be0c/faye-websocket/lib/faye/websocket/api.js#L84-L88\n    const newSend = function send(data) {\n      try {\n        this.lastSentFrameTimestamp = new Date().getTime();\n\n        if (this.meteorHeartbeat) {\n          // Call https://github.com/meteor/meteor/blob/1e7e56eec8414093cd0c1c70750b894069fc972a/packages/ddp-common/heartbeat.js#L80-L88\n          this.meteorHeartbeat._seenPacket = true;\n          if (this.meteorHeartbeat._heartbeatTimeoutHandle) {\n            this.meteorHeartbeat._clearHeartbeatTimeoutTimer();\n          }\n        }\n\n        if (this.readyState > 1/* API.OPEN = 1 */) return false;\n        if (!(data instanceof Buffer)) data = String(data);\n        return this._driver.messages.write(data);\n      } catch (err) {\n        console.error('Error on send data', err);\n        return false;\n      }\n    };\n\n    Meteor.setInterval(() => {\n      for (const session of Meteor.server.sessions.values()) {\n        const { socket } = session;\n        const recv = socket._session.recv;\n\n        if (session.bbbFixApplied || !recv || !recv.ws) {\n          continue;\n        }\n\n        recv.ws.meteorHeartbeat = session.heartbeat;\n        recv.__proto__.heartbeat = newHeartbeat;\n        recv.ws.__proto__.send = newSend;\n        session.bbbFixApplied = true;\n      }\n    }, 5000);\n  }\n  if (CDN_URL.trim()) {\n    // Add CDN\n    BrowserPolicy.content.disallowEval();\n    BrowserPolicy.content.allowInlineScripts();\n    BrowserPolicy.content.allowInlineStyles();\n    BrowserPolicy.content.allowImageDataUrl(CDN_URL);\n    BrowserPolicy.content.allowFontDataUrl(CDN_URL);\n    BrowserPolicy.content.allowOriginForAll(CDN_URL);\n    WebAppInternals.setBundledJsCssPrefix(CDN_URL + APP_CONFIG.basename + Meteor.settings.public.app.instanceId);\n\n    const fontRegExp = /\\.(eot|ttf|otf|woff|woff2)$/;\n\n    WebApp.rawConnectHandlers.use('/', (req, res, next) => {\n      if (fontRegExp.test(req._parsedUrl.pathname)) {\n        res.setHeader('Access-Control-Allow-Origin', '*');\n        res.setHeader('Vary', 'Origin');\n        res.setHeader('Pragma', 'public');\n        res.setHeader('Cache-Control', '\"public\"');\n      }\n      return next();\n    });\n  }\n\n  setMinBrowserVersions();\n\n  Meteor.onMessage(event => {\n    const { method } = event;\n    if (method) {\n      const methodName = method.includes('stream-cursor') ? 'stream-cursor' : method;\n      PrometheusAgent.increment(METRIC_NAMES.METEOR_METHODS, { methodName });\n    }\n  });\n\n  Logger.warn(`SERVER STARTED.\n  ENV=${env}\n  nodejs version=${process.version}\n  BBB_HTML5_ROLE=${process.env.BBB_HTML5_ROLE}\n  INSTANCE_ID=${instanceId}\n  PORT=${process.env.PORT}\n  CDN=${CDN_URL}\\n`, APP_CONFIG);\n});\n\n\nconst generateLocaleOptions = () => {\n  try {\n    Logger.warn('Calculating aggregateLocales (heavy)');\n\n\n    // remove duplicated locales (always remove more generic if same name)\n    const tempAggregateLocales = AVAILABLE_LOCALES\n      .map(file => file.replace('.json', ''))\n      .map(file => file.replace('_', '-'))\n      .map((locale) => {\n        const localeName = (Langmap[locale] || {}).nativeName\n          || (FALLBACK_LOCALES[locale] || {}).nativeName\n          || locale;\n        return {\n          locale,\n          name: localeName,\n        };\n      }).reverse()\n      .filter((item, index, self) => index === self.findIndex(i => (\n        i.name === item.name\n      )))\n      .reverse();\n\n    Logger.warn(`Total locales: ${tempAggregateLocales.length}`, tempAggregateLocales);\n\n    return tempAggregateLocales;\n  } catch (e) {\n    Logger.error(`'Could not process locales error: ${e}`);\n    return [];\n  }\n};\n\nlet avaibleLocalesNamesJSON = JSON.stringify(generateLocaleOptions());\n\nWebApp.connectHandlers.use('/check', (req, res) => {\n  const payload = { html5clientStatus: 'running' };\n\n  res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(JSON.stringify(payload));\n});\n\nWebApp.connectHandlers.use('/locale', (req, res) => {\n  const APP_CONFIG = Meteor.settings.public.app;\n  const fallback = APP_CONFIG.defaultSettings.application.fallbackLocale;\n  const override = APP_CONFIG.defaultSettings.application.overrideLocale;\n  const browserLocale = override && req.query.init === 'true'\n    ? override.split(/[-_]/g) : req.query.locale.split(/[-_]/g);\n\n  let localeFile = fallback;\n\n  const usableLocales = AVAILABLE_LOCALES\n    .map(file => file.replace('.json', ''))\n    .reduce((locales, locale) => (locale.match(browserLocale[0])\n      ? [...locales, locale]\n      : locales), []);\n\n  let normalizedLocale;\n\n  const regionDefault = usableLocales.find(locale => browserLocale[0] === locale);\n\n  if (browserLocale.length > 1) {\n    // browser asks for specific locale\n    normalizedLocale = `${browserLocale[0]}_${browserLocale[1]?.toUpperCase()}`;\n\n    const normDefault = usableLocales.find(locale => normalizedLocale === locale);\n    if (normDefault) {\n      localeFile = normDefault;\n    } else {\n      if (regionDefault) {\n        localeFile = regionDefault;\n      } else {\n        const specFallback = usableLocales.find(locale => browserLocale[0] === locale.split(\"_\")[0]);\n        if (specFallback) localeFile = specFallback;\n      }\n    }\n  } else {\n    // browser asks for region default locale\n    if (regionDefault && localeFile === fallback && regionDefault !== localeFile) {\n      localeFile = regionDefault;\n    } else {\n      const normFallback = usableLocales.find(locale => browserLocale[0] === locale.split(\"_\")[0]);\n      if (normFallback) localeFile = normFallback;\n    }\n  }\n\n  res.setHeader('Content-Type', 'application/json');\n  res.end(JSON.stringify({\n    normalizedLocale: localeFile,\n    regionDefaultLocale: (regionDefault && regionDefault !== localeFile) ? regionDefault : '',\n  }));\n});\n\nWebApp.connectHandlers.use('/locale-list', (req, res) => {\n  if (!avaibleLocalesNamesJSON) {\n    avaibleLocalesNamesJSON = JSON.stringify(generateLocaleOptions());\n  }\n\n  res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(avaibleLocalesNamesJSON);\n});\n\nWebApp.connectHandlers.use('/feedback', (req, res) => {\n  req.on('data', Meteor.bindEnvironment((data) => {\n    const body = JSON.parse(data);\n    const {\n      meetingId,\n      userId,\n      authToken,\n      userName: reqUserName,\n      comment,\n      rating,\n    } = body;\n\n    check(meetingId, String);\n    check(userId, String);\n    check(authToken, String);\n    check(reqUserName, String);\n    check(comment, String);\n    check(rating, Number);\n\n    const user = Users.findOne({\n      meetingId,\n      userId,\n      authToken,\n    });\n\n    if (!user) {\n      Logger.warn('Couldn\\'t find user for feedback');\n    }\n\n    res.setHeader('Content-Type', 'application/json');\n    res.writeHead(200);\n    res.end(JSON.stringify({ status: 'ok' }));\n\n    body.userName = user ? user.name : `[unconfirmed] ${reqUserName}`;\n\n    const feedback = {\n      ...body,\n    };\n    Logger.info('FEEDBACK LOG:', feedback);\n  }));\n});\n\nWebApp.connectHandlers.use('/useragent', (req, res) => {\n  const userAgent = req.headers['user-agent'];\n  let response = 'No user agent found in header';\n  if (userAgent) {\n    response = lookupUserAgent(userAgent).toString();\n  }\n\n  Logger.info(`The requesting user agent is ${response}`);\n\n  // res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(response);\n});\n\nWebApp.connectHandlers.use('/guestWait', (req, res) => {\n  if (!guestWaitHtml) {\n    try {\n      guestWaitHtml = Assets.getText('static/guest-wait/guest-wait.html');\n    } catch (e) {\n      Logger.warn(`Could not process guest wait html file: ${e}`);\n    }\n  }\n\n  res.setHeader('Content-Type', 'text/html');\n  res.writeHead(200);\n  res.end(guestWaitHtml);\n});\n\nexport const eventEmitter = Redis.emitter;\n\nexport const redisPubSub = Redis;\n","import { Meteor } from 'meteor/meteor';\nimport { createLogger, format, transports } from 'winston';\nimport WinstonPromTransport from './prom-metrics/winstonPromTransport';\n\nconst LOG_CONFIG = Meteor?.settings?.private?.serverLog || {};\nconst { level } = LOG_CONFIG;\n\nconst Logger = createLogger({\n  level,\n  format: format.combine(\n    format.colorize({ level: true }),\n    format.splat(),\n    format.simple(),\n  ),\n  transports: [\n    // console logging\n    new transports.Console({\n      prettyPrint: false,\n      humanReadableUnhandledException: true,\n      colorize: true,\n      handleExceptions: true,\n      level,\n    }),\n    // export error logs to prometheus\n    new WinstonPromTransport({\n      level: 'error',\n    }),\n  ],\n});\n\nexport default Logger;\n\nexport const logger = Logger;\n","/* eslint-disable no-prototype-builtins */\n\nimport fs from 'fs';\nimport path from 'path';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from './logger';\n\nconst {\n  metricsDumpIntervalMs,\n  metricsFolderPath,\n  removeMeetingOnEnd,\n} = Meteor.settings.private.redis.metrics;\n\nclass Metrics {\n  constructor() {\n    this.metrics = {};\n  }\n\n  addEvent(meetingId, eventName, messageLength) {\n    if (!this.metrics.hasOwnProperty(meetingId)) {\n      this.metrics[meetingId] = {\n        currentlyInQueue: {},\n        wasInQueue: {},\n      };\n    }\n\n    const { currentlyInQueue } = this.metrics[meetingId];\n\n    if (!currentlyInQueue.hasOwnProperty(eventName)) {\n      currentlyInQueue[eventName] = {\n        count: 1,\n        payloadSize: messageLength,\n      };\n    } else {\n      currentlyInQueue[eventName].count += 1;\n      currentlyInQueue[eventName].payloadSize += messageLength;\n    }\n  }\n\n  processEvent(meetingId, eventName, size, processingStartTimestamp) {\n    const currentProcessingTimestamp = Date.now();\n    const processTime = currentProcessingTimestamp - processingStartTimestamp;\n\n    this.addEvent(meetingId, eventName, size);\n\n    if (!this.metrics[meetingId].wasInQueue.hasOwnProperty(eventName)) {\n      this.metrics[meetingId].wasInQueue[eventName] = {\n        count: 1,\n        payloadSize: {\n          min: size,\n          max: size,\n          last: size,\n          total: size,\n          avg: size,\n        },\n        processingTime: {\n          min: processTime,\n          max: processTime,\n          last: processTime,\n          total: processTime,\n          avg: processTime,\n        },\n      };\n      this.metrics[meetingId].currentlyInQueue[eventName].count -= 1;\n\n      if (!this.metrics[meetingId].currentlyInQueue[eventName].count) {\n        delete this.metrics[meetingId].currentlyInQueue[eventName];\n      }\n    } else {\n      const { currentlyInQueue, wasInQueue } = this.metrics[meetingId];\n\n      currentlyInQueue[eventName].count -= 1;\n\n      if (!currentlyInQueue[eventName].count) {\n        delete currentlyInQueue[eventName];\n      }\n\n      const { payloadSize, processingTime } = wasInQueue[eventName];\n\n      wasInQueue[eventName].count += 1;\n\n      payloadSize.last = size;\n      payloadSize.total += size;\n\n      if (payloadSize.min > size) payloadSize.min = size;\n      if (payloadSize.max < size) payloadSize.max = size;\n\n      payloadSize.avg = payloadSize.total / wasInQueue[eventName].count;\n\n      if (processingTime.min > processTime) processingTime.min = processTime;\n      if (processingTime.max < processTime) processingTime.max = processTime;\n\n      processingTime.last = processTime;\n      processingTime.total += processTime;\n      processingTime.avg = processingTime.total / wasInQueue[eventName].count;\n    }\n  }\n\n  setAnnotationQueueLength(meetingId, size) {\n    this.metrics[meetingId].annotationQueueLength = size;\n  }\n\n  startDumpFile() {\n    Meteor.setInterval(() => {\n      try {\n        const fileDate = new Date();\n        const fullYear = fileDate.getFullYear();\n        const month = (fileDate.getMonth() + 1).toString().padStart(2, '0');\n        const day = fileDate.getDate().toString().padStart(2, '0');\n        const hour = fileDate.getHours().toString().padStart(2, '0');\n        const minutes = fileDate.getMinutes().toString().padStart(2, '0');\n        const seconds = fileDate.getSeconds().toString().padStart(2, '0');\n\n        const folderName = `${fullYear}${month}${day}_${hour}`;\n        const fileName = `${folderName}${minutes}${seconds}_metrics.json`;\n\n        const folderPath = path.join(metricsFolderPath, folderName);\n        const fullFilePath = path.join(folderPath, fileName);\n\n        if (!fs.existsSync(folderPath)) {\n          Logger.debug(`Creating folder: ${folderPath}`);\n          fs.mkdirSync(folderPath);\n        }\n\n        fs.writeFileSync(fullFilePath, JSON.stringify(this.metrics));\n\n        Logger.info('Metric file successfully written');\n      } catch (err) {\n        Logger.error('Error on writing metrics to disk.', err);\n      }\n    }, metricsDumpIntervalMs);\n  }\n\n  removeMeeting(meetingId) {\n    if (removeMeetingOnEnd) {\n      Logger.info(`Removing meeting ${meetingId} from metrics`);\n      delete this.metrics[meetingId];\n    } else {\n      Logger.info(`Skipping remove of meeting ${meetingId} from metrics`);\n    }\n  }\n}\n\nconst metricsSingleton = new Metrics();\n\nexport default metricsSingleton;\n","import { Meteor } from 'meteor/meteor';\nimport { setMinimumBrowserVersions } from 'meteor/modern-browsers';\n\nconst setMinBrowserVersions = () => {\n  const { minBrowserVersions } = Meteor.settings.private;\n\n  const versions = {};\n\n  minBrowserVersions.forEach((elem) => {\n    let { version } = elem;\n    if (version === 'Infinity') version = Infinity;\n\n    versions[elem.browser] = version;\n  });\n\n  setMinimumBrowserVersions(versions, 'bbb-min');\n};\n\nexport default setMinBrowserVersions;\n","import Redis from 'redis';\nimport { Meteor } from 'meteor/meteor';\nimport { EventEmitter2 } from 'eventemitter2';\nimport { check } from 'meteor/check';\nimport Logger from './logger';\nimport Metrics from './metrics';\nimport queue from 'queue';\nimport { PrometheusAgent, METRIC_NAMES } from './prom-metrics/index.js'\n\n// Fake meetingId used for messages that have no meetingId\nconst NO_MEETING_ID = '_';\n\nconst { queueMetrics } = Meteor.settings.private.redis.metrics;\nconst { collectRedisMetrics: PROM_METRICS_ENABLED  } = Meteor.settings.private.prometheus;\n\nconst makeEnvelope = (channel, eventName, header, body, routing) => {\n  const envelope = {\n    envelope: {\n      name: eventName,\n      routing: routing || {\n        sender: 'html5-server',\n      },\n      timestamp: Date.now(),\n    },\n    core: {\n      header,\n      body,\n    },\n  };\n\n  return JSON.stringify(envelope);\n};\n\nconst getInstanceIdFromMessage = (parsedMessage) => {\n  // End meeting message does not seem to have systemProps\n  let instanceIdFromMessage = parsedMessage.core.body.props?.systemProps?.html5InstanceId;\n\n  return instanceIdFromMessage;\n};\n\nclass MeetingMessageQueue {\n  constructor(eventEmitter, asyncMessages = [], redisDebugEnabled = false) {\n    this.asyncMessages = asyncMessages;\n    this.emitter = eventEmitter;\n    this.queue = queue({ autostart: true, concurrency: 1 });\n    this.redisDebugEnabled = redisDebugEnabled;\n\n    this.handleTask = this.handleTask.bind(this);\n    this.queue.taskHandler = this.handleTask;\n  }\n\n  handleTask(data, next) {\n    const { channel } = data;\n    const { envelope } = data.parsedMessage;\n    const { header } = data.parsedMessage.core;\n    const { body } = data.parsedMessage.core;\n    const { meetingId } = header;\n    const eventName = header.name;\n    const isAsync = this.asyncMessages.includes(channel)\n      || this.asyncMessages.includes(eventName);\n\n    const beginHandleTimestamp = Date.now();\n    let called = false;\n\n    check(eventName, String);\n    check(body, Object);\n\n    const callNext = () => {\n      if (called) return;\n      if (this.redisDebugEnabled) {\n        Logger.debug(`Redis: ${eventName} completed ${isAsync ? 'async' : 'sync'}`);\n      }\n      called = true;\n\n      if (queueMetrics) {\n        const queueId = meetingId || NO_MEETING_ID;\n        const dataLength = JSON.stringify(data).length;\n\n        Metrics.processEvent(queueId, eventName, dataLength, beginHandleTimestamp);\n      }\n\n      const queueLength = this.queue.length;\n\n      if (PROM_METRICS_ENABLED) {\n        const dataLength = JSON.stringify(data).length;\n        const currentTimestamp = Date.now();\n        const processTime = currentTimestamp - beginHandleTimestamp;\n        PrometheusAgent.observe(METRIC_NAMES.REDIS_PROCESSING_TIME, processTime, { eventName });\n        PrometheusAgent.observe(METRIC_NAMES.REDIS_PAYLOAD_SIZE, dataLength, { eventName });\n        meetingId && PrometheusAgent.set(METRIC_NAMES.REDIS_MESSAGE_QUEUE, queueLength, { meetingId });\n      }\n\n      if (queueLength > 100) {\n        Logger.warn(`Redis: MeetingMessageQueue for meetingId=${meetingId} has queue size=${queueLength} `);\n      }\n      next();\n    };\n\n    const onError = (reason) => {\n      Logger.error(`${eventName}: ${reason.stack ? reason.stack : reason}`);\n      callNext();\n    };\n\n    try {\n      if (this.redisDebugEnabled) {\n        if (!Meteor.settings.private.analytics.includeChat && eventName === 'GroupChatMessageBroadcastEvtMsg') {\n          return;\n        }\n        Logger.debug(`Redis: ${JSON.stringify(data.parsedMessage.core)} emitted`);\n      }\n\n      if (isAsync) {\n        callNext();\n      }\n\n      this.emitter\n        .emitAsync(eventName, { envelope, header, body }, meetingId)\n        .then(callNext)\n        .catch(onError);\n    } catch (reason) {\n      onError(reason);\n    }\n  }\n\n  add(...args) {\n    const { taskHandler } = this.queue;\n\n    this.queue.push(function (next) {\n      taskHandler(...args, next);\n    })\n\n  }\n}\n\nclass RedisPubSub {\n  static handlePublishError(err) {\n    if (err) {\n      Logger.error(err);\n    }\n  }\n\n  constructor(config = {}) {\n    this.config = config;\n\n    this.didSendRequestEvent = false;\n    const host = process.env.REDIS_HOST || Meteor.settings.private.redis.host;\n    const redisConf = Meteor.settings.private.redis;\n    this.instanceId = parseInt(process.env.INSTANCE_ID, 10) || 1; // 1 also handles running in dev mode\n    this.role = process.env.BBB_HTML5_ROLE;\n    this.customRedisChannel = `to-html5-redis-channel${this.instanceId}`;\n\n    const { password, port } = redisConf;\n\n    if (password) {\n      this.pub = Redis.createClient({ host, port, password });\n      this.sub = Redis.createClient({ host, port, password });\n      this.pub.auth(password);\n      this.sub.auth(password);\n    } else {\n      this.pub = Redis.createClient({ host, port });\n      this.sub = Redis.createClient({ host, port });\n    }\n\n    if (queueMetrics) {\n      Metrics.startDumpFile();\n    }\n\n    this.emitter = new EventEmitter2();\n    this.meetingsQueues = {};\n    // We create this _ meeting queue because we need to be able to handle system messages (no meetingId in core.header)\n    this.meetingsQueues[NO_MEETING_ID] = new MeetingMessageQueue(this.emitter, this.config.async, this.config.debug);\n\n    this.handleSubscribe = this.handleSubscribe.bind(this);\n    this.handleMessage = this.handleMessage.bind(this);\n  }\n\n  init() {\n    this.sub.on('psubscribe', Meteor.bindEnvironment(this.handleSubscribe));\n    this.sub.on('pmessage', Meteor.bindEnvironment(this.handleMessage));\n\n    const channelsToSubscribe = this.config.subscribeTo;\n\n    channelsToSubscribe.push(this.customRedisChannel);\n\n    switch (this.role) {\n      case 'frontend':\n        this.sub.psubscribe('from-akka-apps-frontend-redis-channel');\n        if (this.redisDebugEnabled) {\n          Logger.debug(`Redis: NodeJSPool:${this.instanceId} Role: frontend. Subscribed to 'from-akka-apps-frontend-redis-channel'`);\n        }\n        break;\n      case 'backend':\n        channelsToSubscribe.forEach((channel) => {\n          this.sub.psubscribe(channel);\n          if (this.redisDebugEnabled) {\n            Logger.debug(`Redis: NodeJSPool:${this.instanceId} Role: backend. Subscribed to '${channelsToSubscribe}'`);\n          }\n        });\n        break;\n      default:\n        this.sub.psubscribe('from-akka-apps-frontend-redis-channel');\n        channelsToSubscribe.forEach((channel) => {\n          this.sub.psubscribe(channel);\n          if (this.redisDebugEnabled) {\n            Logger.debug(`Redis: NodeJSPool:${this.instanceId} Role:${this.role} (likely only one nodejs running, doing both frontend and backend. Dev env? ). Subscribed to '${channelsToSubscribe}'`);\n          }\n        });\n\n        break;\n    }\n  }\n\n  updateConfig(config) {\n    this.config = Object.assign({}, this.config, config);\n    this.redisDebugEnabled = this.config.debug;\n  }\n\n\n  // TODO: Move this out of this class, maybe pass as a callback to init?\n  handleSubscribe() {\n    if (this.didSendRequestEvent || this.role === 'frontend') return;\n\n    // populate collections with pre-existing data\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'GetAllMeetingsReqMsg';\n\n    const body = {\n      requesterId: 'nodeJSapp',\n      html5InstanceId: this.instanceId,\n    };\n\n    this.publishSystemMessage(CHANNEL, EVENT_NAME, body);\n    this.didSendRequestEvent = true;\n  }\n\n  handleMessage(pattern, channel, message) {\n    const parsedMessage = JSON.parse(message);\n    const { ignored: ignoredMessages, async } = this.config;\n    const eventName = parsedMessage.core.header.name;\n\n    if (ignoredMessages.includes(channel)\n      || ignoredMessages.includes(eventName)) {\n      if (eventName === 'CheckAlivePongSysMsg') {\n        return;\n      }\n      if (this.redisDebugEnabled) {\n        Logger.debug(`Redis: ${eventName} skipped`);\n      }\n      return;\n    }\n\n    if (this.redisDebugEnabled) {\n      Logger.warn('Received event to handle', { date: new Date().toISOString(), eventName });\n    }\n\n    // System messages like Create / Destroy Meeting, etc do not have core.header.meetingId.\n    // Process them in MeetingQueue['_']  --- the NO_MEETING queueId\n    const meetingIdFromMessageCoreHeader = parsedMessage.core.header.meetingId || NO_MEETING_ID;\n\n    if (this.role === 'frontend') {\n      // receiving this message means we need to look at it. Frontends do not have instanceId.\n      if (meetingIdFromMessageCoreHeader === NO_MEETING_ID) { // if this is a system message\n        if (eventName === 'MeetingCreatedEvtMsg' || eventName === 'SyncGetMeetingInfoRespMsg') {\n          const meetingIdFromMessageMeetingProp = parsedMessage.core.body.props.meetingProp.intId;\n          this.meetingsQueues[meetingIdFromMessageMeetingProp] = new MeetingMessageQueue(this.emitter, async, this.redisDebugEnabled);\n          if (this.redisDebugEnabled) {\n            Logger.warn('Created frontend queue for meeting', { date: new Date().toISOString(), eventName, meetingIdFromMessageMeetingProp });\n          }\n        }\n      }\n\n      if (!this.meetingsQueues[meetingIdFromMessageCoreHeader]) {\n        Logger.warn(`Frontend meeting queue had not been initialized   ${message}`, { eventName, meetingIdFromMessageCoreHeader });\n        this.meetingsQueues[NO_MEETING_ID].add({\n          pattern,\n          channel,\n          eventName,\n          parsedMessage,\n        });\n      } else {\n        // process the event - whether it's a system message or not, the meetingIdFromMessageCoreHeader value is adjusted\n        this.meetingsQueues[meetingIdFromMessageCoreHeader].add({\n          pattern,\n          channel,\n          eventName,\n          parsedMessage,\n        });\n      }\n    } else { // backend\n      if (meetingIdFromMessageCoreHeader === NO_MEETING_ID) { // if this is a system message\n        const meetingIdFromMessageMeetingProp = parsedMessage.core.body.props?.meetingProp?.intId;\n        const instanceIdFromMessage = getInstanceIdFromMessage(parsedMessage);\n\n        if (this.instanceId === instanceIdFromMessage) {\n          // create queue or destroy queue\n          if (eventName === 'MeetingCreatedEvtMsg' || eventName === 'SyncGetMeetingInfoRespMsg') {\n            this.meetingsQueues[meetingIdFromMessageMeetingProp] = new MeetingMessageQueue(this.emitter, async, this.redisDebugEnabled);\n            if (this.redisDebugEnabled) {\n              Logger.warn('Created backend queue for meeting', { date: new Date().toISOString(), eventName, meetingIdFromMessageMeetingProp });\n            }\n          }\n          this.meetingsQueues[NO_MEETING_ID].add({\n            pattern,\n            channel,\n            eventName,\n            parsedMessage,\n          });\n        } else {\n          if (eventName === 'MeetingEndedEvtMsg' || eventName === 'MeetingDestroyedEvtMsg') {\n            // MeetingEndedEvtMsg does not follow the system message pattern for meetingId\n            // but we still need to process it on the backend which is processing the rest of the events\n            // for this meetingId (it does not contain instanceId either, so we cannot compare that)\n            const meetingIdForMeetingEnded = parsedMessage.core.body.meetingId;\n            if (!!this.meetingsQueues[meetingIdForMeetingEnded]) {\n              this.meetingsQueues[NO_MEETING_ID].add({\n                pattern,\n                channel,\n                eventName,\n                parsedMessage,\n              });\n            }\n          }\n          // ignore\n        }\n      } else {\n        // add to existing queue\n        if (!!this.meetingsQueues[meetingIdFromMessageCoreHeader]) {\n          // only handle message if we have a queue for the meeting. If we don't have a queue, it means it's for a different instanceId\n          this.meetingsQueues[meetingIdFromMessageCoreHeader].add({\n            pattern,\n            channel,\n            eventName,\n            parsedMessage,\n          });\n        } else {\n          // If we reach this line, this means that there is no existing queue for this redis \"backend\" message\n          // which means that the meeting is fully handled by another bbb-html5-backend.\n          // Logger.warn('Backend meeting queue had not been initialized', { eventName, meetingIdFromMessageCoreHeader })\n        }\n      }\n    }\n  }\n\n  destroyMeetingQueue(id) {\n    delete this.meetingsQueues[id];\n  }\n\n  on(...args) {\n    return this.emitter.on(...args);\n  }\n\n  publishVoiceMessage(channel, eventName, voiceConf, payload) {\n    const header = {\n      name: eventName,\n      voiceConf,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishSystemMessage(channel, eventName, payload) {\n    const header = {\n      name: eventName,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishMeetingMessage(channel, eventName, meetingId, payload) {\n    const header = {\n      name: eventName,\n      meetingId,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishUserMessage(channel, eventName, meetingId, userId, payload) {\n    const header = {\n      name: eventName,\n      meetingId,\n      userId,\n    };\n\n    if (!meetingId || !userId) {\n      Logger.warn(`Publishing ${eventName} with potentially missing data userId=${userId} meetingId=${meetingId}`);\n    }\n    const envelope = makeEnvelope(channel, eventName, header, payload, { meetingId, userId });\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n}\n\nconst RedisPubSubSingleton = new RedisPubSub();\n\nMeteor.startup(() => {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  RedisPubSubSingleton.updateConfig(REDIS_CONFIG);\n  RedisPubSubSingleton.init();\n});\n\nexport default RedisPubSubSingleton;\n","/* global __meteor_runtime_config__ */\nimport { Meteor } from 'meteor/meteor';\nimport fs from 'fs';\nimport YAML from 'yaml';\nimport _ from 'lodash';\n\nconst DEFAULT_SETTINGS_FILE_PATH = process.env.BBB_HTML5_SETTINGS || 'assets/app/config/settings.yml';\nconst LOCAL_SETTINGS_FILE_PATH = process.env.BBB_HTML5_LOCAL_SETTINGS || '/etc/bigbluebutton/bbb-html5.yml';\n\ntry {\n  if (fs.existsSync(DEFAULT_SETTINGS_FILE_PATH)) {\n    const SETTINGS = YAML.parse(fs.readFileSync(DEFAULT_SETTINGS_FILE_PATH, 'utf-8'));\n\n    if (fs.existsSync(LOCAL_SETTINGS_FILE_PATH)) {\n      console.log('Local configuration found! Merging with default configuration...');\n      const LOCAL_CONFIG = YAML.parse(fs.readFileSync(LOCAL_SETTINGS_FILE_PATH, 'utf-8'));\n      _.mergeWith(SETTINGS, LOCAL_CONFIG, (a, b) => (_.isArray(b) ? b : undefined));\n    } else console.log('Local Configuration not found! Loading default configuration...');\n\n    Meteor.settings = SETTINGS;\n    Meteor.settings.public.app.instanceId = ''; // no longer use instanceId in URLs. Likely permanent change\n    // Meteor.settings.public.app.instanceId = `/${INSTANCE_ID}`;\n\n    Meteor.settings.public.packages = {\n      'dynamic-import': { useLocationOrigin: true },\n    };\n\n    __meteor_runtime_config__.PUBLIC_SETTINGS = SETTINGS.public;\n  } else {\n    throw new Error('File doesn\\'t exists');\n  }\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.error('Error on load configuration file.', error);\n}\n","export const LAYOUT_TYPE = {\n  CUSTOM_LAYOUT: 'custom',\n  SMART_LAYOUT: 'smart',\n  PRESENTATION_FOCUS: 'presentationFocus',\n  VIDEO_FOCUS: 'videoFocus',\n};\n\nexport const DEVICE_TYPE = {\n  MOBILE: 'mobile',\n  TABLET_PORTRAIT: 'tablet_portrait',\n  TABLET_LANDSCAPE: 'tablet_landscape',\n  TABLET: 'tablet',\n  DESKTOP: 'desktop',\n};\n\nexport const SMALL_VIEWPORT_BREAKPOINT = 640;\n\nexport const CAMERADOCK_POSITION = {\n  CONTENT_TOP: 'contentTop',\n  CONTENT_RIGHT: 'contentRight',\n  CONTENT_BOTTOM: 'contentBottom',\n  CONTENT_LEFT: 'contentLeft',\n  SIDEBAR_CONTENT_BOTTOM: 'sidebarContentBottom',\n};\n\nexport const ACTIONS = {\n  SET_AUTO_ARRANGE_LAYOUT: 'setAutoArrangeLayout',\n  SET_IS_RTL: 'setIsRTL',\n  SET_LAYOUT_TYPE: 'setLayoutType',\n  SET_DEVICE_TYPE: 'setDeviceType',\n  SET_FONT_SIZE: 'setFontSize',\n\n  SET_LAYOUT_INPUT: 'setLayoutInput',\n\n  SET_SIDEBAR_NAVIGATION_PANEL: 'setSidebarNavigationPanel',\n  SET_SIDEBAR_CONTENT_PANEL: 'setSidebarcontentPanel',\n\n  SET_ID_CHAT_OPEN: 'setIdChatOpen',\n\n  SET_BROWSER_SIZE: 'setBrowserSize',\n\n  SET_HAS_BANNER_BAR: 'setHasBannerBar',\n  SET_HAS_NOTIFICATIONS_BAR: 'setHasNotificationsBar',\n\n  SET_NAVBAR_OUTPUT: 'setNavBarOutput',\n\n  SET_ACTIONBAR_OUTPUT: 'setActionBarOutput',\n\n  SET_SIDEBAR_NAVIGATION_IS_OPEN: 'setSidebarNavigationIsOpen',\n  SET_SIDEBAR_NAVIGATION_SIZE: 'setSidebarNavigationSize',\n  SET_SIDEBAR_NAVIGATION_OUTPUT: 'setSidebarNavigationOutput',\n  SET_SIDEBAR_NAVIGATION_IS_RESIZABLE: 'setSidebarNavigationIsResizable',\n  SET_SIDEBAR_NAVIGATION_RESIZABLE_EDGE: 'setSidebarNavigationResizableEdge',\n\n  SET_SIDEBAR_CONTENT_IS_OPEN: 'setSidebarContentIsOpen',\n  SET_SIDEBAR_CONTENT_SIZE: 'setSidebarContentSize',\n  SET_SIDEBAR_CONTENT_PANEL_TYPE: 'setSidebarContentPanelType',\n  SET_SIDEBAR_CONTENT_OUTPUT: 'setSidebarContentOutput',\n  SET_SIDEBAR_CONTENT_IS_RESIZABLE: 'setSidebarContentIsResizable',\n  SET_SIDEBAR_CONTENT_RESIZABLE_EDGE: 'setSidebarContentResizableEdge',\n\n  SET_MEDIA_AREA_SIZE: 'setMediaAreaSize',\n\n  SET_NUM_CAMERAS: 'setNumCameras',\n  SET_CAMERA_DOCK_IS_DRAGGING: 'setCameraDockIsDragging',\n  SET_CAMERA_DOCK_IS_RESIZING: 'setCameraDockIsResizing',\n  SET_CAMERA_DOCK_POSITION: 'setCameraDockPosition',\n  SET_CAMERA_DOCK_SIZE: 'setCameraDockSize',\n  SET_CAMERA_DOCK_OPTIMAL_GRID_SIZE: 'setCameraDockOptimalGridSize',\n  SET_CAMERA_DOCK_OUTPUT: 'setCameraDockOutput',\n  SET_CAMERA_DOCK_IS_DRAGGABLE: 'setCameraDockIsDraggable',\n  SET_CAMERA_DOCK_IS_RESIZABLE: 'setCameraDockIsResizable',\n  SET_CAMERA_DOCK_RESIZABLE_EDGE: 'setCameraDockResizableEdge',\n\n  SET_DROP_AREAS: 'setDropAreas',\n\n  SET_PRESENTATION_IS_OPEN: 'setPresentationIsOpen',\n  SET_PRESENTATION_CURRENT_SLIDE_SIZE: 'setPresentationCurrentSlideSize',\n  SET_PRESENTATION_NUM_CURRENT_SLIDE: 'setPresentationNumCurrentSlide',\n  SET_PRESENTATION_SLIDES_LENGTH: 'setPresentationSlideslength',\n  SET_PRESENTATION_SIZE: 'setPresentationSize',\n  SET_PRESENTATION_OUTPUT: 'setPresentationOutput',\n  SET_PRESENTATION_IS_RESIZABLE: 'setPresentationIsResizable',\n  SET_PRESENTATION_RESIZABLE_EDGE: 'setPresentationResizableEdge',\n\n  SET_FULLSCREEN_ELEMENT: 'setFullscreenElement',\n\n  SET_HAS_SCREEN_SHARE: 'setHasScreenShare',\n  SET_SCREEN_SHARE_SIZE: 'setScreenShareSize',\n  SET_SCREEN_SHARE_OUTPUT: 'setScreenShareOutput',\n\n  SET_HAS_EXTERNAL_VIDEO: 'setHasExternalVideo',\n  SET_EXTERNAL_VIDEO_SIZE: 'setExternalVideoSize',\n  SET_EXTERNAL_VIDEO_OUTPUT: 'setExternalVideoOutput',\n};\n\nexport const PANELS = {\n  USERLIST: 'userlist',\n  CHAT: 'chat',\n  POLL: 'poll',\n  CAPTIONS: 'captions',\n  BREAKOUT: 'breakoutroom',\n  SHARED_NOTES: 'shared-notes',\n  WAITING_USERS: 'waiting-users',\n  NONE: 'none',\n};\n","// Used in Flash and HTML to show a legitimate break in the line\nconst BREAK_LINE = '<br/>';\n\n// Soft return in HTML to signify a broken line without\n// displaying the escaped '<br/>' line break text\nconst CARRIAGE_RETURN = '\\r';\n\n// Handle this the same as carriage return, in case text copied has this\nconst NEW_LINE = '\\n';\n\nexport { BREAK_LINE, CARRIAGE_RETURN, NEW_LINE };\n","export const XLS = 'application/vnd.ms-excel';\nexport const XLSX = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\nexport const DOC = 'application/msword';\nexport const DOCX = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\nexport const PPT = 'application/vnd.ms-powerpoint';\nexport const PPTX = 'application/vnd.openxmlformats-officedocument.presentationml.presentation';\nexport const ODT = 'application/vnd.oasis.opendocument.text';\nexport const RTF = 'application/rtf';\nexport const TXT = 'text/plain';\nexport const ODS = 'application/vnd.oasis.opendocument.spreadsheet';\nexport const ODP = 'application/vnd.oasis.opendocument.presentation';\nexport const PDF = 'application/pdf';\nexport const JPEG = 'image/jpeg';\nexport const PNG = 'image/png';\nexport const SVG = 'image/svg+xml';\n\nexport const UPLOAD_SUPORTED = [\n  XLS,\n  XLSX,\n  DOC,\n  DOCX,\n  PPT,\n  PPTX,\n  ODT,\n  RTF,\n  TXT,\n  ODS,\n  ODP,\n  PDF,\n  JPEG,\n  PNG,\n];\n","//\n// Regular Expression for URL validation\n//\n// Author: Diego Perini\n// Updated: 2010/12/05\n// License: MIT\n//\n// Copyright (c) 2010-2013 Diego Perini (http://www.iport.it)\n//\n// Permission is hereby granted, free of charge, to any person\n// obtaining a copy of this software and associated documentation\n// files (the \"Software\"), to deal in the Software without\n// restriction, including without limitation the rights to use,\n// copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the\n// Software is furnished to do so, subject to the following\n// conditions:\n//\n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n// OTHER DEALINGS IN THE SOFTWARE.\n//\n// the regular expression composed & commented\n// could be easily tweaked for RFC compliance,\n// it was expressly modified to fit & satisfy\n// these test for an URL shortener:\n//\n//   http://mathiasbynens.be/demo/url-regex\n//\n// Notes on possible differences from a standard/generic validation:\n//\n// - utf-8 char class take in consideration the full Unicode range\n// - TLDs have been made mandatory so single names like \"localhost\" fails\n// - protocols have been restricted to ftp, http and https only as requested\n//\n// Changes:\n//\n// - IP address dotted notation validation, range: 1.0.0.0 - 223.255.255.255\n//   first and last IP address of each class is considered invalid\n//   (since they are broadcast/network addresses)\n//\n// - Added exclusion of private, reserved and/or local networks ranges\n//\n// - Made starting path slash optional (http://example.com?foo=bar)\n//\n// - Allow a dot (.) at the end of hostnames (http://example.com.)\n//\n// Compressed one-line versions:\n//\n// Javascript version (merge into one line)\n//\n// /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})\n// (?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})\n// (?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}\n// (?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)\n// (?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)\n// (?::\\d{2,5})?(?:[/?#]\\S*)?$/i\n//\n// PHP version (merge into one line)\n//\n// _^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)\n// (?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])\n// (?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5]))\n// {2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)\n// *[a-z\\x{00a1}-\\x{ffff}0-9]+)(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)*[a-z\\x{00a1}-\\x{ffff}0-9]+)\n// *(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$_iuS\n//\n\nexport default new RegExp(\n\n  // protocol identifier\n  '(?:(?:https?|ftp)://)' +\n\n  // user:pass authentication\n  '(?:\\\\S+(?::\\\\S*)?@)?' +\n  '(?:' +\n\n    // IP address exclusion\n    // private & local networks\n    '(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})' +\n    '(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})' +\n    '(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})' +\n\n    // IP address dotted notation octets\n    // excludes loopback network 0.0.0.0\n    // excludes reserved space >= 224.0.0.0\n    // excludes network & broacast addresses\n    // (first & last IP address of each class)\n    '(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])' +\n    '(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}' +\n    '(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))' +\n  '|' +\n\n    // host name\n    '(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)' +\n\n    // domain name\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*' +\n\n    // TLD identifier\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))' +\n\n    // TLD may end with dot\n    '\\\\.?' +\n  ')' +\n\n  // port number\n  '(?::\\\\d{2,5})?' +\n\n  // resource path\n  '(?:[/?#]\\\\S*)?', 'img',\n);\n","import '/imports/startup/server';\n\n// 2x\nimport '/imports/api/meetings/server';\nimport '/imports/api/users/server';\nimport '/imports/api/annotations/server';\nimport '/imports/api/cursor/server';\nimport '/imports/api/polls/server';\nimport '/imports/api/captions/server';\nimport '/imports/api/presentations/server';\nimport '/imports/api/presentation-pods/server';\nimport '/imports/api/presentation-upload-token/server';\nimport '/imports/api/slides/server';\nimport '/imports/api/breakouts/server';\nimport '/imports/api/breakouts-history/server';\nimport '/imports/api/group-chat/server';\nimport '/imports/api/group-chat-msg/server';\nimport '/imports/api/screenshare/server';\nimport '/imports/api/users-settings/server';\nimport '/imports/api/voice-users/server';\nimport '/imports/api/whiteboard-multi-user/server';\nimport '/imports/api/video-streams/server';\nimport '/imports/api/users-infos/server';\nimport '/imports/api/users-persistent-data/server';\nimport '/imports/api/connection-status/server';\nimport '/imports/api/external-videos/server';\nimport '/imports/api/pads/server';\nimport '/imports/api/guest-users/server';\nimport '/imports/api/local-settings/server';\nimport '/imports/api/voice-call-states/server';\n\n// Commons\nimport '/imports/api/log-client/server';\nimport '/imports/api/common/server/helpers';\nimport '/imports/startup/server/logger';\n\n// Needed for Atmosphere package RocketChat/meteor-streamer\n// It is out of date and was written when Meteor contained lodash\n// package. However, we now import lodash as an npm package\n// in order to control versions, update flexibly, etc..\n// Setting the global._ to utilize the npm lodash package is an interim fix\n// and its introduction was inspired by\n// https://github.com/RocketChat/meteor-streamer/issues/40#issuecomment-497627893\nimport _ from 'lodash';\n\nglobal._ = _;\n"]}