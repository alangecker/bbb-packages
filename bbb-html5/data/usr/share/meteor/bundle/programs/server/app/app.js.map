{"version":3,"sources":["meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardCleared.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardSend.js","meteor://ðŸ’»app/imports/api/annotations/server/handlers/whiteboardUndo.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/clearWhiteboard.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendAnnotationHelper.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/sendBulkAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/methods/undoAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/addAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/clearAnnotations.js","meteor://ðŸ’»app/imports/api/annotations/server/modifiers/removeAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/annotations/server/index.js","meteor://ðŸ’»app/imports/api/annotations/server/methods.js","meteor://ðŸ’»app/imports/api/annotations/server/publishers.js","meteor://ðŸ’»app/imports/api/annotations/server/streamer.js","meteor://ðŸ’»app/imports/api/annotations/addAnnotation.js","meteor://ðŸ’»app/imports/api/annotations/index.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutClosed.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutJoinURL.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/breakoutStarted.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/joinedUsersChanged.js","meteor://ðŸ’»app/imports/api/breakouts/server/handlers/updateTimeRemaining.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/createBreakout.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/endAllBreakouts.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods/requestJoinURL.js","meteor://ðŸ’»app/imports/api/breakouts/server/modifiers/clearBreakouts.js","meteor://ðŸ’»app/imports/api/breakouts/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/breakouts/server/index.js","meteor://ðŸ’»app/imports/api/breakouts/server/methods.js","meteor://ðŸ’»app/imports/api/breakouts/server/publishers.js","meteor://ðŸ’»app/imports/api/breakouts/index.js","meteor://ðŸ’»app/imports/api/captions/server/handlers/padCreate.js","meteor://ðŸ’»app/imports/api/captions/server/handlers/padUpdate.js","meteor://ðŸ’»app/imports/api/captions/server/methods/appendText.js","meteor://ðŸ’»app/imports/api/captions/server/methods/createCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/methods/editCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/methods/fetchReadOnlyPadId.js","meteor://ðŸ’»app/imports/api/captions/server/methods/takeOwnership.js","meteor://ðŸ’»app/imports/api/captions/server/methods/updateOwner.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/addCaption.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/clearCaptions.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/updateOwnerId.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/updatePad.js","meteor://ðŸ’»app/imports/api/captions/server/modifiers/updateReadOnlyPadId.js","meteor://ðŸ’»app/imports/api/captions/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/captions/server/helpers.js","meteor://ðŸ’»app/imports/api/captions/server/index.js","meteor://ðŸ’»app/imports/api/captions/server/methods.js","meteor://ðŸ’»app/imports/api/captions/server/publishers.js","meteor://ðŸ’»app/imports/api/captions/index.js","meteor://ðŸ’»app/imports/api/connection-status/server/methods/addConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/modifiers/clearConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/modifiers/updateConnectionStatus.js","meteor://ðŸ’»app/imports/api/connection-status/server/index.js","meteor://ðŸ’»app/imports/api/connection-status/server/methods.js","meteor://ðŸ’»app/imports/api/connection-status/server/publishers.js","meteor://ðŸ’»app/imports/api/connection-status/index.js","meteor://ðŸ’»app/imports/api/cursor/server/handlers/cursorUpdate.js","meteor://ðŸ’»app/imports/api/cursor/server/methods/publishCursorUpdate.js","meteor://ðŸ’»app/imports/api/cursor/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/cursor/server/index.js","meteor://ðŸ’»app/imports/api/cursor/server/methods.js","meteor://ðŸ’»app/imports/api/cursor/server/streamer.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/destroyExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/emitExternalVideoEvent.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/initializeExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/startWatchingExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods/stopWatchingExternalVideo.js","meteor://ðŸ’»app/imports/api/external-videos/server/index.js","meteor://ðŸ’»app/imports/api/external-videos/server/methods.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChatCreated.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChatDestroyed.js","meteor://ðŸ’»app/imports/api/group-chat/server/handlers/groupChats.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods/createGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods/destroyGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/modifiers/addGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/modifiers/clearGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/group-chat/server/index.js","meteor://ðŸ’»app/imports/api/group-chat/server/methods.js","meteor://ðŸ’»app/imports/api/group-chat/server/publishers.js","meteor://ðŸ’»app/imports/api/group-chat/index.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/clearPublicGroupChat.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/groupChatMsgBroadcast.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/groupChatsMsgs.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/handlers/userTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/clearPublicChatHistory.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/sendGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/startUserTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods/stopUserTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/addGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/clearGroupChatMsg.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/startTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/modifiers/stopTyping.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/index.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/methods.js","meteor://ðŸ’»app/imports/api/group-chat-msg/server/publishers.js","meteor://ðŸ’»app/imports/api/group-chat-msg/index.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestApproved.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestWaitingLeft.js","meteor://ðŸ’»app/imports/api/guest-users/server/handlers/guestsWaitingForApproval.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/allowPendingUsers.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods/changeGuestPolicy.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/removeGuest.js","meteor://ðŸ’»app/imports/api/guest-users/server/modifiers/setGuestStatus.js","meteor://ðŸ’»app/imports/api/guest-users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/guest-users/server/index.js","meteor://ðŸ’»app/imports/api/guest-users/server/methods.js","meteor://ðŸ’»app/imports/api/guest-users/server/publishers.js","meteor://ðŸ’»app/imports/api/guest-users/index.js","meteor://ðŸ’»app/imports/api/local-settings/server/methods/userChangedLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/modifiers/clearLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/modifiers/setChangedLocalSettings.js","meteor://ðŸ’»app/imports/api/local-settings/server/index.js","meteor://ðŸ’»app/imports/api/local-settings/server/methods.js","meteor://ðŸ’»app/imports/api/local-settings/server/publishers.js","meteor://ðŸ’»app/imports/api/local-settings/index.js","meteor://ðŸ’»app/imports/api/log-client/server/methods/logClient.js","meteor://ðŸ’»app/imports/api/log-client/server/index.js","meteor://ðŸ’»app/imports/api/log-client/server/methods.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/getAllMeetings.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingCreation.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingDestruction.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingEnd.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/meetingLockChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/recordingStatusChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/recordingTimerChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/timeRemainingUpdate.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/userLockChange.js","meteor://ðŸ’»app/imports/api/meetings/server/handlers/webcamOnlyModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/endMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleLockSettings.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleRecording.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/toggleWebcamsOnlyForModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/methods/transferUser.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/addMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/changeLockSettings.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/changeUserLock.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/clearRecordMeeting.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/meetingHasEnded.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/setPublishedPoll.js","meteor://ðŸ’»app/imports/api/meetings/server/modifiers/webcamOnlyModerator.js","meteor://ðŸ’»app/imports/api/meetings/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/meetings/server/index.js","meteor://ðŸ’»app/imports/api/meetings/server/methods.js","meteor://ðŸ’»app/imports/api/meetings/server/publishers.js","meteor://ðŸ’»app/imports/api/meetings/index.js","meteor://ðŸ’»app/imports/api/network-information/server/methods/userInstabilityDetected.js","meteor://ðŸ’»app/imports/api/network-information/server/modifiers/clearNetworkInformation.js","meteor://ðŸ’»app/imports/api/network-information/server/index.js","meteor://ðŸ’»app/imports/api/network-information/server/methods.js","meteor://ðŸ’»app/imports/api/network-information/server/publisher.js","meteor://ðŸ’»app/imports/api/network-information/index.js","meteor://ðŸ’»app/imports/api/note/server/handlers/padUpdate.js","meteor://ðŸ’»app/imports/api/note/server/methods/createNote.js","meteor://ðŸ’»app/imports/api/note/server/modifiers/addNote.js","meteor://ðŸ’»app/imports/api/note/server/modifiers/clearNote.js","meteor://ðŸ’»app/imports/api/note/server/modifiers/updateNote.js","meteor://ðŸ’»app/imports/api/note/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/note/server/helpers.js","meteor://ðŸ’»app/imports/api/note/server/index.js","meteor://ðŸ’»app/imports/api/note/server/publishers.js","meteor://ðŸ’»app/imports/api/note/index.js","meteor://ðŸ’»app/imports/api/ping-pong/server/methods/ping.js","meteor://ðŸ’»app/imports/api/ping-pong/server/index.js","meteor://ðŸ’»app/imports/api/ping-pong/server/methods.js","meteor://ðŸ’»app/imports/api/ping-pong/server/publishers.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollPublished.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollStarted.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/pollStopped.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/userResponded.js","meteor://ðŸ’»app/imports/api/polls/server/handlers/userVoted.js","meteor://ðŸ’»app/imports/api/polls/server/methods/publishPoll.js","meteor://ðŸ’»app/imports/api/polls/server/methods/publishVote.js","meteor://ðŸ’»app/imports/api/polls/server/methods/startPoll.js","meteor://ðŸ’»app/imports/api/polls/server/methods/stopPoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/addPoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/clearPolls.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/removePoll.js","meteor://ðŸ’»app/imports/api/polls/server/modifiers/updateVotes.js","meteor://ðŸ’»app/imports/api/polls/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/polls/server/index.js","meteor://ðŸ’»app/imports/api/polls/server/methods.js","meteor://ðŸ’»app/imports/api/polls/server/publishers.js","meteor://ðŸ’»app/imports/api/polls/index.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/createNewPresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/removePresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/setPresenterInPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/handlers/syncGetPresentationPods.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/addPresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/clearPresentationPods.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/removePresentationPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/modifiers/setPresenterInPod.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/index.js","meteor://ðŸ’»app/imports/api/presentation-pods/server/publishers.js","meteor://ðŸ’»app/imports/api/presentation-pods/index.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/handlers/presentationUploadTokenFail.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/handlers/presentationUploadTokenPass.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods/requestPresentationUploadToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods/setUsedToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/index.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/methods.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/server/publishers.js","meteor://ðŸ’»app/imports/api/presentation-upload-token/index.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationAdded.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationConversionUpdate.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationCurrentSet.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationDownloadableSet.js","meteor://ðŸ’»app/imports/api/presentations/server/handlers/presentationRemove.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/removePresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/setPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/methods/setPresentationDownloadable.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/addPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/clearPresentations.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/removePresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/setCurrentPresentation.js","meteor://ðŸ’»app/imports/api/presentations/server/modifiers/setPresentationDownloadable.js","meteor://ðŸ’»app/imports/api/presentations/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/presentations/server/index.js","meteor://ðŸ’»app/imports/api/presentations/server/methods.js","meteor://ðŸ’»app/imports/api/presentations/server/publishers.js","meteor://ðŸ’»app/imports/api/presentations/index.js","meteor://ðŸ’»app/imports/api/screenshare/server/handlers/screenshareStarted.js","meteor://ðŸ’»app/imports/api/screenshare/server/handlers/screenshareStopped.js","meteor://ðŸ’»app/imports/api/screenshare/server/modifiers/addScreenshare.js","meteor://ðŸ’»app/imports/api/screenshare/server/modifiers/clearScreenshare.js","meteor://ðŸ’»app/imports/api/screenshare/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/screenshare/server/index.js","meteor://ðŸ’»app/imports/api/screenshare/server/methods.js","meteor://ðŸ’»app/imports/api/screenshare/server/publishers.js","meteor://ðŸ’»app/imports/api/screenshare/index.js","meteor://ðŸ’»app/imports/api/slides/server/handlers/slideChange.js","meteor://ðŸ’»app/imports/api/slides/server/handlers/slideResize.js","meteor://ðŸ’»app/imports/api/slides/server/methods/switchSlide.js","meteor://ðŸ’»app/imports/api/slides/server/methods/zoomSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/addSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/addSlidePositions.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/changeCurrentSlide.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/clearSlides.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/clearSlidesPresentation.js","meteor://ðŸ’»app/imports/api/slides/server/modifiers/resizeSlide.js","meteor://ðŸ’»app/imports/api/slides/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/slides/server/helpers.js","meteor://ðŸ’»app/imports/api/slides/server/index.js","meteor://ðŸ’»app/imports/api/slides/server/methods.js","meteor://ðŸ’»app/imports/api/slides/server/publishers.js","meteor://ðŸ’»app/imports/api/slides/index.js","meteor://ðŸ’»app/imports/api/users/server/handlers/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/handlers/emojiStatus.js","meteor://ðŸ’»app/imports/api/users/server/handlers/getUsers.js","meteor://ðŸ’»app/imports/api/users/server/handlers/presenterAssigned.js","meteor://ðŸ’»app/imports/api/users/server/handlers/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userEjected.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userInactivityInspect.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userJoin.js","meteor://ðŸ’»app/imports/api/users/server/handlers/userJoined.js","meteor://ðŸ’»app/imports/api/users/server/handlers/validateAuthToken.js","meteor://ðŸ’»app/imports/api/users/server/methods/assignPresenter.js","meteor://ðŸ’»app/imports/api/users/server/methods/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/methods/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/methods/setEmojiStatus.js","meteor://ðŸ’»app/imports/api/users/server/methods/setUserEffectiveConnectionType.js","meteor://ðŸ’»app/imports/api/users/server/methods/toggleUserLock.js","meteor://ðŸ’»app/imports/api/users/server/methods/userActivitySign.js","meteor://ðŸ’»app/imports/api/users/server/methods/userLeaving.js","meteor://ðŸ’»app/imports/api/users/server/methods/userLeftMeeting.js","meteor://ðŸ’»app/imports/api/users/server/methods/validateAuthToken.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/addDialInUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/addUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/changePresenter.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/changeRole.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/clearUsers.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/createDummyUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/removeUser.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/setConnectionIdAndAuthToken.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/setUserEffectiveConnectionType.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/userEjected.js","meteor://ðŸ’»app/imports/api/users/server/modifiers/userInactivityInspect.js","meteor://ðŸ’»app/imports/api/users/server/store/bannedUsers.js","meteor://ðŸ’»app/imports/api/users/server/store/pendingAuthentications.js","meteor://ðŸ’»app/imports/api/users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/users/server/index.js","meteor://ðŸ’»app/imports/api/users/server/methods.js","meteor://ðŸ’»app/imports/api/users/server/publishers.js","meteor://ðŸ’»app/imports/api/users/index.js","meteor://ðŸ’»app/imports/api/users-infos/server/handlers/userInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods/removeUserInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods/requestUserInformation.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/addUserInfo.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/clearUserInfo.js","meteor://ðŸ’»app/imports/api/users-infos/server/modifiers/clearUserInfoForRequester.js","meteor://ðŸ’»app/imports/api/users-infos/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/users-infos/server/index.js","meteor://ðŸ’»app/imports/api/users-infos/server/methods.js","meteor://ðŸ’»app/imports/api/users-infos/server/publishers.js","meteor://ðŸ’»app/imports/api/users-infos/index.js","meteor://ðŸ’»app/imports/api/users-settings/server/methods/addUserSettings.js","meteor://ðŸ’»app/imports/api/users-settings/server/modifiers/addUserSetting.js","meteor://ðŸ’»app/imports/api/users-settings/server/modifiers/clearUsersSettings.js","meteor://ðŸ’»app/imports/api/users-settings/server/index.js","meteor://ðŸ’»app/imports/api/users-settings/server/methods.js","meteor://ðŸ’»app/imports/api/users-settings/server/publishers.js","meteor://ðŸ’»app/imports/api/users-settings/index.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/userSharedHtml5Webcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/handlers/userUnsharedHtml5Webcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods/userShareWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods/userUnshareWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/clearVideoStreams.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/sharedWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/modifiers/unsharedWebcam.js","meteor://ðŸ’»app/imports/api/video-streams/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/video-streams/server/helpers.js","meteor://ðŸ’»app/imports/api/video-streams/server/index.js","meteor://ðŸ’»app/imports/api/video-streams/server/methods.js","meteor://ðŸ’»app/imports/api/video-streams/server/publisher.js","meteor://ðŸ’»app/imports/api/video-streams/index.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/handlers/voiceCallStateEvent.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/modifiers/clearVoiceCallStates.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/index.js","meteor://ðŸ’»app/imports/api/voice-call-states/server/publishers.js","meteor://ðŸ’»app/imports/api/voice-call-states/index.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/getVoiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/joinVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/leftVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/meetingMuted.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/mutedVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/talkingVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/handlers/voiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/ejectUserFromVoice.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteAllExceptPresenterToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteAllToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods/muteToggle.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/addVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/changeMuteMeeting.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/clearVoiceUsers.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/removeVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/modifiers/updateVoiceUser.js","meteor://ðŸ’»app/imports/api/voice-users/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/voice-users/server/index.js","meteor://ðŸ’»app/imports/api/voice-users/server/methods.js","meteor://ðŸ’»app/imports/api/voice-users/server/publishers.js","meteor://ðŸ’»app/imports/api/voice-users/index.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/handlers/modifyWhiteboardAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods/changeWhiteboardAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/modifiers/modifyWhiteboardAccess.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/eventHandlers.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/index.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/methods.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/server/publishers.js","meteor://ðŸ’»app/imports/api/whiteboard-multi-user/index.js","meteor://ðŸ’»app/imports/api/common/server/helpers.js","meteor://ðŸ’»app/imports/startup/server/index.js","meteor://ðŸ’»app/imports/startup/server/logger.js","meteor://ðŸ’»app/imports/startup/server/minBrowserVersion.js","meteor://ðŸ’»app/imports/startup/server/redis.js","meteor://ðŸ’»app/imports/startup/server/settings.js","meteor://ðŸ’»app/imports/utils/lineEndings.js","meteor://ðŸ’»app/imports/utils/mimeTypes.js","meteor://ðŸ’»app/imports/utils/regex-weburl.js","meteor://ðŸ’»app/server/main.js"],"names":["module","export","default","handleWhiteboardAnnotations","_","link","v","check","modifyWhiteboardAccess","clearAnnotations","addAnnotation","meetingId","header","body","Object","userId","String","annotations","whiteboardId","multiUser","Array","Boolean","annotationsAdded","each","annotation","wbId","push","handleWhiteboardCleared","AnnotationsStreamer","fullClear","emit","handleWhiteboardSend","ANNOTATION_PROCCESS_INTERVAL","annotationsQueue","annotationsRecieverIsRunning","proccess","keys","length","forEach","Meteor","setTimeout","hasOwnProperty","handleWhiteboardUndo","removeAnnotation","shapeId","annotationId","clearWhiteboard","RedisPubSub","extractCredentials","REDIS_CONFIG","settings","private","redis","CHANNEL","channels","toAkkaApps","EVENT_NAME","requesterUserId","payload","publishUserMessage","sendAnnotation","sendAnnotationHelper","annotationType","id","status","annotationInfo","x","Number","y","fontColor","calcedFontSize","textBoxWidth","text","textBoxHeight","fontSize","dataPoints","type","position","color","thickness","points","dimensions","Match","Maybe","sendBulkAnnotations","undoAnnotation","Logger","Annotations","addAnnotationQuery","query","cb","err","numChanged","error","insertedId","info","upsert","selector","modifier","remove","processForHTML5ServerOnly","on","methods","find","debug","publish","boundAnnotations","bind","removeAnnotationsStreamer","addAnnotationsStreamer","get","StreamerCentral","instances","streamer","Streamer","retransmit","allowRead","includes","allowWrite","ANNOTATION_TYPE_TEXT","ANNOTATION_TYPE_PENCIL","DEFAULT_TEXT_WIDTH","DEFAULT_TEXT_HEIGHT","handleCommonAnnotation","$set","$setOnInsert","$inc","version","handleTextUpdate","useDefaultSize","replace","handlePencilUpdate","DRAW_START","DRAW_UPDATE","DRAW_END","baseSelector","baseModifier","$push","$each","Mongo","Collection","isServer","_ensureIndex","exportDefault","handleBreakoutClosed","clearBreakouts","breakoutId","handleBreakoutJoinURL","Breakouts","redirectToHtml5JoinURL","users","insertedTime","Date","getTime","cbErr","handleBreakoutRoomStarted","flat","DEFAULT_TIME_REMAINING","parentMeetingId","breakout","assign","joinedUsers","timeRemaining","joinedUsersChanged","parentId","usersMapped","map","user","name","update","handleUpdateTimeRemaining","options","multi","createBreakoutRoom","rooms","durationInMinutes","record","eventName","endAllBreakouts","requestJoinURL","userIdToInvite","handleBreakoutStarted","Users","ROLE_MODERATOR","public","role_moderator","breakouts","role","User","findOne","fields","presenterSelector","$or","freeJoin","boundBreakouts","handlePadCreate","fetchReadOnlyPadId","pad","handlePadUpdate","getDataFromChangeset","updatePad","revs","changeset","data","appendText","axios","generatePadId","appendTextURL","locale","padId","method","url","responseType","then","response","verbose","catch","createCaptions","isEnabled","getLocalesURL","addCaption","warn","locales","editCaptions","Captions","getIndex","ownerId","index","startIndex","localeCode","endIndex","getReadOnlyIdURL","getDataFromResponse","updateReadOnlyPadId","readOnlyURL","readOnlyPadId","takeOwnership","updateOwnerId","$regex","clearCaptions","updateOwner","processForCaptionsPadOnly","hashFNV32a","CAPTIONS_CONFIG","captions","BASENAME","app","basename","APP","LOCALES_URL","host","port","localesUrl","CAPTIONS","TOKEN","isCaptionsPad","splitPadId","split","splitChangeset","shift","join","enabled","fn","message","args","boundCaptions","addConnectionStatus","updateConnectionStatus","level","clearConnectionStatus","ConnectionStatus","timestamp","connectionStatus","boundNote","handleCursorUpdate","CursorStreamer","streamerLog","serverLog","CURSOR_PROCCESS_INTERVAL","cursorQueue","throttle","cursors","publishCursorUpdate","removeCursorStreamer","addCursorStreamer","destroyExternalVideo","streamName","emitExternalVideoEvent","messageName","presenter","streamerName","rest","initializeExternalVideo","allowRecentMessages","time","rate","state","allowEmit","startWatchingExternalVideo","Meetings","externalVideoUrl","stopWatchingExternalVideo","meeting","handleGroupChatCreated","addGroupChat","handleGroupChatDestroyed","handleGroupChats","chats","chatsAdded","chat","createGroupChat","CHAT_ACCESS_PRIVATE","receiver","correlationId","now","msg","access","GroupChat","chatId","createdBy","chatDocument","u","safe","clearGroupChat","clearGroupChatMsg","destroyGroupChat","groupChat","CHAT_CONFIG","PUBLIC_CHAT_TYPE","type_public","$all","boundGroupChat","CHAT_ACCESS_PUBLIC","CHAT_ACCESS","PUBLIC","PRIVATE","clearPublicChatHistory","handleGroupChatMsgBroadcast","addGroupChatMsg","handleGroupChatsMsgs","msgs","msgsAdded","m","handleUserTyping","startTyping","PUBLIC_GROUP_CHAT_ID","public_group_id","sendGroupChatMsg","RegexWebUrl","HTML_SAFE_MAP","parseMessage","parsedMessage","trim","c","startUserTyping","stopUserTyping","UsersTyping","stopTyping","userTyping","_objectSpread","GroupChatMsg","BREAK_LINE","sender","msgDocument","PUBLIC_CHAT_SYSTEM_ID","system_userid","CHAT_CLEAR_MESSAGE","system_messages_keys","chat_clear","clearMsg","$eq","TYPING_TIMEOUT","mod","isTypingTo","typingUser","sendMsgInitiated","stillTyping","handleClearPublicGroupChat","groupChatMsg","chatsIds","$in","usersTyping","pubishUsersTyping","boundUsersTyping","handleGuestApproved","setGuestStatus","approvedBy","guests","guest","handleGuestWaitingLeft","removeGuest","handleGuestsWaitingForApproval","stringHash","GuestUsers","COLOR_LIST","intId","approved","denied","loginTime","allowPendingUsers","mappedGuests","JSON","stringify","changeGuestPolicy","policyRule","setBy","policy","GUEST_STATUS_ALLOW","GUEST_STATUS_DENY","guestUsers","boundSlides","userChangedLocalSettings","LocalSettings","setChangedLocalSettings","userLocalSettings","isEqual","clearLocalSettings","localSettings","boundLocalSettings","logClient","logDescription","logCode","extraInfo","userInfo","connectionId","connection","logContents","credentials","validUser","log","handleGetAllMeetings","handleMeetingCreation","addMeeting","props","durationInSecods","durationProps","duration","handleMeetingDestruction","destroyMeetingQueue","handleMeetingEnd","meetingHasEnded","num","meetingType","numAffected","meetingEnded","handleLockSettingsInMeeting","changeLockSettings","handleRecordingStatusChange","RecordMeetings","recording","handleTimeRemainingUpdate","MeetingTimeRemaining","timeLeftInSec","changeUserLock","handleChangeWebcamOnlyModerator","changeWebcamOnlyModerator","endMeeting","toggleLockSettings","lockSettingsProps","disableCam","disableMic","disablePrivateChat","disablePublicChat","disableNote","hideUserList","lockedLayout","lockOnJoin","lockOnJoinConfigurable","disablePrivChat","disablePubChat","toggleRecording","meetingRecorded","allowedToRecord","recordObject","allowStartStopRecording","toggleWebcamsOnlyForModerator","webcamsOnlyForModerator","transferUser","fromMeetingId","toMeetingId","_objectWithoutProperties","SanitizeHTML","createNote","BannedUsers","meetingProp","breakoutProps","sequence","breakoutRooms","privateChatEnabled","extId","isBreakout","usersProp","guestPolicy","maxUsers","allowModsToUnmuteUsers","createdTime","createdDate","maxInactivityTimeoutMinutes","warnMinutesBeforeMax","meetingExpireIfNoUserJoinedInMinutes","meetingExpireWhenLastUserLeftInMinutes","userInactivityInspectTimerInMinutes","userInactivityThresholdInMinutes","userActivitySignResponseDelayInMinutes","welcomeProp","welcomeMsg","modOnlyMessage","welcomeMsgTemplate","recordProp","ObjectIncluding","autoStartRecording","password","viewerPass","moderatorPass","voiceProp","voiceConf","dialNumber","telVoice","muteOnStart","screenshareProps","red5ScreenshareIp","red5ScreenshareApp","screenshareConf","metadataProp","restProps","newMeeting","sanitizeTextInChat","original","allowedTags","allowedAttributes","a","img","allowedSchemes","sanitizedWelcomeText","insertBlankTarget","s","i","substr","linkWithoutTarget","RegExp","test","lastIndex","publishedPoll","init","cbRecord","locked","lockedBy","clearUsers","clearUsersSettings","clearSlides","clearPolls","clearPresentationPods","clearVoiceUsers","clearUserInfo","clearNote","clearNetworkInformation","clearRecordMeeting","clearVoiceCallStates","clearVideoStreams","setPublishedPoll","isPublished","handleMeetingLocksChange","handleUserLockChange","handleRecordingTimerChange","meetings","boundMeetings","recordMeetings","recordPublish","boundRecordMeetings","meetingTimeRemaining","timeRemainingPublish","boundtimeRemaining","userInstabilityDetected","NetworkInformation","insert","networkInformation","boundNetworkInformation","updateNote","generateNoteId","createPadURL","addNote","noteId","createURL","responseOuter","readOnlyNoteId","Note","processForNotePadOnly","ETHERPAD","etherpad","NOTE_CONFIG","note","BASE_URL","apikey","encodeURIComponent","key","innerData","isNotePad","search","ping","lastPing","COLLECTION_NAME","INTERVAL_IN_SETTINGS","pingPong","clearUsersInSeconds","INTERVAL_TIME","PONG_INTERVAL_IN_SETTINGS","pongTimeInSeconds","PONG_INTERVAL","uniqueId","pongSender","interval","pong","added","changed","ready","setInterval","onStop","clearInterval","pollPublished","removePoll","pollId","pollStarted","addPoll","poll","pollStopped","userResponded","Polls","answerId","$pull","responses","userVoted","updateVotes","answers","numVotes","numRespondents","numResponders","publishPoll","requesterId","publishVote","pollAnswerId","currentPoll","questionId","startPoll","pollType","stopPoll","userSelector","$ne","clientType","userIds","fetch","requester","handlePollStarted","handlePollStopped","handlePollPublished","handleUserVoted","handleUserResponded","publishCurrentPoll","boundPolls","polls","handleCreateNewPresentationPod","addPresentationPod","currentPresenterId","podId","pod","handleRemovePresentationPod","removePresentationPod","handleSetPresenterInPod","setPresenterInPod","nextPresenterId","handleSyncGetPresentationPods","PresentationPods","pods","presentationPodIds","presentationPodsToRemove","$nin","p","currentPresenter","presentations","addPresentation","undefined","presentation","clearPresentations","clearPresentationUploadToken","presentationPods","boundPresentationPods","handlePresentationUploadTokenFail","PresentationUploadToken","filename","failed","authzToken","handlePresentationUploadTokenPass","doc","used","requestPresentationUploadToken","setUsedToken","presentationUploadToken","boundPresentationUploadToken","handlePresentationAdded","handlePresentationConversionUpdate","Presentations","OFFICE_DOC_CONVERSION_FAILED_KEY","OFFICE_DOC_CONVERSION_INVALID_KEY","SUPPORTED_DOCUMENT_KEY","UNSUPPORTED_DOCUMENT_KEY","PAGE_COUNT_FAILED_KEY","PAGE_COUNT_EXCEEDED_KEY","PDF_HAS_BIG_PAGE_KEY","GENERATED_SLIDE_KEY","presentationId","messageKey","presName","presentationName","statusModifier","pagesCompleted","numberOfPages","handlePresentationCurrentSet","setCurrentPresentation","handlePresentationDownloadableSet","setPresentationDownloadable","downloadable","handlePresentationRemove","removePresentation","setPresentation","HTTP","addSlide","getSlideText","content","addSlides","slides","slide","txtUri","current","pages","thumbUri","swfUri","svgUri","xOffset","yOffset","widthRatio","heightRatio","clearSlidesPresentation","oldCurrent","callback","newCurrent","oldPresentation","newPresentation","_id","boundPresentations","handleScreenshareStarted","addScreenshare","presenterId","handleScreenshareStopped","clearScreenshare","Screenshare","screenshare","boundScreenshare","handleSlideChange","changeCurrentSlide","pageId","handleSlideResize","resizeSlide","switchSlide","Slides","slideNumber","Presentation","Error","Slide","zoomSlide","probe","SVG","PNG","calculateSlideData","addSlidePositions","loadSlidesFromHttpAlways","requestWhiteboardHistory","slideId","USER_ID","SUPPORTED_TYPES","fetchImageSizes","imageUri","result","mime","width","height","reason","restSlide","pngUri","imageSizeUri","slideData","slidePosition","SlidePositions","viewBoxWidth","viewBoxHeight","oldSlide","newSlide","whiteboardIds","row","SlidePosition","calculatedData","slidePositions","publishPositions","boundSlidePositions","handleChangeRole","changeRole","changedBy","handleEmojiStatus","emoji","emojiTime","handleGetUsers","addUser","removeUser","usersIds","usersToRemove","usersAdded","handlePresenterAssigned","changePresenter","setPresenterInPodReqMsg","assignedBy","prevPresenter","setPresenterPayload","defaultPodSelector","currentDefaultPodPresenter","oldPresenter","handleRemoveUser","handleEjectedUser","userEjected","reasonCode","handleUserInactivityInspect","userInactivityInspect","responseDelay","Integer","userJoin","authToken","handleUserJoined","handleValidateAuthToken","pendingAuthenticationsStore","createDummyUser","setConnectionIdAndAuthToken","clearOtherSessions","sessionUserId","serverSessions","server","sessions","filter","close","valid","waitForApproval","pendingAuths","take","pendingAuth","methodInvocationObject","e","sessionId","setUserId","validated","inactivityCheck","currentConnectionId","assignPresenter","newPresenterId","newPresenterName","banUser","ejectedBy","removedUser","add","setEmojiStatus","setUserEffectiveConnectionType","setEffectiveConnectionType","effectiveConnectionType","toggleUserLock","lock","userActivitySign","userLeaving","userLeftMeeting","loggedOut","validateAuthToken","requesterToken","externalId","has","addDialInUser","voiceUser","USER_CONFIG","ROLE_VIEWER","role_viewer","callerName","voiceOnlyUser","toLowerCase","authed","waitingForAcceptance","guestStatus","avatar","VoiceUsers","addVoiceUser","userData","sanitizedName","escape","Meeting","sortName","isBreakoutUser","voiceUserId","callerNum","muted","talking","callingWith","listenOnly","joined","VideoStreams","clearUserInfoForRequester","clearAllSessions","userToRemove","ejectedReason","ejected","constructor","store","Set","delete","PendingAuthentitcations","generateKey","matches","handleUserEjected","currentUser","onCloseConnection","bindEnvironment","_session","socket","debounce","publishCurrentUser","boundUsers","handleUserInformation","addUserInfo","removeUserInformation","UserInfos","getUserInformation","externalUserId","toThirdParty","clearUsersInfo","clearUsersInfoForRequester","requestUserInformation","userInfos","boundUserInfos","addUserSettings","addUserSetting","logger","oldParameters","askForFeedbackOnLogout","autoJoin","autoShareWebcam","autoSwapLayout","clientTitle","customStyle","customStyleUrl","displayBrandingArea","enableScreensharing","enableVideo","forceListenOnly","hidePresentation","listenOnlyMode","multiUserPenOnly","multiUserTools","outsideToggleRecording","outsideToggleSelfVoice","presenterTools","shortcuts","skipCheck","oldParametersKeys","currentParameters","valueParser","val","parsedValue","parse","parameters","el","settingKey","matchingNewKey","settingsAdded","entries","setting","value","UserSettings","Any","userSettings","mainRoomUserSettings","boundUserSettings","handleUserSharedHtml5Webcam","sharedWebcam","isValidStream","stream","handleUserUnsharedHtml5Webcam","unsharedWebcam","userShareWebcam","userUnshareWebcam","getDeviceId","getUserName","deviceId","FLASH_STREAM_REGEX","splitStream","videoStreams","boundVideoStreams","handleVoiceCallStateEvent","VoiceCallState","clientSession","callState","VoiceCallStates","voiceCallStates","boundVoiceCallStates","handleGetVoiceUsers","removeVoiceUser","updateVoiceUser","voiceUsersIdsToUpdate","voiceUsersUpdated","indexOf","voiceUsersToRemove","handleJoinVoiceUser","handleVoiceUpdate","isDialInUser","meetingID","handleMeetingMuted","changeMuteMeeting","handleVoiceUsers","voiceUsers","voice","ejectUserFromVoice","muteAllExceptPresenterToggle","toggleMeetingMuted","mutedBy","mute","muteAllToggle","muteToggle","uId","userToMute","spoke","clearVoiceUser","clearSpokeTimeout","spokeTimeoutHandles","TALKING_TIMEOUT","startTime","endTime","timeoutHandle","spokeDelay","handleLeftVoiceUser","handleTalkingVoiceUser","handleMutedVoiceUser","toggleVoice","muteAllUsers","muteAllExceptPresenter","boundVoiceUser","handleModifyWhiteboardAccess","changeWhiteboardAccess","WhiteboardMultiUser","handleGetWhiteboardAccess","whiteboardMultiUser","boundMultiUser","MSG_DIRECT_TYPE","NODE_USER","clearTimeout","item","l","envelope","routing","msgType","shouldSkip","str","asString","seed","hval","charCodeAt","toString","credentialsArray","eventEmitter","redisPubSub","WebAppInternals","Langmap","fs","lookupUserAgent","lookup","Redis","setMinBrowserVersions","AVAILABLE_LOCALES","readdirSync","avaibleLocalesNames","startup","APP_CONFIG","env","isDevelopment","CDN_URL","cdn","BrowserPolicy","disallowEval","allowInlineScripts","allowInlineStyles","allowImageDataUrl","allowFontDataUrl","allowOriginForAll","setBundledJsCssPrefix","fontRegExp","WebApp","rawConnectHandlers","use","req","res","next","_parsedUrl","pathname","setHeader","currentTime","$lt","process","connectHandlers","html5clientStatus","writeHead","end","fallback","defaultSettings","application","fallbackLocale","override","overrideLocale","browserLocale","localeList","usableLocales","file","reduce","match","regionDefault","normalizedLocale","messages","toUpperCase","Assets","getText","nativeName","userName","reqUserName","comment","rating","feedback","userAgent","headers","emitter","createLogger","format","transports","LOG_CONFIG","combine","colorize","splat","simple","Console","prettyPrint","humanReadableUnhandledException","handleExceptions","setMinimumBrowserVersions","minBrowserVersions","versions","elem","Infinity","browser","EventEmitter2","NO_MEETING_ID","makeEnvelope","channel","core","makeDebugger","MeetingMessageQueue","asyncMessages","queue","PowerQueue","handleTask","taskHandler","isAsync","called","callNext","queueLength","onError","stack","emitAsync","handlePublishError","config","didSendRequestEvent","REDIS_HOST","redisConf","pub","createClient","sub","auth","mettingsQueues","handleSubscribe","handleMessage","channelsToSubscribe","subscribeTo","psubscribe","updateConfig","publishSystemMessage","pattern","ignored","ignoredMessages","async","queueId","publishVoiceMessage","publishMeetingMessage","RedisPubSubSingleton","YAML","YAML_FILE_PATH","BBB_HTML5_SETTINGS","existsSync","SETTINGS","readFileSync","__meteor_runtime_config__","PUBLIC_SETTINGS","console","CARRIAGE_RETURN","NEW_LINE","XLS","XLSX","DOC","DOCX","PPT","PPTX","ODT","RTF","TXT","ODS","ODP","PDF","JPEG","UPLOAD_SUPORTED","global"],"mappings":"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","file":"/app.js","sourcesContent":["import _ from 'lodash';\nimport { check } from 'meteor/check';\nimport modifyWhiteboardAccess from '/imports/api/whiteboard-multi-user/server/modifiers/modifyWhiteboardAccess';\nimport clearAnnotations from '../modifiers/clearAnnotations';\nimport addAnnotation from '../modifiers/addAnnotation';\n\nexport default function handleWhiteboardAnnotations({ header, body }, meetingId) {\n  check(header, Object);\n  if (header.userId !== 'nodeJSapp') { return false; }\n\n  check(meetingId, String);\n  check(body, Object);\n\n  const { annotations, whiteboardId, multiUser } = body;\n\n  check(annotations, Array);\n  check(whiteboardId, String);\n  check(multiUser, Boolean);\n\n  clearAnnotations(meetingId, whiteboardId);\n\n  const annotationsAdded = [];\n  _.each(annotations, (annotation) => {\n    const { wbId, userId } = annotation;\n    annotationsAdded.push(addAnnotation(meetingId, wbId, userId, annotation));\n  });\n\n  modifyWhiteboardAccess(meetingId, whiteboardId, multiUser);\n\n  return annotationsAdded;\n}\n","import { check } from 'meteor/check';\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\n\nimport clearAnnotations from '../modifiers/clearAnnotations';\n\nexport default function handleWhiteboardCleared({ body }, meetingId) {\n  check(body, {\n    userId: String,\n    whiteboardId: String,\n    fullClear: Boolean,\n  });\n\n  const { whiteboardId, fullClear, userId } = body;\n\n  if (fullClear) {\n    AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId });\n    return clearAnnotations(meetingId, whiteboardId);\n  }\n\n  AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId, userId });\n  return clearAnnotations(meetingId, whiteboardId, userId);\n}\n","import { check } from 'meteor/check';\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\nimport addAnnotation from '../modifiers/addAnnotation';\n\nconst ANNOTATION_PROCCESS_INTERVAL = 60;\n\nlet annotationsQueue = {};\nlet annotationsRecieverIsRunning = false;\n\nconst proccess = () => {\n  if (!Object.keys(annotationsQueue).length) {\n    annotationsRecieverIsRunning = false;\n    return;\n  }\n  annotationsRecieverIsRunning = true;\n  Object.keys(annotationsQueue).forEach((meetingId) => {\n    AnnotationsStreamer(meetingId).emit('added', { meetingId, annotations: annotationsQueue[meetingId] });\n  });\n  annotationsQueue = {};\n\n  Meteor.setTimeout(proccess, ANNOTATION_PROCCESS_INTERVAL);\n};\n\nexport default function handleWhiteboardSend({ header, body }, meetingId) {\n  const userId = header.userId;\n  const annotation = body.annotation;\n\n  check(userId, String);\n  check(annotation, Object);\n\n  const whiteboardId = annotation.wbId;\n  check(whiteboardId, String);\n\n  if(!annotationsQueue.hasOwnProperty(meetingId)) {\n    annotationsQueue[meetingId] = [];\n  }\n\n  annotationsQueue[meetingId].push({ meetingId, whiteboardId, userId, annotation });\n  if (!annotationsRecieverIsRunning) proccess();\n\n  return addAnnotation(meetingId, whiteboardId, userId, annotation);\n}\n","import { check } from 'meteor/check';\n\nimport AnnotationsStreamer from '/imports/api/annotations/server/streamer';\nimport removeAnnotation from '../modifiers/removeAnnotation';\n\nexport default function handleWhiteboardUndo({ body }, meetingId) {\n  const whiteboardId = body.whiteboardId;\n  const shapeId = body.annotationId;\n\n  check(whiteboardId, String);\n  check(shapeId, String);\n\n  AnnotationsStreamer(meetingId).emit('removed', { meetingId, whiteboardId, shapeId });\n  return removeAnnotation(meetingId, whiteboardId, shapeId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function clearWhiteboard(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ClearWhiteboardPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(whiteboardId, String);\n\n  const payload = {\n    whiteboardId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import sendAnnotationHelper from './sendAnnotationHelper';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function sendAnnotation(annotation) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  sendAnnotationHelper(annotation, meetingId, requesterUserId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function sendAnnotationHelper(annotation, meetingId, requesterUserId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendWhiteboardAnnotationPubMsg';\n\n  const whiteboardId = annotation.wbId;\n\n  check(annotation, Object);\n  check(whiteboardId, String);\n\n  if (annotation.annotationType === 'text') {\n    check(annotation, {\n      id: String,\n      status: String,\n      annotationType: String,\n      annotationInfo: {\n        x: Number,\n        y: Number,\n        fontColor: Number,\n        calcedFontSize: Number,\n        textBoxWidth: Number,\n        text: String,\n        textBoxHeight: Number,\n        id: String,\n        whiteboardId: String,\n        status: String,\n        fontSize: Number,\n        dataPoints: String,\n        type: String,\n      },\n      wbId: String,\n      userId: String,\n      position: Number,\n    });\n  } else {\n    check(annotation, {\n      id: String,\n      status: String,\n      annotationType: String,\n      annotationInfo: {\n        color: Number,\n        thickness: Number,\n        points: Array,\n        id: String,\n        whiteboardId: String,\n        status: String,\n        type: String,\n        dimensions: Match.Maybe([Number]),\n      },\n      wbId: String,\n      userId: String,\n      position: Number,\n    });\n  }\n\n  const payload = {\n    annotation,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { extractCredentials } from '/imports/api/common/server/helpers';\nimport sendAnnotationHelper from './sendAnnotationHelper';\n\nexport default function sendBulkAnnotations(payload) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  payload.forEach(annotation => sendAnnotationHelper(annotation, meetingId, requesterUserId));\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function undoAnnotation(whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UndoWhiteboardPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(whiteboardId, String);\n\n  const payload = {\n    whiteboardId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Annotations from '/imports/api/annotations';\nimport addAnnotationQuery from '/imports/api/annotations/addAnnotation';\n\nexport default function addAnnotation(meetingId, whiteboardId, userId, annotation) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(annotation, Object);\n\n  const query = addAnnotationQuery(meetingId, whiteboardId, userId, annotation);\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding annotation to collection: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n    if (insertedId) {\n      return Logger.info(`Added annotation id=${annotation.id} whiteboard=${whiteboardId}`);\n    }\n    return true;\n  };\n\n  return Annotations.upsert(query.selector, query.modifier, cb);\n}\n","import Annotations from '/imports/api/annotations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearAnnotations(meetingId, whiteboardId, userId) {\n  const selector = {};\n\n  if (meetingId) {\n    selector.meetingId = meetingId;\n  }\n\n  if (whiteboardId) {\n    selector.whiteboardId = whiteboardId;\n  }\n\n  if (userId) {\n    selector.userId = userId;\n  }\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing Annotations from collection: ${err}`);\n    }\n\n    if (userId) {\n      return Logger.info(`Cleared Annotations for userId=${userId} where whiteboard=${whiteboardId}`);\n    }\n\n    if (whiteboardId) {\n      return Logger.info(`Cleared Annotations for whiteboard=${whiteboardId}`);\n    }\n\n    if (meetingId) {\n      return Logger.info(`Cleared Annotations (${meetingId})`);\n    }\n\n    return Logger.info('Cleared Annotations (all)');\n  };\n\n  return Annotations.remove(selector, cb);\n}\n","import { check } from 'meteor/check';\nimport Annotations from '/imports/api/annotations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeAnnotation(meetingId, whiteboardId, shapeId) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(shapeId, String);\n\n  const selector = {\n    meetingId,\n    whiteboardId,\n    id: shapeId,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing annotation from collection: ${err}`);\n    }\n\n    return Logger.info(`Removed annotation id=${shapeId} whiteboard=${whiteboardId}`);\n  };\n\n  return Annotations.remove(selector, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleWhiteboardCleared from './handlers/whiteboardCleared';\nimport handleWhiteboardUndo from './handlers/whiteboardUndo';\nimport handleWhiteboardSend from './handlers/whiteboardSend';\nimport handleWhiteboardAnnotations from './handlers/whiteboardAnnotations';\n\nRedisPubSub.on('ClearWhiteboardEvtMsg', handleWhiteboardCleared);\nRedisPubSub.on('UndoWhiteboardEvtMsg', handleWhiteboardUndo);\nRedisPubSub.on('SendWhiteboardAnnotationEvtMsg', handleWhiteboardSend);\nRedisPubSub.on('GetWhiteboardAnnotationsRespMsg', processForHTML5ServerOnly(handleWhiteboardAnnotations));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport undoAnnotation from './methods/undoAnnotation';\nimport clearWhiteboard from './methods/clearWhiteboard';\nimport sendAnnotation from './methods/sendAnnotation';\nimport sendBulkAnnotations from './methods/sendBulkAnnotations';\n\nMeteor.methods({\n  undoAnnotation,\n  clearWhiteboard,\n  sendAnnotation,\n  sendBulkAnnotations,\n});\n","import Annotations from '/imports/api/annotations';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction annotations() {\n  if (!this.userId) {\n    return Annotations.find({ meetingId: '' });\n  }\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing Annotations for ${meetingId} ${requesterUserId}`);\n\n  return Annotations.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundAnnotations = annotations.bind(this);\n  return boundAnnotations(...args);\n}\n\nMeteor.publish('annotations', publish);\n","import Logger from '/imports/startup/server/logger';\n\nexport function removeAnnotationsStreamer(meetingId) {\n  Logger.info(`Removing Annotations streamer object for meeting ${meetingId}`);\n  delete Meteor.StreamerCentral.instances[`annotations-${meetingId}`];\n}\n\nexport function addAnnotationsStreamer(meetingId) {\n  const streamer = new Meteor.Streamer(`annotations-${meetingId}`, { retransmit: false });\n\n  streamer.allowRead(function allowRead() {\n    if (!this.userId) return false;\n\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.allowWrite(function allowWrite() {\n    return false;\n  });\n}\n\nexport default function get(meetingId) {\n  return Meteor.StreamerCentral.instances[`annotations-${meetingId}`];\n}\n","import { check } from 'meteor/check';\n\nconst ANNOTATION_TYPE_TEXT = 'text';\nconst ANNOTATION_TYPE_PENCIL = 'pencil';\nconst DEFAULT_TEXT_WIDTH = 30;\nconst DEFAULT_TEXT_HEIGHT = 20;\n\n// line, triangle, ellipse, rectangle\nfunction handleCommonAnnotation(meetingId, whiteboardId, userId, annotation) {\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const selector = {\n    meetingId,\n    id,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      whiteboardId,\n      meetingId,\n      id,\n      status,\n      annotationType,\n      annotationInfo,\n      wbId,\n    },\n    $setOnInsert: {\n      position,\n    },\n    $inc: { version: 1 },\n  };\n\n  return { selector, modifier };\n}\n\nfunction handleTextUpdate(meetingId, whiteboardId, userId, annotation) {\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const { textBoxWidth, textBoxHeight, calcedFontSize } = annotationInfo;\n  const useDefaultSize = (textBoxWidth === 0 && textBoxHeight === 0)\n    || textBoxWidth < calcedFontSize\n    || textBoxHeight < calcedFontSize;\n\n  if (useDefaultSize) {\n    annotationInfo.textBoxWidth = DEFAULT_TEXT_WIDTH;\n    annotationInfo.textBoxHeight = DEFAULT_TEXT_HEIGHT;\n\n    if (100 - annotationInfo.x < DEFAULT_TEXT_WIDTH) {\n      annotationInfo.textBoxWidth = 100 - annotationInfo.x;\n    }\n    if (100 - annotationInfo.y < DEFAULT_TEXT_HEIGHT) {\n      annotationInfo.textBoxHeight = 100 - annotationInfo.y;\n    }\n  }\n\n  const selector = {\n    meetingId,\n    id,\n    userId,\n  };\n\n  annotationInfo.text = annotationInfo.text.replace(/[\\r]/g, '\\n');\n\n  const modifier = {\n    $set: {\n      whiteboardId,\n      meetingId,\n      id,\n      status,\n      annotationType,\n      annotationInfo,\n      wbId,\n    },\n    $setOnInsert: {\n      position,\n    },\n    $inc: { version: 1 },\n  };\n\n  return { selector, modifier };\n}\n\nfunction handlePencilUpdate(meetingId, whiteboardId, userId, annotation) {\n  const DRAW_START = 'DRAW_START';\n  const DRAW_UPDATE = 'DRAW_UPDATE';\n  const DRAW_END = 'DRAW_END';\n\n  const {\n    id, status, annotationType, annotationInfo, wbId, position,\n  } = annotation;\n\n  const baseSelector = {\n    meetingId,\n    id,\n    userId,\n    whiteboardId,\n  };\n\n  let baseModifier;\n  switch (status) {\n    case DRAW_START:\n      // on start we split the points\n\n      // create the 'pencil_base'\n      // TODO: find and removed unused props (chunks, version, etc)\n      baseModifier = {\n        $set: {\n          id,\n          userId,\n          meetingId,\n          whiteboardId,\n          position,\n          status,\n          annotationType,\n          annotationInfo,\n          wbId,\n          version: 1,\n        },\n      };\n      break;\n    case DRAW_UPDATE:\n      baseModifier = {\n        $push: {\n          'annotationInfo.points': { $each: annotationInfo.points },\n        },\n        $set: {\n          status,\n        },\n        $inc: { version: 1 },\n      };\n      break;\n    case DRAW_END:\n      // Updating the main pencil object with the final info\n      baseModifier = {\n        $set: {\n          whiteboardId,\n          meetingId,\n          id,\n          status,\n          annotationType,\n          annotationInfo,\n          wbId,\n          position,\n        },\n        $inc: { version: 1 },\n      };\n      break;\n    default:\n      break;\n  }\n\n  return { selector: baseSelector, modifier: baseModifier };\n}\n\nexport default function addAnnotation(meetingId, whiteboardId, userId, annotation) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(annotation, Object);\n\n  switch (annotation.annotationType) {\n    case ANNOTATION_TYPE_TEXT:\n      return handleTextUpdate(meetingId, whiteboardId, userId, annotation);\n    case ANNOTATION_TYPE_PENCIL:\n      return handlePencilUpdate(meetingId, whiteboardId, userId, annotation);\n    default:\n      return handleCommonAnnotation(meetingId, whiteboardId, userId, annotation);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\n\nconst Annotations = new Mongo.Collection('annotations');\n\nif (Meteor.isServer) {\n  // types of queries for the annotations  (Total):\n  // 1. meetingId, id, userId               ( 8 )\n  // 2. meetingId, id, userId, whiteboardId ( 1 )\n  // 3. meetingId                           ( 1 )\n  // 4. meetingId, whiteboardId             ( 1 )\n  // 5. meetingId, whiteboardId, id         ( 1 )\n  // 6. meetingId, whiteboardId, userId     ( 1 )\n  // These 2 indexes seem to cover all of the cases\n\n  Annotations._ensureIndex({ id: 1 });\n  Annotations._ensureIndex({ meetingId: 1, whiteboardId: 1, userId: 1 });\n}\n\nexport default Annotations;\n","import { check } from 'meteor/check';\nimport clearBreakouts from '../modifiers/clearBreakouts';\n\nexport default function handleBreakoutClosed({ body }) {\n  const { breakoutId } = body;\n  check(breakoutId, String);\n\n  return clearBreakouts(breakoutId);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function handleBreakoutJoinURL({ body }) {\n  const {\n    redirectToHtml5JoinURL,\n    userId,\n    breakoutId,\n  } = body;\n\n  check(redirectToHtml5JoinURL, String);\n\n  const selector = {\n    breakoutId,\n  };\n\n  const modifier = {\n    $push: {\n      users: {\n        userId,\n        redirectToHtml5JoinURL,\n        insertedTime: new Date().getTime(),\n      },\n    },\n  };\n\n  const cb = (cbErr, numChanged) => {\n    if (cbErr) {\n      return Logger.error(`Adding breakout to collection: ${cbErr}`);\n    }\n\n    const {\n      insertedId,\n    } = numChanged;\n    if (insertedId) {\n      return Logger.info(`Added breakout id=${breakoutId}`);\n    }\n\n    return Logger.info(`Upserted breakout id=${breakoutId}`);\n  };\n\n  return Breakouts.upsert(selector, modifier, cb);\n}\n","import Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\n\nexport default function handleBreakoutRoomStarted({ body }, meetingId) {\n  // 0 seconds default breakout time, forces use of real expiration time\n  const DEFAULT_TIME_REMAINING = 0;\n\n  const {\n    parentMeetingId,\n    breakout,\n  } = body;\n\n  const { breakoutId } = breakout;\n\n  check(meetingId, String);\n\n  const selector = {\n    breakoutId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      {\n        users: [],\n        joinedUsers: [],\n      },\n      { timeRemaining: DEFAULT_TIME_REMAINING },\n      { parentMeetingId },\n      flat(breakout),\n    ),\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`updating breakout: ${err}`);\n    }\n\n    return Logger.info('Updated timeRemaining and externalMeetingId '\n      + `for breakout id=${breakoutId}`);\n  };\n\n  return Breakouts.upsert(selector, modifier, cb);\n}\n","import Breakouts from '/imports/api/breakouts';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function joinedUsersChanged({ body }) {\n  check(body, Object);\n\n  const {\n    parentId,\n    breakoutId,\n    users,\n  } = body;\n\n  check(parentId, String);\n  check(breakoutId, String);\n  check(users, Array);\n\n  const selector = {\n    parentMeetingId: parentId,\n    breakoutId,\n  };\n\n  const usersMapped = users.map(user => ({ userId: user.id, name: user.name }));\n  const modifier = {\n    $set: {\n      joinedUsers: usersMapped,\n    },\n  };\n\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`updating joined users in breakout: ${err}`);\n    }\n\n    return Logger.info('Updated joined users '\n      + `in breakout id=${breakoutId}`);\n  };\n  Breakouts.find(selector);\n  Breakouts.update(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function handleUpdateTimeRemaining({ body }, meetingId) {\n  const {\n    timeRemaining,\n  } = body;\n\n  check(meetingId, String);\n  check(timeRemaining, Number);\n\n  const selector = {\n    parentMeetingId: meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      timeRemaining,\n    },\n  };\n\n  const options = {\n    multi: true,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Updating breakouts: ${err}`);\n    }\n\n    return Logger.info('Updated breakout time remaining for breakouts ' +\n      `where parentMeetingId=${meetingId}`);\n  };\n\n  return Breakouts.update(selector, modifier, options, cb);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function createBreakoutRoom(rooms, durationInMinutes, record = false) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const eventName = 'CreateBreakoutRoomsCmdMsg';\n  if (rooms.length > 8) return Logger.info(`Attempt to create breakout rooms with invalid number of rooms in meeting id=${meetingId}`);\n  const payload = {\n    record,\n    durationInMinutes,\n    rooms,\n    meetingId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function endAllBreakouts() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const eventName = 'EndAllBreakoutRoomsMsg';\n  return RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, null);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function requestJoinURL({ breakoutId, userId: userIdToInvite }) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const userId = userIdToInvite || requesterUserId;\n  const eventName = 'RequestBreakoutJoinURLReqMsg';\n\n  return RedisPubSub.publishUserMessage(\n    CHANNEL, eventName, meetingId, requesterUserId,\n    {\n      meetingId,\n      breakoutId,\n      userId,\n    },\n  );\n}\n","import Logger from '/imports/startup/server/logger';\nimport Breakouts from '/imports/api/breakouts';\n\nexport default function clearBreakouts(breakoutId) {\n  if (breakoutId) {\n    const selector = {\n      breakoutId,\n    };\n\n    return Breakouts.remove(selector, () => {\n      Logger.info(`Cleared Breakouts (${breakoutId})`);\n    });\n  }\n\n  return Breakouts.remove({}, () => {\n    Logger.info('Cleared Breakouts (all)');\n  });\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleBreakoutJoinURL from './handlers/breakoutJoinURL';\nimport handleBreakoutStarted from './handlers/breakoutStarted';\nimport handleUpdateTimeRemaining from './handlers/updateTimeRemaining';\nimport handleBreakoutClosed from './handlers/breakoutClosed';\nimport joinedUsersChanged from './handlers/joinedUsersChanged';\n\nRedisPubSub.on('BreakoutRoomStartedEvtMsg', handleBreakoutStarted);\nRedisPubSub.on('BreakoutRoomJoinURLEvtMsg', handleBreakoutJoinURL);\nRedisPubSub.on('RequestBreakoutJoinURLRespMsg', handleBreakoutJoinURL);\nRedisPubSub.on('BreakoutRoomsTimeRemainingUpdateEvtMsg', handleUpdateTimeRemaining);\nRedisPubSub.on('BreakoutRoomEndedEvtMsg', handleBreakoutClosed);\nRedisPubSub.on('UpdateBreakoutUsersEvtMsg', joinedUsersChanged);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport createBreakoutRoom from '/imports/api/breakouts/server/methods/createBreakout';\nimport requestJoinURL from './methods/requestJoinURL';\nimport endAllBreakouts from './methods/endAllBreakouts';\n\nMeteor.methods({\n  requestJoinURL,\n  createBreakoutRoom,\n  endAllBreakouts,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Breakouts from '/imports/api/breakouts';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction breakouts(role) {\n  if (!this.userId) {\n    return Breakouts.find({ meetingId: '' });\n  }\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  Logger.debug(`Publishing Breakouts for ${meetingId} ${requesterUserId}`);\n\n  const User = Users.findOne({ userId: requesterUserId, meetingId }, { fields: { role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    const presenterSelector = {\n      $or: [\n        { parentMeetingId: meetingId },\n        { breakoutId: meetingId },\n      ],\n    };\n\n    return Breakouts.find(presenterSelector);\n  }\n\n  const selector = {\n    $or: [\n      {\n        parentMeetingId: meetingId,\n        freeJoin: true,\n      },\n      {\n        parentMeetingId: meetingId,\n        'users.userId': requesterUserId,\n      },\n      {\n        breakoutId: meetingId,\n      },\n    ],\n  };\n\n  return Breakouts.find(selector);\n}\n\nfunction publish(...args) {\n  const boundBreakouts = breakouts.bind(this);\n  return boundBreakouts(...args);\n}\n\nMeteor.publish('breakouts', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Breakouts = new Mongo.Collection('breakouts');\n\nif (Meteor.isServer) {\n  // types of queries for the breakouts:\n  // 1. breakoutId ( handleJoinUrl, roomStarted, clearBreakouts )\n  // 2. parentMeetingId ( updateTimeRemaining )\n\n  Breakouts._ensureIndex({ breakoutId: 1 });\n  Breakouts._ensureIndex({ parentMeetingId: 1 });\n}\n\nexport default Breakouts;\n","import { check } from 'meteor/check';\nimport fetchReadOnlyPadId from '/imports/api/captions/server/methods/fetchReadOnlyPadId';\n\nexport default function handlePadCreate({ body }) {\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  fetchReadOnlyPadId(id);\n}\n","import { check } from 'meteor/check';\nimport { getDataFromChangeset } from '/imports/api/captions/server/helpers';\nimport updatePad from '/imports/api/captions/server/modifiers/updatePad';\n\nexport default function handlePadUpdate({ body }) {\n  const { pad, revs, changeset } = body;\n  const { id } = pad;\n\n  check(id, String);\n  check(changeset, String);\n  check(revs, Number);\n\n  const data = getDataFromChangeset(changeset);\n\n  if (data !== '') {\n    updatePad(id, data, revs);\n  }\n}\n","import axios from 'axios';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  generatePadId,\n} from '/imports/api/captions/server/helpers';\nimport {\n  appendTextURL,\n} from '/imports/api/note/server/helpers';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function appendText(text, locale) {\n  const { meetingId } = extractCredentials(this.userId);\n  check(meetingId, String);\n  check(text, String);\n  check(locale, String);\n\n  const padId = generatePadId(meetingId, locale);\n\n  axios({\n    method: 'get',\n    url: appendTextURL(padId, text),\n    responseType: 'json',\n  }).then((response) => {\n    const { status } = response;\n    if (status === 200) {\n      Logger.verbose(`Appended text for padId:${padId}`);\n    }\n  }).catch(error => Logger.error(`Could not append captions for padId=${padId}: ${error}`));\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  generatePadId,\n  isEnabled,\n  getLocalesURL,\n} from '/imports/api/captions/server/helpers';\nimport addCaption from '/imports/api/captions/server/modifiers/addCaption';\nimport axios from 'axios';\n\nexport default function createCaptions(meetingId) {\n  // Avoid captions creation if this feature is disabled\n  if (!isEnabled()) {\n    Logger.warn(`Captions are disabled for ${meetingId}`);\n    return;\n  }\n\n  check(meetingId, String);\n\n  axios({\n    method: 'get',\n    url: getLocalesURL(),\n    responseType: 'json',\n  }).then((response) => {\n    const { status } = response;\n    if (status !== 200) {\n      Logger.error(`Could not get locales info for ${meetingId} ${status}`);\n    }\n    const locales = response.data;\n    locales.forEach((locale) => {\n      const padId = generatePadId(meetingId, locale.locale);\n      addCaption(meetingId, padId, locale);\n    });\n  }).catch(error => Logger.error(`Could not create captions for ${meetingId}: ${error}`));\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nconst getIndex = (data, length) => length - data.length;\n\nexport default function editCaptions(padId, data) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EditCaptionHistoryPubMsg';\n\n  check(padId, String);\n  check(data, String);\n\n  const pad = Captions.findOne({ padId });\n\n  if (!pad) return Logger.error(`Editing captions history: ${padId}`);\n\n  const {\n    meetingId,\n    ownerId,\n    locale,\n    length,\n  } = pad;\n\n  check(meetingId, String);\n  check(ownerId, String);\n  check(locale, { locale: String, name: String });\n  check(length, Number);\n\n  const index = getIndex(data, length);\n\n  const payload = {\n    startIndex: index,\n    localeCode: locale.locale,\n    locale: locale.name,\n    endIndex: index,\n    text: data,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, ownerId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  getReadOnlyIdURL,\n  getDataFromResponse,\n} from '/imports/api/note/server/helpers';\nimport updateReadOnlyPadId from '/imports/api/captions/server/modifiers/updateReadOnlyPadId';\nimport axios from 'axios';\n\nexport default function fetchReadOnlyPadId(padId) {\n  check(padId, String);\n\n  const readOnlyURL = getReadOnlyIdURL(padId);\n  axios({\n    method: 'get',\n    url: readOnlyURL,\n    responseType: 'json',\n  }).then((response) => {\n    const readOnlyPadId = getDataFromResponse(response.data, 'readOnlyID');\n    if (readOnlyPadId) {\n      updateReadOnlyPadId(padId, readOnlyPadId);\n    } else {\n      Logger.error(`Could not get pad readOnlyID for ${padId}`);\n    }\n  }).catch(error => Logger.error(`Could not get pad readOnlyID for ${padId}: ${error}`));\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport updateOwnerId from '/imports/api/captions/server/modifiers/updateOwnerId';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function takeOwnership(locale) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(locale, String);\n\n  const pad = Captions.findOne({ meetingId, padId: { $regex: `_captions_${locale}$` } });\n\n  if (pad) {\n    updateOwnerId(meetingId, requesterUserId, pad.padId);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport default function editCaptions(meetingId, userId, padId) { // TODO\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateCaptionOwnerPubMsg';\n\n  check(meetingId, String);\n  check(userId, String);\n  check(padId, String);\n\n  const pad = Captions.findOne({ meetingId, padId });\n\n  if (!pad) return Logger.error(`Editing captions owner: ${padId}`);\n\n  const { locale } = pad;\n\n  check(locale, { locale: String, name: String });\n\n  const payload = {\n    ownerId: userId,\n    locale: locale.name,\n    localeCode: locale.locale,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\nimport Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addCaption(meetingId, padId, locale) {\n  check(meetingId, String);\n  check(padId, String);\n  check(locale, {\n    locale: String,\n    name: String,\n  });\n\n  const selector = {\n    meetingId,\n    padId,\n  };\n\n  const modifier = {\n    meetingId,\n    padId,\n    locale,\n    ownerId: '',\n    readOnlyPadId: '',\n    data: '',\n    revs: 0,\n    length: 0,\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding caption to collection: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n    if (insertedId) {\n      return Logger.verbose(`Added caption locale=${locale.locale} meeting=${meetingId}`);\n    }\n\n    return Logger.verbose(`Upserted caption locale=${locale.locale} meeting=${meetingId}`);\n  };\n\n  return Captions.upsert(selector, modifier, cb);\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearCaptions(meetingId) {\n  if (meetingId) {\n    return Captions.remove({ meetingId }, () => {\n      Logger.info(`Cleared Captions (${meetingId})`);\n    });\n  }\n\n  return Captions.remove({}, () => {\n    Logger.info('Cleared Captions (all)');\n  });\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport updateOwner from '/imports/api/captions/server/methods/updateOwner';\nimport { check } from 'meteor/check';\n\nexport default function updateOwnerId(meetingId, userId, padId) {\n  check(meetingId, String);\n  check(userId, String);\n  check(padId, String);\n\n  const selector = {\n    meetingId,\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      ownerId: userId,\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Updating captions pad: ${err}`);\n    }\n    updateOwner(meetingId, userId, padId);\n    return Logger.verbose(`Update captions pad=${padId} ownerId=${userId}`);\n  };\n\n  return Captions.update(selector, modifier, { multi: true }, cb);\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport editCaptions from '/imports/api/captions/server/methods/editCaptions';\nimport { check } from 'meteor/check';\n\nexport default function updatePad(padId, data, revs) {\n  check(padId, String);\n  check(data, String);\n  check(revs, Number);\n\n  const selector = {\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      data,\n      revs,\n    },\n    $inc: {\n      length: data.length,\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Updating captions pad: ${err}`);\n    }\n    editCaptions(padId, data, revs);\n    return Logger.verbose(`Update captions pad=${padId} revs=${revs}`);\n  };\n\n  return Captions.update(selector, modifier, { multi: true }, cb);\n}\n","import Captions from '/imports/api/captions';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateReadOnlyPadId(padId, readOnlyPadId) {\n  check(padId, String);\n  check(readOnlyPadId, String);\n\n  const selector = {\n    padId,\n  };\n\n  const modifier = {\n    $set: {\n      readOnlyPadId,\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Adding readOnlyPadId captions pad: ${err}`);\n    }\n\n    return Logger.verbose(`Added readOnlyPadId captions pad=${padId} readOnlyPadId=${readOnlyPadId}`);\n  };\n\n  return Captions.update(selector, modifier, { multi: true }, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForCaptionsPadOnly } from '/imports/api/captions/server/helpers';\nimport handlePadCreate from './handlers/padCreate';\nimport handlePadUpdate from './handlers/padUpdate';\n\nRedisPubSub.on('PadCreateSysMsg', processForCaptionsPadOnly(handlePadCreate));\nRedisPubSub.on('PadUpdateSysMsg', processForCaptionsPadOnly(handlePadUpdate));\n","import { Meteor } from 'meteor/meteor';\nimport { hashFNV32a } from '/imports/api/common/server/helpers';\nimport { check } from 'meteor/check';\n\nconst CAPTIONS_CONFIG = Meteor.settings.public.captions;\nconst BASENAME = Meteor.settings.public.app.basename;\nconst APP = Meteor.settings.private.app;\nconst LOCALES_URL = `http://${APP.host}:${APP.port}${BASENAME}${APP.localesUrl}`;\nconst CAPTIONS = '_captions_';\nconst TOKEN = '$';\n\n// Captions padId should look like: {padId}_captions_{locale}\nconst generatePadId = (meetingId, locale) => {\n  const padId = `${hashFNV32a(meetingId, true)}${CAPTIONS}${locale}`;\n  return padId;\n};\n\nconst isCaptionsPad = (padId) => {\n  const splitPadId = padId.split(CAPTIONS);\n  return splitPadId.length === 2;\n};\n\nconst getDataFromChangeset = (changeset) => {\n  const splitChangeset = changeset.split(TOKEN);\n  if (splitChangeset.length > 1) {\n    splitChangeset.shift();\n    return splitChangeset.join(TOKEN);\n  }\n  return '';\n};\n\nconst isEnabled = () => CAPTIONS_CONFIG.enabled;\n\nconst getLocalesURL = () => LOCALES_URL;\n\nconst processForCaptionsPadOnly = fn => (message, ...args) => {\n  const { body } = message;\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  if (isCaptionsPad(id)) return fn(message, ...args);\n  return () => {};\n};\n\nexport {\n  generatePadId,\n  processForCaptionsPadOnly,\n  isEnabled,\n  getLocalesURL,\n  getDataFromChangeset,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport takeOwnership from '/imports/api/captions/server/methods/takeOwnership';\nimport appendText from '/imports/api/captions/server/methods/appendText';\n\nMeteor.methods({\n  takeOwnership,\n  appendText,\n});\n","import Captions from '/imports/api/captions';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction captions() {\n  if (!this.userId) {\n    return Captions.find({ meetingId: '' });\n  }\n  const { meetingId } = extractCredentials(this.userId);\n  Logger.debug(`Publishing Captions for ${meetingId}`);\n\n  return Captions.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundCaptions = captions.bind(this);\n  return boundCaptions(...args);\n}\n\nMeteor.publish('captions', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Captions = new Mongo.Collection('captions');\n\nif (Meteor.isServer) {\n  Captions._ensureIndex({ meetingId: 1, padId: 1 });\n}\n\nexport default Captions;\n","import { check } from 'meteor/check';\nimport updateConnectionStatus from '/imports/api/connection-status/server/modifiers/updateConnectionStatus';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function addConnectionStatus(level) {\n  check(level, String);\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  updateConnectionStatus(meetingId, requesterUserId, level);\n}\n","import ConnectionStatus from '/imports/api/connection-status';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearConnectionStatus(meetingId) {\n  if (meetingId) {\n    return ConnectionStatus.remove({ meetingId }, () => {\n      Logger.info(`Cleared ConnectionStatus (${meetingId})`);\n    });\n  }\n\n  return ConnectionStatus.remove({}, () => {\n    Logger.info('Cleared ConnectionStatus (all)');\n  });\n}\n","import ConnectionStatus from '/imports/api/connection-status';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateConnectionStatus(meetingId, userId, level) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const timestamp = new Date().getTime();\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    meetingId,\n    userId,\n    level,\n    timestamp,\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Updating connection status: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n    if (insertedId) {\n      return Logger.info(`Added connection status userId=${userId} level=${level}`);\n    }\n\n    return Logger.verbose(`Update connection status userId=${userId} level=${level}`);\n  };\n\n  return ConnectionStatus.upsert(selector, modifier, cb);\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addConnectionStatus from './methods/addConnectionStatus';\n\nMeteor.methods({\n  addConnectionStatus,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport ConnectionStatus from '/imports/api/connection-status';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction connectionStatus() {\n  if (!this.userId) {\n    return ConnectionStatus.find({ meetingId: '' });\n  }\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  Logger.info(`Publishing connection status for ${meetingId} ${requesterUserId}`);\n\n  return ConnectionStatus.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundNote = connectionStatus.bind(this);\n  return boundNote(...args);\n}\n\nMeteor.publish('connection-status', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst ConnectionStatus = new Mongo.Collection('connection-status');\n\nif (Meteor.isServer) {\n  ConnectionStatus._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default ConnectionStatus;\n","import { check } from 'meteor/check';\nimport CursorStreamer from '/imports/api/cursor/server/streamer';\nimport Logger from '/imports/startup/server/logger';\nimport _ from 'lodash';\n\nconst { streamerLog } = Meteor.settings.private.serverLog;\n\nconst CURSOR_PROCCESS_INTERVAL = 30;\n\nconst cursorQueue = {};\n\nconst proccess = _.throttle(() => {\n  try {\n    Object.keys(cursorQueue).forEach((meetingId) => {\n      try {\n        const cursors = cursorQueue[meetingId];\n        delete cursorQueue[meetingId];\n        CursorStreamer(meetingId).emit('message', { meetingId, cursors });\n\n        if (streamerLog) {\n          Logger.debug(`CursorUpdate process for meeting ${meetingId} has finished`);\n        }\n      } catch (error) {\n        Logger.error(`Error while trying to send cursor streamer data for meeting ${meetingId}. ${error}`);\n      }\n    });\n  } catch (error) {\n    Logger.error(`Error while processing cursor queue. ${error}`);\n  }\n}, CURSOR_PROCCESS_INTERVAL);\n\nexport default function handleCursorUpdate({ header, body }, meetingId) {\n  const { userId } = header;\n  check(body, Object);\n\n  check(meetingId, String);\n  check(userId, String);\n\n  if (!cursorQueue[meetingId]) {\n    cursorQueue[meetingId] = {};\n  }\n\n  // overwrite since we dont care about the other positions\n  cursorQueue[meetingId][userId] = body;\n\n  proccess();\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\n\nexport default function publishCursorUpdate(meetingId, requesterUserId, payload) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendCursorPositionPubMsg';\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleCursorUpdate from './handlers/cursorUpdate';\n\nRedisPubSub.on('SendCursorPositionEvtMsg', handleCursorUpdate);\n","import './eventHandlers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport publishCursorUpdate from './methods/publishCursorUpdate';\n\nMeteor.methods({\n  publishCursorUpdate,\n});\n","import Logger from '/imports/startup/server/logger';\nimport publishCursorUpdate from './methods/publishCursorUpdate';\n\nconst { streamerLog } = Meteor.settings.private.serverLog;\n\nexport function removeCursorStreamer(meetingId) {\n  Logger.info(`Removing Cursor streamer object for meeting ${meetingId}`);\n  delete Meteor.StreamerCentral.instances[`cursor-${meetingId}`];\n}\n\nexport function addCursorStreamer(meetingId) {\n  const streamer = new Meteor.Streamer(`cursor-${meetingId}`, { retransmit: false });\n  if (streamerLog) {\n    Logger.debug(`Cursor streamer created for meeting ${meetingId}`);\n  }\n\n  streamer.allowRead(function allowRead() {\n    if (streamerLog) {\n      Logger.debug(`Cursor streamer called allowRead for user ${this.userId} in meeting ${meetingId}`);\n    }\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.allowWrite(function allowWrite() {\n    return this.userId && this.userId.includes(meetingId);\n  });\n\n  streamer.on('publish', (message) => {\n    publishCursorUpdate(meetingId, message.userId, message.payload);\n  });\n}\n\nexport default function get(meetingId) {\n  return Meteor.StreamerCentral.instances[`cursor-${meetingId}`];\n}\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function destroyExternalVideo(meetingId) {\n  const streamName = `external-videos-${meetingId}`;\n\n  if (Meteor.StreamerCentral.instances[streamName]) {\n    Logger.info(`Destroying External Video streamer object for ${streamName}`);\n    delete Meteor.StreamerCentral.instances[streamName];\n  }\n}\n","import Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function emitExternalVideoEvent(messageName, ...rest) {\n  const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n\n  const user = Users.findOne({ userId, meetingId });\n\n  if (user && user.presenter) {\n    const streamerName = `external-videos-${meetingId}`;\n    const streamer = Meteor.StreamerCentral.instances[streamerName];\n\n    if (streamer) {\n      streamer.emit(messageName, ...rest);\n    } else {\n      Logger.error(`External Video Streamer not found for meetingId: ${meetingId} userId: ${userId}`);\n    }\n  }\n}\n","import { extractCredentials } from '/imports/api/common/server/helpers';\nimport Logger from '/imports/startup/server/logger';\n\nconst allowRecentMessages = (eventName, message) => {\n  const {\n    userId,\n    meetingId,\n    time,\n    rate,\n    state,\n  } = message;\n\n  Logger.debug(`ExternalVideo Streamer auth allowed userId: ${userId}, meetingId: ${meetingId}, event: ${eventName}, time: ${time} rate: ${rate}, state: ${state}`);\n  return true;\n};\n\nexport default function initializeExternalVideo() {\n  const { meetingId } = extractCredentials(this.userId);\n\n  const streamName = `external-videos-${meetingId}`;\n  if (!Meteor.StreamerCentral.instances[streamName]) {\n    const streamer = new Meteor.Streamer(streamName);\n    streamer.allowRead('all');\n    streamer.allowWrite('none');\n    streamer.allowEmit(allowRecentMessages);\n    Logger.info(`Created External Video streamer for ${streamName}`);\n  } else {\n    Logger.debug(`External Video streamer is already created for ${streamName}`);\n  }\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startWatchingExternalVideo(options) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StartExternalVideoMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  const { externalVideoUrl } = options;\n\n  check(externalVideoUrl, String);\n\n  Meetings.update({ meetingId }, { $set: { externalVideoUrl } });\n\n  const payload = { externalVideoUrl };\n\n  Logger.info(`User id=${requesterUserId} sharing an external video: ${externalVideoUrl} for meeting ${meetingId}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function stopWatchingExternalVideo(options) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StopExternalVideoMsg';\n\n  if (this.userId) {\n    options = extractCredentials(this.userId);\n  }\n\n  const { meetingId, requesterUserId } = options;\n\n  const meeting = Meetings.findOne({ meetingId });\n  if (!meeting || meeting.externalVideoUrl === null) return;\n\n  Meetings.update({ meetingId }, { $set: { externalVideoUrl: null } });\n  const payload = {};\n\n  Logger.info(`User id=${requesterUserId} stopped sharing an external video for meeting=${meetingId}`);\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import './methods';\n\n","import { Meteor } from 'meteor/meteor';\nimport startWatchingExternalVideo from './methods/startWatchingExternalVideo';\nimport stopWatchingExternalVideo from './methods/stopWatchingExternalVideo';\nimport initializeExternalVideo from './methods/initializeExternalVideo';\nimport emitExternalVideoEvent from './methods/emitExternalVideoEvent';\n\nMeteor.methods({\n  initializeExternalVideo,\n  startWatchingExternalVideo,\n  stopWatchingExternalVideo,\n  emitExternalVideoEvent,\n});\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChatCreated({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  return addGroupChat(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChatDestroyed({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  return addGroupChat(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport addGroupChat from '../modifiers/addGroupChat';\n\nexport default function handleGroupChats({ body }, meetingId) {\n  const { chats } = body;\n\n  check(meetingId, String);\n  check(chats, Array);\n\n  const chatsAdded = [];\n\n  chats.forEach((chat) => {\n    chatsAdded.push(addGroupChat(meetingId, chat));\n  });\n\n  return chatsAdded;\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { CHAT_ACCESS_PRIVATE } from '/imports/api/group-chat';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function createGroupChat(receiver) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'CreateGroupChatReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(receiver, Object);\n\n  const payload = {\n    correlationId: `${requesterUserId}-${Date.now()}`,\n    msg: [],\n    users: [receiver.userId],\n    access: CHAT_ACCESS_PRIVATE,\n    name: receiver.name,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function createGroupChat() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const eventName = 'DestroyGroupChatReqMsg';\n\n  const payload = {\n    // TODO: Implement this together with #4988\n    // chats: Array[String],\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, eventName, meetingId, requesterUserId, payload);\n}\n","import flat from 'flat';\nimport { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport GroupChat from '/imports/api/group-chat';\n\nexport default function addGroupChat(meetingId, chat) {\n  check(meetingId, String);\n  check(chat, {\n    id: Match.Maybe(String),\n    chatId: Match.Maybe(String),\n    correlationId: Match.Maybe(String),\n    name: String,\n    access: String,\n    createdBy: Object,\n    users: Array,\n    msg: Match.Maybe(Array),\n  });\n\n  const chatDocument = {\n    meetingId,\n    chatId: chat.chatId || chat.id,\n    name: chat.name,\n    access: chat.access,\n    users: chat.users.map(u => u.id),\n    createdBy: chat.createdBy.id,\n  };\n\n  const selector = {\n    chatId: chatDocument.chatId,\n    meetingId,\n  };\n\n  const modifier = {\n    $set: flat(chatDocument, { safe: true }),\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding group-chat to collection: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n\n    if (insertedId) {\n      return Logger.info(`Added group-chat name=${chat.name} meetingId=${meetingId}`);\n    }\n\n    return Logger.info(`Upserted group-chat name=${chat.name} meetingId=${meetingId}`);\n  };\n\n  return GroupChat.upsert(selector, modifier, cb);\n}\n","import GroupChat from '/imports/api/group-chat';\nimport Logger from '/imports/startup/server/logger';\nimport clearGroupChatMsg from '/imports/api/group-chat-msg/server/modifiers/clearGroupChatMsg';\n\nexport default function clearGroupChat(meetingId) {\n  clearGroupChatMsg(meetingId);\n  return GroupChat.remove({ meetingId }, () => {\n    Logger.info(`Cleared GroupChat (${meetingId})`);\n  });\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleGroupChats from './handlers/groupChats';\nimport handleGroupChatCreated from './handlers/groupChatCreated';\nimport handleGroupChatDestroyed from './handlers/groupChatDestroyed';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nRedisPubSub.on('GetGroupChatsRespMsg', processForHTML5ServerOnly(handleGroupChats));\nRedisPubSub.on('GroupChatCreatedEvtMsg', handleGroupChatCreated);\nRedisPubSub.on('GroupChatDestroyedEvtMsg', handleGroupChatDestroyed);\nRedisPubSub.on('SyncGetGroupChatsRespMsg', handleGroupChats);\n","import '/imports/api/group-chat-msg/server';\nimport './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport createGroupChat from './methods/createGroupChat';\nimport destroyGroupChat from './methods/destroyGroupChat';\n\nMeteor.methods({\n  createGroupChat,\n  destroyGroupChat,\n});\n","import GroupChat from '/imports/api/group-chat';\nimport { Meteor } from 'meteor/meteor';\n\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction groupChat() {\n  if (!this.userId) {\n    return GroupChat.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_CHAT_TYPE = CHAT_CONFIG.type_public;\n\n  Logger.debug(`Publishing group-chat for ${meetingId} ${requesterUserId}`);\n\n  return GroupChat.find({\n    $or: [\n      { meetingId, access: PUBLIC_CHAT_TYPE },\n      { meetingId, users: { $all: [requesterUserId] } },\n    ],\n\n  });\n}\n\nfunction publish(...args) {\n  const boundGroupChat = groupChat.bind(this);\n  return boundGroupChat(...args);\n}\n\nMeteor.publish('group-chat', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst GroupChat = new Mongo.Collection('group-chat');\n\nif (Meteor.isServer) {\n  GroupChat._ensureIndex({\n    meetingId: 1, chatId: 1, access: 1, users: 1,\n  });\n}\n\nexport default GroupChat;\n\nconst CHAT_ACCESS = {\n  PUBLIC: 'PUBLIC_ACCESS',\n  PRIVATE: 'PRIVATE_ACCESS',\n};\n\nexport const CHAT_ACCESS_PUBLIC = CHAT_ACCESS.PUBLIC;\nexport const CHAT_ACCESS_PRIVATE = CHAT_ACCESS.PRIVATE;\n","import { check } from 'meteor/check';\nimport clearGroupChatMsg from '../modifiers/clearGroupChatMsg';\n\nexport default function clearPublicChatHistory({ header, body }) {\n  const { meetingId } = header;\n  const { chatId } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n\n  return clearGroupChatMsg(meetingId, chatId);\n}\n","import { check } from 'meteor/check';\nimport addGroupChatMsg from '../modifiers/addGroupChatMsg';\n\nexport default function handleGroupChatMsgBroadcast({ body }, meetingId) {\n  const { chatId, msg } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, Object);\n\n  return addGroupChatMsg(meetingId, chatId, msg);\n}\n","import { Match, check } from 'meteor/check';\nimport addGroupChatMsg from '../modifiers/addGroupChatMsg';\n\nexport default function handleGroupChatsMsgs({ body }, meetingId) {\n  const { chatId, msgs, msg } = body;\n\n  check(meetingId, String);\n  check(chatId, String);\n  check(msgs, Match.Maybe(Array));\n  check(msg, Match.Maybe(Array));\n\n  const msgsAdded = [];\n\n  (msgs || msg).forEach((m) => {\n    msgsAdded.push(addGroupChatMsg(meetingId, chatId, m));\n  });\n\n  return msgsAdded;\n}\n","import { check } from 'meteor/check';\nimport startTyping from '../modifiers/startTyping';\n\nexport default function handleUserTyping({ body }, meetingId) {\n  const { chatId, userId } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(chatId, String);\n\n  startTyping(meetingId, userId, chatId);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function clearPublicChatHistory() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ClearPublicChatHistoryPubMsg';\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const payload = {\n    chatId: PUBLIC_GROUP_CHAT_ID,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport RegexWebUrl from '/imports/utils/regex-weburl';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst HTML_SAFE_MAP = {\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n};\n\nconst parseMessage = (message) => {\n  let parsedMessage = message || '';\n  parsedMessage = parsedMessage.trim();\n\n  // Replace <br/> with \\n\\r\n  parsedMessage = parsedMessage.replace(/<br\\s*[\\\\/]?>/gi, '\\n\\r');\n\n  // Sanitize. See: http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\n  parsedMessage = parsedMessage.replace(/[<>'\"]/g, c => HTML_SAFE_MAP[c]);\n\n  // Replace flash links to flash valid ones\n  parsedMessage = parsedMessage.replace(RegexWebUrl, \"<a href='event:$&'><u>$&</u></a>\");\n\n  return parsedMessage;\n};\n\nexport default function sendGroupChatMsg(chatId, message) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SendGroupChatMessageMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(message, Object);\n\n  const parsedMessage = parseMessage(message.message);\n\n  message.message = parsedMessage;\n\n  const payload = {\n    msg: message,\n    chatId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startUserTyping(chatId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserTypingPubMsg';\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(chatId, String);\n\n  const payload = {\n    chatId: chatId || PUBLIC_GROUP_CHAT_ID,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { UsersTyping } from '/imports/api/group-chat-msg';\nimport stopTyping from '../modifiers/stopTyping';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function stopUserTyping() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const userTyping = UsersTyping.findOne({\n    meetingId,\n    userId: requesterUserId,\n  });\n\n  if (userTyping) {\n    stopTyping(meetingId, requesterUserId, true);\n  }\n}\n","import flat from 'flat';\nimport { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport { BREAK_LINE } from '/imports/utils/lineEndings';\n\nconst parseMessage = (message) => {\n  let parsedMessage = message || '';\n\n  // Replace \\r and \\n to <br/>\n  parsedMessage = parsedMessage.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, `$1${BREAK_LINE}$2`);\n\n  // Replace flash links to html valid ones\n  parsedMessage = parsedMessage.split('<a href=\\'event:').join('<a target=\"_blank\" href=\\'');\n  parsedMessage = parsedMessage.split('<a href=\"event:').join('<a target=\"_blank\" href=\"');\n\n  return parsedMessage;\n};\n\nexport default function addGroupChatMsg(meetingId, chatId, msg) {\n  check(meetingId, String);\n  check(chatId, String);\n  check(msg, {\n    id: Match.Maybe(String),\n    timestamp: Number,\n    sender: Object,\n    color: String,\n    message: String,\n    correlationId: Match.Maybe(String),\n  });\n\n  const msgDocument = {\n    ...msg,\n    meetingId,\n    chatId,\n    message: parseMessage(msg.message),\n    sender: msg.sender.id,\n  };\n\n  const selector = {\n    meetingId,\n    chatId,\n    id: msg.id,\n  };\n\n  const modifier = {\n    $set: flat(msgDocument, { safe: true }),\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding group-chat-msg to collection: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n\n    if (insertedId) {\n      return Logger.info(`Added group-chat-msg msgId=${msg.id} chatId=${chatId} meetingId=${meetingId}`);\n    }\n\n    return Logger.info(`Upserted group-chat-msg msgId=${msg.id} chatId=${chatId} meetingId=${meetingId}`);\n  };\n\n  return GroupChatMsg.upsert(selector, modifier, cb);\n}\n","import { GroupChatMsg } from '/imports/api/group-chat-msg';\nimport Logger from '/imports/startup/server/logger';\nimport addGroupChatMsg from '/imports/api/group-chat-msg/server/modifiers/addGroupChatMsg';\n\nexport default function clearGroupChatMsg(meetingId, chatId) {\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_CHAT_SYSTEM_ID = CHAT_CONFIG.system_userid;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n  const CHAT_CLEAR_MESSAGE = CHAT_CONFIG.system_messages_keys.chat_clear;\n\n  if (chatId) {\n    GroupChatMsg.remove({ meetingId, chatId }, () => {\n      Logger.info(`Cleared GroupChatMsg (${meetingId}, ${chatId})`);\n      const clearMsg = {\n        color: '0',\n        timestamp: Date.now(),\n        correlationId: `${PUBLIC_CHAT_SYSTEM_ID}-${Date.now()}`,\n        sender: {\n          id: PUBLIC_CHAT_SYSTEM_ID,\n          name: '',\n        },\n        message: CHAT_CLEAR_MESSAGE,\n      };\n      addGroupChatMsg(meetingId, PUBLIC_GROUP_CHAT_ID, clearMsg);\n    });\n    return true;\n  }\n\n  if (meetingId) {\n    return GroupChatMsg.remove({ meetingId }, () => {\n      Logger.info(`Cleared GroupChatMsg (${meetingId})`);\n    });\n  }\n\n  return GroupChatMsg.remove({ chatId: { $eq: PUBLIC_GROUP_CHAT_ID } }, () => {\n    Logger.info('Cleared GroupChatMsg (all)');\n  });\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { UsersTyping } from '/imports/api/group-chat-msg';\nimport stopTyping from './stopTyping';\n\nconst TYPING_TIMEOUT = 5000;\n\nexport default function startTyping(meetingId, userId, chatId) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = Users.findOne(selector);\n\n  const mod = {\n    meetingId,\n    userId,\n    name: user.name,\n    isTypingTo: chatId,\n    role: user.role,\n    time: (new Date()),\n  };\n\n  const typingUser = UsersTyping.findOne(selector, {\n    fields: {\n      time: 1,\n    },\n  });\n\n  if (typingUser) {\n    if (mod.time - typingUser.time <= TYPING_TIMEOUT - 100) return;\n  }\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Typing indicator update error: ${err}`);\n    }\n\n    Meteor.setTimeout(() => {\n      stopTyping(meetingId, userId);\n    }, TYPING_TIMEOUT);\n    return Logger.debug(`Typing indicator update for userId={${userId}} chatId={${chatId}}`);\n  };\n\n  return UsersTyping.upsert(selector, mod, cb);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport { UsersTyping } from '/imports/api/group-chat-msg';\n\nexport default function stopTyping(meetingId, userId, sendMsgInitiated = false) {\n  check(meetingId, String);\n  check(userId, String);\n  check(sendMsgInitiated, Boolean);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const user = UsersTyping.findOne(selector);\n  const stillTyping = !sendMsgInitiated && user && (new Date()) - user.time < 3000;\n  if (stillTyping) return;\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Stop user=${userId} typing indicator error: ${err}`);\n    }\n    return Logger.debug(`Stopped typing indicator for user=${userId}`);\n  };\n\n  UsersTyping.remove(selector, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleGroupChatsMsgs from './handlers/groupChatsMsgs';\nimport handleGroupChatMsgBroadcast from './handlers/groupChatMsgBroadcast';\nimport handleClearPublicGroupChat from './handlers/clearPublicGroupChat';\nimport handleUserTyping from './handlers/userTyping';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nRedisPubSub.on('GetGroupChatMsgsRespMsg', processForHTML5ServerOnly(handleGroupChatsMsgs));\nRedisPubSub.on('GroupChatMessageBroadcastEvtMsg', handleGroupChatMsgBroadcast);\nRedisPubSub.on('ClearPublicChatHistoryEvtMsg', handleClearPublicGroupChat);\nRedisPubSub.on('SyncGetGroupChatMsgsRespMsg', handleGroupChatsMsgs);\nRedisPubSub.on('UserTypingEvtMsg', handleUserTyping);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport sendGroupChatMsg from './methods/sendGroupChatMsg';\nimport clearPublicChatHistory from './methods/clearPublicChatHistory';\nimport startUserTyping from './methods/startUserTyping';\nimport stopUserTyping from './methods/stopUserTyping';\n\nMeteor.methods({\n  sendGroupChatMsg,\n  clearPublicChatHistory,\n  startUserTyping,\n  stopUserTyping,\n});\n","import { GroupChatMsg, UsersTyping } from '/imports/api/group-chat-msg';\nimport { Meteor } from 'meteor/meteor';\n\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction groupChatMsg(chatsIds) {\n  if (!this.userId) {\n    return GroupChatMsg.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const CHAT_CONFIG = Meteor.settings.public.chat;\n  const PUBLIC_GROUP_CHAT_ID = CHAT_CONFIG.public_group_id;\n\n  Logger.debug(`Publishing group-chat-msg for ${meetingId} ${requesterUserId}`);\n\n  return GroupChatMsg.find({\n    $or: [\n      { meetingId, chatId: { $eq: PUBLIC_GROUP_CHAT_ID } },\n      { chatId: { $in: chatsIds } },\n    ],\n  });\n}\n\nfunction publish(...args) {\n  const boundGroupChat = groupChatMsg.bind(this);\n  return boundGroupChat(...args);\n}\n\nMeteor.publish('group-chat-msg', publish);\n\nfunction usersTyping() {\n  if (!this.userId) {\n    return UsersTyping.find({ meetingId: '' });\n  }\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing users-typing for ${meetingId} ${requesterUserId}`);\n\n  return UsersTyping.find({ meetingId });\n}\n\nfunction pubishUsersTyping(...args) {\n  const boundUsersTyping = usersTyping.bind(this);\n  return boundUsersTyping(...args);\n}\n\nMeteor.publish('users-typing', pubishUsersTyping);\n","import { Meteor } from 'meteor/meteor';\n\nconst GroupChatMsg = new Mongo.Collection('group-chat-msg');\nconst UsersTyping = new Mongo.Collection('users-typing');\n\nif (Meteor.isServer) {\n  GroupChatMsg._ensureIndex({ meetingId: 1, chatId: 1 });\n  UsersTyping._ensureIndex({ meetingId: 1, isTypingTo: 1 });\n}\n\nexport { GroupChatMsg, UsersTyping };\n","import { check } from 'meteor/check';\nimport setGuestStatus from '../modifiers/setGuestStatus';\n\nexport default function handleGuestApproved({ body }, meetingId) {\n  const { approvedBy, guests } = body;\n  check(meetingId, String);\n  check(approvedBy, String);\n  check(guests, Array);\n\n  return guests.forEach(guest => setGuestStatus(meetingId, guest.guest, guest.status, approvedBy));\n}\n","import { check } from 'meteor/check';\nimport removeGuest from '../modifiers/removeGuest';\n\nexport default function handleGuestWaitingLeft({ body }, meetingId) {\n  const { userId } = body;\n  check(meetingId, String);\n  check(userId, String);\n\n  return removeGuest(meetingId, userId);\n}\n","import stringHash from 'string-hash';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport GuestUsers from '/imports/api/guest-users/';\n\nconst COLOR_LIST = [\n  '#7b1fa2', '#6a1b9a', '#4a148c', '#5e35b1', '#512da8', '#4527a0',\n  '#311b92', '#3949ab', '#303f9f', '#283593', '#1a237e', '#1976d2', '#1565c0',\n  '#0d47a1', '#0277bd', '#01579b',\n];\n\nexport default function handleGuestsWaitingForApproval({ body }, meetingId) {\n  const { guests } = body;\n  check(guests, Array);\n  check(meetingId, String);\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding guest user to collection: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n    if (insertedId) {\n      return Logger.info(`Added guest user meeting=${meetingId}`);\n    }\n\n    return Logger.info(`Upserted guest user meeting=${meetingId}`);\n  };\n\n  return guests.map(guest => GuestUsers.upsert({\n    meetingId,\n    intId: guest.intId,\n  }, {\n    approved: false,\n    denied: false,\n    ...guest,\n    meetingId,\n    loginTime: new Date().getTime(),\n    color: COLOR_LIST[stringHash(guest.intId) % COLOR_LIST.length],\n  }, cb));\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'GuestsWaitingApprovedMsg';\n\nexport default function allowPendingUsers(guests, status) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(guests, Array);\n  const mappedGuests = guests.map(guest => ({ status, guest: guest.intId }));\n\n  const payload = {\n    approvedBy: requesterUserId,\n    guests: mappedGuests,\n  };\n\n  Logger.info(`User=${requesterUserId} ${status} guests ${JSON.stringify(mappedGuests)}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst REDIS_CONFIG = Meteor.settings.private.redis;\nconst CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\nconst EVENT_NAME = 'SetGuestPolicyCmdMsg';\n\nexport default function changeGuestPolicy(policyRule) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(policyRule, String);\n\n  const payload = {\n    setBy: requesterUserId,\n    policy: policyRule,\n  };\n\n  Logger.info(`User=${requesterUserId} change guest policy to ${policyRule}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removeGuest(meetingId, intId) {\n  check(meetingId, String);\n  check(intId, String);\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing guest user from collection: ${err}`);\n    }\n\n    return Logger.info(`Removed guest user id=${intId} meetingId=${meetingId}`);\n  };\n\n  return GuestUsers.remove(selector, cb);\n}\n","import { check } from 'meteor/check';\nimport GuestUsers from '/imports/api/guest-users';\nimport Logger from '/imports/startup/server/logger';\n\nconst GUEST_STATUS_ALLOW = 'ALLOW';\nconst GUEST_STATUS_DENY = 'DENY';\nexport default function setGuestStatus(meetingId, intId, status, approvedBy = null) {\n  check(meetingId, String);\n  check(intId, String);\n  check(status, String);\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      approved: status === GUEST_STATUS_ALLOW,\n      denied: status === GUEST_STATUS_DENY,\n      approvedBy,\n    },\n  };\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Updating status=${status} user=${intId}: ${err}`);\n    }\n\n    return Logger.info(`Updated status=${status} user=${intId} meeting=${meetingId}`);\n  };\n\n  return GuestUsers.update(selector, modifier, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleGuestApproved from './handlers/guestApproved';\nimport handleGuestsWaitingForApproval from './handlers/guestsWaitingForApproval';\nimport handleGuestWaitingLeft from './handlers/guestWaitingLeft';\n\nRedisPubSub.on('GuestWaitingLeftEvtMsg', handleGuestWaitingLeft);\nRedisPubSub.on('GuestsWaitingForApprovalEvtMsg', processForHTML5ServerOnly(handleGuestsWaitingForApproval));\nRedisPubSub.on('GuestsWaitingApprovedEvtMsg', processForHTML5ServerOnly(handleGuestApproved));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport allowPendingUsers from '/imports/api/guest-users/server/methods/allowPendingUsers';\nimport changeGuestPolicy from '/imports/api/guest-users/server/methods/changeGuestPolicy';\n\nMeteor.methods({\n  allowPendingUsers,\n  changeGuestPolicy,\n});\n","import GuestUsers from '/imports/api/guest-users/';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction guestUsers() {\n  if (!this.userId) {\n    return GuestUsers.find({ meetingId: '' });\n  }\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.info(`Publishing Slides for ${meetingId} ${requesterUserId}`);\n\n  return GuestUsers.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundSlides = guestUsers.bind(this);\n  return boundSlides(...args);\n}\n\nMeteor.publish('guestUser', publish);\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\n\nconst GuestUsers = new Mongo.Collection('guestUsers');\n\nexport default GuestUsers;\n","import _ from 'lodash';\nimport { check } from 'meteor/check';\nimport LocalSettings from '/imports/api/local-settings';\nimport setChangedLocalSettings from '../modifiers/setChangedLocalSettings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userChangedLocalSettings(settings) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  if (!meetingId || !requesterUserId) return;\n\n  check(settings, Object);\n\n  const userLocalSettings = LocalSettings\n    .findOne({ meetingId, userId: requesterUserId },\n      {\n        fields: { settings: 1 },\n      });\n\n  if (!userLocalSettings || !_.isEqual(userLocalSettings.settings, settings)) {\n    setChangedLocalSettings(meetingId, requesterUserId, settings);\n  }\n}\n","import LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearLocalSettings(meetingId) {\n  return LocalSettings.remove({ meetingId }, () => {\n    Logger.info(`Cleared Local Settings (${meetingId})`);\n  });\n}\n","import { check } from 'meteor/check';\nimport LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setChangedLocalSettings(meetingId, userId, settings) {\n  check(meetingId, String);\n  check(userId, String);\n  check(settings, Object);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      settings,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`${err}`);\n    }\n\n    if (numChanged) {\n      Logger.info(`Updated settings for user ${userId} on meeting ${meetingId}`);\n    }\n  };\n\n  return LocalSettings.upsert(selector, modifier, cb);\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport userChangedLocalSettings from './methods/userChangedLocalSettings';\n\nMeteor.methods({\n  userChangedLocalSettings,\n});\n","import { Meteor } from 'meteor/meteor';\nimport LocalSettings from '/imports/api/local-settings';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction localSettings() {\n  if (!this.userId) {\n    return LocalSettings.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing local settings for user=${requesterUserId}`);\n\n  return LocalSettings.find({ meetingId, userId: requesterUserId });\n}\n\nfunction publish(...args) {\n  const boundLocalSettings = localSettings.bind(this);\n  return boundLocalSettings(...args);\n}\n\nMeteor.publish('local-settings', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst LocalSettings = new Mongo.Collection('local-settings');\n\nif (Meteor.isServer) {\n  LocalSettings._ensureIndex({\n    meetingId: 1, userId: 1,\n  });\n}\n\nexport default LocalSettings;\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nconst logClient = function (type, logDescription, logCode = 'was_not_provided', extraInfo = {}, userInfo = {}) {\n  const connectionId = this.connection.id;\n  const User = Users.findOne({ connectionId });\n  const logContents = {\n    logCode,\n    logDescription,\n    connectionId,\n    extraInfo,\n    userInfo,\n  };\n\n  if (User) { // TODO--\n    if ((userInfo.credentials && User.meetingId === userInfo.credentials.meetingId)\n      || ((userInfo.meetingId && User.meetingId === userInfo.meetingId))) {\n      logContents.extraInfo.validUser = 'valid';\n    } else {\n      logContents.extraInfo.validUser = 'invalid';\n    }\n  } else {\n    logContents.extraInfo.validUser = 'notFound';\n  }\n\n  // If I don't pass message, logs will start with `undefined`\n  Logger.log({ message: JSON.stringify(logContents), level: type });\n  // Logger.log({ message: 'client->server', level: type, logContents });\n};\n\nexport default logClient;\n","import './methods';\n","import { Meteor } from 'meteor/meteor';\nimport logClient from './methods/logClient';\n\nMeteor.methods({ logClient });\n","import handleMeetingCreation from './meetingCreation';\n\nexport default function handleGetAllMeetings({ body }) {\n  return handleMeetingCreation({ body });\n}\n","import { check } from 'meteor/check';\nimport addMeeting from '../modifiers/addMeeting';\n\nexport default function handleMeetingCreation({ body }) {\n  const meeting = body.props;\n  const durationInSecods = (meeting.durationProps.duration * 60);\n  meeting.durationProps.timeRemaining = durationInSecods;\n  check(meeting, Object);\n\n  return addMeeting(meeting);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\n\nimport destroyExternalVideo from '/imports/api/external-videos/server/methods/destroyExternalVideo';\nimport { removeAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { removeCursorStreamer } from '/imports/api/cursor/server/streamer';\n\nexport default function handleMeetingDestruction({ body }) {\n  check(body, Object);\n  const { meetingId } = body;\n  check(meetingId, String);\n\n  destroyExternalVideo(meetingId);\n  removeAnnotationsStreamer(meetingId);\n  removeCursorStreamer(meetingId);\n\n  return RedisPubSub.destroyMeetingQueue(meetingId);\n}\n","import { check } from 'meteor/check';\nimport meetingHasEnded from '../modifiers/meetingHasEnded';\nimport Meetings from '/imports/api/meetings';\nimport Breakouts from '/imports/api/breakouts';\nimport Users from '/imports/api/users/';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleMeetingEnd({ body }) {\n  check(body, Object);\n  const { meetingId } = body;\n  check(meetingId, String);\n\n  const cb = (err, num, meetingType) => {\n    if (err) {\n      Logger.error(`${meetingType} ending error: ${err}`);\n      return;\n    }\n    if (num) {\n      Users.update({ meetingId },\n        { $set: { connectionStatus: 'offline' } },\n        (error, numAffected) => {\n          if (error) {\n            Logger.error(`Error marking ending ${meetingType} users as offline: ${meetingId} ${err}`);\n            return;\n          }\n\n          if (numAffected) {\n            Logger.info(`Success marking ending ${meetingType} users as offline: ${meetingId}`);\n          }\n        });\n      Meteor.setTimeout(() => { meetingHasEnded(meetingId); }, 10000);\n    }\n  };\n\n  Meetings.update({ meetingId },\n    { $set: { meetingEnded: true } },\n    (err, num) => { cb(err, num, 'Meeting'); });\n\n  Breakouts.update({ parentMeetingId: meetingId },\n    { $set: { meetingEnded: true } },\n    (err, num) => { cb(err, num, 'Breakout'); });\n}\n","import changeLockSettings from '../modifiers/changeLockSettings';\n\nexport default function handleLockSettingsInMeeting({ body }, meetingId) {\n  return changeLockSettings(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleRecordingStatusChange({ body }, meetingId) {\n  const { recording } = body;\n  check(recording, Boolean);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: { recording },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Changing record status: ${err}`);\n      return;\n    }\n\n    if (numChanged) {\n      Logger.info(`Changed meeting record status id=${meetingId} recording=${recording}`);\n    }\n  };\n\n  return RecordMeetings.upsert(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleRecordingStatusChange({ body }, meetingId) {\n  const { time } = body;\n\n  check(meetingId, String);\n\n  check(body, {\n    time: Number,\n  });\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: { time },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      Logger.error(`Changing recording time: ${err}`);\n    }\n  };\n\n  return RecordMeetings.upsert(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport { MeetingTimeRemaining } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function handleTimeRemainingUpdate({ body }, meetingId) {\n  check(meetingId, String);\n\n  check(body, {\n    timeLeftInSec: Number,\n  });\n  const { timeLeftInSec } = body;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      timeRemaining: timeLeftInSec,\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      Logger.error(`Changing recording time: ${err}`);\n    }\n  };\n\n  return MeetingTimeRemaining.upsert(selector, modifier, cb);\n}\n","import changeUserLock from '../modifiers/changeUserLock';\n\nexport default function handleLockSettingsInMeeting({ body }, meetingId) {\n  return changeUserLock(meetingId, body);\n}\n","import changeWebcamOnlyModerator from '../modifiers/webcamOnlyModerator';\n\nexport default function handleChangeWebcamOnlyModerator({ body }, meetingId) {\n  return changeWebcamOnlyModerator(meetingId, body);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function endMeeting() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'LogoutAndEndMeetingCmdMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const payload = {\n    userId: requesterUserId,\n  };\n  Logger.verbose(`Meeting '${meetingId}' is destroyed by '${requesterUserId}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function toggleLockSettings(lockSettingsProps) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeLockSettingsInMeetingCmdMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(lockSettingsProps, {\n    disableCam: Boolean,\n    disableMic: Boolean,\n    disablePrivateChat: Boolean,\n    disablePublicChat: Boolean,\n    disableNote: Boolean,\n    hideUserList: Boolean,\n    lockedLayout: Boolean,\n    lockOnJoin: Boolean,\n    lockOnJoinConfigurable: Boolean,\n    setBy: Match.Maybe(String),\n  });\n\n  const {\n    disableCam,\n    disableMic,\n    disablePrivateChat: disablePrivChat,\n    disablePublicChat: disablePubChat,\n    disableNote,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n  } = lockSettingsProps;\n\n  const payload = {\n    disableCam,\n    disableMic,\n    disablePrivChat,\n    disablePubChat,\n    disableNote,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n    setBy: requesterUserId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import Logger from '/imports/startup/server/logger';\nimport { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { RecordMeetings } from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function toggleRecording() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  const EVENT_NAME = 'SetRecordingStatusCmdMsg';\n\n  let meetingRecorded;\n  let allowedToRecord;\n\n  const recordObject = RecordMeetings.findOne({ meetingId });\n\n  if (recordObject != null) {\n    const {\n      allowStartStopRecording,\n      recording,\n      record,\n    } = recordObject;\n\n    meetingRecorded = recording;\n    allowedToRecord = record && allowStartStopRecording; // TODO-- remove some day\n  }\n\n  const payload = {\n    recording: !meetingRecorded,\n    setBy: requesterUserId,\n  };\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n  };\n  const user = Users.findOne(selector);\n\n  if (allowedToRecord && !!user && user.role === ROLE_MODERATOR) {\n    Logger.info(`Setting the record parameter to ${!meetingRecorded} for ${meetingId} by ${requesterUserId}`);\n    return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n  }\n  return null;\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '../../../common/server/helpers';\n\nexport default function toggleWebcamsOnlyForModerator(webcamsOnlyForModerator) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UpdateWebcamsOnlyForModeratorCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(webcamsOnlyForModerator, Boolean);\n\n  const payload = {\n    webcamsOnlyForModerator,\n    setBy: requesterUserId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\n\nexport default function transferUser(fromMeetingId, toMeetingId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'TransferUserToMeetingRequestMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const payload = {\n    fromMeetingId,\n    toMeetingId,\n    userId: requesterUserId,\n  };\n\n  Logger.verbose(`userId ${requesterUserId} was transferred from \n  meeting ${fromMeetingId}' to meeting '${toMeetingId}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import flat from 'flat';\nimport {\n  check,\n  Match,\n} from 'meteor/check';\nimport SanitizeHTML from 'sanitize-html';\nimport Meetings, { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport createNote from '/imports/api/note/server/methods/createNote';\nimport createCaptions from '/imports/api/captions/server/methods/createCaptions';\nimport { addAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { addCursorStreamer } from '/imports/api/cursor/server/streamer';\nimport BannedUsers from '/imports/api/users/server/store/bannedUsers';\n\nexport default function addMeeting(meeting) {\n  const meetingId = meeting.meetingProp.intId;\n\n  check(meetingId, String);\n  check(meeting, {\n    breakoutProps: {\n      sequence: Number,\n      freeJoin: Boolean,\n      breakoutRooms: Array,\n      parentId: String,\n      enabled: Boolean,\n      record: Boolean,\n      privateChatEnabled: Boolean,\n    },\n    meetingProp: {\n      intId: String,\n      extId: String,\n      isBreakout: Boolean,\n      name: String,\n    },\n    usersProp: {\n      webcamsOnlyForModerator: Boolean,\n      guestPolicy: String,\n      maxUsers: Number,\n      allowModsToUnmuteUsers: Boolean,\n    },\n    durationProps: {\n      createdTime: Number,\n      duration: Number,\n      createdDate: String,\n      maxInactivityTimeoutMinutes: Number,\n      warnMinutesBeforeMax: Number,\n      meetingExpireIfNoUserJoinedInMinutes: Number,\n      meetingExpireWhenLastUserLeftInMinutes: Number,\n      userInactivityInspectTimerInMinutes: Number,\n      userInactivityThresholdInMinutes: Number,\n      userActivitySignResponseDelayInMinutes: Number,\n      timeRemaining: Number,\n    },\n    welcomeProp: {\n      welcomeMsg: String,\n      modOnlyMessage: String,\n      welcomeMsgTemplate: String,\n    },\n    recordProp: Match.ObjectIncluding({\n      allowStartStopRecording: Boolean,\n      autoStartRecording: Boolean,\n      record: Boolean,\n    }),\n    password: {\n      viewerPass: String,\n      moderatorPass: String,\n    },\n    voiceProp: {\n      voiceConf: String,\n      dialNumber: String,\n      telVoice: String,\n      muteOnStart: Boolean,\n    },\n    screenshareProps: {\n      red5ScreenshareIp: String,\n      red5ScreenshareApp: String,\n      screenshareConf: String,\n    },\n    metadataProp: Object,\n    lockSettingsProps: {\n      disableCam: Boolean,\n      disableMic: Boolean,\n      disablePrivateChat: Boolean,\n      disablePublicChat: Boolean,\n      disableNote: Boolean,\n      hideUserList: Boolean,\n      lockOnJoin: Boolean,\n      lockOnJoinConfigurable: Boolean,\n      lockedLayout: Boolean,\n    },\n  });\n\n  const {\n    recordProp,\n    ...restProps\n  } = meeting;\n\n  const newMeeting = restProps;\n\n  const selector = {\n    meetingId,\n  };\n\n  newMeeting.lockSettingsProps = Object.assign(meeting.lockSettingsProps, { setBy: 'temp' });\n\n  const meetingEnded = false;\n\n  let { welcomeMsg } = newMeeting.welcomeProp;\n\n  const sanitizeTextInChat = original => SanitizeHTML(original, {\n    allowedTags: ['a', 'b', 'br', 'i', 'img', 'li', 'small', 'span', 'strong', 'u', 'ul'],\n    allowedAttributes: {\n      a: ['href', 'name', 'target'],\n      img: ['src', 'width', 'height'],\n    },\n    allowedSchemes: ['https'],\n  });\n\n  const sanitizedWelcomeText = sanitizeTextInChat(welcomeMsg);\n  welcomeMsg = sanitizedWelcomeText.replace(\n    'href=\"event:',\n    'href=\"',\n  );\n\n  const insertBlankTarget = (s, i) => `${s.substr(0, i)} target=\"_blank\"${s.substr(i)}`;\n  const linkWithoutTarget = new RegExp('<a href=\"(.*?)\">', 'g');\n  linkWithoutTarget.test(welcomeMsg);\n\n  if (linkWithoutTarget.lastIndex > 0) {\n    welcomeMsg = insertBlankTarget(\n      welcomeMsg,\n      linkWithoutTarget.lastIndex - 1,\n    );\n  }\n\n  newMeeting.welcomeProp.welcomeMsg = welcomeMsg;\n\n  // note: as of July 2020 `modOnlyMessage` is not published to the client side.\n  // We are sanitizing this data simply to prevent future potential usage\n  // At the moment `modOnlyMessage` is obtained from client side as a response to Enter API\n  newMeeting.welcomeProp.modOnlyMessage = sanitizeTextInChat(newMeeting.welcomeProp.modOnlyMessage);\n\n  const modifier = {\n    $set: Object.assign({\n      meetingId,\n      meetingEnded,\n      publishedPoll: false,\n    }, flat(newMeeting, {\n      safe: true,\n    })),\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Adding meeting to collection: ${err}`);\n      return;\n    }\n\n    const {\n      insertedId,\n    } = numChanged;\n\n    if (insertedId) {\n      Logger.info(`Added meeting id=${meetingId}`);\n      // TODO: Here we call Etherpad API to create this meeting notes. Is there a\n      // better place we can run this post-creation routine?\n      createNote(meetingId);\n      createCaptions(meetingId);\n      BannedUsers.init(meetingId);\n    }\n\n    if (numChanged) {\n      Logger.info(`Upserted meeting id=${meetingId}`);\n    }\n  };\n\n  const cbRecord = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Adding record prop to collection: ${err}`);\n      return;\n    }\n\n    const {\n      insertedId,\n    } = numChanged;\n\n    if (insertedId) {\n      Logger.info(`Added record prop id=${meetingId}`);\n    }\n\n    if (numChanged) {\n      Logger.info(`Upserted record prop id=${meetingId}`);\n    }\n  };\n\n  RecordMeetings.upsert(selector, {\n    meetingId,\n    ...recordProp,\n  }, cbRecord);\n\n  addAnnotationsStreamer(meetingId);\n  addCursorStreamer(meetingId);\n\n  return Meetings.upsert(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\n\nexport default function changeLockSettings(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    disableCam: Boolean,\n    disableMic: Boolean,\n    disablePrivChat: Boolean,\n    disablePubChat: Boolean,\n    disableNote: Boolean,\n    hideUserList: Boolean,\n    lockedLayout: Boolean,\n    lockOnJoin: Boolean,\n    lockOnJoinConfigurable: Boolean,\n    setBy: Match.Maybe(String),\n  });\n\n  const {\n    disableCam,\n    disableMic,\n    disablePrivChat,\n    disablePubChat,\n    disableNote,\n    hideUserList,\n    lockedLayout,\n    lockOnJoin,\n    lockOnJoinConfigurable,\n    setBy,\n  } = payload;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      lockSettingsProps: {\n        disableCam,\n        disableMic,\n        disablePrivateChat: disablePrivChat,\n        disablePublicChat: disablePubChat,\n        disableNote,\n        hideUserList,\n        lockedLayout,\n        lockOnJoin,\n        lockOnJoinConfigurable,\n        setBy,\n      },\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Changing meeting={${meetingId}} lock settings: ${err}`);\n    }\n\n    if (!numChanged) {\n      return Logger.info(`meeting={${meetingId}} lock settings were not updated`);\n    }\n\n    return Logger.info(`Changed meeting={${meetingId}} updated lock settings`);\n  };\n\n  return Meetings.upsert(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { check } from 'meteor/check';\n\nexport default function changeUserLock(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    userId: String,\n    locked: Boolean,\n    lockedBy: String,\n  });\n\n  const { userId, locked, lockedBy } = payload;\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      locked,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Changing user lock setting: ${err}`);\n    }\n\n    if (!numChanged) {\n      return Logger.info(`User's userId=${userId} lock status wasn't updated`);\n    }\n\n    return Logger.info(`User's userId=${userId} lock status was changed to: ${locked} by user userId=${lockedBy}`);\n  };\n\n  return Users.update(selector, modifier, cb);\n}\n","import { RecordMeetings } from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function meetingHasEnded(meetingId) {\n  return RecordMeetings.remove({ meetingId }, () => Logger.info(`Cleared record prop from meeting with id ${meetingId}`));\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nimport { removeAnnotationsStreamer } from '/imports/api/annotations/server/streamer';\nimport { removeCursorStreamer } from '/imports/api/cursor/server/streamer';\n\nimport clearUsers from '/imports/api/users/server/modifiers/clearUsers';\nimport clearUsersSettings from '/imports/api/users-settings/server/modifiers/clearUsersSettings';\nimport clearGroupChat from '/imports/api/group-chat/server/modifiers/clearGroupChat';\nimport clearBreakouts from '/imports/api/breakouts/server/modifiers/clearBreakouts';\nimport clearAnnotations from '/imports/api/annotations/server/modifiers/clearAnnotations';\nimport clearSlides from '/imports/api/slides/server/modifiers/clearSlides';\nimport clearPolls from '/imports/api/polls/server/modifiers/clearPolls';\nimport clearCaptions from '/imports/api/captions/server/modifiers/clearCaptions';\nimport clearPresentationPods from '/imports/api/presentation-pods/server/modifiers/clearPresentationPods';\nimport clearVoiceUsers from '/imports/api/voice-users/server/modifiers/clearVoiceUsers';\nimport clearUserInfo from '/imports/api/users-infos/server/modifiers/clearUserInfo';\nimport clearConnectionStatus from '/imports/api/connection-status/server/modifiers/clearConnectionStatus';\nimport clearNote from '/imports/api/note/server/modifiers/clearNote';\nimport clearNetworkInformation from '/imports/api/network-information/server/modifiers/clearNetworkInformation';\nimport clearLocalSettings from '/imports/api/local-settings/server/modifiers/clearLocalSettings';\nimport clearRecordMeeting from './clearRecordMeeting';\nimport clearVoiceCallStates from '/imports/api/voice-call-states/server/modifiers/clearVoiceCallStates';\nimport clearVideoStreams from '/imports/api/video-streams/server/modifiers/clearVideoStreams';\n\nexport default function meetingHasEnded(meetingId) {\n  removeAnnotationsStreamer(meetingId);\n  removeCursorStreamer(meetingId);\n\n  return Meetings.remove({ meetingId }, () => {\n    clearCaptions(meetingId);\n    clearGroupChat(meetingId);\n    clearPresentationPods(meetingId);\n    clearBreakouts(meetingId);\n    clearPolls(meetingId);\n    clearAnnotations(meetingId);\n    clearSlides(meetingId);\n    clearUsers(meetingId);\n    clearUsersSettings(meetingId);\n    clearVoiceUsers(meetingId);\n    clearUserInfo(meetingId);\n    clearConnectionStatus(meetingId);\n    clearNote(meetingId);\n    clearNetworkInformation(meetingId);\n    clearLocalSettings(meetingId);\n    clearRecordMeeting(meetingId);\n    clearVoiceCallStates(meetingId);\n    clearVideoStreams(meetingId);\n\n    return Logger.info(`Cleared Meetings with id ${meetingId}`);\n  });\n}\n","import Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function setPublishedPoll(meetingId, isPublished) {\n  check(meetingId, String);\n  check(isPublished, Boolean);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      publishedPoll: isPublished,\n    },\n  };\n\n  const cb = (err) => {\n    if (err != null) {\n      return Logger.error(`Setting publishedPoll=${isPublished} for meetingId=${meetingId}`);\n    }\n\n    return Logger.info(`Set publishedPoll=${isPublished} in meeitingId=${meetingId}`);\n  };\n\n  return Meetings.upsert(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\n\nexport default function changeWebcamOnlyModerator(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    webcamsOnlyForModerator: Boolean,\n    setBy: String,\n  });\n  const { webcamsOnlyForModerator } = payload;\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'usersProp.webcamsOnlyForModerator': webcamsOnlyForModerator,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Changwing meeting={${meetingId}} webcam Only for Moderator: ${err}`);\n    }\n\n    if (!numChanged) {\n      return Logger.info(`meeting={${meetingId}} webcam Only for Moderator were not updated`);\n    }\n\n    return Logger.info(`Changed meeting={${meetingId}} updated webcam Only for Moderator`);\n  };\n\n  return Meetings.upsert(selector, modifier, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleMeetingCreation from './handlers/meetingCreation';\nimport handleGetAllMeetings from './handlers/getAllMeetings';\nimport handleMeetingEnd from './handlers/meetingEnd';\nimport handleMeetingDestruction from './handlers/meetingDestruction';\nimport handleMeetingLocksChange from './handlers/meetingLockChange';\nimport handleUserLockChange from './handlers/userLockChange';\nimport handleRecordingStatusChange from './handlers/recordingStatusChange';\nimport handleRecordingTimerChange from './handlers/recordingTimerChange';\nimport handleTimeRemainingUpdate from './handlers/timeRemainingUpdate';\nimport handleChangeWebcamOnlyModerator from './handlers/webcamOnlyModerator';\n\nRedisPubSub.on('MeetingCreatedEvtMsg', handleMeetingCreation);\nRedisPubSub.on('SyncGetMeetingInfoRespMsg', handleGetAllMeetings);\nRedisPubSub.on('MeetingEndingEvtMsg', handleMeetingEnd);\nRedisPubSub.on('MeetingDestroyedEvtMsg', handleMeetingDestruction);\nRedisPubSub.on('LockSettingsInMeetingChangedEvtMsg', handleMeetingLocksChange);\nRedisPubSub.on('UserLockedInMeetingEvtMsg', handleUserLockChange);\nRedisPubSub.on('RecordingStatusChangedEvtMsg', handleRecordingStatusChange);\nRedisPubSub.on('UpdateRecordingTimerEvtMsg', handleRecordingTimerChange);\nRedisPubSub.on('WebcamsOnlyForModeratorChangedEvtMsg', handleChangeWebcamOnlyModerator);\nRedisPubSub.on('GetLockSettingsRespMsg', handleMeetingLocksChange);\nRedisPubSub.on('MeetingTimeRemainingUpdateEvtMsg', handleTimeRemainingUpdate);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport endMeeting from './methods/endMeeting';\nimport toggleRecording from './methods/toggleRecording';\nimport transferUser from './methods/transferUser';\nimport toggleLockSettings from './methods/toggleLockSettings';\nimport toggleWebcamsOnlyForModerator from './methods/toggleWebcamsOnlyForModerator';\n\nMeteor.methods({\n  endMeeting,\n  toggleRecording,\n  toggleLockSettings,\n  transferUser,\n  toggleWebcamsOnlyForModerator,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Meetings, { RecordMeetings, MeetingTimeRemaining } from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction meetings(role) {\n  if (!this.userId) {\n    return Meetings.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing meeting =${meetingId} ${requesterUserId}`);\n\n  const selector = {\n    $or: [\n      { meetingId },\n    ],\n  };\n\n  const User = Users.findOne({ userId: requesterUserId, meetingId }, { fields: { role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    selector.$or.push({\n      'meetingProp.isBreakout': true,\n      'breakoutProps.parentId': meetingId,\n    });\n  }\n\n  const options = {\n    fields: {\n      password: false,\n      'welcomeProp.modOnlyMessage': false,\n    },\n  };\n\n  return Meetings.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundMeetings = meetings.bind(this);\n  return boundMeetings(...args);\n}\n\nMeteor.publish('meetings', publish);\n\nfunction recordMeetings() {\n  if (!this.userId) {\n    return RecordMeetings.find({ meetingId: '' });\n  }\n  const { meetingId } = extractCredentials(this.userId);\n\n  return RecordMeetings.find({ meetingId });\n}\nfunction recordPublish(...args) {\n  const boundRecordMeetings = recordMeetings.bind(this);\n  return boundRecordMeetings(...args);\n}\n\nMeteor.publish('record-meetings', recordPublish);\n\nfunction meetingTimeRemaining() {\n  if (!this.userId) {\n    return MeetingTimeRemaining.find({ meetingId: '' });\n  }\n  const { meetingId } = extractCredentials(this.userId);\n\n  return MeetingTimeRemaining.find({ meetingId });\n}\nfunction timeRemainingPublish(...args) {\n  const boundtimeRemaining = meetingTimeRemaining.bind(this);\n  return boundtimeRemaining(...args);\n}\n\nMeteor.publish('meeting-time-remaining', timeRemainingPublish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Meetings = new Mongo.Collection('meetings');\nconst RecordMeetings = new Mongo.Collection('record-meetings');\nconst MeetingTimeRemaining = new Mongo.Collection('meeting-time-remaining');\n\nif (Meteor.isServer) {\n  // types of queries for the meetings:\n  // 1. meetingId\n\n  Meetings._ensureIndex({ meetingId: 1 });\n  RecordMeetings._ensureIndex({ meetingId: 1 });\n  MeetingTimeRemaining._ensureIndex({ meetingId: 1 });\n}\n\nexport {\n  RecordMeetings,\n  MeetingTimeRemaining,\n};\nexport default Meetings;\n","import { check } from 'meteor/check';\nimport NetworkInformation from '/imports/api/network-information';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userInstabilityDetected(sender) {\n  const { meetingId, requesterUserId: receiver } = extractCredentials(this.userId);\n  check(sender, String);\n\n  const payload = {\n    time: new Date().getTime(),\n    meetingId,\n    receiver,\n    sender,\n  };\n\n  Logger.debug(`Receiver ${receiver} reported a network instability in meeting ${meetingId}`);\n\n  return NetworkInformation.insert(payload);\n}\n","import NetworkInformation from '/imports/api/network-information';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearNetworkInformation(meetingId) {\n  if (meetingId) {\n    return NetworkInformation.remove({ meetingId }, () => {\n      Logger.info(`Cleared Network Information (${meetingId})`);\n    });\n  }\n\n  return NetworkInformation.remove({}, () => {\n    Logger.info('Cleared Network Information (all)');\n  });\n}\n","import './methods';\nimport './publisher';\n","import { Meteor } from 'meteor/meteor';\nimport userInstabilityDetected from './methods/userInstabilityDetected';\n\nMeteor.methods({\n  userInstabilityDetected,\n});\n","import { Meteor } from 'meteor/meteor';\nimport NetworkInformation from '/imports/api/network-information';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction networkInformation() {\n  if (!this.userId) {\n    return NetworkInformation.find({ meetingId: '' });\n  }\n  const { meetingId } = extractCredentials(this.userId);\n\n  return NetworkInformation.find({\n    meetingId,\n  });\n}\n\nfunction publish(...args) {\n  const boundNetworkInformation = networkInformation.bind(this);\n\n  return boundNetworkInformation(...args);\n}\n\nMeteor.publish('network-information', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst NetworkInformation = new Mongo.Collection('network-information');\n\nif (Meteor.isServer) {\n  NetworkInformation._ensureIndex({ meetingId: 1 });\n}\n\nexport default NetworkInformation;\n","import { check } from 'meteor/check';\nimport updateNote from '/imports/api/note/server/modifiers/updateNote';\n\nexport default function handlePadUpdate({ body }) {\n  const { pad, revs } = body;\n  const { id } = pad;\n\n  check(id, String);\n  check(revs, Number);\n\n  updateNote(id, revs);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport {\n  generateNoteId,\n  createPadURL,\n  getReadOnlyIdURL,\n  isEnabled,\n  getDataFromResponse,\n} from '/imports/api/note/server/helpers';\nimport addNote from '/imports/api/note/server/modifiers/addNote';\nimport axios from 'axios';\n\nexport default function createNote(meetingId) {\n  // Avoid note creation if this feature is disabled\n  if (!isEnabled()) {\n    Logger.warn(`Notes are disabled for ${meetingId}`);\n    return;\n  }\n\n  check(meetingId, String);\n\n  const noteId = generateNoteId(meetingId);\n\n  const createURL = createPadURL(noteId);\n  axios({\n    method: 'get',\n    url: createURL,\n    responseType: 'json',\n  }).then((responseOuter) => {\n    const { status } = responseOuter;\n    if (status !== 200) {\n      Logger.error(`Could not get note info for ${meetingId} ${status}`);\n    }\n    const readOnlyURL = getReadOnlyIdURL(noteId);\n    axios({\n      method: 'get',\n      url: readOnlyURL,\n      responseType: 'json',\n    }).then((response) => {\n      const readOnlyNoteId = getDataFromResponse(response.data, 'readOnlyID');\n      if (readOnlyNoteId) {\n        addNote(meetingId, noteId, readOnlyNoteId);\n      } else {\n        Logger.error(`Could not get note readOnlyID for ${meetingId}`);\n      }\n    }).catch(error => Logger.error(`Could not get note readOnlyID for ${meetingId}: ${error}`));\n  }).catch(error => Logger.error(`Could not create note for ${meetingId}: ${error}`));\n}\n","import { check } from 'meteor/check';\nimport Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addNote(meetingId, noteId, readOnlyNoteId) {\n  check(meetingId, String);\n  check(noteId, String);\n  check(readOnlyNoteId, String);\n\n  const selector = {\n    meetingId,\n    noteId,\n  };\n\n  const modifier = {\n    meetingId,\n    noteId,\n    readOnlyNoteId,\n    revs: 0,\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding note to the collection: ${err}`);\n    }\n\n    if (numChanged) {\n      return Logger.info(`Added note id=${noteId} readOnlyId=${readOnlyNoteId} meeting=${meetingId}`);\n    }\n\n    return Logger.info(`Upserted note id=${noteId} readOnlyId=${readOnlyNoteId} meeting=${meetingId}`);\n  };\n\n  return Note.upsert(selector, modifier, cb);\n}\n","import Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearNote(meetingId) {\n  if (meetingId) {\n    return Note.remove({ meetingId }, () => {\n      Logger.info(`Cleared Note (${meetingId})`);\n    });\n  }\n\n  return Note.remove({}, () => {\n    Logger.info('Cleared Note (all)');\n  });\n}\n","import Note from '/imports/api/note';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\n\nexport default function updateNote(noteId, revs) {\n  check(noteId, String);\n  check(revs, Number);\n\n  const selector = {\n    noteId,\n  };\n\n  const modifier = {\n    $set: {\n      revs,\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Updating note pad: ${err}`);\n    }\n\n    return Logger.verbose(`Update note pad=${noteId} revs=${revs}`);\n  };\n\n  return Note.update(selector, modifier, { multi: true }, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForNotePadOnly } from '/imports/api/note/server/helpers';\nimport handlePadUpdate from './handlers/padUpdate';\n\nRedisPubSub.on('PadUpdateSysMsg', processForNotePadOnly(handlePadUpdate));\n","import { Meteor } from 'meteor/meteor';\nimport { hashFNV32a } from '/imports/api/common/server/helpers';\n\nconst ETHERPAD = Meteor.settings.private.etherpad;\nconst NOTE_CONFIG = Meteor.settings.public.note;\nconst BASE_URL = `http://${ETHERPAD.host}:${ETHERPAD.port}/api/${ETHERPAD.version}`;\nconst TOKEN = '_';\n\nconst createPadURL = padId => `${BASE_URL}/createPad?apikey=${ETHERPAD.apikey}&padID=${padId}`;\n\nconst getReadOnlyIdURL = padId => `${BASE_URL}/getReadOnlyID?apikey=${ETHERPAD.apikey}&padID=${padId}`;\n\nconst appendTextURL = (padId, text) => `${BASE_URL}/appendText?apikey=${ETHERPAD.apikey}&padID=${padId}&text=${encodeURIComponent(text)}`;\n\nconst generateNoteId = (meetingId) => {\n  const noteId = hashFNV32a(meetingId, true);\n  return noteId;\n};\n\nconst isEnabled = () => NOTE_CONFIG.enabled;\n\nconst getDataFromResponse = (data, key) => {\n  if (data) {\n    const innerData = data.data;\n    if (innerData && innerData[key]) {\n      return innerData[key];\n    }\n  }\n  return null;\n};\n\nconst isNotePad = padId => padId.search(TOKEN);\n\nconst processForNotePadOnly = fn => (message, ...args) => {\n  const { body } = message;\n  const { pad } = body;\n  const { id } = pad;\n\n  check(id, String);\n\n  if (isNotePad(id)) return fn(message, ...args);\n  return () => {};\n};\n\nexport {\n  generateNoteId,\n  createPadURL,\n  getReadOnlyIdURL,\n  isEnabled,\n  getDataFromResponse,\n  appendTextURL,\n  processForNotePadOnly,\n};\n","import './publishers';\nimport './eventHandlers';\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Note from '/imports/api/note';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction note() {\n  if (!this.userId) {\n    return Note.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.info(`Publishing note for ${meetingId} ${requesterUserId}`);\n\n  return Note.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundNote = note.bind(this);\n  return boundNote(...args);\n}\n\nMeteor.publish('note', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Note = new Mongo.Collection('note');\n\nif (Meteor.isServer) {\n  Note._ensureIndex({ meetingId: 1, noteId: 1 });\n}\n\nexport default Note;\n","import Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function ping() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n  };\n\n  const modifier = {\n    $set: {\n      lastPing: Date.now(),\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Error updating lastPing for ${requesterUserId}: ${err}`);\n    }\n  };\n\n  return Users.update(selector, modifier, cb);\n}\n","import './publishers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport ping from './methods/ping';\n\nMeteor.methods({\n  ping,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport _ from 'lodash';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst COLLECTION_NAME = 'ping-pong';\nconst INTERVAL_IN_SETTINGS = (Meteor.settings.public.pingPong.clearUsersInSeconds) * 1000;\nconst INTERVAL_TIME = INTERVAL_IN_SETTINGS < 10000 ? 10000 : INTERVAL_IN_SETTINGS;\nconst PONG_INTERVAL_IN_SETTINGS = (Meteor.settings.public.pingPong.pongTimeInSeconds) * 1000;\nconst PONG_INTERVAL = PONG_INTERVAL_IN_SETTINGS >= (INTERVAL_TIME / 2)\n  ? (INTERVAL_TIME / 2) : PONG_INTERVAL_IN_SETTINGS;\n\nfunction pingPong() {\n  if (!this.userId) {\n    return; // TODO-- is there a more appropriate set to return?\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  const id = _.uniqueId('pong-');\n  Logger.info(`Starting ping-pong publish for userId: ${requesterUserId}`);\n  const pongSender = (interval) => {\n    const payload = {\n      pong: {\n        message: 'pong',\n        time: Date.now(),\n        meetingId,\n      },\n    };\n    let fn = this.added.bind(this);\n    if (interval) fn = this.changed.bind(this);\n    fn(COLLECTION_NAME, id, payload);\n  };\n  pongSender();\n  this.ready();\n  const interval = Meteor.setInterval(() => pongSender(true), PONG_INTERVAL);\n\n  this.onStop(() => {\n    Meteor.clearInterval(interval);\n  });\n}\n\nMeteor.publish('ping-pong', pingPong);\n","import { check } from 'meteor/check';\nimport removePoll from '../modifiers/removePoll';\nimport setPublishedPoll from '../../../meetings/server/modifiers/setPublishedPoll';\n\nexport default function pollPublished({ body }, meetingId) {\n  const { pollId } = body;\n\n  check(meetingId, String);\n  check(pollId, String);\n\n  setPublishedPoll(meetingId, true);\n\n  return removePoll(meetingId, pollId);\n}\n","import { check } from 'meteor/check';\nimport addPoll from '../modifiers/addPoll';\nimport setPublishedPoll from '../../../meetings/server/modifiers/setPublishedPoll';\n\nexport default function pollStarted({ body }, meetingId) {\n  const { userId } = body;\n  const { poll } = body;\n\n  check(meetingId, String);\n  check(userId, String);\n  check(poll, Object);\n\n  setPublishedPoll(meetingId, false);\n\n  return addPoll(meetingId, userId, poll);\n}\n","import { check } from 'meteor/check';\nimport removePoll from '../modifiers/removePoll';\nimport clearPolls from '../modifiers/clearPolls';\n\nexport default function pollStopped({ body }, meetingId) {\n  const { poll } = body;\n\n  check(meetingId, String);\n\n  if (poll) {\n    const { pollId } = poll;\n\n    check(pollId, String);\n\n    return removePoll(meetingId, pollId);\n  }\n\n  return clearPolls(meetingId);\n}\n","import { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userResponded({ body }) {\n  const { pollId, userId, answerId } = body;\n\n  check(pollId, String);\n  check(userId, String);\n  check(answerId, Number);\n\n  const selector = {\n    id: pollId,\n  };\n\n  const modifier = {\n    $pull: {\n      users: userId,\n    },\n    $push: {\n      responses: { userId, answerId },\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Updating Poll responses: ${err}`);\n    }\n\n    return Logger.info(`Updating Poll response (userId: ${userId},`\n      + `response: ${answerId}, pollId: ${pollId})`);\n  };\n\n  return Polls.update(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport updateVotes from '../modifiers/updateVotes';\n\nexport default function userVoted({ body }, meetingId) {\n  const { poll } = body;\n\n  check(meetingId, String);\n  check(poll, {\n    id: String,\n    answers: [\n      {\n        id: Number,\n        key: String,\n        numVotes: Number,\n      },\n    ],\n    numRespondents: Number,\n    numResponders: Number,\n  });\n\n  return updateVotes(poll, meetingId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function publishPoll() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ShowPollResultReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  const poll = Polls.findOne({ meetingId }); // TODO--send pollid from client\n  if (!poll) {\n    Logger.error(`Attempted to publish inexisting poll for meetingId: ${meetingId}`);\n    return false;\n  }\n\n  return RedisPubSub.publishUserMessage(\n    CHANNEL,\n    EVENT_NAME,\n    meetingId,\n    requesterUserId,\n    ({ requesterId: requesterUserId, pollId: poll.id }),\n  );\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function publishVote(id, pollAnswerId) { // TODO discuss location\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RespondToPollReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  /*\n   We keep an array of people who were in the meeting at the time the poll\n   was started. The poll is published to them only.\n   Once they vote - their ID is removed and they cannot see the poll anymore\n   */\n  const currentPoll = Polls.findOne({\n    users: requesterUserId,\n    meetingId,\n    'answers.id': pollAnswerId,\n    id,\n  });\n\n  check(pollAnswerId, Number);\n  check(currentPoll, Object);\n  check(currentPoll.meetingId, String);\n\n  const payload = {\n    requesterId: requesterUserId,\n    pollId: currentPoll.id,\n    questionId: 0,\n    answerId: pollAnswerId,\n  };\n\n  const selector = {\n    users: requesterUserId,\n    meetingId,\n    'answers.id': pollAnswerId,\n  };\n\n  const modifier = {\n    $pull: {\n      users: requesterUserId,\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Updating Polls collection: ${err}`);\n    }\n\n    return Logger.info(`Updating Polls collection (meetingId: ${meetingId}, `\n      + `pollId: ${currentPoll.id}!)`);\n  };\n\n  Polls.update(selector, modifier, cb);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function startPoll(pollType, pollId, answers) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n\n  let EVENT_NAME = 'StartPollReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(pollId, String);\n  check(pollType, String);\n\n  const payload = {\n    requesterId: requesterUserId,\n    pollId: `${pollId}/${new Date().getTime()}`,\n    pollType,\n  };\n\n  if (pollType === 'custom') {\n    EVENT_NAME = 'StartCustomPollReqMsg';\n    check(answers, Array);\n    payload.answers = answers;\n  }\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function stopPoll() {\n  const { meetingId, requesterUserId: requesterId } = extractCredentials(this.userId);\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'StopPollReqMsg';\n\n  return RedisPubSub.publishUserMessage(\n    CHANNEL,\n    EVENT_NAME,\n    meetingId,\n    requesterId,\n    ({ requesterId }),\n  );\n}\n","import Users from '/imports/api/users';\nimport Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport { check } from 'meteor/check';\n\nexport default function addPoll(meetingId, requesterId, poll) {\n  check(requesterId, String);\n  check(meetingId, String);\n  check(poll, {\n    id: String,\n    answers: [\n      {\n        id: Number,\n        key: String,\n      },\n    ],\n  });\n\n  const userSelector = {\n    meetingId,\n    userId: { $ne: requesterId },\n    clientType: { $ne: 'dial-in-user' },\n  };\n\n  const userIds = Users.find(userSelector, { fields: { userId: 1 } })\n    .fetch()\n    .map(user => user.userId);\n\n  const selector = {\n    meetingId,\n    requester: requesterId,\n    id: poll.id,\n  };\n\n  const modifier = Object.assign(\n    { meetingId },\n    { requester: requesterId },\n    { users: userIds },\n    flat(poll, { safe: true }),\n  );\n\n  const cb = (err, numChanged) => {\n    if (err != null) {\n      return Logger.error(`Adding Poll to collection: ${poll.id}`);\n    }\n\n    const { insertedId } = numChanged;\n    if (insertedId) {\n      return Logger.info(`Added Poll id=${poll.id}`);\n    }\n\n    return Logger.info(`Upserted Poll id=${poll.id}`);\n  };\n\n  return Polls.upsert(selector, modifier, cb);\n}\n","import Polls from '/imports/api/polls';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPolls(meetingId) {\n  if (meetingId) {\n    return Polls.remove({ meetingId }, () => {\n      Logger.info(`Cleared Polls (${meetingId})`);\n    });\n  }\n\n  return Polls.remove({}, () => {\n    Logger.info('Cleared Polls (all)');\n  });\n}\n","import Polls from '/imports/api/polls';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function removePoll(meetingId, id) {\n  check(meetingId, String);\n  check(id, String);\n\n  const selector = {\n    meetingId,\n    id,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing Poll from collection: ${err}`);\n    }\n\n    return Logger.info(`Removed Poll id=${id}`);\n  };\n\n  return Polls.remove(selector, cb);\n}\n","import Polls from '/imports/api/polls';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\n\nexport default function updateVotes(poll, meetingId) {\n  check(meetingId, String);\n  check(poll, Object);\n\n  const {\n    id,\n    answers,\n    numResponders,\n    numRespondents,\n  } = poll;\n\n  check(id, String);\n  check(answers, Array);\n\n  check(numResponders, Number);\n  check(numRespondents, Number);\n\n  const selector = {\n    meetingId,\n    id,\n  };\n\n  const modifier = {\n    $set: flat(poll, { safe: true }),\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Updating Polls collection: ${err}`);\n    }\n\n    return Logger.info(`Updating Polls collection (meetingId: ${meetingId}, pollId: ${id}!)`);\n  };\n\n  return Polls.update(selector, modifier, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handlePollStarted from './handlers/pollStarted';\nimport handlePollStopped from './handlers/pollStopped';\nimport handlePollPublished from './handlers/pollPublished';\nimport handleUserVoted from './handlers/userVoted';\nimport handleUserResponded from './handlers/userResponded';\n\nRedisPubSub.on('PollShowResultEvtMsg', handlePollPublished);\nRedisPubSub.on('PollStartedEvtMsg', handlePollStarted);\nRedisPubSub.on('PollStoppedEvtMsg', handlePollStopped);\nRedisPubSub.on('PollUpdatedEvtMsg', handleUserVoted);\nRedisPubSub.on('UserRespondedToPollRespMsg', handleUserResponded);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport publishVote from './methods/publishVote';\nimport publishPoll from './methods/publishPoll';\nimport startPoll from './methods/startPoll';\nimport stopPoll from './methods/stopPoll';\n\nMeteor.methods({\n  publishVote,\n  publishPoll,\n  startPoll,\n  stopPoll,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport Polls from '/imports/api/polls';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction currentPoll() {\n  if (!this.userId) {\n    return Polls.find({ meetingId: '' });\n  }\n  const { meetingId } = extractCredentials(this.userId);\n\n  const selector = {\n    meetingId,\n  };\n\n  Logger.debug(`Publishing poll for meeting=${meetingId}`);\n\n  return Polls.find(selector);\n}\n\nfunction publishCurrentPoll(...args) {\n  const boundPolls = currentPoll.bind(this);\n  return boundPolls(...args);\n}\n\nMeteor.publish('current-poll', publishCurrentPoll);\n\n\nfunction polls() {\n  if (!this.userId) {\n    return Polls.find({ meetingId: '' });\n  }\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing polls =${meetingId} ${requesterUserId}`);\n\n  const selector = {\n    meetingId,\n    users: requesterUserId,\n  };\n\n  return Polls.find(selector);\n}\n\nfunction publish(...args) {\n  const boundPolls = polls.bind(this);\n  return boundPolls(...args);\n}\n\nMeteor.publish('polls', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Polls = new Mongo.Collection('polls');\n\nif (Meteor.isServer) {\n  // We can have just one active poll per meeting\n  // makes no sense to index it by anything other than meetingId\n\n  Polls._ensureIndex({ meetingId: 1 });\n}\n\nexport default Polls;\n","import { check } from 'meteor/check';\nimport addPresentationPod from '../modifiers/addPresentationPod';\n\nexport default function handleCreateNewPresentationPod({ body }, meetingId) {\n  check(body, {\n    currentPresenterId: String,\n    podId: String,\n  });\n  check(meetingId, String);\n\n  const { currentPresenterId, podId } = body;\n\n  const pod = {\n    currentPresenterId,\n    podId,\n  };\n\n  addPresentationPod(meetingId, pod);\n}\n","import { check } from 'meteor/check';\nimport removePresentationPod from '../modifiers/removePresentationPod';\n\nexport default function handleRemovePresentationPod({ body }, meetingId) {\n  check(body, Object);\n  check(meetingId, String);\n\n  const { podId } = body;\n\n  check(podId, String);\n\n  removePresentationPod(meetingId, podId);\n}\n","import { check } from 'meteor/check';\nimport setPresenterInPod from '../modifiers/setPresenterInPod';\n\nexport default function handleSetPresenterInPod({ body }, meetingId) {\n  check(body, Object);\n\n  const { podId, nextPresenterId } = body;\n\n  check(podId, String);\n  check(nextPresenterId, String);\n\n  setPresenterInPod(meetingId, podId, nextPresenterId);\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport removePresentationPod from '../modifiers/removePresentationPod';\nimport addPresentationPod from '../modifiers/addPresentationPod';\n\nexport default function handleSyncGetPresentationPods({ body }, meetingId) {\n  check(body, Object);\n  check(meetingId, String);\n\n  const { pods } = body;\n  check(pods, Array);\n\n  const presentationPodIds = pods.map(pod => pod.id);\n\n  const presentationPodsToRemove = PresentationPods.find({\n    meetingId,\n    podId: { $nin: presentationPodIds },\n  }, { fields: { podId: 1 } }).fetch();\n\n  presentationPodsToRemove.forEach(p => removePresentationPod(meetingId, p.podId));\n\n  pods.forEach((pod) => {\n    // 'podId' and 'currentPresenterId' for some reason called 'id' and 'currentPresenter'\n    // in this message\n    const {\n      id: podId,\n      currentPresenter: currentPresenterId,\n      presentations,\n    } = pod;\n    addPresentationPod(meetingId, { podId, currentPresenterId }, presentations);\n  });\n}\n","import { Match, check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport addPresentation from '/imports/api/presentations/server/modifiers/addPresentation';\n\n// 'presentations' is passed down here when we receive a Sync message\n// and it's not used when we just create a new presentation pod\nexport default function addPresentationPod(meetingId, pod, presentations = undefined) {\n  check(meetingId, String);\n  check(presentations, Match.Maybe(Array));\n  check(pod, {\n    currentPresenterId: String,\n    podId: String,\n  });\n\n  const { currentPresenterId, podId } = pod;\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const modifier = {\n    meetingId,\n    podId,\n    currentPresenterId,\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding presentation pod to the collection: ${err}`);\n    }\n\n    // if it's a Sync message - continue adding the attached presentations\n    if (presentations) {\n      presentations.forEach(presentation => addPresentation(meetingId, podId, presentation));\n    }\n\n    if (numChanged) {\n      return Logger.info(`Added presentation pod id=${podId} meeting=${meetingId}`);\n    }\n\n    return Logger.info(`Upserted presentation pod id=${podId} meeting=${meetingId}`);\n  };\n\n  return PresentationPods.upsert(selector, modifier, cb);\n}\n","import PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport clearPresentations from '/imports/api/presentations/server/modifiers/clearPresentations';\nimport clearPresentationUploadToken from '/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken';\n\nexport default function clearPresentationPods(meetingId) {\n  if (meetingId) {\n    return PresentationPods.remove(\n      { meetingId },\n      () => {\n        clearPresentations(meetingId);\n        clearPresentationUploadToken(meetingId);\n        Logger.info(`Cleared Presentations Pods (${meetingId})`);\n      },\n    );\n  }\n\n  return PresentationPods.remove({}, () => {\n    clearPresentations();\n    clearPresentationUploadToken();\n    Logger.info('Cleared Presentations Pods (all)');\n  });\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport clearPresentations from '/imports/api/presentations/server/modifiers/clearPresentations';\nimport clearPresentationUploadToken from '/imports/api/presentation-upload-token/server/modifiers/clearPresentationUploadToken';\n\nexport default function removePresentationPod(meetingId, podId) {\n  check(meetingId, String);\n  check(podId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      Logger.error(`Removing presentation pod from collection: ${err}`);\n      return;\n    }\n\n    if (podId) {\n      Logger.info(`Removed presentation pod id=${podId} meeting=${meetingId}`);\n      clearPresentations(meetingId, podId);\n      clearPresentationUploadToken(meetingId, podId);\n    }\n  };\n\n  return PresentationPods.remove(selector, cb);\n}\n","import { check } from 'meteor/check';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresenterInPod(meetingId, podId, nextPresenterId) {\n  check(meetingId, String);\n  check(podId, String);\n  check(nextPresenterId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n  };\n\n  const modifier = {\n    $set: {\n      currentPresenterId: nextPresenterId,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Setting a presenter in pod: ${err}`);\n      return;\n    }\n\n    if (numChanged) {\n      Logger.info(`Set a new presenter in pod id=${podId} meeting=${meetingId}`);\n    }\n  };\n\n  return PresentationPods.upsert(selector, modifier, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleCreateNewPresentationPod from './handlers/createNewPresentationPod';\nimport handleRemovePresentationPod from './handlers/removePresentationPod';\nimport handleSyncGetPresentationPods from './handlers/syncGetPresentationPods';\nimport handleSetPresenterInPod from './handlers/setPresenterInPod';\n\nRedisPubSub.on('CreateNewPresentationPodEvtMsg', handleCreateNewPresentationPod);\nRedisPubSub.on('RemovePresentationPodEvtMsg', handleRemovePresentationPod);\nRedisPubSub.on('SetPresenterInPodRespMsg', handleSetPresenterInPod);\nRedisPubSub.on('SyncGetPresentationPodsRespMsg', handleSyncGetPresentationPods);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction presentationPods() {\n  if (!this.userId) {\n    return PresentationPods.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  Logger.debug(`Publishing presentation-pods for ${meetingId} ${requesterUserId}`);\n\n  return PresentationPods.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundPresentationPods = presentationPods.bind(this);\n  return boundPresentationPods(...args);\n}\n\nMeteor.publish('presentation-pods', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst PresentationPods = new Mongo.Collection('presentation-pods');\n\nif (Meteor.isServer) {\n  // types of queries for the presentation pods:\n  // 1. meetingId, podId  ( 4 )\n\n  PresentationPods._ensureIndex({ meetingId: 1, podId: 1 });\n}\n\nexport default PresentationPods;\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\n\nexport default function handlePresentationUploadTokenFail({ body, header }, meetingId) {\n  check(body, Object);\n\n  const { userId } = header;\n  const { podId, filename } = body;\n\n  check(userId, String);\n  check(podId, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    podId,\n    filename,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      Logger.error(`Removing presentationToken from collection: ${err}`);\n      return;\n    }\n\n    Logger.info(`Removing presentationToken filename=${filename} podId=${podId} meeting=${meetingId}`);\n  };\n\n  return PresentationUploadToken.upsert(selector, { failed: true, authzToken: null }, cb);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\n\nexport default function handlePresentationUploadTokenPass({ body, header }, meetingId) {\n  check(body, Object);\n\n  const { userId } = header;\n  const { podId, authzToken, filename } = body;\n\n  check(userId, String);\n  check(podId, String);\n  check(authzToken, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n  };\n\n  const doc = {\n    meetingId,\n    podId,\n    userId,\n    filename,\n    authzToken,\n    failed: false,\n    used: false,\n  };\n\n  const cb = (err) => {\n    if (err) {\n      Logger.error(`Inserting presentationToken from collection: ${err}`);\n      return;\n    }\n\n    Logger.info(`Inserting presentationToken filename=${filename} podId=${podId} meeting=${meetingId}`);\n  };\n\n  return PresentationUploadToken.upsert(selector, doc, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function requestPresentationUploadToken(podId, filename) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'PresentationUploadTokenReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(podId, String);\n  check(filename, String);\n\n  const payload = {\n    podId,\n    filename,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setUsedToken(authzToken) {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const payload = {\n    $set: {\n      used: true,\n    },\n  };\n  const cb = (err) => {\n    if (err) {\n      Logger.error(`Unable to set token as used : ${err}`);\n      return;\n    }\n\n    Logger.info(`Token: ${authzToken} has been set as used in meeting=${meetingId}`);\n  };\n\n  return PresentationUploadToken.update({\n    meetingId,\n    userId: requesterUserId,\n    authzToken,\n  }, payload, cb);\n}\n","import PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPresentationUploadToken(meetingId, podId) {\n  if (meetingId && podId) {\n    return PresentationUploadToken.remove({ meetingId, podId }, () => {\n      Logger.info(`Cleared Presentations Upload Token (${meetingId}, ${podId})`);\n    });\n  }\n\n  if (meetingId) {\n    return PresentationUploadToken.remove({ meetingId }, () => {\n      Logger.info(`Cleared Presentations Upload Token (${meetingId})`);\n    });\n  }\n\n  // clearing presentations for the whole server\n  return PresentationUploadToken.remove({}, () => {\n    Logger.info('Cleared Presentations Upload Token (all)');\n  });\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\n\nimport handlePresentationUploadTokenPass from './handlers/presentationUploadTokenPass';\nimport handlePresentationUploadTokenFail from './handlers/presentationUploadTokenFail';\n\nRedisPubSub.on('PresentationUploadTokenPassRespMsg', processForHTML5ServerOnly(handlePresentationUploadTokenPass));\nRedisPubSub.on('PresentationUploadTokenFailRespMsg', processForHTML5ServerOnly(handlePresentationUploadTokenFail));\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport requestPresentationUploadToken from './methods/requestPresentationUploadToken';\nimport setUsedToken from './methods/setUsedToken';\n\nMeteor.methods({\n  requestPresentationUploadToken,\n  setUsedToken,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport PresentationUploadToken from '/imports/api/presentation-upload-token';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction presentationUploadToken(podId, filename) {\n  if (!this.userId) {\n    return PresentationUploadToken.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(podId, String);\n  check(filename, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    userId: requesterUserId,\n    filename,\n  };\n\n  Logger.debug(`Publishing PresentationUploadToken for ${meetingId} ${requesterUserId}`);\n\n  return PresentationUploadToken.find(selector);\n}\n\nfunction publish(...args) {\n  const boundPresentationUploadToken = presentationUploadToken.bind(this);\n  return boundPresentationUploadToken(...args);\n}\n\nMeteor.publish('presentation-upload-token', publish);\n","const PresentationUploadToken = new Mongo.Collection('presentation-upload-token');\n\nexport default PresentationUploadToken;\n","import { check } from 'meteor/check';\nimport addPresentation from '../modifiers/addPresentation';\n\nexport default function handlePresentationAdded({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentation, podId } = body;\n\n  check(meetingId, String);\n  check(podId, String);\n  check(presentation, Object);\n\n  return addPresentation(meetingId, podId, presentation);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Presentations from '/imports/api/presentations';\n\n// const OFFICE_DOC_CONVERSION_SUCCESS_KEY = 'OFFICE_DOC_CONVERSION_SUCCESS';\nconst OFFICE_DOC_CONVERSION_FAILED_KEY = 'OFFICE_DOC_CONVERSION_FAILED';\nconst OFFICE_DOC_CONVERSION_INVALID_KEY = 'OFFICE_DOC_CONVERSION_INVALID';\nconst SUPPORTED_DOCUMENT_KEY = 'SUPPORTED_DOCUMENT';\nconst UNSUPPORTED_DOCUMENT_KEY = 'UNSUPPORTED_DOCUMENT';\nconst PAGE_COUNT_FAILED_KEY = 'PAGE_COUNT_FAILED';\nconst PAGE_COUNT_EXCEEDED_KEY = 'PAGE_COUNT_EXCEEDED';\nconst PDF_HAS_BIG_PAGE_KEY = 'PDF_HAS_BIG_PAGE';\nconst GENERATED_SLIDE_KEY = 'GENERATED_SLIDE';\n// const GENERATING_THUMBNAIL_KEY = 'GENERATING_THUMBNAIL';\n// const GENERATED_THUMBNAIL_KEY = 'GENERATED_THUMBNAIL';\n// const GENERATING_TEXTFILES_KEY = 'GENERATING_TEXTFILES';\n// const GENERATED_TEXTFILES_KEY = 'GENERATED_TEXTFILES';\n// const GENERATING_SVGIMAGES_KEY = 'GENERATING_SVGIMAGES';\n// const GENERATED_SVGIMAGES_KEY = 'GENERATED_SVGIMAGES';\n// const CONVERSION_COMPLETED_KEY = 'CONVERSION_COMPLETED';\n\nexport default function handlePresentationConversionUpdate({ body }, meetingId) {\n  check(body, Object);\n\n  const {\n    presentationId, podId, messageKey: status, presName: presentationName,\n  } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(status, String);\n\n  const statusModifier = {\n    'conversion.status': status,\n    'conversion.error': false,\n    'conversion.done': false,\n  };\n\n  switch (status) {\n    case SUPPORTED_DOCUMENT_KEY:\n      statusModifier.id = presentationId;\n      statusModifier.name = presentationName;\n      break;\n\n    case UNSUPPORTED_DOCUMENT_KEY:\n    case OFFICE_DOC_CONVERSION_FAILED_KEY:\n    case OFFICE_DOC_CONVERSION_INVALID_KEY:\n    case PAGE_COUNT_FAILED_KEY:\n    case PAGE_COUNT_EXCEEDED_KEY:\n    case PDF_HAS_BIG_PAGE_KEY:\n      statusModifier.id = presentationId;\n      statusModifier.name = presentationName;\n      statusModifier['conversion.error'] = true;\n      break;\n\n    case GENERATED_SLIDE_KEY:\n      statusModifier['conversion.pagesCompleted'] = body.pagesCompleted;\n      statusModifier['conversion.numPages'] = body.numberOfPages;\n      break;\n\n    default:\n      break;\n  }\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  const modifier = {\n    $set: Object.assign({ meetingId, podId }, statusModifier),\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Updating conversion status presentation to collection: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n    if (insertedId) {\n      return Logger.info(`Updated presentation conversion status=${status} id=${presentationId} meeting=${meetingId}`);\n    }\n\n    return Logger.debug(`Upserted presentation conversion status=${status} id=${presentationId} meeting=${meetingId}`);\n  };\n\n  return Presentations.upsert(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport setCurrentPresentation from '../modifiers/setCurrentPresentation';\n\nexport default function handlePresentationCurrentSet({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentationId, podId } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  return setCurrentPresentation(meetingId, podId, presentationId);\n}\n","import { check } from 'meteor/check';\nimport setPresentationDownloadable from '../modifiers/setPresentationDownloadable';\n\nexport default function handlePresentationDownloadableSet({ body }, meetingId) {\n  check(body, Object);\n\n  const { presentationId, podId, downloadable } = body;\n\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(downloadable, Boolean);\n\n  return setPresentationDownloadable(meetingId, podId, presentationId, downloadable);\n}\n","import { check } from 'meteor/check';\n\nimport removePresentation from '../modifiers/removePresentation';\n\nexport default function handlePresentationRemove({ body }, meetingId) {\n  const { podId, presentationId } = body;\n\n  check(meetingId, String);\n  check(podId, String);\n  check(presentationId, String);\n\n  return removePresentation(meetingId, podId, presentationId);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function removePresentation(presentationId, podId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'RemovePresentationPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(presentationId, String);\n  check(podId, String);\n\n  const payload = {\n    presentationId,\n    podId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setPresentation(presentationId, podId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetCurrentPresentationPubMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(presentationId, String);\n  check(podId, String);\n\n  const payload = {\n    presentationId,\n    podId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setPresentationDownloadable(presentationId, downloadable) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetPresentationDownloadablePubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(downloadable, Boolean);\n  check(presentationId, String);\n\n  const payload = {\n    presentationId,\n    podId: 'DEFAULT_PRESENTATION_POD',\n    downloadable,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { HTTP } from 'meteor/http';\nimport { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\nimport flat from 'flat';\nimport addSlide from '/imports/api/slides/server/modifiers/addSlide';\nimport setCurrentPresentation from './setCurrentPresentation';\n\nconst getSlideText = async (url) => {\n  let content = '';\n  try {\n    content = await HTTP.get(url).content;\n  } catch (error) {\n    Logger.error(`No file found. ${error}`);\n  }\n  return content;\n};\n\nconst addSlides = (meetingId, podId, presentationId, slides) => {\n  slides.forEach(async (slide) => {\n    const content = await getSlideText(slide.txtUri);\n\n    Object.assign(slide, { content });\n\n    addSlide(meetingId, podId, presentationId, slide);\n  });\n};\n\nexport default function addPresentation(meetingId, podId, presentation) {\n  check(meetingId, String);\n  check(podId, String);\n  check(presentation, {\n    id: String,\n    name: String,\n    current: Boolean,\n    pages: [\n      {\n        id: String,\n        num: Number,\n        thumbUri: String,\n        swfUri: String,\n        txtUri: String,\n        svgUri: String,\n        current: Boolean,\n        xOffset: Number,\n        yOffset: Number,\n        widthRatio: Number,\n        heightRatio: Number,\n      },\n    ],\n    downloadable: Boolean,\n  });\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentation.id,\n  };\n\n  const modifier = {\n    $set: Object.assign({\n      meetingId,\n      podId,\n      'conversion.done': true,\n      'conversion.error': false,\n    }, flat(presentation, { safe: true })),\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding presentation to collection: ${err}`);\n    }\n\n    addSlides(meetingId, podId, presentation.id, presentation.pages);\n\n    const { insertedId } = numChanged;\n    if (insertedId) {\n      if (presentation.current) {\n        setCurrentPresentation(meetingId, podId, presentation.id);\n      }\n\n      return Logger.info(`Added presentation id=${presentation.id} meeting=${meetingId}`);\n    }\n\n    return Logger.info(`Upserted presentation id=${presentation.id} meeting=${meetingId}`);\n  };\n\n  return Presentations.upsert(selector, modifier, cb);\n}\n","import Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearPresentations(meetingId, podId) {\n  // clearing presentations for 1 pod\n  if (meetingId && podId) {\n    return Presentations.remove({ meetingId, podId }, () => {\n      Logger.info(`Cleared Presentations (${meetingId}, ${podId})`);\n    });\n  }\n\n  // clearing presentations for the whole meeting\n  if (meetingId) {\n    return Presentations.remove({ meetingId }, () => {\n      Logger.info(`Cleared Presentations (${meetingId})`);\n    });\n  }\n\n  // clearing presentations for the whole server\n  return Presentations.remove({}, () => {\n    Logger.info('Cleared Presentations (all)');\n  });\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nimport clearSlidesPresentation from '/imports/api/slides/server/modifiers/clearSlidesPresentation';\n\nexport default function removePresentation(meetingId, podId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Removing presentation from collection: ${err}`);\n      return;\n    }\n\n    if (numChanged) {\n      clearSlidesPresentation(meetingId, presentationId);\n      Logger.info(`Removed presentation id=${presentationId} meeting=${meetingId}`);\n    }\n  };\n\n  return Presentations.remove(selector, cb);\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setCurrentPresentation(meetingId, podId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  const oldCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      current: true,\n    },\n    modifier: {\n      $set: { current: false },\n    },\n    callback: (err) => {\n      if (err) {\n        return Logger.error(`Unsetting the current presentation: ${err}`);\n      }\n\n      return Logger.info('Unsetted as current presentation');\n    },\n  };\n\n  const newCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      id: presentationId,\n    },\n    modifier: {\n      $set: { current: true },\n    },\n    callback: (err) => {\n      if (err) {\n        return Logger.error(`Setting as current presentation id=${presentationId}: ${err}`);\n      }\n\n      return Logger.info(`Setted as current presentation id=${presentationId}`);\n    },\n  };\n\n  const oldPresentation = Presentations.findOne(oldCurrent.selector);\n  const newPresentation = Presentations.findOne(newCurrent.selector);\n\n  // Prevent bug with presentation being unset, same happens in the slide\n  // See: https://github.com/bigbluebutton/bigbluebutton/pull/4431\n  if (oldPresentation && newPresentation && (oldPresentation._id === newPresentation._id)) {\n    return;\n  }\n\n  if (newPresentation) {\n    Presentations.update(newPresentation._id, newCurrent.modifier, newCurrent.callback);\n  }\n\n  if (oldPresentation) {\n    Presentations.update(oldPresentation._id, oldCurrent.modifier, oldCurrent.callback);\n  }\n}\n","import { check } from 'meteor/check';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setPresentationDownloadable(meetingId, podId,\n  presentationId, downloadable) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(podId, String);\n  check(downloadable, Boolean);\n\n  const selector = {\n    meetingId,\n    podId,\n    id: presentationId,\n  };\n\n  const modifier = {\n    $set: {\n      downloadable,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Could not set downloadable on pres {${presentationId} in meeting {${meetingId}} ${err}`);\n      return;\n    }\n\n    if (numChanged) {\n      Logger.info(`Set downloadable status on presentation {${presentationId} in meeting {${meetingId}}`);\n    }\n  };\n\n  return Presentations.upsert(selector, modifier, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handlePresentationAdded from './handlers/presentationAdded';\nimport handlePresentationRemove from './handlers/presentationRemove';\nimport handlePresentationCurrentSet from './handlers/presentationCurrentSet';\nimport handlePresentationConversionUpdate from './handlers/presentationConversionUpdate';\nimport handlePresentationDownloadableSet from './handlers/presentationDownloadableSet';\n\nRedisPubSub.on('PdfConversionInvalidErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationPageGeneratedEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationPageCountErrorEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationConversionUpdateEvtMsg', handlePresentationConversionUpdate);\nRedisPubSub.on('PresentationConversionCompletedEvtMsg', handlePresentationAdded);\nRedisPubSub.on('RemovePresentationEvtMsg', handlePresentationRemove);\nRedisPubSub.on('SetCurrentPresentationEvtMsg', handlePresentationCurrentSet);\nRedisPubSub.on('SetPresentationDownloadableEvtMsg', handlePresentationDownloadableSet);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport removePresentation from './methods/removePresentation';\nimport setPresentation from './methods/setPresentation';\nimport setPresentationDownloadable from './methods/setPresentationDownloadable';\n\nMeteor.methods({\n  removePresentation,\n  setPresentation,\n  setPresentationDownloadable,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Presentations from '/imports/api/presentations';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction presentations() {\n  if (!this.userId) {\n    return Presentations.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing Presentations for ${meetingId} ${requesterUserId}`);\n\n  return Presentations.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundPresentations = presentations.bind(this);\n  return boundPresentations(...args);\n}\n\nMeteor.publish('presentations', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Presentations = new Mongo.Collection('presentations');\n\nif (Meteor.isServer) {\n  // types of queries for the presentations:\n  // 1. meetingId, podId, id        ( 3 )\n  // 2. meetingId, id               ( 1 )\n  // 3. meetingId, id, current      ( 2 )\n  // 4. meetingId                   ( 1 )\n\n  Presentations._ensureIndex({ meetingId: 1, podId: 1, id: 1 });\n}\n\nexport default Presentations;\n","import { check } from 'meteor/check';\nimport Meetings from '/imports/api/meetings';\nimport Users from '/imports/api/users';\nimport addScreenshare from '../modifiers/addScreenshare';\nimport Logger from '/imports/startup/server/logger';\nimport stopWatchingExternalVideo from '/imports/api/external-videos/server/methods/stopWatchingExternalVideo';\n\nexport default function handleScreenshareStarted({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  const meeting = Meetings.findOne({ meetingId });\n  const presenter = Users.findOne({ meetingId, presenter: true });\n  const presenterId = presenter && presenter.userId ? presenter.userId : 'system-screenshare-starting';\n  if (meeting && meeting.externalVideoUrl) {\n    Logger.info(`ScreenshareStarted: There is external video being shared. Stopping it due to presenter change, ${meeting.externalVideoUrl}`);\n    stopWatchingExternalVideo({ meetingId, requesterUserId: presenterId });\n  }\n  return addScreenshare(meetingId, body);\n}\n","import { check } from 'meteor/check';\nimport clearScreenshare from '../modifiers/clearScreenshare';\n\nexport default function handleScreenshareStopped({ body }, meetingId) {\n  const { screenshareConf } = body;\n\n  check(meetingId, String);\n  check(screenshareConf, String);\n\n  return clearScreenshare(meetingId, screenshareConf);\n}\n","import { check } from 'meteor/check';\nimport flat from 'flat';\nimport Logger from '/imports/startup/server/logger';\nimport Screenshare from '/imports/api/screenshare';\n\nexport default function addScreenshare(meetingId, body) {\n  check(meetingId, String);\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      screenshare: flat(body),\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Adding screenshare to collection: ${err}`);\n    }\n\n    return Logger.info(`Upserted screenshare id=${body.screenshareConf}`);\n  };\n\n  return Screenshare.upsert(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Screenshare from '/imports/api/screenshare';\n\nexport default function clearScreenshare(meetingId, screenshareConf) {\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`removing screenshare to collection: ${err}`);\n    }\n\n    return Logger.info(`removed screenshare meetingId=${meetingId} id=${screenshareConf}`);\n  };\n\n  if (meetingId && screenshareConf) {\n    return Screenshare.remove({ meetingId, 'screenshare.screenshareConf': screenshareConf }, cb);\n  }\n  return Screenshare.remove({}, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleScreenshareStarted from './handlers/screenshareStarted';\nimport handleScreenshareStopped from './handlers/screenshareStopped';\n\nRedisPubSub.on('ScreenshareRtmpBroadcastStartedEvtMsg', handleScreenshareStarted);\nRedisPubSub.on('ScreenshareRtmpBroadcastStoppedEvtMsg', handleScreenshareStopped);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\n\nMeteor.methods({\n});\n","import Screenshare from '/imports/api/screenshare';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction screenshare() {\n  if (!this.userId) {\n    return Screenshare.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing Screenshare for ${meetingId} ${requesterUserId}`);\n\n  return Screenshare.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundScreenshare = screenshare.bind(this);\n  return boundScreenshare(...args);\n}\n\nMeteor.publish('screenshare', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Screenshare = new Mongo.Collection('screenshare');\n\nif (Meteor.isServer) {\n  // types of queries for the screenshare:\n  // 1. meetingId\n\n  Screenshare._ensureIndex({ meetingId: 1 });\n}\n\nexport default Screenshare;\n","import { check } from 'meteor/check';\nimport changeCurrentSlide from '../modifiers/changeCurrentSlide';\n\nexport default function handleSlideChange({ body }, meetingId) {\n  const { pageId, presentationId, podId } = body;\n\n  check(pageId, String);\n  check(presentationId, String);\n  check(podId, String);\n\n  return changeCurrentSlide(meetingId, podId, presentationId, pageId);\n}\n","import { check } from 'meteor/check';\nimport resizeSlide from '../modifiers/resizeSlide';\n\nexport default function handleSlideResize({ body }, meetingId) {\n  check(meetingId, String);\n  check(body, Object);\n\n  return resizeSlide(meetingId, body);\n}\n","import Presentations from '/imports/api/presentations';\nimport { Slides } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function switchSlide(slideNumber, podId) { // TODO-- send presentationId and SlideId\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetCurrentPagePubMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(slideNumber, Number);\n\n  const selector = {\n    meetingId,\n    podId,\n    current: true,\n  };\n\n  const Presentation = Presentations.findOne(selector);\n\n  if (!Presentation) {\n    throw new Meteor.Error('presentation-not-found', 'You need a presentation to be able to switch slides');\n  }\n\n  const Slide = Slides.findOne({\n    meetingId,\n    podId,\n    presentationId: Presentation.id,\n    num: slideNumber,\n  });\n\n  if (!Slide) {\n    throw new Meteor.Error('slide-not-found', `Slide number ${slideNumber} not found in the current presentation`);\n  }\n\n  const payload = {\n    podId,\n    presentationId: Presentation.id,\n    pageId: Slide.id,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import Presentations from '/imports/api/presentations';\nimport { Slides } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function zoomSlide(slideNumber, podId, widthRatio, heightRatio, x, y) { // TODO-- send presentationId and SlideId\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ResizeAndMovePagePubMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const selector = {\n    meetingId,\n    podId,\n    current: true,\n  };\n  const Presentation = Presentations.findOne(selector);\n\n  if (!Presentation) {\n    throw new Meteor.Error('presentation-not-found', 'You need a presentation to be able to switch slides');\n  }\n\n  const Slide = Slides.findOne({\n    meetingId,\n    podId,\n    presentationId: Presentation.id,\n    num: slideNumber,\n  });\n\n  if (!Slide) {\n    throw new Meteor.Error('slide-not-found', `Slide number ${slideNumber} not found in the current presentation`);\n  }\n\n  const payload = {\n    podId,\n    presentationId: Presentation.id,\n    pageId: Slide.id,\n    xOffset: x,\n    yOffset: y,\n    widthRatio,\n    heightRatio,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import probe from 'probe-image-size';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { Slides } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { SVG, PNG } from '/imports/utils/mimeTypes';\nimport calculateSlideData from '/imports/api/slides/server/helpers';\nimport addSlidePositions from './addSlidePositions';\n\nconst loadSlidesFromHttpAlways = Meteor.settings.private.app.loadSlidesFromHttpAlways || false;\n\nconst requestWhiteboardHistory = (meetingId, slideId) => {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'GetWhiteboardAnnotationsReqMsg';\n  const USER_ID = 'nodeJSapp';\n\n  const payload = {\n    whiteboardId: slideId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, USER_ID, payload);\n};\n\nconst SUPPORTED_TYPES = [SVG, PNG];\n\nconst fetchImageSizes = imageUri => probe(imageUri)\n  .then((result) => {\n    if (!SUPPORTED_TYPES.includes(result.mime)) {\n      throw new Meteor.Error('invalid-image-type', `received ${result.mime} expecting ${SUPPORTED_TYPES.join()}`);\n    }\n\n    return {\n      width: result.width,\n      height: result.height,\n    };\n  })\n  .catch((reason) => {\n    Logger.error(`Error parsing image size. ${reason}. uri=${imageUri}`);\n    return reason;\n  });\n\nexport default function addSlide(meetingId, podId, presentationId, slide) {\n  check(podId, String);\n  check(presentationId, String);\n\n  check(slide, {\n    id: String,\n    num: Number,\n    thumbUri: String,\n    swfUri: String,\n    txtUri: String,\n    svgUri: String,\n    current: Boolean,\n    xOffset: Number,\n    yOffset: Number,\n    widthRatio: Number,\n    heightRatio: Number,\n    content: String,\n  });\n\n  const {\n    id: slideId,\n    xOffset,\n    yOffset,\n    widthRatio,\n    heightRatio,\n    ...restSlide\n  } = slide;\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: slideId,\n  };\n\n  const imageUri = slide.svgUri || slide.pngUri;\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId },\n      { podId },\n      { presentationId },\n      { id: slideId },\n      { imageUri },\n      flat(restSlide),\n      { safe: true },\n    ),\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding slide to collection: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n\n    requestWhiteboardHistory(meetingId, slideId);\n\n    if (insertedId) {\n      return Logger.info(`Added slide id=${slideId} pod=${podId} presentation=${presentationId}`);\n    }\n\n    return Logger.info(`Upserted slide id=${slideId} pod=${podId} presentation=${presentationId}`);\n  };\n\n  const imageSizeUri = (loadSlidesFromHttpAlways ? imageUri.replace(/^https/i, 'http') : imageUri);\n\n  return fetchImageSizes(imageSizeUri)\n    .then(({ width, height }) => {\n      // there is a rare case when for a very long not-active meeting the presentation\n      // files just disappear and width/height can't be retrieved\n      if (width && height) {\n        // pre-calculating the width, height, and vieBox coordinates / dimensions\n        // to unload the client-side\n        const slideData = {\n          width,\n          height,\n          xOffset,\n          yOffset,\n          widthRatio,\n          heightRatio,\n        };\n        const slidePosition = calculateSlideData(slideData);\n\n        addSlidePositions(meetingId, podId, presentationId, slideId, slidePosition);\n      }\n\n      return Slides.upsert(selector, modifier, cb);\n    })\n    .catch(reason => Logger.error(`Error parsing image size. ${reason}. slide=${slideId} uri=${imageUri}`));\n}\n","import { SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport flat from 'flat';\n\nexport default function addSlidePositions(\n  meetingId,\n  podId,\n  presentationId,\n  slideId,\n  slidePosition,\n) {\n  check(meetingId, String);\n  check(podId, String);\n  check(presentationId, String);\n  check(slideId, String);\n\n  check(slidePosition, {\n    width: Number,\n    height: Number,\n    x: Number,\n    y: Number,\n    viewBoxWidth: Number,\n    viewBoxHeight: Number,\n  });\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: slideId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId },\n      { podId },\n      { presentationId },\n      { id: slideId },\n      flat(slidePosition),\n      { safe: true },\n    ),\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding slide position to collection: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n\n    if (insertedId) {\n      return Logger.info(`Added slide position id=${slideId} pod=${podId} presentation=${presentationId}`);\n    }\n\n    return Logger.info(`Upserted slide position id=${slideId} pod=${podId} presentation=${presentationId}`);\n  };\n\n  return SlidePositions.upsert(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport { Slides } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function changeCurrentSlide(meetingId, podId, presentationId, slideId) {\n  check(meetingId, String);\n  check(presentationId, String);\n  check(slideId, String);\n  check(podId, String);\n\n  const oldCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      presentationId,\n      current: true,\n    },\n    modifier: {\n      $set: { current: false },\n    },\n    callback: (err) => {\n      if (err) {\n        return Logger.error(`Unsetting the current slide: ${err}`);\n      }\n\n      return Logger.info('Unsetted the current slide');\n    },\n  };\n\n  const newCurrent = {\n    selector: {\n      meetingId,\n      podId,\n      presentationId,\n      id: slideId,\n    },\n    modifier: {\n      $set: { current: true },\n    },\n    callback: (err) => {\n      if (err) {\n        return Logger.error(`Setting as current slide id=${slideId}: ${err}`);\n      }\n\n      return Logger.info(`Setted as current slide id=${slideId}`);\n    },\n  };\n\n  const oldSlide = Slides.findOne(oldCurrent.selector);\n  const newSlide = Slides.findOne(newCurrent.selector);\n\n  // if the oldCurrent and newCurrent have the same ids\n  if (oldSlide && newSlide && (oldSlide._id === newSlide._id)) {\n    return;\n  }\n\n  if (newSlide) {\n    Slides.update(newSlide._id, newCurrent.modifier, newCurrent.callback);\n  }\n\n  if (oldSlide) {\n    Slides.update(oldSlide._id, oldCurrent.modifier, oldCurrent.callback);\n  }\n}\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearSlides(meetingId) {\n  if (meetingId) {\n    SlidePositions.remove({ meetingId }, () => {\n      Logger.info(`Cleared SlidePositions (${meetingId})`);\n    });\n\n    return Slides.remove({ meetingId }, () => {\n      Logger.info(`Cleared Slides (${meetingId})`);\n    });\n  }\n\n  SlidePositions.remove({}, () => {\n    Logger.info('Cleared SlidePositions (all)');\n  });\n\n  return Slides.remove({}, () => {\n    Logger.info('Cleared Slides (all)');\n  });\n}\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport clearAnnotations from '/imports/api/annotations/server/modifiers/clearAnnotations';\n\nexport default function clearSlidesPresentation(meetingId, presentationId) {\n  check(meetingId, String);\n  check(presentationId, String);\n\n  const selector = {\n    meetingId,\n    presentationId,\n  };\n\n  const whiteboardIds = Slides.find(selector, { fields: { id: 1 } }).map(row => row.id);\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing Slides from collection: ${err}`);\n    }\n\n    whiteboardIds.forEach(whiteboardId => clearAnnotations(meetingId, whiteboardId));\n\n    return Logger.info(`Removed Slides where presentationId=${presentationId}`);\n  };\n\n  SlidePositions.remove(selector);\n\n  return Slides.remove(selector, cb);\n}\n","import { check } from 'meteor/check';\nimport { SlidePositions } from '/imports/api/slides';\nimport Logger from '/imports/startup/server/logger';\nimport calculateSlideData from '/imports/api/slides/server/helpers';\n\nexport default function resizeSlide(meetingId, slide) {\n  check(meetingId, String);\n\n  const {\n    podId,\n    presentationId,\n    pageId,\n    widthRatio,\n    heightRatio,\n    xOffset,\n    yOffset,\n  } = slide;\n\n  const selector = {\n    meetingId,\n    podId,\n    presentationId,\n    id: pageId,\n  };\n\n  // fetching the current slide data\n  // and pre-calculating the width, height, and vieBox coordinates / sizes\n  // to reduce the client-side load\n  const SlidePosition = SlidePositions.findOne(selector);\n\n  if (SlidePosition) {\n    const {\n      width,\n      height,\n    } = SlidePosition;\n\n    const slideData = {\n      width,\n      height,\n      xOffset,\n      yOffset,\n      widthRatio,\n      heightRatio,\n    };\n    const calculatedData = calculateSlideData(slideData);\n\n    const modifier = {\n      $set: calculatedData,\n    };\n\n    const cb = (err, numChanged) => {\n      if (err) {\n        return Logger.error(`Resizing slide positions id=${pageId}: ${err}`);\n      }\n\n      if (numChanged) {\n        return Logger.debug(`Resized slide positions id=${pageId}`);\n      }\n\n      return Logger.info(`No slide positions found with id=${pageId}`);\n    };\n\n    return SlidePositions.update(selector, modifier, cb);\n  }\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleSlideResize from './handlers/slideResize';\nimport handleSlideChange from './handlers/slideChange';\n\nRedisPubSub.on('ResizeAndMovePageEvtMsg', handleSlideResize);\nRedisPubSub.on('SetCurrentPageEvtMsg', handleSlideChange);\n","\nconst calculateSlideData = (slideData) => {\n  const {\n    width, height, xOffset, yOffset, widthRatio, heightRatio,\n  } = slideData;\n\n  // calculating viewBox and offsets for the current presentation\n  return {\n    width,\n    height,\n    x: ((-xOffset * 2) * width) / 100,\n    y: ((-yOffset * 2) * height) / 100,\n    viewBoxWidth: (width * widthRatio) / 100,\n    viewBoxHeight: (height * heightRatio) / 100,\n  };\n};\n\nexport default calculateSlideData;\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport switchSlide from './methods/switchSlide';\nimport zoomSlide from './methods/zoomSlide';\n\nMeteor.methods({\n  switchSlide,\n  zoomSlide,\n});\n","import { Slides, SlidePositions } from '/imports/api/slides';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction slides() {\n  if (!this.userId) {\n    return Slides.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  Logger.debug(`Publishing Slides for ${meetingId} ${requesterUserId}`);\n\n  return Slides.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundSlides = slides.bind(this);\n  return boundSlides(...args);\n}\n\nMeteor.publish('slides', publish);\n\nfunction slidePositions() {\n  if (!this.userId) {\n    return SlidePositions.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing SlidePositions for ${meetingId} ${requesterUserId}`);\n\n  return SlidePositions.find({ meetingId });\n}\n\nfunction publishPositions(...args) {\n  const boundSlidePositions = slidePositions.bind(this);\n  return boundSlidePositions(...args);\n}\n\nMeteor.publish('slide-positions', publishPositions);\n","import { Meteor } from 'meteor/meteor';\n\nconst Slides = new Mongo.Collection('slides');\nconst SlidePositions = new Mongo.Collection('slide-positions');\n\nif (Meteor.isServer) {\n  // types of queries for the slides:\n\n  // 1. meetingId                                  ( 1 )\n  // 2. meetingId, podId                           ( 1 )\n  // 3. meetingId, presentationId                  ( 1 )\n  // 3. meetingId, presentationId, num             ( 1 )\n  // 4. meetingId, podId, presentationId, id       ( 3 ) - incl. resizeSlide, which can be intense\n  // 5. meetingId, podId, presentationId, current  ( 1 )\n\n  Slides._ensureIndex({\n    meetingId: 1, podId: 1, presentationId: 1, id: 1,\n  });\n\n  SlidePositions._ensureIndex({\n    meetingId: 1, podId: 1, presentationId: 1, id: 1,\n  });\n}\n\nexport { Slides, SlidePositions };\n","import { check } from 'meteor/check';\nimport changeRole from '/imports/api/users/server/modifiers/changeRole';\n\nexport default function handleChangeRole(payload, meetingId) {\n  check(payload.body, Object);\n  check(meetingId, String);\n\n  const { userId, role, changedBy } = payload.body;\n\n  return changeRole(role, userId, meetingId, changedBy);\n}\n","import Logger from '/imports/startup/server/logger';\nimport { check } from 'meteor/check';\nimport Users from '/imports/api/users';\n\nexport default function handleEmojiStatus({ body }, meetingId) {\n  const { userId, emoji } = body;\n\n  check(userId, String);\n  check(emoji, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      emojiTime: (new Date()).getTime(),\n      emoji,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Assigning user emoji status: ${err}`);\n      return;\n    }\n\n    if (numChanged) {\n      Logger.info(`Assigned user emoji status ${emoji} id=${userId} meeting=${meetingId}`);\n    }\n  };\n\n  return Users.update(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users/';\nimport addUser from '../modifiers/addUser';\nimport removeUser from '../modifiers/removeUser';\n\nexport default function handleGetUsers({ body }, meetingId) {\n  const { users } = body;\n\n  check(meetingId, String);\n  check(users, Array);\n\n  const usersIds = users.map(m => m.intId);\n\n  const usersToRemove = Users.find({\n    meetingId,\n    userId: { $nin: usersIds },\n  }, { fields: { userId: 1 } }).fetch();\n\n  usersToRemove.forEach(user => removeUser(meetingId, user.userId));\n\n  const usersAdded = [];\n  users.forEach((user) => {\n    usersAdded.push(addUser(meetingId, user));\n  });\n\n  return usersAdded;\n}\n","import Users from '/imports/api/users';\nimport PresentationPods from '/imports/api/presentation-pods';\nimport changePresenter from '/imports/api/users/server/modifiers/changePresenter';\nimport RedisPubSub from '/imports/startup/server/redis';\n\nfunction setPresenterInPodReqMsg(credentials) { // TODO-- switch to meetingId, etc\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'SetPresenterInPodReqMsg';\n\n  const { meetingId, requesterUserId, presenterId } = credentials;\n\n  const payload = {\n    podId: 'DEFAULT_PRESENTATION_POD',\n    nextPresenterId: presenterId,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n\nexport default function handlePresenterAssigned({ body }, meetingId) {\n  const { presenterId, assignedBy } = body;\n\n  changePresenter(true, presenterId, meetingId, assignedBy);\n\n  const selector = {\n    meetingId,\n    userId: { $ne: presenterId },\n    presenter: true,\n  };\n\n  const prevPresenter = Users.findOne(selector);\n\n  // no previous presenters\n  // The below code is responsible for set Meeting presenter to be default pod presenter as well.\n  // It's been handled here because right now akka-apps don't handle all cases scenarios.\n  if (!prevPresenter) {\n    const setPresenterPayload = {\n      meetingId,\n      requesterUserId: assignedBy,\n      presenterId,\n    };\n\n    const defaultPodSelector = {\n      meetingId,\n      podId: 'DEFAULT_PRESENTATION_POD',\n    };\n    const currentDefaultPodPresenter = PresentationPods.findOne(defaultPodSelector);\n    const { currentPresenterId } = currentDefaultPodPresenter;\n\n    if (currentPresenterId === '') {\n      return setPresenterInPodReqMsg(setPresenterPayload);\n    }\n\n    const oldPresenter = Users.findOne({ meetingId, userId: currentPresenterId, connectionStatus: 'offline' });\n\n    if (oldPresenter) {\n      return setPresenterInPodReqMsg(setPresenterPayload);\n    }\n\n    return true;\n  }\n\n  return changePresenter(false, prevPresenter.userId, meetingId, assignedBy);\n}\n","import { check } from 'meteor/check';\n\nimport removeUser from '../modifiers/removeUser';\n\nexport default function handleRemoveUser({ body }, meetingId) {\n  const { intId } = body;\n\n  check(meetingId, String);\n  check(intId, String);\n\n  return removeUser(meetingId, intId);\n}\n","import userEjected from '../modifiers/userEjected';\n\nexport default function handleEjectedUser({ header, body }) {\n  const { meetingId, userId } = header;\n  const { reasonCode } = body;\n\n  return userEjected(meetingId, userId, reasonCode);\n}\n","import { check } from 'meteor/check';\nimport userInactivityInspect from '../modifiers/userInactivityInspect';\n\nexport default function handleUserInactivityInspect({ header, body }, meetingId) {\n  const { userId } = header;\n  const { responseDelay } = body;\n\n  check(userId, String);\n  check(responseDelay, Match.Integer);\n  check(meetingId, String);\n\n\n  return userInactivityInspect(userId, responseDelay);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function userJoin(meetingId, userId, authToken) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserJoinMeetingReqMsg';\n\n  check(authToken, String);\n\n  const payload = {\n    userId,\n    authToken,\n    clientType: 'HTML5',\n  };\n\n  Logger.info(`User='${userId}' is joining meeting='${meetingId}' authToken='${authToken}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { check } from 'meteor/check';\n\nimport addUser from '../modifiers/addUser';\n\nexport default function handleUserJoined({ body }, meetingId) {\n  const user = body;\n\n  check(user, Object);\n\n  return addUser(meetingId, user);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport userJoin from './userJoin';\nimport pendingAuthenticationsStore from '../store/pendingAuthentications';\nimport createDummyUser from '../modifiers/createDummyUser';\nimport setConnectionIdAndAuthToken from '../modifiers/setConnectionIdAndAuthToken';\n\nconst clearOtherSessions = (sessionUserId, current = false) => {\n  const serverSessions = Meteor.server.sessions;\n  Object.keys(serverSessions)\n    .filter(i => serverSessions[i].userId === sessionUserId)\n    .filter(i => i !== current)\n    .forEach(i => serverSessions[i].close());\n};\n\nexport default function handleValidateAuthToken({ body }, meetingId) {\n  const {\n    userId,\n    valid,\n    authToken,\n    waitForApproval,\n  } = body;\n\n  check(userId, String);\n  check(authToken, String);\n  check(valid, Boolean);\n  check(waitForApproval, Boolean);\n\n  const pendingAuths = pendingAuthenticationsStore.take(meetingId, userId, authToken);\n\n  if (!valid) {\n    pendingAuths.forEach(\n      (pendingAuth) => {\n        try {\n          const { methodInvocationObject } = pendingAuth;\n          const connectionId = methodInvocationObject.connection.id;\n\n          // Schedule socket disconnection for this user, giving some time for client receiving the reason of disconnection\n          Meteor.setTimeout(() => {\n            methodInvocationObject.connection.close();\n          }, 2000);\n\n          Logger.info(`Closed connection ${connectionId} due to invalid auth token.`);\n        } catch (e) {\n          Logger.error(`Error closing socket for meetingId '${meetingId}', userId '${userId}', authToken ${authToken}`);\n        }\n      },\n    );\n\n    return;\n  }\n\n  if (valid) {\n    // Define user ID on connections\n    pendingAuths.forEach(\n      (pendingAuth) => {\n        const { methodInvocationObject } = pendingAuth;\n\n        /* Logic migrated from validateAuthToken method ( postponed to only run in case of success response ) - Begin */\n        const sessionId = `${meetingId}--${userId}`;\n        methodInvocationObject.setUserId(sessionId);\n\n        const User = Users.findOne({\n          meetingId,\n          userId,\n        });\n\n        if (!User) {\n          createDummyUser(meetingId, userId, authToken);\n        }\n\n        setConnectionIdAndAuthToken(meetingId, userId, methodInvocationObject.connection.id, authToken);\n        /* End of logic migrated from validateAuthToken */\n      },\n    );\n  }\n\n  const selector = {\n    meetingId,\n    userId,\n    clientType: 'HTML5',\n  };\n\n  const User = Users.findOne(selector);\n\n  // If we dont find the user on our collection is a flash user and we can skip\n  if (!User) return;\n\n  // Publish user join message\n  if (valid && !waitForApproval) {\n    Logger.info('User=', User);\n    userJoin(meetingId, userId, User.authToken);\n  }\n\n  const modifier = {\n    $set: {\n      validated: valid,\n      approved: !waitForApproval,\n      loginTime: Date.now(),\n      inactivityCheck: false,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Validating auth token: ${err}`);\n    }\n\n    if (numChanged) {\n      if (valid) {\n        const sessionUserId = `${meetingId}-${userId}`;\n        const currentConnectionId = User.connectionId ? User.connectionId : false;\n        clearOtherSessions(sessionUserId, currentConnectionId);\n      }\n\n      return Logger.info(`Validated auth token as ${valid} user=${userId} meeting=${meetingId}`);\n    }\n\n    return Logger.info('No auth to validate');\n  };\n\n  Users.update(selector, modifier, cb);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function assignPresenter(userId) { // TODO-- send username from client side\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'AssignPresenterReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(userId, String);\n\n  const User = Users.findOne({\n    meetingId,\n    userId,\n  });\n\n  if (!User) {\n    throw new Meteor.Error('user-not-found', 'You need a valid user to be able to set presenter');\n  }\n\n  const payload = {\n    newPresenterId: userId,\n    newPresenterName: User.name,\n    assignedBy: requesterUserId,\n    requesterId: requesterUserId,\n  };\n\n  Logger.verbose(`User '${userId}' setted as presenter by '${\n    requesterUserId}' from meeting '${meetingId}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function changeRole(userId, role) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeUserRoleCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(userId, String);\n  check(role, String);\n\n  const payload = {\n    userId,\n    role,\n    changedBy: requesterUserId,\n  };\n\n  Logger.verbose(`User '${userId}' set as '${role} role by '${requesterUserId}' from meeting '${meetingId}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport Users from '/imports/api/users';\nimport BannedUsers from '/imports/api/users/server/store/bannedUsers';\n\nexport default function removeUser(userId, banUser) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EjectUserFromMeetingCmdMsg';\n\n  const { meetingId, requesterUserId: ejectedBy } = extractCredentials(this.userId);\n\n  check(userId, String);\n\n  const payload = {\n    userId,\n    ejectedBy,\n    banUser,\n  };\n\n  const removedUser = Users.findOne({ meetingId, userId }, { extId: 1 });\n\n  if (banUser && removedUser) BannedUsers.add(meetingId, removedUser.extId);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, ejectedBy, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function setEmojiStatus(userId, status) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeUserEmojiCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(userId, String);\n\n  const payload = {\n    emoji: status,\n    userId,\n  };\n\n  Logger.verbose(`User '${userId}' emoji status updated to '${status}' by '${\n    requesterUserId}' from meeting '${meetingId}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport setEffectiveConnectionType from '../modifiers/setUserEffectiveConnectionType';\n\nexport default function setUserEffectiveConnectionType(effectiveConnectionType) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ChangeUserEffectiveConnectionMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(effectiveConnectionType, String);\n\n  const payload = {\n    meetingId,\n    userId: requesterUserId,\n    effectiveConnectionType,\n  };\n\n  setEffectiveConnectionType(meetingId, requesterUserId, effectiveConnectionType);\n\n  Logger.verbose(`User ${requesterUserId} effective connection updated to ${effectiveConnectionType}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function toggleUserLock(userId, lock) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'LockUserInMeetingCmdMsg';\n\n  const { meetingId, requesterUserId: lockedBy } = extractCredentials(this.userId);\n\n  check(lockedBy, String);\n  check(userId, String);\n  check(lock, Boolean);\n\n  const payload = {\n    lockedBy,\n    userId,\n    lock,\n  };\n\n  Logger.verbose(`User ${lockedBy} updated lock status from ${userId} to ${lock}\n  in meeting ${meetingId}`);\n\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, lockedBy, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport Users from '/imports/api/users';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userActivitySign() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserActivitySignCmdMsg';\n  const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n  const payload = {\n    userId,\n  };\n\n  const selector = {\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      inactivityCheck: false,\n    },\n  };\n\n  Users.update(selector, modifier); // TODO-- we should move this to a modifier\n\n  Logger.info(`User ${userId} sent a activity sign for meeting ${meetingId}`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function userLeaving(meetingId, userId, connectionId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserLeaveReqMsg';\n\n  check(userId, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const User = Users.findOne(selector);\n\n  if (!User) {\n    return Logger.info(`Skipping userLeaving. Could not find ${userId} in ${meetingId}`);\n  }\n\n  // If the current user connection is not the same that triggered the leave we skip\n  if (User.connectionId !== connectionId) {\n    return false;\n  }\n\n  const payload = {\n    userId,\n    sessionId: meetingId,\n  };\n\n  Logger.info(`User '${userId}' is leaving meeting '${meetingId}'`);\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, userId, payload);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userLeftMeeting() { // TODO-- spread the code to method/modifier/handler\n  // so we don't update the db in a method\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`leaving dummy user to collection: ${err}`);\n      return;\n    }\n    if (numChanged) {\n      Logger.info(`user left id=${requesterUserId} meeting=${meetingId}`);\n    }\n  };\n\n  return Users.update(\n    selector,\n    {\n      $set: {\n        loggedOut: true,\n      },\n    },\n    cb,\n  );\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Logger from '/imports/startup/server/logger';\nimport pendingAuthenticationsStore from '../store/pendingAuthentications';\nimport BannedUsers from '../store/bannedUsers';\n\nexport default function validateAuthToken(meetingId, requesterUserId, requesterToken, externalId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ValidateAuthTokenReqMsg';\n\n  // Check if externalId is banned from the meeting\n  if (externalId) {\n    if (BannedUsers.has(meetingId, externalId)) {\n      Logger.warn(`A banned user with extId ${externalId} tried to enter in meeting ${meetingId}`);\n      return;\n    }\n  }\n\n  // Store reference of methodInvocationObject ( to postpone the connection userId definition )\n  pendingAuthenticationsStore.add(meetingId, requesterUserId, requesterToken, this);\n\n  const payload = {\n    userId: requesterUserId,\n    authToken: requesterToken,\n  };\n\n  Logger.info(`User '${requesterUserId}' is trying to validate auth token for meeting '${meetingId}' from connection '${this.connection.id}'`);\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport addUser from '/imports/api/users/server/modifiers/addUser';\n\n\nexport default function addDialInUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, Object);\n\n  const USER_CONFIG = Meteor.settings.public.user;\n  const ROLE_VIEWER = USER_CONFIG.role_viewer;\n\n  const { intId, callerName } = voiceUser;\n\n  const voiceOnlyUser = {\n    intId,\n    extId: intId, // TODO\n    name: callerName,\n    role: ROLE_VIEWER.toLowerCase(),\n    guest: false,\n    authed: true,\n    waitingForAcceptance: false,\n    guestStatus: 'ALLOW',\n    emoji: 'none',\n    presenter: false,\n    locked: false, // TODO\n    avatar: '',\n    clientType: 'dial-in-user',\n  };\n\n  return addUser(meetingId, voiceOnlyUser);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Meetings from '/imports/api/meetings';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport _ from 'lodash';\nimport SanitizeHTML from 'sanitize-html';\n\nimport stringHash from 'string-hash';\nimport flat from 'flat';\n\nimport addVoiceUser from '/imports/api/voice-users/server/modifiers/addVoiceUser';\n\nconst COLOR_LIST = [\n  '#7b1fa2', '#6a1b9a', '#4a148c', '#5e35b1', '#512da8', '#4527a0',\n  '#311b92', '#3949ab', '#303f9f', '#283593', '#1a237e', '#1976d2', '#1565c0',\n  '#0d47a1', '#0277bd', '#01579b',\n];\n\nexport default function addUser(meetingId, userData) {\n  const user = userData;\n  const sanitizedName = SanitizeHTML(userData.name, {\n    allowedTags: [],\n    allowedAttributes: {},\n  });\n  // if user typed only tags\n  user.name = sanitizedName.length === 0\n    ? _.escape(userData.name)\n    : sanitizedName;\n\n  check(meetingId, String);\n\n  check(user, {\n    intId: String,\n    extId: String,\n    name: String,\n    role: String,\n    guest: Boolean,\n    authed: Boolean,\n    waitingForAcceptance: Match.Maybe(Boolean),\n    guestStatus: String,\n    emoji: String,\n    presenter: Boolean,\n    locked: Boolean,\n    avatar: String,\n    clientType: String,\n  });\n\n  const userId = user.intId;\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n  const Meeting = Meetings.findOne({ meetingId });\n\n  /* While the akka-apps dont generate a color we just pick one\n    from a list based on the userId */\n  const color = COLOR_LIST[stringHash(user.intId) % COLOR_LIST.length];\n\n  const modifier = {\n    $set: Object.assign(\n      {\n        meetingId,\n        connectionStatus: 'online',\n        sortName: user.name.trim().toLowerCase(),\n        color,\n        breakoutProps: {\n          isBreakoutUser: Meeting.meetingProp.isBreakout,\n          parentId: Meeting.breakoutProps.parentId,\n        },\n        effectiveConnectionType: null,\n        inactivityCheck: false,\n        responseDelay: 0,\n        loggedOut: false,\n      },\n      flat(user),\n    ),\n  };\n\n  // Only add an empty VoiceUser if there isn't one already and if the user coming in isn't a\n  // dial-in user. We want to avoid overwriting good data\n  if (user.clientType !== 'dial-in-user' && !VoiceUsers.findOne({ meetingId, intId: userId })) {\n    addVoiceUser(meetingId, {\n      voiceUserId: '',\n      intId: userId,\n      callerName: user.name,\n      callerNum: '',\n      muted: false,\n      talking: false,\n      callingWith: '',\n      listenOnly: false,\n      voiceConf: '',\n      joined: false,\n    });\n  }\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Adding user to collection: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n    if (insertedId) {\n      return Logger.info(`Added user id=${userId} meeting=${meetingId}`);\n    }\n\n    return Logger.info(`Upserted user id=${userId} meeting=${meetingId}`);\n  };\n\n  return Users.upsert(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport Meetings from '/imports/api/meetings';\nimport stopWatchingExternalVideo from '/imports/api/external-videos/server/methods/stopWatchingExternalVideo';\n\nexport default function changePresenter(presenter, userId, meetingId, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      presenter,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Changed user role: ${err}`);\n    }\n\n    if (numChanged) {\n      return Logger.info(`Changed presenter=${presenter} id=${userId} meeting=${meetingId}`\n      + `${changedBy ? ` changedBy=${changedBy}` : ''}`);\n    }\n\n    return null;\n  };\n\n  const meeting = Meetings.findOne({ meetingId });\n  if (meeting && meeting.externalVideoUrl) {\n    Logger.info(`ChangePresenter:There is external video being shared. Stopping it due to presenter change, ${meeting.externalVideoUrl}`);\n    stopWatchingExternalVideo({ meetingId, requesterUserId: userId });\n  }\n  return Users.update(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function changeRole(role, userId, meetingId, changedBy) {\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      role,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Changed user role: ${err}`);\n    }\n\n    if (numChanged) {\n      return Logger.info(`Changed user role=${role} id=${userId} meeting=${meetingId}`\n      + `${changedBy ? ` changedBy=${changedBy}` : ''}`);\n    }\n\n    return null;\n  };\n\n  return Users.update(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users/index';\n\nconst clearUsers = (meetingId) => {\n  if (meetingId) {\n    return Users.remove({ meetingId }, () => {\n      Logger.info(`Cleared Users (${meetingId})`);\n    });\n  }\n\n  return Users.remove({}, () => {\n    Logger.info('Cleared Users (all)');\n  });\n};\n\nexport default clearUsers;\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function createDummyUser(meetingId, userId, authToken) {\n  check(meetingId, String);\n  check(userId, String);\n  check(authToken, String);\n\n  const User = Users.findOne({ meetingId, userId });\n  if (User) {\n    throw new Meteor.Error('existing-user', 'Tried to create a dummy user for an existing user');\n  }\n\n  const doc = {\n    meetingId,\n    userId,\n    authToken,\n    clientType: 'HTML5',\n    validated: null,\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Creating dummy user to collection: ${err}`);\n      return;\n    }\n    if (numChanged) {\n      Logger.info(`Created dummy user id=${userId} token=${authToken} meeting=${meetingId}`);\n    }\n  };\n\n  return Users.insert(doc, cb);\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport VideoStreams from '/imports/api/video-streams';\nimport Logger from '/imports/startup/server/logger';\nimport stopWatchingExternalVideo from '/imports/api/external-videos/server/methods/stopWatchingExternalVideo';\nimport clearUserInfoForRequester from '/imports/api/users-infos/server/modifiers/clearUserInfoForRequester';\n\nconst clearAllSessions = (sessionUserId) => {\n  const serverSessions = Meteor.server.sessions;\n  Object.keys(serverSessions)\n    .filter(i => serverSessions[i].userId === sessionUserId)\n    .forEach(i => serverSessions[i].close());\n};\n\nexport default function removeUser(meetingId, userId) {\n  check(meetingId, String);\n  check(userId, String);\n\n  const userToRemove = Users.findOne({ userId, meetingId });\n\n  if (userToRemove) {\n    const { presenter } = userToRemove;\n    if (presenter) {\n      stopWatchingExternalVideo({ meetingId, requesterUserId: userId });\n    }\n  }\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      connectionStatus: 'offline',\n      validated: false,\n      emoji: 'none',\n      presenter: false,\n      role: 'VIEWER',\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing user from collection: ${err}`);\n    }\n\n    const sessionUserId = `${meetingId}-${userId}`;\n    clearAllSessions(sessionUserId);\n\n    clearUserInfoForRequester(meetingId, userId);\n\n    return Logger.info(`Removed user id=${userId} meeting=${meetingId}`);\n  };\n  VideoStreams.remove({ meetingId, userId });\n  return Users.update(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setConnectionIdAndAuthToken(meetingId, userId, connectionId, authToken) {\n  check(meetingId, String);\n  check(userId, String);\n  check(authToken, String);\n  check(connectionId, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      connectionId,\n      authToken,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Updating connectionId user=${userId}: ${err}`);\n      return;\n    }\n\n    if (numChanged) {\n      Logger.info(`Updated connectionId and authToken user=${userId} connectionId=${connectionId} meeting=${meetingId} authToken=${authToken}`);\n    }\n  };\n\n  return Users.update(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function setUserEffectiveConnectionType(meetingId, userId, effectiveConnectionType) {\n  check(meetingId, String);\n  check(userId, String);\n  check(effectiveConnectionType, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    effectiveConnectionType: { $ne: effectiveConnectionType },\n  };\n\n  const modifier = {\n    $set: {\n      effectiveConnectionType,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Updating user ${userId}: ${err}`);\n    }\n\n    if (numChanged) {\n      Logger.info(`Updated user ${userId} effective connection to ${effectiveConnectionType} in meeting ${meetingId}`);\n    }\n  };\n\n  return Users.update(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\nimport clearUserInfoForRequester from '/imports/api/users-infos/server/modifiers/clearUserInfoForRequester';\n\nexport default function userEjected(meetingId, userId, ejectedReason) {\n  check(meetingId, String);\n  check(userId, String);\n  check(ejectedReason, String);\n\n  const selector = {\n    meetingId,\n    userId,\n  };\n\n  const modifier = {\n    $set: {\n      ejected: true,\n      ejectedReason,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Ejecting user from collection: ${err}`);\n    }\n\n    if (numChanged) {\n      clearUserInfoForRequester(meetingId, userId);\n      return Logger.info(`Ejected user id=${userId} meeting=${meetingId} reason=${ejectedReason}`);\n    }\n\n    return null;\n  };\n\n  return Users.update(selector, modifier, cb);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nexport default function userInactivityInspect(userId, responseDelay) {\n  check(userId, String);\n  check(responseDelay, Match.Integer);\n\n  const selector = {\n    userId,\n    inactivityCheck: false,\n  };\n\n  const modifier = {\n    $set: {\n      inactivityCheck: true,\n      responseDelay,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Inactivity check for user ${userId}: ${err}`);\n    }\n\n    if (numChanged) {\n      return Logger.info(`Updated user ${userId} with inactivity inspect`);\n    }\n\n    return null;\n  };\n\n  return Users.update(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\n\nclass BannedUsers {\n  constructor() {\n    Logger.debug('BannedUsers :: Initializing');\n    this.store = {};\n  }\n\n  init(meetingId) {\n    Logger.debug('BannedUsers :: init', meetingId);\n\n    if (!this.store[meetingId]) this.store[meetingId] = new Set();\n  }\n\n  add(meetingId, externalId) {\n    Logger.debug('BannedUsers :: add', { meetingId, externalId });\n    if (!this.store[meetingId]) this.store[meetingId] = new Set();\n\n    this.store[meetingId].add(externalId);\n  }\n\n  delete(meetingId) {\n    Logger.debug('BannedUsers :: delete', meetingId);\n    delete this.store[meetingId];\n  }\n\n  has(meetingId, externalId) {\n    Logger.debug('BannedUsers :: has', { meetingId, externalId });\n    if (!this.store[meetingId]) this.store[meetingId] = new Set();\n\n    return this.store[meetingId].has(externalId);\n  }\n}\n\nexport default new BannedUsers();\n","import Logger from '/imports/startup/server/logger';\n\nclass PendingAuthentitcations {\n  constructor() {\n    Logger.debug('PendingAuthentitcations :: constructor');\n    this.store = [];\n  }\n\n  generateKey(meetingId, userId, authToken) {\n    // Protect against separator injection\n    meetingId = meetingId.replace(/ /g, '');\n    userId = userId.replace(/ /g, '');\n    authToken = authToken.replace(/ /g, '');\n\n    // Space separated key\n    return `${meetingId} ${userId} ${authToken}`;\n  }\n\n  add(meetingId, userId, authToken, methodInvocationObject) {\n    Logger.debug('PendingAuthentitcations :: add', { meetingId, userId, authToken });\n    this.store.push({\n      key: this.generateKey(meetingId, userId, authToken),\n      meetingId,\n      userId,\n      authToken,\n      methodInvocationObject,\n    });\n  }\n\n  take(meetingId, userId, authToken) {\n    const key = this.generateKey(meetingId, userId, authToken);\n    Logger.debug('PendingAuthentitcations :: take', {\n      key, meetingId, userId, authToken,\n    });\n\n    // find matches\n    const matches = this.store.filter(e => e.key === key);\n\n    // remove matches (if any)\n    if (matches.length) {\n      this.store = this.store.filter(e => e.key !== key);\n    }\n\n    // return matches\n    return matches;\n  }\n}\nexport default new PendingAuthentitcations();\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleRemoveUser from './handlers/removeUser';\nimport handleUserJoined from './handlers/userJoined';\nimport handleValidateAuthToken from './handlers/validateAuthToken';\nimport handlePresenterAssigned from './handlers/presenterAssigned';\nimport handleEmojiStatus from './handlers/emojiStatus';\nimport handleGetUsers from './handlers/getUsers';\nimport handleUserEjected from './handlers/userEjected';\nimport handleChangeRole from './handlers/changeRole';\nimport handleUserInactivityInspect from './handlers/userInactivityInspect';\n\nRedisPubSub.on('PresenterAssignedEvtMsg', handlePresenterAssigned);\nRedisPubSub.on('UserJoinedMeetingEvtMsg', handleUserJoined);\nRedisPubSub.on('UserLeftMeetingEvtMsg', handleRemoveUser);\nRedisPubSub.on('ValidateAuthTokenRespMsg', handleValidateAuthToken);\nRedisPubSub.on('UserEmojiChangedEvtMsg', handleEmojiStatus);\nRedisPubSub.on('SyncGetUsersMeetingRespMsg', handleGetUsers);\nRedisPubSub.on('UserEjectedFromMeetingEvtMsg', handleUserEjected);\nRedisPubSub.on('UserRoleChangedEvtMsg', handleChangeRole);\nRedisPubSub.on('UserInactivityInspectMsg', handleUserInactivityInspect);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport validateAuthToken from './methods/validateAuthToken';\nimport setEmojiStatus from './methods/setEmojiStatus';\nimport assignPresenter from './methods/assignPresenter';\nimport changeRole from './methods/changeRole';\nimport removeUser from './methods/removeUser';\nimport toggleUserLock from './methods/toggleUserLock';\nimport setUserEffectiveConnectionType from './methods/setUserEffectiveConnectionType';\nimport userActivitySign from './methods/userActivitySign';\nimport userLeftMeeting from './methods/userLeftMeeting';\n\nMeteor.methods({\n  setEmojiStatus,\n  assignPresenter,\n  changeRole,\n  removeUser,\n  validateAuthToken,\n  toggleUserLock,\n  setUserEffectiveConnectionType,\n  userActivitySign,\n  userLeftMeeting,\n});\n","import _ from 'lodash';\nimport Users from '/imports/api/users';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nimport userLeaving from './methods/userLeaving';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst ROLE_MODERATOR = Meteor.settings.public.user.role_moderator;\n\nfunction currentUser() {\n  if (!this.userId) {\n    return Users.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n\n  const connectionId = this.connection.id;\n  const onCloseConnection = Meteor.bindEnvironment(() => {\n    try {\n      userLeaving(meetingId, requesterUserId, connectionId);\n    } catch (e) {\n      Logger.error(`Exception while executing userLeaving: ${e}`);\n    }\n  });\n\n  this._session.socket.on('close', _.debounce(onCloseConnection, 100));\n\n  const selector = {\n    meetingId,\n    userId: requesterUserId,\n  };\n\n  const options = {\n    fields: {\n      user: false,\n      authToken: false, // Not asking for authToken from client side but also not exposing it\n    },\n  };\n\n  return Users.find(selector, options);\n}\n\nfunction publishCurrentUser(...args) {\n  const boundUsers = currentUser.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('current-user', publishCurrentUser);\n\nfunction users(role) {\n  if (!this.userId) {\n    return Users.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const selector = {\n    $or: [\n      { meetingId },\n    ],\n  };\n\n  const User = Users.findOne({ userId: requesterUserId, meetingId }, { fields: { role: 1 } });\n  if (!!User && User.role === ROLE_MODERATOR) {\n    selector.$or.push({\n      'breakoutProps.isBreakoutUser': true,\n      'breakoutProps.parentId': meetingId,\n      connectionStatus: 'online',\n    });\n  }\n\n  const options = {\n    fields: {\n      authToken: false,\n      lastPing: false,\n    },\n  };\n\n  Logger.debug(`Publishing Users for ${meetingId} ${requesterUserId}`);\n\n  return Users.find(selector, options);\n}\n\nfunction publish(...args) {\n  const boundUsers = users.bind(this);\n  return boundUsers(...args);\n}\n\nMeteor.publish('users', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst Users = new Mongo.Collection('users');\n\nif (Meteor.isServer) {\n  // types of queries for the users:\n  // 1. meetingId\n  // 2. meetingId, userId\n\n  Users._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default Users;\n","import { check } from 'meteor/check';\nimport addUserInfo from '../modifiers/addUserInfo';\n\nexport default function handleUserInformation({ header, body }) {\n  check(body, Object);\n  check(header, Object);\n\n  const { userInfo } = body;\n  const { userId, meetingId } = header;\n\n  check(userInfo, Array);\n  check(userId, String);\n  check(meetingId, String);\n\n  return addUserInfo(userInfo, userId, meetingId);\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function removeUserInformation() {\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  const selector = {\n    meetingId,\n    requesterUserId,\n  };\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Removing user information from collection: ${err}`);\n    }\n    return Logger.info(`Removed user information: requester id=${requesterUserId} meeting=${meetingId}`);\n  };\n  return UserInfos.remove(selector, cb);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function getUserInformation(externalUserId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toThirdParty;\n  const EVENT_NAME = 'LookUpUserReqMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(externalUserId, String);\n\n  const payload = {\n    externalUserId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserInfo(userInfo, requesterUserId, meetingId) {\n  const info = {\n    meetingId,\n    requesterUserId,\n    userInfo,\n  };\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Adding user information to collection: ${err}`);\n    }\n    return Logger.info(`Added user information: requester id=${requesterUserId} meeting=${meetingId}`);\n  };\n\n  return UserInfos.insert(info, cb);\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersInfo(meetingId) {\n  return UserInfos.remove({ meetingId }, () => {\n    Logger.info(`Cleared User Infos (${meetingId})`);\n  });\n}\n","import UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersInfoForRequester(meetingId, requesterUserId) {\n  return UserInfos.remove({ meetingId }, () => {\n    Logger.info(`Cleared User Infos requested by user=${requesterUserId}`);\n  });\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleUserInformation from './handlers/userInformation';\n\nRedisPubSub.on('LookUpUserRespMsg', handleUserInformation);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport requestUserInformation from './methods/requestUserInformation';\nimport removeUserInformation from './methods/removeUserInformation';\n\nMeteor.methods({\n  requestUserInformation,\n  removeUserInformation,\n});\n","import { Meteor } from 'meteor/meteor';\nimport UserInfos from '/imports/api/users-infos';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction userInfos() {\n  if (!this.userId) {\n    return UserInfos.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing user infos requested by user=${requesterUserId}`);\n\n  return UserInfos.find({ meetingId, requesterUserId });\n}\n\nfunction publish(...args) {\n  const boundUserInfos = userInfos.bind(this);\n  return boundUserInfos(...args);\n}\n\nMeteor.publish('users-infos', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst UserInfos = new Mongo.Collection('users-infos');\n\nif (Meteor.isServer) {\n  UserInfos._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default UserInfos;\n","import { check } from 'meteor/check';\nimport addUserSetting from '/imports/api/users-settings/server/modifiers/addUserSetting';\nimport logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nconst oldParameters = {\n  askForFeedbackOnLogout: 'bbb_ask_for_feedback_on_logout',\n  autoJoin: 'bbb_auto_join_audio',\n  autoShareWebcam: 'bbb_auto_share_webcam',\n  autoSwapLayout: 'bbb_auto_swap_layout',\n  clientTitle: 'bbb_client_title',\n  customStyle: 'bbb_custom_style',\n  customStyleUrl: 'bbb_custom_style_url',\n  displayBrandingArea: 'bbb_display_branding_area',\n  enableScreensharing: 'bbb_enable_screen_sharing',\n  enableVideo: 'bbb_enable_video',\n  forceListenOnly: 'bbb_force_listen_only',\n  hidePresentation: 'bbb_hide_presentation',\n  listenOnlyMode: 'bbb_listen_only_mode',\n  multiUserPenOnly: 'bbb_multi_user_pen_only',\n  multiUserTools: 'bbb_multi_user_tools',\n  outsideToggleRecording: 'bbb_outside_toggle_recording',\n  outsideToggleSelfVoice: 'bbb_outside_toggle_self_voice',\n  presenterTools: 'bbb_presenter_tools',\n  shortcuts: 'bbb_shortcuts',\n  skipCheck: 'bbb_skip_check_audio',\n};\n\nconst oldParametersKeys = Object.keys(oldParameters);\n\nconst currentParameters = [\n  // APP\n  'bbb_ask_for_feedback_on_logout',\n  'bbb_auto_join_audio',\n  'bbb_client_title',\n  'bbb_force_listen_only',\n  'bbb_listen_only_mode',\n  'bbb_skip_check_audio',\n  // BRANDING\n  'bbb_display_branding_area',\n  // SHORTCUTS\n  'bbb_shortcuts',\n  // KURENTO\n  'bbb_auto_share_webcam',\n  'bbb_preferred_camera_profile',\n  'bbb_enable_screen_sharing',\n  'bbb_enable_video',\n  'bbb_record_video',\n  'bbb_skip_video_preview',\n  'bbb_mirror_own_webcam',\n  // PRESENTATION\n  'bbb_force_restore_presentation_on_new_events',\n  // WHITEBOARD\n  'bbb_multi_user_pen_only',\n  'bbb_presenter_tools',\n  'bbb_multi_user_tools',\n  // SKINNING/THEMMING\n  'bbb_custom_style',\n  'bbb_custom_style_url',\n  // LAYOUT\n  'bbb_auto_swap_layout',\n  'bbb_hide_presentation',\n  'bbb_show_participants_on_login',\n  'bbb_show_public_chat_on_login',\n  // OUTSIDE COMMANDS\n  'bbb_outside_toggle_self_voice',\n  'bbb_outside_toggle_recording',\n];\n\nfunction valueParser(val) {\n  try {\n    const parsedValue = JSON.parse(val.toLowerCase());\n    return parsedValue;\n  } catch (error) {\n    logger.warn(`addUserSettings:Parameter ${val} could not be parsed (was not json)`);\n    return val;\n  }\n}\n\nexport default function addUserSettings(settings) {\n  check(settings, [Object]);\n\n  const { meetingId, requesterUserId: userId } = extractCredentials(this.userId);\n\n  let parameters = {};\n\n  settings.forEach((el) => {\n    const settingKey = Object.keys(el).shift();\n\n    if (currentParameters.includes(settingKey)) {\n      if (!Object.keys(parameters).includes(settingKey)) {\n        parameters = {\n          [settingKey]: valueParser(el[settingKey]),\n          ...parameters,\n        };\n      } else {\n        parameters[settingKey] = el[settingKey];\n      }\n      return;\n    }\n\n    if (oldParametersKeys.includes(settingKey)) {\n      const matchingNewKey = oldParameters[settingKey];\n      if (!Object.keys(parameters).includes(matchingNewKey)) {\n        parameters = {\n          [matchingNewKey]: valueParser(el[settingKey]),\n          ...parameters,\n        };\n      }\n      return;\n    }\n\n    logger.warn(`Parameter ${settingKey} not handled`);\n  });\n\n  const settingsAdded = [];\n  Object.entries(parameters).forEach((el) => {\n    const setting = el[0];\n    const value = el[1];\n    settingsAdded.push(addUserSetting(meetingId, userId, setting, value));\n  });\n\n  return settingsAdded;\n}\n","import { check } from 'meteor/check';\nimport UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function addUserSetting(meetingId, userId, setting, value) {\n  check(meetingId, String);\n  check(userId, String);\n  check(setting, String);\n  check(value, Match.Any);\n\n  const selector = {\n    meetingId,\n    userId,\n    setting,\n  };\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      setting,\n      value,\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Adding user setting to collection: ${err}`);\n    }\n\n    return Logger.verbose(`Upserted user setting for meetingId=${meetingId} userId=${userId} setting=${setting}`);\n  };\n\n  return UserSettings.upsert(selector, modifier, cb);\n}\n","import UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function clearUsersSettings(meetingId) {\n  return UserSettings.remove({ meetingId }, () => {\n    Logger.info(`Cleared User Settings (${meetingId})`);\n  });\n}\n","import './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport addUserSettings from './methods/addUserSettings';\n\nMeteor.methods({\n  addUserSettings,\n});\n","import { Meteor } from 'meteor/meteor';\nimport UserSettings from '/imports/api/users-settings';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport User from '/imports/api/users';\n\nfunction userSettings() {\n  if (!this.userId) {\n    return UserSettings.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const currentUser = User.findOne({ userId: requesterUserId });\n\n  if (currentUser && currentUser.breakoutProps.isBreakoutUser) {\n    const { parentId } = currentUser.breakoutProps;\n\n    const [externalId] = currentUser.extId.split('-');\n\n    const mainRoomUserSettings = UserSettings.find({ meetingId: parentId, userId: externalId });\n\n    mainRoomUserSettings.map(({ setting, value }) => ({\n      meetingId,\n      setting,\n      userId: requesterUserId,\n      value,\n    })).forEach((doc) => {\n      const selector = {\n        meetingId,\n        setting: doc.setting,\n      };\n\n      UserSettings.upsert(selector, doc);\n    });\n\n    Logger.debug(`Publishing user settings for user=${requesterUserId}`);\n\n    return UserSettings.find({ meetingId, userId: requesterUserId });\n  }\n\n  Logger.debug(`Publishing user settings for user=${requesterUserId}`);\n\n  return UserSettings.find({ meetingId, userId: requesterUserId });\n}\n\nfunction publish(...args) {\n  const boundUserSettings = userSettings.bind(this);\n  return boundUserSettings(...args);\n}\n\nMeteor.publish('users-settings', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst UserSettings = new Mongo.Collection('users-settings');\n\nif (Meteor.isServer) {\n  UserSettings._ensureIndex({\n    meetingId: 1, userId: 1,\n  });\n}\n\nexport default UserSettings;\n","import { check } from 'meteor/check';\nimport sharedWebcam from '../modifiers/sharedWebcam';\nimport { isValidStream } from '/imports/api/video-streams/server/helpers';\n\nexport default function handleUserSharedHtml5Webcam({ header, body }, meetingId) {\n  const { userId, stream } = body;\n\n  check(header, Object);\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  if (!isValidStream(stream)) return false;\n\n  return sharedWebcam(meetingId, userId, stream);\n}\n","import { check } from 'meteor/check';\nimport unsharedWebcam from '../modifiers/unsharedWebcam';\nimport { isValidStream } from '/imports/api/video-streams/server/helpers';\n\nexport default function handleUserUnsharedHtml5Webcam({ header, body }, meetingId) {\n  const { userId, stream } = body;\n\n  check(header, Object);\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  if (!isValidStream(stream)) return false;\n\n  return unsharedWebcam(meetingId, userId, stream);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userShareWebcam(stream) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserBroadcastCamStartMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.info(`user sharing webcam: ${meetingId} ${requesterUserId}`);\n\n  check(stream, String);\n\n  // const actionName = 'joinVideo';\n  /* TODO throw an error if user has no permission to share webcam\n  if (!isAllowedTo(actionName, credentials)) {\n    throw new Meteor.Error('not-allowed', `You are not allowed to share webcam`);\n  } */\n\n  const payload = {\n    stream,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function userUnshareWebcam(stream) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'UserBroadcastCamStopMsg';\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.info(`user unsharing webcam: ${meetingId} ${requesterUserId}`);\n\n  check(stream, String);\n\n  // const actionName = 'joinVideo';\n  /* TODO throw an error if user has no permission to share webcam\n  if (!isAllowedTo(actionName, credentials)) {\n    throw new Meteor.Error('not-allowed', `You are not allowed to share webcam`);\n  } */\n\n  const payload = {\n    stream,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\n\nexport default function clearVideoStreams(meetingId) {\n  if (meetingId) {\n    return VideoStreams.remove({ meetingId }, () => {\n      Logger.info(`Cleared VideoStreams in (${meetingId})`);\n    });\n  }\n\n  return VideoStreams.remove({}, () => {\n    Logger.info('Cleared VideoStreams in all meetings');\n  });\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\nimport {\n  getDeviceId,\n  getUserName,\n} from '/imports/api/video-streams/server/helpers';\n\nexport default function sharedWebcam(meetingId, userId, stream) {\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  const deviceId = getDeviceId(stream);\n  const name = getUserName(userId);\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  const modifier = {\n    $set: {\n      stream,\n      name,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Error setting stream: ${err}`);\n    }\n\n    if (numChanged) {\n      return Logger.info(`Updated stream=${stream} meeting=${meetingId}`);\n    }\n  };\n\n  return VideoStreams.upsert(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { check } from 'meteor/check';\nimport { getDeviceId } from '/imports/api/video-streams/server/helpers';\n\nexport default function unsharedWebcam(meetingId, userId, stream) {\n  check(meetingId, String);\n  check(userId, String);\n  check(stream, String);\n\n  const deviceId = getDeviceId(stream);\n\n  const selector = {\n    meetingId,\n    userId,\n    deviceId,\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Error removing stream: ${err}`);\n    }\n\n    if (numChanged) {\n      return Logger.info(`Removed stream=${stream} meeting=${meetingId}`);\n    }\n  };\n\n  return VideoStreams.remove(selector, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleUserSharedHtml5Webcam from './handlers/userSharedHtml5Webcam';\nimport handleUserUnsharedHtml5Webcam from './handlers/userUnsharedHtml5Webcam';\n\nRedisPubSub.on('UserBroadcastCamStartedEvtMsg', handleUserSharedHtml5Webcam);\nRedisPubSub.on('UserBroadcastCamStoppedEvtMsg', handleUserUnsharedHtml5Webcam);\n","import Logger from '/imports/startup/server/logger';\nimport Users from '/imports/api/users';\n\nconst FLASH_STREAM_REGEX = /^([A-z0-9]+)-([A-z0-9]+)-([A-z0-9]+)(-recorded)?$/;\nconst TOKEN = '_';\n\nconst isValidStream = stream => !FLASH_STREAM_REGEX.test(stream);\nconst getDeviceId = (stream) => {\n  const splitStream = stream.split(TOKEN);\n  if (splitStream.length === 3) return splitStream[2];\n  Logger.warn(`Could not get deviceId from stream=${stream}`);\n  return stream;\n};\n\nconst getUserName = (userId) => {\n  const user = Users.findOne(\n    { userId },\n    { fields: { name: 1 } },\n  );\n  if (user) return user.name;\n  return userId;\n};\n\nexport {\n  isValidStream,\n  getDeviceId,\n  getUserName,\n};\n","import './eventHandlers';\nimport './methods';\nimport './publisher';\n","import { Meteor } from 'meteor/meteor';\nimport userShareWebcam from './methods/userShareWebcam';\nimport userUnshareWebcam from './methods/userUnshareWebcam';\n\nMeteor.methods({\n  userShareWebcam,\n  userUnshareWebcam,\n});\n","import { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport VideoStreams from '/imports/api/video-streams';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction videoStreams() {\n  if (!this.userId) {\n    return VideoStreams.find({ meetingId: '' });\n  }\n  const { meetingId } = extractCredentials(this.userId);\n\n  Logger.debug(`video users of meeting id=${meetingId}`);\n\n  const selector = {\n    meetingId,\n  };\n\n  return VideoStreams.find(selector);\n}\n\nfunction publish(...args) {\n  const boundVideoStreams = videoStreams.bind(this);\n  return boundVideoStreams(...args);\n}\n\nMeteor.publish('video-streams', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VideoStreams = new Mongo.Collection('video-streams');\n\nif (Meteor.isServer) {\n  // types of queries for the video users:\n  // 2. meetingId\n\n  VideoStreams._ensureIndex({ meetingId: 1 });\n}\n\nexport default VideoStreams;\n","import { check } from 'meteor/check';\nimport VoiceCallState from '/imports/api/voice-call-states';\nimport Logger from '/imports/startup/server/logger';\n\n// \"CALL_STARTED\", \"IN_ECHO_TEST\", \"IN_CONFERENCE\", \"CALL_ENDED\"\n\nexport default function handleVoiceCallStateEvent({ body }, meetingId) {\n  const {\n    voiceConf,\n    clientSession,\n    userId,\n    callerName,\n    callState,\n  } = body;\n\n  check(meetingId, String);\n  check(voiceConf, String);\n  check(clientSession, String);\n  check(userId, String);\n  check(callerName, String);\n  check(callState, String);\n\n  const selector = {\n    meetingId,\n    userId,\n    clientSession,\n  };\n\n  const modifier = {\n    $set: {\n      meetingId,\n      userId,\n      voiceConf,\n      clientSession,\n      callState,\n    },\n  };\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Update voice call state=${userId}: ${err}`);\n    }\n\n    return Logger.debug(`Update voice call state=${userId} meeting=${meetingId} clientSession=${clientSession} callState=${callState}`);\n  };\n\n  return VoiceCallState.upsert(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\nimport VoiceCallStates from '/imports/api/voice-users';\n\nexport default function clearVoiceCallStates(meetingId) {\n  if (meetingId) {\n    return VoiceCallStates.remove({ meetingId }, () => {\n      Logger.info(`Cleared VoiceCallStates in (${meetingId})`);\n    });\n  }\n\n  return VoiceCallStates.remove({}, () => {\n    Logger.info('Cleared VoiceCallStates in all meetings');\n  });\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport handleVoiceCallStateEvent from './handlers/voiceCallStateEvent';\n\nRedisPubSub.on('VoiceCallStateEvtMsg', handleVoiceCallStateEvent);\n","import './eventHandlers';\nimport './publishers';\n","import VoiceCallStates from '/imports/api/voice-call-states';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction voiceCallStates() {\n  if (!this.userId) {\n    return VoiceCallStates.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing Voice Call States for ${meetingId} ${requesterUserId}`);\n\n  return VoiceCallStates.find({ meetingId, userId: requesterUserId });\n}\n\nfunction publish(...args) {\n  const boundVoiceCallStates = voiceCallStates.bind(this);\n  return boundVoiceCallStates(...args);\n}\n\nMeteor.publish('voice-call-states', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VoiceCallStates = new Mongo.Collection('voiceCallStates');\n\nif (Meteor.isServer) {\n  // types of queries for the voice users:\n  // 1. intId\n  // 2. meetingId, intId\n\n  VoiceCallStates._ensureIndex({ meetingId: 1, userId: 1 });\n}\n\nexport default VoiceCallStates;\n","import { check } from 'meteor/check';\nimport VoiceUsers from '/imports/api/voice-users/';\nimport Meetings from '/imports/api/meetings';\nimport addVoiceUser from '../modifiers/addVoiceUser';\nimport removeVoiceUser from '../modifiers/removeVoiceUser';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleGetVoiceUsers({ body }, meetingId) {\n  const { users } = body;\n\n  check(meetingId, String);\n  check(users, Array);\n\n  const meeting = Meetings.findOne({ meetingId }, { fields: { 'voiceProp.voiceConf': 1 } });\n  const usersIds = users.map(m => m.intId);\n\n  const voiceUsersIdsToUpdate = VoiceUsers.find({\n    meetingId,\n    intId: { $in: usersIds },\n  }, { fields: { intId: 1 } }).fetch().map(m => m.intId);\n\n  const voiceUsersUpdated = [];\n  users.forEach((user) => {\n    if (voiceUsersIdsToUpdate.indexOf(user.intId) >= 0) {\n      // user already exist, then update\n      voiceUsersUpdated.push(updateVoiceUser(meetingId, {\n        intId: user.intId,\n        voiceUserId: user.voiceUserId,\n        talking: user.talking,\n        muted: user.muted,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      }));\n    } else {\n      // user doesn't exist yet, then add it\n      addVoiceUser(meetingId, {\n        voiceUserId: user.voiceUserId,\n        intId: user.intId,\n        callerName: user.callerName,\n        callerNum: user.callerNum,\n        muted: user.muted,\n        talking: user.talking,\n        callingWith: user.callingWith,\n        listenOnly: user.listenOnly,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n    }\n  });\n\n  // removing extra users already existing in Mongo\n  const voiceUsersToRemove = VoiceUsers.find({\n    meetingId,\n    intId: { $nin: usersIds },\n  }).fetch();\n  voiceUsersToRemove.forEach(user => removeVoiceUser(meetingId, {\n    voiceConf: meeting.voiceProp.voiceConf,\n    voiceUserId: user.voiceUserId,\n    intId: user.intId,\n  }));\n\n  return voiceUsersUpdated;\n}\n","import { check } from 'meteor/check';\nimport Users from '/imports/api/users';\nimport addDialInUser from '/imports/api/users/server/modifiers/addDialInUser';\nimport addVoiceUser from '../modifiers/addVoiceUser';\n\n\nexport default function handleJoinVoiceUser({ body }, meetingId) {\n  const voiceUser = body;\n  voiceUser.joined = true;\n\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    intId: String,\n    voiceUserId: String,\n    callerName: String,\n    callerNum: String,\n    muted: Boolean,\n    talking: Boolean,\n    callingWith: String,\n    listenOnly: Boolean,\n    joined: Boolean,\n  });\n\n  const {\n    intId,\n  } = voiceUser;\n\n  const User = Users.findOne({\n    meetingId,\n    intId,\n    connectionStatus: 'online',\n  });\n\n  if (!User) {\n    /* voice-only user - called into the conference */\n    addDialInUser(meetingId, voiceUser);\n  }\n\n  return addVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\n\nimport removeVoiceUser from '/imports/api/voice-users/server/modifiers/removeVoiceUser';\nimport removeUser from '/imports/api/users/server/modifiers/removeUser';\nimport Users from '/imports/api/users';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    intId: String,\n    voiceUserId: String,\n  });\n\n  const {\n    intId,\n    voiceUserId,\n  } = voiceUser;\n\n  const isDialInUser = (userId, meetingID) => !!Users.findOne({ meetingId: meetingID, userId, clientType: 'dial-in-user' });\n\n  // if the user is dial-in, leaving voice also means leaving userlist\n  if (isDialInUser(voiceUserId, meetingId)) removeUser(meetingId, intId);\n\n  return removeVoiceUser(meetingId, voiceUser);\n}\n","import changeMuteMeeting from '../modifiers/changeMuteMeeting';\n\nexport default function handleMeetingMuted({ body }, meetingId) {\n  return changeMuteMeeting(meetingId, body);\n}\n","import { check } from 'meteor/check';\n\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  // If a person is muted we have to force them to not talking\n  if (voiceUser.muted) {\n    voiceUser.talking = false;\n  }\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import { check } from 'meteor/check';\n\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\n\nexport default function handleVoiceUpdate({ body }, meetingId) {\n  const voiceUser = body;\n\n  check(meetingId, String);\n\n  return updateVoiceUser(meetingId, voiceUser);\n}\n","import VoiceUsers from '/imports/api/voice-users/';\nimport Meetings from '/imports/api/meetings';\nimport addDialInUser from '/imports/api/users/server/modifiers/addDialInUser';\nimport removeVoiceUser from '../modifiers/removeVoiceUser';\nimport updateVoiceUser from '../modifiers/updateVoiceUser';\nimport addVoiceUser from '../modifiers/addVoiceUser';\n\n\nexport default function handleVoiceUsers({ header, body }) {\n  const { voiceUsers } = body;\n  const { meetingId } = header;\n\n  const meeting = Meetings.findOne({ meetingId }, { fields: { 'voiceProp.voiceConf': 1 } });\n  const usersIds = voiceUsers.map(m => m.intId);\n\n  const voiceUsersIdsToUpdate = VoiceUsers.find({\n    meetingId,\n    intId: { $in: usersIds },\n  }, { fields: { intId: 1 } }).fetch().map(m => m.intId);\n\n  const voiceUsersUpdated = [];\n  voiceUsers.forEach((voice) => {\n    if (voiceUsersIdsToUpdate.indexOf(voice.intId) >= 0) {\n      // user already exist, then update\n      voiceUsersUpdated.push(updateVoiceUser(meetingId, {\n        intId: voice.intId,\n        voiceUserId: voice.voiceUserId,\n        talking: voice.talking,\n        muted: voice.muted,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      }));\n    } else {\n      // user doesn't exist yet, then add it\n      addVoiceUser(meetingId, {\n        voiceUserId: voice.voiceUserId,\n        intId: voice.intId,\n        callerName: voice.callerName,\n        callerNum: voice.callerNum,\n        muted: voice.muted,\n        talking: voice.talking,\n        callingWith: voice.callingWith,\n        listenOnly: voice.listenOnly,\n        voiceConf: meeting.voiceProp.voiceConf,\n        joined: true,\n      });\n\n      addDialInUser(meetingId, voice);\n    }\n  });\n\n  // removing extra users already existing in Mongo\n  const voiceUsersToRemove = VoiceUsers.find({\n    meetingId,\n    intId: { $nin: usersIds },\n  }, { fields: { voiceUserId: 1, intId: 1 } }).fetch();\n  voiceUsersToRemove.forEach(user => removeVoiceUser(meetingId, {\n    voiceConf: meeting.voiceProp.voiceConf,\n    voiceUserId: user.voiceUserId,\n    intId: user.intId,\n  }));\n\n  return voiceUsersUpdated;\n}\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function ejectUserFromVoice(userId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'EjectUserFromVoiceCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  check(userId, String);\n\n  const payload = {\n    userId,\n    ejectedBy: requesterUserId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function muteAllExceptPresenterToggle() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'MuteAllExceptPresentersCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const meeting = Meetings.findOne({ meetingId });\n  const toggleMeetingMuted = !meeting.voiceProp.muteOnStart;\n\n  const payload = {\n    mutedBy: requesterUserId,\n    mute: toggleMeetingMuted,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Meetings from '/imports/api/meetings';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function muteAllToggle() {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'MuteMeetingCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  const meeting = Meetings.findOne({ meetingId });\n  const toggleMeetingMuted = !meeting.voiceProp.muteOnStart;\n\n  const payload = {\n    mutedBy: requesterUserId,\n    mute: toggleMeetingMuted,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport RedisPubSub from '/imports/startup/server/redis';\nimport Users from '/imports/api/users';\nimport VoiceUsers from '/imports/api/voice-users';\nimport Meetings from '/imports/api/meetings';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function muteToggle(uId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'MuteUserCmdMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n  const userToMute = uId || requesterUserId;\n\n  const requester = Users.findOne({\n    meetingId,\n    userId: requesterUserId,\n  });\n\n  const voiceUser = VoiceUsers.findOne({\n    intId: userToMute,\n    meetingId,\n  });\n\n  if (!requester || !voiceUser) return;\n\n  const { listenOnly, muted } = voiceUser;\n  if (listenOnly) return;\n\n  // if allowModsToUnmuteUsers is false, users will be kicked out for attempting to unmute others\n  if (requesterUserId !== userToMute && muted) {\n    const meeting = Meetings.findOne({ meetingId },\n      { fields: { 'usersProp.allowModsToUnmuteUsers': 1 } });\n    if (meeting.usersProp && !meeting.usersProp.allowModsToUnmuteUsers) {\n      Logger.warn(`Attempted unmuting by another user meetingId:${meetingId} requester: ${requesterUserId} userId: ${userToMute}`);\n      return;\n    }\n  }\n\n  const payload = {\n    userId: userToMute,\n    mutedBy: requesterUserId,\n    mute: !muted,\n  };\n\n  RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport Users from '/imports/api/users';\nimport flat from 'flat';\n\nexport default function addVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceUserId: String,\n    intId: String,\n    callerName: String,\n    callerNum: String,\n    muted: Boolean,\n    talking: Boolean,\n    callingWith: String,\n    listenOnly: Boolean,\n    voiceConf: String,\n    joined: Boolean, // This is a HTML5 only param.\n  });\n\n  const { intId, talking } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      { meetingId, spoke: talking },\n      flat(voiceUser),\n    ),\n  };\n\n  const user = Users.findOne({ meetingId, userId: intId }, {\n    fields: {\n      color: 1,\n    },\n  });\n\n  if (user) modifier.$set.color = user.color;\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Add voice user=${intId}: ${err}`);\n    }\n\n    return Logger.info(`Add voice user=${intId} meeting=${meetingId}`);\n  };\n\n  return VoiceUsers.upsert(selector, modifier, cb);\n}\n","import Meetings from '/imports/api/meetings';\nimport { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\n\nexport default function changeMuteMeeting(meetingId, payload) {\n  check(meetingId, String);\n  check(payload, {\n    muted: Boolean,\n    mutedBy: String,\n  });\n\n  const selector = {\n    meetingId,\n  };\n\n  const modifier = {\n    $set: {\n      'voiceProp.muteOnStart': payload.muted,\n    },\n  };\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      Logger.error(`Changing meeting mute status meeting={${meetingId}} ${err}`);\n      return;\n    }\n\n    if (numChanged) {\n      Logger.info(`Changed meeting mute status meeting=${meetingId}`);\n    }\n  };\n\n\n  return Meetings.upsert(selector, modifier, cb);\n}\n","import Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\n\nexport default function clearVoiceUser(meetingId) {\n  if (meetingId) {\n    return VoiceUsers.remove({ meetingId }, () => {\n      Logger.info(`Cleared VoiceUsers in (${meetingId})`);\n    });\n  }\n\n  return VoiceUsers.remove({}, () => {\n    Logger.info('Cleared VoiceUsers in all meetings');\n  });\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport { clearSpokeTimeout } from '/imports/api/common/server/helpers';\n\nexport default function removeVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    voiceConf: String,\n    voiceUserId: String,\n    intId: String,\n  });\n\n  const { intId } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: {\n      muted: false,\n      talking: false,\n      listenOnly: false,\n      joined: false,\n      spoke: false,\n    },\n  };\n\n  clearSpokeTimeout(meetingId, intId);\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Remove voiceUser=${intId}: ${err}`);\n    }\n\n    return Logger.info(`Remove voiceUser=${intId} meeting=${meetingId}`);\n  };\n\n  return VoiceUsers.update(selector, modifier, cb);\n}\n","import { Match, check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport VoiceUsers from '/imports/api/voice-users';\nimport flat from 'flat';\nimport { spokeTimeoutHandles, clearSpokeTimeout } from '/imports/api/common/server/helpers';\n\nconst TALKING_TIMEOUT = 6000;\n\nexport default function updateVoiceUser(meetingId, voiceUser) {\n  check(meetingId, String);\n  check(voiceUser, {\n    intId: String,\n    voiceUserId: String,\n    talking: Match.Maybe(Boolean),\n    muted: Match.Maybe(Boolean),\n    voiceConf: String,\n    joined: Match.Maybe(Boolean),\n  });\n\n  const { intId } = voiceUser;\n\n  const selector = {\n    meetingId,\n    intId,\n  };\n\n  const modifier = {\n    $set: Object.assign(\n      flat(voiceUser),\n    ),\n  };\n\n  if (voiceUser.talking) {\n    const user = VoiceUsers.findOne({ meetingId, intId }, {\n      fields: {\n        startTime: 1,\n      },\n    });\n\n    if (user && !user.startTime) modifier.$set.startTime = Date.now();\n    modifier.$set.spoke = true;\n    modifier.$set.endTime = null;\n    clearSpokeTimeout(meetingId, intId);\n  }\n\n  const cb = (err) => {\n    if (err) {\n      return Logger.error(`Update voiceUser=${intId}: ${err}`);\n    }\n\n    return Logger.debug(`Update voiceUser=${intId} meeting=${meetingId}`);\n  };\n\n  if (!voiceUser.talking) {\n    const timeoutHandle = Meteor.setTimeout(() => {\n      const user = VoiceUsers.findOne({ meetingId, intId }, {\n        fields: {\n          endTime: 1,\n          talking: 1,\n        },\n      });\n\n      if (user) {\n        const { endTime, talking } = user;\n        const spokeDelay = ((Date.now() - endTime) < TALKING_TIMEOUT);\n        if (talking || spokeDelay) return;\n        modifier.$set.spoke = false;\n        modifier.$set.startTime = null;\n        VoiceUsers.update(selector, modifier, cb);\n      }\n    }, TALKING_TIMEOUT);\n\n    spokeTimeoutHandles[`${meetingId}-${intId}`] = timeoutHandle;\n    modifier.$set.endTime = Date.now();\n  }\n\n  return VoiceUsers.update(selector, modifier, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleJoinVoiceUser from './handlers/joinVoiceUser';\nimport handleLeftVoiceUser from './handlers/leftVoiceUser';\nimport handleTalkingVoiceUser from './handlers/talkingVoiceUser';\nimport handleMutedVoiceUser from './handlers/mutedVoiceUser';\nimport handleGetVoiceUsers from './handlers/getVoiceUsers';\nimport handleVoiceUsers from './handlers/voiceUsers';\nimport handleMeetingMuted from './handlers/meetingMuted';\n\nRedisPubSub.on('UserLeftVoiceConfToClientEvtMsg', handleLeftVoiceUser);\nRedisPubSub.on('UserJoinedVoiceConfToClientEvtMsg', handleJoinVoiceUser);\nRedisPubSub.on('UserTalkingVoiceEvtMsg', handleTalkingVoiceUser);\nRedisPubSub.on('UserMutedVoiceEvtMsg', handleMutedVoiceUser);\nRedisPubSub.on('GetVoiceUsersMeetingRespMsg', processForHTML5ServerOnly(handleGetVoiceUsers));\nRedisPubSub.on('SyncGetVoiceUsersRespMsg', handleVoiceUsers);\nRedisPubSub.on('MeetingMutedEvtMsg', handleMeetingMuted);\n","import './eventHandlers';\nimport './publishers';\nimport './methods';\n","import { Meteor } from 'meteor/meteor';\nimport muteToggle from './methods/muteToggle';\nimport muteAllToggle from './methods/muteAllToggle';\nimport muteAllExceptPresenterToggle from './methods/muteAllExceptPresenterToggle';\nimport ejectUserFromVoice from './methods/ejectUserFromVoice';\n\nMeteor.methods({\n  toggleVoice: muteToggle,\n  muteAllUsers: muteAllToggle,\n  muteAllExceptPresenter: muteAllExceptPresenterToggle,\n  ejectUserFromVoice,\n});\n","import VoiceUsers from '/imports/api/voice-users';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\nimport ejectUserFromVoice from './methods/ejectUserFromVoice';\n\nfunction voiceUser() {\n  if (!this.userId) {\n    return VoiceUsers.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(meetingId, String);\n  check(requesterUserId, String);\n  const onCloseConnection = Meteor.bindEnvironment(() => {\n    try {\n      // I used user because voiceUser is the function's name\n      const User = VoiceUsers.findOne({ meetingId, requesterUserId });\n      if (User) {\n        ejectUserFromVoice(requesterUserId);\n      }\n    } catch (e) {\n      Logger.error(`Exception while executing ejectUserFromVoice for ${requesterUserId}: ${e}`);\n    }\n  });\n\n  Logger.debug(`Publishing Voice User for ${meetingId} ${requesterUserId}`);\n\n  this._session.socket.on('close', _.debounce(onCloseConnection, 100));\n  return VoiceUsers.find({ meetingId });\n}\n\nfunction publish(...args) {\n  const boundVoiceUser = voiceUser.bind(this);\n  return boundVoiceUser(...args);\n}\n\nMeteor.publish('voiceUsers', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst VoiceUsers = new Mongo.Collection('voiceUsers');\n\nif (Meteor.isServer) {\n  // types of queries for the voice users:\n  // 1. intId\n  // 2. meetingId, intId\n\n  VoiceUsers._ensureIndex({ intId: 1 });\n  VoiceUsers._ensureIndex({ meetingId: 1, intId: 1 });\n}\n\nexport default VoiceUsers;\n","import { check } from 'meteor/check';\nimport modifyWhiteboardAccess from '../modifiers/modifyWhiteboardAccess';\n\nexport default function handleModifyWhiteboardAccess({ body }, meetingId) {\n  const { multiUser, whiteboardId } = body;\n\n  check(multiUser, Boolean);\n  check(whiteboardId, String);\n  check(meetingId, String);\n\n  return modifyWhiteboardAccess(meetingId, whiteboardId, multiUser);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nexport default function changeWhiteboardAccess(multiUser, whiteboardId) {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n  const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n  const EVENT_NAME = 'ModifyWhiteboardAccessPubMsg';\n\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  check(multiUser, Boolean);\n  check(whiteboardId, String);\n\n  const payload = {\n    multiUser,\n    whiteboardId,\n  };\n\n  return RedisPubSub.publishUserMessage(CHANNEL, EVENT_NAME, meetingId, requesterUserId, payload);\n}\n","import { check } from 'meteor/check';\nimport Logger from '/imports/startup/server/logger';\nimport WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\n\n\nexport default function modifyWhiteboardAccess(meetingId, whiteboardId, multiUser) {\n  check(meetingId, String);\n  check(whiteboardId, String);\n  check(multiUser, Boolean);\n\n  const selector = {\n    meetingId,\n    whiteboardId,\n  };\n\n  const modifier = {\n    meetingId,\n    whiteboardId,\n    multiUser,\n  };\n\n\n  const cb = (err, numChanged) => {\n    if (err) {\n      return Logger.error(`Error while adding an entry to Multi-User collection: ${err}`);\n    }\n\n    const { insertedId } = numChanged;\n    if (insertedId) {\n      return Logger.info(`Added multiUser flag=${multiUser} meetingId=${meetingId} whiteboardId=${whiteboardId}`);\n    }\n\n    return Logger.info(`Upserted multiUser flag=${multiUser} meetingId=${meetingId} whiteboardId=${whiteboardId}`);\n  };\n\n  return WhiteboardMultiUser.upsert(selector, modifier, cb);\n}\n","import RedisPubSub from '/imports/startup/server/redis';\nimport { processForHTML5ServerOnly } from '/imports/api/common/server/helpers';\nimport handleGetWhiteboardAccess from './handlers/modifyWhiteboardAccess';\n\nRedisPubSub.on('GetWhiteboardAccessRespMsg', processForHTML5ServerOnly(handleGetWhiteboardAccess));\nRedisPubSub.on('SyncGetWhiteboardAccessRespMsg', handleGetWhiteboardAccess);\nRedisPubSub.on('ModifyWhiteboardAccessEvtMsg', handleGetWhiteboardAccess);\n","import './eventHandlers';\nimport './methods';\nimport './publishers';\n","import { Meteor } from 'meteor/meteor';\nimport changeWhiteboardAccess from './methods/changeWhiteboardAccess';\n\nMeteor.methods({\n  changeWhiteboardAccess,\n});\n","import WhiteboardMultiUser from '/imports/api/whiteboard-multi-user/';\nimport { Meteor } from 'meteor/meteor';\nimport Logger from '/imports/startup/server/logger';\nimport { extractCredentials } from '/imports/api/common/server/helpers';\n\nfunction whiteboardMultiUser() {\n  if (!this.userId) {\n    return WhiteboardMultiUser.find({ meetingId: '' });\n  }\n  const { meetingId, requesterUserId } = extractCredentials(this.userId);\n\n  Logger.debug(`Publishing whiteboard-multi-user for ${meetingId} ${requesterUserId}`);\n\n  return WhiteboardMultiUser.find({ meetingId });\n}\n\n\nfunction publish(...args) {\n  const boundMultiUser = whiteboardMultiUser.bind(this);\n  return boundMultiUser(...args);\n}\n\nMeteor.publish('whiteboard-multi-user', publish);\n","import { Meteor } from 'meteor/meteor';\n\nconst WhiteboardMultiUser = new Mongo.Collection('whiteboard-multi-user');\n\nif (Meteor.isServer) {\n  // types of queries for the whiteboard-multi-user:\n  // 1. meetingId\n\n  WhiteboardMultiUser._ensureIndex({ meetingId: 1 });\n}\n\nexport default WhiteboardMultiUser;\n","import Users from '/imports/api/users';\n\nconst MSG_DIRECT_TYPE = 'DIRECT';\nconst NODE_USER = 'nodeJSapp';\n\nexport const spokeTimeoutHandles = {};\nexport const clearSpokeTimeout = (meetingId, userId) => {\n  if (spokeTimeoutHandles[`${meetingId}-${userId}`]) {\n    Meteor.clearTimeout(spokeTimeoutHandles[`${meetingId}-${userId}`]);\n    delete spokeTimeoutHandles[`${meetingId}-${userId}`];\n  }\n};\n\nexport const indexOf = [].indexOf || function (item) {\n  for (let i = 0, l = this.length; i < l; i += 1) {\n    if (i in this && this[i] === item) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nexport const processForHTML5ServerOnly = fn => (message, ...args) => {\n  const { envelope } = message;\n  const { routing } = envelope;\n  const { msgType, meetingId, userId } = routing;\n\n  const selector = {\n    userId,\n    meetingId,\n  };\n\n  const user = Users.findOne(selector);\n\n  const shouldSkip = user && msgType === MSG_DIRECT_TYPE && userId !== NODE_USER && user.clientType !== 'HTML5';\n  if (shouldSkip) return () => { };\n  return fn(message, ...args);\n};\n\n/**\n * Calculate a 32 bit FNV-1a hash\n * Found here: https://gist.github.com/vaiorabbit/5657561\n * Ref.: http://isthe.com/chongo/tech/comp/fnv/\n *\n * @param {string} str the input value\n * @param {boolean} [asString=false] set to true to return the hash value as\n *     8-digit hex string instead of an integer\n * @param {integer} [seed] optionally pass the hash of the previous chunk\n * @returns {integer | string}\n */\n/* eslint-disable */\nexport const hashFNV32a = (str, asString, seed) => {\n  let hval = (seed === undefined) ? 0x811c9dc5 : seed;\n\n  for (let i = 0, l = str.length; i < l; i++) {\n    hval ^= str.charCodeAt(i);\n    hval += (hval << 1) + (hval << 4) + (hval << 7) + (hval << 8) + (hval << 24);\n  }\n  if (asString) {\n    return (`0000000${(hval >>> 0).toString(16)}`).substr(-8);\n  }\n  return hval >>> 0;\n};\n/* eslint-enable */\n\nexport const extractCredentials = (credentials) => {\n  if (!credentials) return {};\n  const credentialsArray = credentials.split('--');\n  const meetingId = credentialsArray[0];\n  const requesterUserId = credentialsArray[1];\n  return { meetingId, requesterUserId };\n};\n","import { Meteor } from 'meteor/meteor';\nimport { WebAppInternals } from 'meteor/webapp';\nimport Langmap from 'langmap';\nimport fs from 'fs';\nimport Users from '/imports/api/users';\nimport './settings';\nimport { lookup as lookupUserAgent } from 'useragent';\nimport { check } from 'meteor/check';\nimport Logger from './logger';\nimport Redis from './redis';\nimport setMinBrowserVersions from './minBrowserVersion';\nimport userLeaving from '/imports/api/users/server/methods/userLeaving';\n\nconst AVAILABLE_LOCALES = fs.readdirSync('assets/app/locales');\nlet avaibleLocalesNames = [];\n\nMeteor.startup(() => {\n  const APP_CONFIG = Meteor.settings.public.app;\n  const INTERVAL_IN_SETTINGS = (Meteor.settings.public.pingPong.clearUsersInSeconds) * 1000;\n  const INTERVAL_TIME = INTERVAL_IN_SETTINGS < 10000 ? 10000 : INTERVAL_IN_SETTINGS;\n  const env = Meteor.isDevelopment ? 'development' : 'production';\n  const CDN_URL = APP_CONFIG.cdn;\n\n  // Commenting out in BBB 2.3 as node12 does not allow for `memwatch`.\n  // We are looking for alternatives\n\n  /* let heapDumpMbThreshold = 100;\n\n  const memoryMonitoringSettings = Meteor.settings.private.memoryMonitoring;\n  if (memoryMonitoringSettings.stat.enabled) {\n    memwatch.on('stats', (stats) => {\n      let heapDumpTriggered = false;\n\n      if (memoryMonitoringSettings.heapdump.enabled) {\n        heapDumpTriggered = (stats.current_base / 1048576) > heapDumpMbThreshold;\n      }\n      Logger.info('memwatch stats', { ...stats, heapDumpEnabled: memoryMonitoringSettings.heapdump.enabled, heapDumpTriggered });\n\n      if (heapDumpTriggered) {\n        heapdump.writeSnapshot(`./heapdump-stats-${Date.now()}.heapsnapshot`);\n        heapDumpMbThreshold += 100;\n      }\n    });\n  }\n\n  if (memoryMonitoringSettings.leak.enabled) {\n    memwatch.on('leak', (info) => {\n      Logger.info('memwatch leak', info);\n    });\n  } */\n\n  if (CDN_URL.trim()) {\n    // Add CDN\n    BrowserPolicy.content.disallowEval();\n    BrowserPolicy.content.allowInlineScripts();\n    BrowserPolicy.content.allowInlineStyles();\n    BrowserPolicy.content.allowImageDataUrl(CDN_URL);\n    BrowserPolicy.content.allowFontDataUrl(CDN_URL);\n    BrowserPolicy.content.allowOriginForAll(CDN_URL);\n    WebAppInternals.setBundledJsCssPrefix(CDN_URL + APP_CONFIG.basename);\n\n    const fontRegExp = /\\.(eot|ttf|otf|woff|woff2)$/;\n\n    WebApp.rawConnectHandlers.use('/', (req, res, next) => {\n      if (fontRegExp.test(req._parsedUrl.pathname)) {\n        res.setHeader('Access-Control-Allow-Origin', '*');\n        res.setHeader('Vary', 'Origin');\n        res.setHeader('Pragma', 'public');\n        res.setHeader('Cache-Control', '\"public\"');\n      }\n      return next();\n    });\n  }\n\n  setMinBrowserVersions();\n\n  Meteor.setInterval(() => {\n    const currentTime = Date.now();\n    Logger.info('Checking for inactive users');\n    const users = Users.find({\n      connectionStatus: 'online',\n      clientType: 'HTML5',\n      lastPing: {\n        $lt: (currentTime - INTERVAL_TIME), // get user who has not pinged in the last 10 seconds\n      },\n      loginTime: {\n        $lt: (currentTime - INTERVAL_TIME),\n      },\n    }).fetch();\n    if (!users.length) return Logger.info('No inactive users');\n    Logger.info('Removing inactive users');\n    users.forEach((user) => {\n      Logger.info(`Detected inactive user, userId:${user.userId}, meetingId:${user.meetingId}`);\n      return userLeaving(user.meetingId, user.userId, user.connectionId);\n    });\n    return Logger.info('All inactive users have been removed');\n  }, INTERVAL_TIME);\n\n  Logger.warn(`SERVER STARTED.\\nENV=${env},\\nnodejs version=${process.version}\\nCDN=${CDN_URL}\\n`, APP_CONFIG);\n});\n\nWebApp.connectHandlers.use('/check', (req, res) => {\n  const payload = { html5clientStatus: 'running' };\n\n  res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(JSON.stringify(payload));\n});\n\nWebApp.connectHandlers.use('/locale', (req, res) => {\n  const APP_CONFIG = Meteor.settings.public.app;\n  const fallback = APP_CONFIG.defaultSettings.application.fallbackLocale;\n  const override = APP_CONFIG.defaultSettings.application.overrideLocale;\n  const browserLocale = override && req.query.init === 'true'\n    ? override.split(/[-_]/g) : req.query.locale.split(/[-_]/g);\n\n  const localeList = [fallback];\n\n  const usableLocales = AVAILABLE_LOCALES\n    .map(file => file.replace('.json', ''))\n    .reduce((locales, locale) => (locale.match(browserLocale[0])\n      ? [...locales, locale]\n      : locales), []);\n\n  const regionDefault = usableLocales.find(locale => browserLocale[0] === locale);\n\n  if (regionDefault) localeList.push(regionDefault);\n  if (!regionDefault && usableLocales.length) localeList.push(usableLocales[0]);\n\n  let normalizedLocale;\n  let messages = {};\n\n  if (browserLocale.length > 1) {\n    normalizedLocale = `${browserLocale[0]}_${browserLocale[1].toUpperCase()}`;\n    localeList.push(normalizedLocale);\n  }\n\n  localeList.forEach((locale) => {\n    try {\n      const data = Assets.getText(`locales/${locale}.json`);\n      messages = Object.assign(messages, JSON.parse(data));\n      normalizedLocale = locale;\n    } catch (e) {\n      Logger.warn(`'Could not process locale ${locale}:${e}`);\n      // Getting here means the locale is not available in the current locale files.\n    }\n  });\n\n  res.setHeader('Content-Type', 'application/json');\n  res.end(JSON.stringify({ normalizedLocale, messages }));\n});\n\nWebApp.connectHandlers.use('/locales', (req, res) => {\n  if (!avaibleLocalesNames.length) {\n    try {\n      avaibleLocalesNames = AVAILABLE_LOCALES\n        .map(file => file.replace('.json', ''))\n        .map(file => file.replace('_', '-'))\n        .map(locale => ({\n          locale,\n          name: Langmap[locale].nativeName,\n        }));\n    } catch (e) {\n      Logger.warn(`'Could not process locales error: ${e}`);\n    }\n  }\n\n  res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(JSON.stringify(avaibleLocalesNames));\n});\n\nWebApp.connectHandlers.use('/feedback', (req, res) => {\n  req.on('data', Meteor.bindEnvironment((data) => {\n    const body = JSON.parse(data);\n    const {\n      meetingId,\n      userId,\n      authToken,\n      userName: reqUserName,\n      comment,\n      rating,\n    } = body;\n\n    check(meetingId, String);\n    check(userId, String);\n    check(authToken, String);\n    check(reqUserName, String);\n    check(comment, String);\n    check(rating, Number);\n\n    const user = Users.findOne({\n      meetingId,\n      userId,\n      connectionStatus: 'offline',\n      authToken,\n    });\n\n    if (!user) {\n      Logger.warn('Couldn\\'t find user for feedback');\n    }\n\n    res.setHeader('Content-Type', 'application/json');\n    res.writeHead(200);\n    res.end(JSON.stringify({ status: 'ok' }));\n\n    body.userName = user ? user.name : `[unconfirmed] ${reqUserName}`;\n\n    const feedback = {\n      ...body,\n    };\n    Logger.info('FEEDBACK LOG:', feedback);\n  }));\n});\n\nWebApp.connectHandlers.use('/useragent', (req, res) => {\n  const userAgent = req.headers['user-agent'];\n  let response = 'No user agent found in header';\n  if (userAgent) {\n    response = lookupUserAgent(userAgent).toString();\n  }\n\n  Logger.info(`The requesting user agent is ${response}`);\n\n  // res.setHeader('Content-Type', 'application/json');\n  res.writeHead(200);\n  res.end(response);\n});\n\nexport const eventEmitter = Redis.emitter;\n\nexport const redisPubSub = Redis;\n","import { Meteor } from 'meteor/meteor';\nimport { createLogger, format, transports } from 'winston';\n\nconst LOG_CONFIG = Meteor.settings.private.serverLog || {};\nconst { level } = LOG_CONFIG;\n\nconst Logger = createLogger({\n  level,\n  format: format.combine(\n    format.colorize({ level: true }),\n    format.splat(),\n    format.simple(),\n  ),\n  transports: [\n    // console logging\n    new transports.Console({\n      prettyPrint: false,\n      humanReadableUnhandledException: true,\n      colorize: true,\n      handleExceptions: true,\n      level,\n    }),\n  ],\n});\n\nexport default Logger;\n\nexport const logger = Logger;\n","import { Meteor } from 'meteor/meteor';\nimport { setMinimumBrowserVersions } from 'meteor/modern-browsers';\n\nconst setMinBrowserVersions = () => {\n  const { minBrowserVersions } = Meteor.settings.private;\n\n  const versions = {};\n\n  minBrowserVersions.forEach((elem) => {\n    let { version } = elem;\n    if (version === 'Infinity') version = Infinity;\n\n    versions[elem.browser] = version;\n  });\n\n  setMinimumBrowserVersions(versions, 'bbb-min');\n};\n\nexport default setMinBrowserVersions;\n","/* global PowerQueue */\nimport Redis from 'redis';\nimport { Meteor } from 'meteor/meteor';\nimport { EventEmitter2 } from 'eventemitter2';\nimport { check } from 'meteor/check';\nimport Logger from './logger';\n\n// Fake meetingId used for messages that have no meetingId\nconst NO_MEETING_ID = '_';\n\nconst makeEnvelope = (channel, eventName, header, body, routing) => {\n  const envelope = {\n    envelope: {\n      name: eventName,\n      routing: routing || {\n        sender: 'bbb-apps-akka',\n        // sender: 'html5-server', // TODO\n      },\n      timestamp: Date.now(),\n    },\n    core: {\n      header,\n      body,\n    },\n  };\n\n  return JSON.stringify(envelope);\n};\n\nconst makeDebugger = enabled => (message) => {\n  if (!enabled) return;\n  Logger.debug(`REDIS: ${message}`);\n};\n\nclass MeetingMessageQueue {\n  constructor(eventEmitter, asyncMessages = [], debug = () => { }) {\n    this.asyncMessages = asyncMessages;\n    this.emitter = eventEmitter;\n    this.queue = new PowerQueue();\n    this.debug = debug;\n\n    this.handleTask = this.handleTask.bind(this);\n    this.queue.taskHandler = this.handleTask;\n  }\n\n  handleTask(data, next) {\n    const { channel } = data;\n    const { envelope } = data.parsedMessage;\n    const { header } = data.parsedMessage.core;\n    const { body } = data.parsedMessage.core;\n    const { meetingId } = header;\n    const eventName = header.name;\n    const isAsync = this.asyncMessages.includes(channel)\n      || this.asyncMessages.includes(eventName);\n\n    let called = false;\n\n    check(eventName, String);\n    check(body, Object);\n\n    const callNext = () => {\n      if (called) return;\n      this.debug(`${eventName} completed ${isAsync ? 'async' : 'sync'}`);\n      called = true;\n      const queueLength = this.queue.length();\n      if (queueLength > 100) {\n        Logger.error(`prev queue size=${queueLength} `);\n      }\n      next();\n    };\n\n    const onError = (reason) => {\n      Logger.error(`${eventName}: ${reason.stack ? reason.stack : reason}`);\n      callNext();\n    };\n\n    try {\n      this.debug(`${JSON.stringify(data.parsedMessage.core)} emitted`);\n\n      if (isAsync) {\n        callNext();\n      }\n\n      this.emitter\n        .emitAsync(eventName, { envelope, header, body }, meetingId)\n        .then(callNext)\n        .catch(onError);\n    } catch (reason) {\n      onError(reason);\n    }\n  }\n\n  add(...args) {\n    return this.queue.add(...args);\n  }\n}\n\nclass RedisPubSub {\n  static handlePublishError(err) {\n    if (err) {\n      Logger.error(err);\n    }\n  }\n\n  constructor(config = {}) {\n    this.config = config;\n\n    this.didSendRequestEvent = false;\n    const host = process.env.REDIS_HOST || Meteor.settings.private.redis.host;\n    const redisConf = Meteor.settings.private.redis;\n    const { password, port } = redisConf;\n\n    if (password) {\n      this.pub = Redis.createClient({ host, port, password });\n      this.sub = Redis.createClient({ host, port, password });\n      this.pub.auth(password);\n      this.sub.auth(password);\n    } else {\n      this.pub = Redis.createClient({ host, port });\n      this.sub = Redis.createClient({ host, port });\n    }\n\n    this.emitter = new EventEmitter2();\n    this.mettingsQueues = {};\n\n    this.handleSubscribe = this.handleSubscribe.bind(this);\n    this.handleMessage = this.handleMessage.bind(this);\n    this.debug = makeDebugger(this.config.debug);\n  }\n\n  init() {\n    this.sub.on('psubscribe', Meteor.bindEnvironment(this.handleSubscribe));\n    this.sub.on('pmessage', Meteor.bindEnvironment(this.handleMessage));\n\n    const channelsToSubscribe = this.config.subscribeTo;\n\n    channelsToSubscribe.forEach((channel) => {\n      this.sub.psubscribe(channel);\n    });\n\n    this.debug(`Subscribed to '${channelsToSubscribe}'`);\n  }\n\n  updateConfig(config) {\n    this.config = Object.assign({}, this.config, config);\n    this.debug = makeDebugger(this.config.debug);\n  }\n\n\n  // TODO: Move this out of this class, maybe pass as a callback to init?\n  handleSubscribe() {\n    if (this.didSendRequestEvent) return;\n\n    // populate collections with pre-existing data\n    const REDIS_CONFIG = Meteor.settings.private.redis;\n    const CHANNEL = REDIS_CONFIG.channels.toAkkaApps;\n    const EVENT_NAME = 'GetAllMeetingsReqMsg';\n\n    const body = {\n      requesterId: 'nodeJSapp',\n    };\n\n    this.publishSystemMessage(CHANNEL, EVENT_NAME, body);\n    this.didSendRequestEvent = true;\n  }\n\n  handleMessage(pattern, channel, message) {\n    const parsedMessage = JSON.parse(message);\n    const { name: eventName, meetingId } = parsedMessage.core.header;\n    const { ignored: ignoredMessages, async } = this.config;\n\n    if (ignoredMessages.includes(channel)\n      || ignoredMessages.includes(eventName)) {\n      if (eventName === 'CheckAlivePongSysMsg') {\n        return;\n      }\n      this.debug(`${eventName} skipped`);\n      return;\n    }\n\n    const queueId = meetingId || NO_MEETING_ID;\n\n    if (!(queueId in this.mettingsQueues)) {\n      this.mettingsQueues[meetingId] = new MeetingMessageQueue(this.emitter, async, this.debug);\n    }\n\n    this.mettingsQueues[meetingId].add({\n      pattern,\n      channel,\n      eventName,\n      parsedMessage,\n    });\n  }\n\n  destroyMeetingQueue(id) {\n    delete this.mettingsQueues[id];\n  }\n\n  on(...args) {\n    return this.emitter.on(...args);\n  }\n\n  publishVoiceMessage(channel, eventName, voiceConf, payload) {\n    const header = {\n      name: eventName,\n      voiceConf,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishSystemMessage(channel, eventName, payload) {\n    const header = {\n      name: eventName,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishMeetingMessage(channel, eventName, meetingId, payload) {\n    const header = {\n      name: eventName,\n      meetingId,\n    };\n\n    const envelope = makeEnvelope(channel, eventName, header, payload);\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n\n  publishUserMessage(channel, eventName, meetingId, userId, payload) {\n    const header = {\n      name: eventName,\n      meetingId,\n      userId,\n    };\n\n    if (!meetingId || !userId) {\n      Logger.warn(`Publishing ${eventName} with potentially missing data userId=${userId} meetingId=${meetingId}`);\n    }\n    const envelope = makeEnvelope(channel, eventName, header, payload, { meetingId, userId });\n\n    return this.pub.publish(channel, envelope, RedisPubSub.handlePublishError);\n  }\n}\n\nconst RedisPubSubSingleton = new RedisPubSub();\n\nMeteor.startup(() => {\n  const REDIS_CONFIG = Meteor.settings.private.redis;\n\n  RedisPubSubSingleton.updateConfig(REDIS_CONFIG);\n  RedisPubSubSingleton.init();\n});\n\nexport default RedisPubSubSingleton;\n","/* global __meteor_runtime_config__ */\nimport { Meteor } from 'meteor/meteor';\nimport fs from 'fs';\nimport YAML from 'yaml';\n\nconst YAML_FILE_PATH = process.env.BBB_HTML5_SETTINGS || 'assets/app/config/settings.yml';\n\ntry {\n  if (fs.existsSync(YAML_FILE_PATH)) {\n    const SETTINGS = YAML.parse(fs.readFileSync(YAML_FILE_PATH, 'utf-8'));\n\n    Meteor.settings = SETTINGS;\n    __meteor_runtime_config__.PUBLIC_SETTINGS = SETTINGS.public;\n  } else {\n    throw new Error('File doesn\\'t exists');\n  }\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.error('Error on load configuration file.', error);\n}\n","// Used in Flash and HTML to show a legitimate break in the line\nconst BREAK_LINE = '<br/>';\n\n// Soft return in HTML to signify a broken line without\n// displaying the escaped '<br/>' line break text\nconst CARRIAGE_RETURN = '\\r';\n\n// Handle this the same as carriage return, in case text copied has this\nconst NEW_LINE = '\\n';\n\nexport { BREAK_LINE, CARRIAGE_RETURN, NEW_LINE };\n","export const XLS = 'application/vnd.ms-excel';\nexport const XLSX = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\nexport const DOC = 'application/msword';\nexport const DOCX = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\nexport const PPT = 'application/vnd.ms-powerpoint';\nexport const PPTX = 'application/vnd.openxmlformats-officedocument.presentationml.presentation';\nexport const ODT = 'application/vnd.oasis.opendocument.text';\nexport const RTF = 'application/rtf';\nexport const TXT = 'text/plain';\nexport const ODS = 'application/vnd.oasis.opendocument.spreadsheet';\nexport const ODP = 'application/vnd.oasis.opendocument.presentation';\nexport const PDF = 'application/pdf';\nexport const JPEG = 'image/jpeg';\nexport const PNG = 'image/png';\nexport const SVG = 'image/svg+xml';\n\nexport const UPLOAD_SUPORTED = [\n  XLS,\n  XLSX,\n  DOC,\n  DOCX,\n  PPT,\n  PPTX,\n  ODT,\n  RTF,\n  TXT,\n  ODS,\n  ODP,\n  PDF,\n  JPEG,\n  PNG,\n];\n","//\n// Regular Expression for URL validation\n//\n// Author: Diego Perini\n// Updated: 2010/12/05\n// License: MIT\n//\n// Copyright (c) 2010-2013 Diego Perini (http://www.iport.it)\n//\n// Permission is hereby granted, free of charge, to any person\n// obtaining a copy of this software and associated documentation\n// files (the \"Software\"), to deal in the Software without\n// restriction, including without limitation the rights to use,\n// copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the\n// Software is furnished to do so, subject to the following\n// conditions:\n//\n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n// OTHER DEALINGS IN THE SOFTWARE.\n//\n// the regular expression composed & commented\n// could be easily tweaked for RFC compliance,\n// it was expressly modified to fit & satisfy\n// these test for an URL shortener:\n//\n//   http://mathiasbynens.be/demo/url-regex\n//\n// Notes on possible differences from a standard/generic validation:\n//\n// - utf-8 char class take in consideration the full Unicode range\n// - TLDs have been made mandatory so single names like \"localhost\" fails\n// - protocols have been restricted to ftp, http and https only as requested\n//\n// Changes:\n//\n// - IP address dotted notation validation, range: 1.0.0.0 - 223.255.255.255\n//   first and last IP address of each class is considered invalid\n//   (since they are broadcast/network addresses)\n//\n// - Added exclusion of private, reserved and/or local networks ranges\n//\n// - Made starting path slash optional (http://example.com?foo=bar)\n//\n// - Allow a dot (.) at the end of hostnames (http://example.com.)\n//\n// Compressed one-line versions:\n//\n// Javascript version (merge into one line)\n//\n// /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})\n// (?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})\n// (?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}\n// (?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)\n// (?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)\n// (?::\\d{2,5})?(?:[/?#]\\S*)?$/i\n//\n// PHP version (merge into one line)\n//\n// _^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)\n// (?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])\n// (?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5]))\n// {2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)\n// *[a-z\\x{00a1}-\\x{ffff}0-9]+)(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)*[a-z\\x{00a1}-\\x{ffff}0-9]+)\n// *(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$_iuS\n//\n\nexport default new RegExp(\n\n  // protocol identifier\n  '(?:(?:https?|ftp)://)' +\n\n  // user:pass authentication\n  '(?:\\\\S+(?::\\\\S*)?@)?' +\n  '(?:' +\n\n    // IP address exclusion\n    // private & local networks\n    '(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})' +\n    '(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})' +\n    '(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})' +\n\n    // IP address dotted notation octets\n    // excludes loopback network 0.0.0.0\n    // excludes reserved space >= 224.0.0.0\n    // excludes network & broacast addresses\n    // (first & last IP address of each class)\n    '(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])' +\n    '(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}' +\n    '(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))' +\n  '|' +\n\n    // host name\n    '(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)' +\n\n    // domain name\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*' +\n\n    // TLD identifier\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))' +\n\n    // TLD may end with dot\n    '\\\\.?' +\n  ')' +\n\n  // port number\n  '(?::\\\\d{2,5})?' +\n\n  // resource path\n  '(?:[/?#]\\\\S*)?', 'img',\n);\n","import '/imports/startup/server';\n\n// 2x\nimport '/imports/api/meetings/server';\nimport '/imports/api/users/server';\nimport '/imports/api/annotations/server';\nimport '/imports/api/cursor/server';\nimport '/imports/api/polls/server';\nimport '/imports/api/captions/server';\nimport '/imports/api/presentations/server';\nimport '/imports/api/presentation-pods/server';\nimport '/imports/api/presentation-upload-token/server';\nimport '/imports/api/slides/server';\nimport '/imports/api/breakouts/server';\nimport '/imports/api/group-chat/server';\nimport '/imports/api/group-chat-msg/server';\nimport '/imports/api/screenshare/server';\nimport '/imports/api/users-settings/server';\nimport '/imports/api/voice-users/server';\nimport '/imports/api/whiteboard-multi-user/server';\nimport '/imports/api/video-streams/server';\nimport '/imports/api/network-information/server';\nimport '/imports/api/users-infos/server';\nimport '/imports/api/connection-status/server';\nimport '/imports/api/note/server';\nimport '/imports/api/external-videos/server';\nimport '/imports/api/guest-users/server';\nimport '/imports/api/ping-pong/server';\nimport '/imports/api/local-settings/server';\nimport '/imports/api/voice-call-states/server';\n\n// Commons\nimport '/imports/api/log-client/server';\nimport '/imports/api/common/server/helpers';\nimport '/imports/startup/server/logger';\n\n// Needed for Atmosphere package RocketChat/meteor-streamer\n// It is out of date and was written when Meteor contained lodash\n// package. However, we now import lodash as an npm package\n// in order to control versions, update flexibly, etc..\n// Setting the global._ to utilize the npm lodash package is an interim fix\n// and its introduction was inspired by\n// https://github.com/RocketChat/meteor-streamer/issues/40#issuecomment-497627893\nimport _ from 'lodash';\n\nglobal._ = _;\n"]}